(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function j1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Iy={exports:{}},Dl={},xy={exports:{}},Z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var po=Symbol.for("react.element"),F1=Symbol.for("react.portal"),U1=Symbol.for("react.fragment"),z1=Symbol.for("react.strict_mode"),B1=Symbol.for("react.profiler"),$1=Symbol.for("react.provider"),q1=Symbol.for("react.context"),H1=Symbol.for("react.forward_ref"),W1=Symbol.for("react.suspense"),G1=Symbol.for("react.memo"),K1=Symbol.for("react.lazy"),Up=Symbol.iterator;function Q1(t){return t===null||typeof t!="object"?null:(t=Up&&t[Up]||t["@@iterator"],typeof t=="function"?t:null)}var Sy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ay=Object.assign,ky={};function Fs(t,e,n){this.props=t,this.context=e,this.refs=ky,this.updater=n||Sy}Fs.prototype.isReactComponent={};Fs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Fs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Cy(){}Cy.prototype=Fs.prototype;function Kh(t,e,n){this.props=t,this.context=e,this.refs=ky,this.updater=n||Sy}var Qh=Kh.prototype=new Cy;Qh.constructor=Kh;Ay(Qh,Fs.prototype);Qh.isPureReactComponent=!0;var zp=Array.isArray,Ry=Object.prototype.hasOwnProperty,Jh={current:null},Py={key:!0,ref:!0,__self:!0,__source:!0};function by(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Ry.call(e,r)&&!Py.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:po,type:t,key:i,ref:o,props:s,_owner:Jh.current}}function J1(t,e){return{$$typeof:po,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Xh(t){return typeof t=="object"&&t!==null&&t.$$typeof===po}function X1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Bp=/\/+/g;function Wu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?X1(""+t.key):e.toString(36)}function xa(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case po:case F1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Wu(o,0):r,zp(s)?(n="",t!=null&&(n=t.replace(Bp,"$&/")+"/"),xa(s,e,n,"",function(h){return h})):s!=null&&(Xh(s)&&(s=J1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Bp,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",zp(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+Wu(i,l);o+=xa(i,e,n,u,s)}else if(u=Q1(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+Wu(i,l++),o+=xa(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ta(t,e,n){if(t==null)return t;var r=[],s=0;return xa(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Y1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ct={current:null},Sa={transition:null},Z1={ReactCurrentDispatcher:ct,ReactCurrentBatchConfig:Sa,ReactCurrentOwner:Jh};function Ny(){throw Error("act(...) is not supported in production builds of React.")}Z.Children={map:ta,forEach:function(t,e,n){ta(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ta(t,function(){e++}),e},toArray:function(t){return ta(t,function(e){return e})||[]},only:function(t){if(!Xh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Z.Component=Fs;Z.Fragment=U1;Z.Profiler=B1;Z.PureComponent=Kh;Z.StrictMode=z1;Z.Suspense=W1;Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z1;Z.act=Ny;Z.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Ay({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Jh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Ry.call(e,u)&&!Py.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:po,type:t.type,key:s,ref:i,props:r,_owner:o}};Z.createContext=function(t){return t={$$typeof:q1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:$1,_context:t},t.Consumer=t};Z.createElement=by;Z.createFactory=function(t){var e=by.bind(null,t);return e.type=t,e};Z.createRef=function(){return{current:null}};Z.forwardRef=function(t){return{$$typeof:H1,render:t}};Z.isValidElement=Xh;Z.lazy=function(t){return{$$typeof:K1,_payload:{_status:-1,_result:t},_init:Y1}};Z.memo=function(t,e){return{$$typeof:G1,type:t,compare:e===void 0?null:e}};Z.startTransition=function(t){var e=Sa.transition;Sa.transition={};try{t()}finally{Sa.transition=e}};Z.unstable_act=Ny;Z.useCallback=function(t,e){return ct.current.useCallback(t,e)};Z.useContext=function(t){return ct.current.useContext(t)};Z.useDebugValue=function(){};Z.useDeferredValue=function(t){return ct.current.useDeferredValue(t)};Z.useEffect=function(t,e){return ct.current.useEffect(t,e)};Z.useId=function(){return ct.current.useId()};Z.useImperativeHandle=function(t,e,n){return ct.current.useImperativeHandle(t,e,n)};Z.useInsertionEffect=function(t,e){return ct.current.useInsertionEffect(t,e)};Z.useLayoutEffect=function(t,e){return ct.current.useLayoutEffect(t,e)};Z.useMemo=function(t,e){return ct.current.useMemo(t,e)};Z.useReducer=function(t,e,n){return ct.current.useReducer(t,e,n)};Z.useRef=function(t){return ct.current.useRef(t)};Z.useState=function(t){return ct.current.useState(t)};Z.useSyncExternalStore=function(t,e,n){return ct.current.useSyncExternalStore(t,e,n)};Z.useTransition=function(){return ct.current.useTransition()};Z.version="18.3.1";xy.exports=Z;var F=xy.exports;const Dy=j1(F);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e3=F,t3=Symbol.for("react.element"),n3=Symbol.for("react.fragment"),r3=Object.prototype.hasOwnProperty,s3=e3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i3={key:!0,ref:!0,__self:!0,__source:!0};function Ly(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)r3.call(e,r)&&!i3.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:t3,type:t,key:i,ref:o,props:s,_owner:s3.current}}Dl.Fragment=n3;Dl.jsx=Ly;Dl.jsxs=Ly;Iy.exports=Dl;var p=Iy.exports,Pc={},Vy={exports:{}},St={},Oy={exports:{}},My={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,G){var Y=B.length;B.push(G);e:for(;0<Y;){var ve=Y-1>>>1,ce=B[ve];if(0<s(ce,G))B[ve]=G,B[Y]=ce,Y=ve;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var G=B[0],Y=B.pop();if(Y!==G){B[0]=Y;e:for(var ve=0,ce=B.length,Se=ce>>>1;ve<Se;){var en=2*(ve+1)-1,tn=B[en],nn=en+1,rn=B[nn];if(0>s(tn,Y))nn<ce&&0>s(rn,tn)?(B[ve]=rn,B[nn]=Y,ve=nn):(B[ve]=tn,B[en]=Y,ve=en);else if(nn<ce&&0>s(rn,Y))B[ve]=rn,B[nn]=Y,ve=nn;else break e}}return G}function s(B,G){var Y=B.sortIndex-G.sortIndex;return Y!==0?Y:B.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],f=1,g=null,m=3,x=!1,C=!1,b=!1,L=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(B){for(var G=n(h);G!==null;){if(G.callback===null)r(h);else if(G.startTime<=B)r(h),G.sortIndex=G.expirationTime,e(u,G);else break;G=n(h)}}function N(B){if(b=!1,A(B),!C)if(n(u)!==null)C=!0,st(M);else{var G=n(h);G!==null&&dt(N,G.startTime-B)}}function M(B,G){C=!1,b&&(b=!1,_(v),v=-1),x=!0;var Y=m;try{for(A(G),g=n(u);g!==null&&(!(g.expirationTime>G)||B&&!k());){var ve=g.callback;if(typeof ve=="function"){g.callback=null,m=g.priorityLevel;var ce=ve(g.expirationTime<=G);G=t.unstable_now(),typeof ce=="function"?g.callback=ce:g===n(u)&&r(u),A(G)}else r(u);g=n(u)}if(g!==null)var Se=!0;else{var en=n(h);en!==null&&dt(N,en.startTime-G),Se=!1}return Se}finally{g=null,m=Y,x=!1}}var j=!1,T=null,v=-1,E=5,I=-1;function k(){return!(t.unstable_now()-I<E)}function R(){if(T!==null){var B=t.unstable_now();I=B;var G=!0;try{G=T(!0,B)}finally{G?S():(j=!1,T=null)}}else j=!1}var S;if(typeof w=="function")S=function(){w(R)};else if(typeof MessageChannel<"u"){var rt=new MessageChannel,ue=rt.port2;rt.port1.onmessage=R,S=function(){ue.postMessage(null)}}else S=function(){L(R,0)};function st(B){T=B,j||(j=!0,S())}function dt(B,G){v=L(function(){B(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){C||x||(C=!0,st(M))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var Y=m;m=G;try{return B()}finally{m=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,G){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Y=m;m=B;try{return G()}finally{m=Y}},t.unstable_scheduleCallback=function(B,G,Y){var ve=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ve+Y:ve):Y=ve,B){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=Y+ce,B={id:f++,callback:G,priorityLevel:B,startTime:Y,expirationTime:ce,sortIndex:-1},Y>ve?(B.sortIndex=Y,e(h,B),n(u)===null&&B===n(h)&&(b?(_(v),v=-1):b=!0,dt(N,Y-ve))):(B.sortIndex=ce,e(u,B),C||x||(C=!0,st(M))),B},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(B){var G=m;return function(){var Y=m;m=G;try{return B.apply(this,arguments)}finally{m=Y}}}})(My);Oy.exports=My;var o3=Oy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a3=F,xt=o3;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jy=new Set,Ui={};function Br(t,e){Is(t,e),Is(t+"Capture",e)}function Is(t,e){for(Ui[t]=e,t=0;t<e.length;t++)jy.add(e[t])}var yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bc=Object.prototype.hasOwnProperty,l3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$p={},qp={};function u3(t){return bc.call(qp,t)?!0:bc.call($p,t)?!1:l3.test(t)?qp[t]=!0:($p[t]=!0,!1)}function c3(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function h3(t,e,n,r){if(e===null||typeof e>"u"||c3(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ht(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var $e={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$e[t]=new ht(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$e[e]=new ht(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$e[t]=new ht(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$e[t]=new ht(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$e[t]=new ht(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$e[t]=new ht(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$e[t]=new ht(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$e[t]=new ht(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$e[t]=new ht(t,5,!1,t.toLowerCase(),null,!1,!1)});var Yh=/[\-:]([a-z])/g;function Zh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Yh,Zh);$e[e]=new ht(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Yh,Zh);$e[e]=new ht(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Yh,Zh);$e[e]=new ht(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$e[t]=new ht(t,1,!1,t.toLowerCase(),null,!1,!1)});$e.xlinkHref=new ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$e[t]=new ht(t,1,!1,t.toLowerCase(),null,!0,!0)});function ed(t,e,n,r){var s=$e.hasOwnProperty(e)?$e[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(h3(e,n,s,r)&&(n=null),r||s===null?u3(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var An=a3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,na=Symbol.for("react.element"),es=Symbol.for("react.portal"),ts=Symbol.for("react.fragment"),td=Symbol.for("react.strict_mode"),Nc=Symbol.for("react.profiler"),Fy=Symbol.for("react.provider"),Uy=Symbol.for("react.context"),nd=Symbol.for("react.forward_ref"),Dc=Symbol.for("react.suspense"),Lc=Symbol.for("react.suspense_list"),rd=Symbol.for("react.memo"),Dn=Symbol.for("react.lazy"),zy=Symbol.for("react.offscreen"),Hp=Symbol.iterator;function li(t){return t===null||typeof t!="object"?null:(t=Hp&&t[Hp]||t["@@iterator"],typeof t=="function"?t:null)}var Ee=Object.assign,Gu;function vi(t){if(Gu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Gu=e&&e[1]||""}return`
`+Gu+t}var Ku=!1;function Qu(t,e){if(!t||Ku)return"";Ku=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Ku=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?vi(t):""}function d3(t){switch(t.tag){case 5:return vi(t.type);case 16:return vi("Lazy");case 13:return vi("Suspense");case 19:return vi("SuspenseList");case 0:case 2:case 15:return t=Qu(t.type,!1),t;case 11:return t=Qu(t.type.render,!1),t;case 1:return t=Qu(t.type,!0),t;default:return""}}function Vc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ts:return"Fragment";case es:return"Portal";case Nc:return"Profiler";case td:return"StrictMode";case Dc:return"Suspense";case Lc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Uy:return(t.displayName||"Context")+".Consumer";case Fy:return(t._context.displayName||"Context")+".Provider";case nd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case rd:return e=t.displayName||null,e!==null?e:Vc(t.type)||"Memo";case Dn:e=t._payload,t=t._init;try{return Vc(t(e))}catch{}}return null}function f3(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vc(e);case 8:return e===td?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function rr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function By(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function p3(t){var e=By(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ra(t){t._valueTracker||(t._valueTracker=p3(t))}function $y(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=By(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Wa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Oc(t,e){var n=e.checked;return Ee({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Wp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=rr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function qy(t,e){e=e.checked,e!=null&&ed(t,"checked",e,!1)}function Mc(t,e){qy(t,e);var n=rr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?jc(t,e.type,n):e.hasOwnProperty("defaultValue")&&jc(t,e.type,rr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Gp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function jc(t,e,n){(e!=="number"||Wa(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var _i=Array.isArray;function fs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+rr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Fc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ee({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Kp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(_i(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:rr(n)}}function Hy(t,e){var n=rr(e.value),r=rr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Qp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Wy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Uc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Wy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var sa,Gy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(sa=sa||document.createElement("div"),sa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=sa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function zi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ai={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},g3=["Webkit","ms","Moz","O"];Object.keys(Ai).forEach(function(t){g3.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ai[e]=Ai[t]})});function Ky(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ai.hasOwnProperty(t)&&Ai[t]?(""+e).trim():e+"px"}function Qy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Ky(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var m3=Ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zc(t,e){if(e){if(m3[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Bc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $c=null;function sd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qc=null,ps=null,gs=null;function Jp(t){if(t=yo(t)){if(typeof qc!="function")throw Error(U(280));var e=t.stateNode;e&&(e=jl(e),qc(t.stateNode,t.type,e))}}function Jy(t){ps?gs?gs.push(t):gs=[t]:ps=t}function Xy(){if(ps){var t=ps,e=gs;if(gs=ps=null,Jp(t),e)for(t=0;t<e.length;t++)Jp(e[t])}}function Yy(t,e){return t(e)}function Zy(){}var Ju=!1;function ev(t,e,n){if(Ju)return t(e,n);Ju=!0;try{return Yy(t,e,n)}finally{Ju=!1,(ps!==null||gs!==null)&&(Zy(),Xy())}}function Bi(t,e){var n=t.stateNode;if(n===null)return null;var r=jl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Hc=!1;if(yn)try{var ui={};Object.defineProperty(ui,"passive",{get:function(){Hc=!0}}),window.addEventListener("test",ui,ui),window.removeEventListener("test",ui,ui)}catch{Hc=!1}function y3(t,e,n,r,s,i,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(f){this.onError(f)}}var ki=!1,Ga=null,Ka=!1,Wc=null,v3={onError:function(t){ki=!0,Ga=t}};function _3(t,e,n,r,s,i,o,l,u){ki=!1,Ga=null,y3.apply(v3,arguments)}function w3(t,e,n,r,s,i,o,l,u){if(_3.apply(this,arguments),ki){if(ki){var h=Ga;ki=!1,Ga=null}else throw Error(U(198));Ka||(Ka=!0,Wc=h)}}function $r(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function tv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Xp(t){if($r(t)!==t)throw Error(U(188))}function E3(t){var e=t.alternate;if(!e){if(e=$r(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Xp(s),t;if(i===r)return Xp(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function nv(t){return t=E3(t),t!==null?rv(t):null}function rv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=rv(t);if(e!==null)return e;t=t.sibling}return null}var sv=xt.unstable_scheduleCallback,Yp=xt.unstable_cancelCallback,T3=xt.unstable_shouldYield,I3=xt.unstable_requestPaint,ke=xt.unstable_now,x3=xt.unstable_getCurrentPriorityLevel,id=xt.unstable_ImmediatePriority,iv=xt.unstable_UserBlockingPriority,Qa=xt.unstable_NormalPriority,S3=xt.unstable_LowPriority,ov=xt.unstable_IdlePriority,Ll=null,Wt=null;function A3(t){if(Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(Ll,t,void 0,(t.current.flags&128)===128)}catch{}}var Ft=Math.clz32?Math.clz32:R3,k3=Math.log,C3=Math.LN2;function R3(t){return t>>>=0,t===0?32:31-(k3(t)/C3|0)|0}var ia=64,oa=4194304;function wi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ja(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=wi(l):(i&=o,i!==0&&(r=wi(i)))}else o=n&~s,o!==0?r=wi(o):i!==0&&(r=wi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ft(e),s=1<<n,r|=t[n],e&=~s;return r}function P3(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function b3(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ft(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=P3(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function Gc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function av(){var t=ia;return ia<<=1,!(ia&4194240)&&(ia=64),t}function Xu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function go(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ft(e),t[e]=n}function N3(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ft(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function od(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ft(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ae=0;function lv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var uv,ad,cv,hv,dv,Kc=!1,aa=[],qn=null,Hn=null,Wn=null,$i=new Map,qi=new Map,Vn=[],D3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zp(t,e){switch(t){case"focusin":case"focusout":qn=null;break;case"dragenter":case"dragleave":Hn=null;break;case"mouseover":case"mouseout":Wn=null;break;case"pointerover":case"pointerout":$i.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qi.delete(e.pointerId)}}function ci(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=yo(e),e!==null&&ad(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function L3(t,e,n,r,s){switch(e){case"focusin":return qn=ci(qn,t,e,n,r,s),!0;case"dragenter":return Hn=ci(Hn,t,e,n,r,s),!0;case"mouseover":return Wn=ci(Wn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return $i.set(i,ci($i.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,qi.set(i,ci(qi.get(i)||null,t,e,n,r,s)),!0}return!1}function fv(t){var e=Tr(t.target);if(e!==null){var n=$r(e);if(n!==null){if(e=n.tag,e===13){if(e=tv(n),e!==null){t.blockedOn=e,dv(t.priority,function(){cv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Aa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Qc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);$c=r,n.target.dispatchEvent(r),$c=null}else return e=yo(n),e!==null&&ad(e),t.blockedOn=n,!1;e.shift()}return!0}function eg(t,e,n){Aa(t)&&n.delete(e)}function V3(){Kc=!1,qn!==null&&Aa(qn)&&(qn=null),Hn!==null&&Aa(Hn)&&(Hn=null),Wn!==null&&Aa(Wn)&&(Wn=null),$i.forEach(eg),qi.forEach(eg)}function hi(t,e){t.blockedOn===e&&(t.blockedOn=null,Kc||(Kc=!0,xt.unstable_scheduleCallback(xt.unstable_NormalPriority,V3)))}function Hi(t){function e(s){return hi(s,t)}if(0<aa.length){hi(aa[0],t);for(var n=1;n<aa.length;n++){var r=aa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(qn!==null&&hi(qn,t),Hn!==null&&hi(Hn,t),Wn!==null&&hi(Wn,t),$i.forEach(e),qi.forEach(e),n=0;n<Vn.length;n++)r=Vn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Vn.length&&(n=Vn[0],n.blockedOn===null);)fv(n),n.blockedOn===null&&Vn.shift()}var ms=An.ReactCurrentBatchConfig,Xa=!0;function O3(t,e,n,r){var s=ae,i=ms.transition;ms.transition=null;try{ae=1,ld(t,e,n,r)}finally{ae=s,ms.transition=i}}function M3(t,e,n,r){var s=ae,i=ms.transition;ms.transition=null;try{ae=4,ld(t,e,n,r)}finally{ae=s,ms.transition=i}}function ld(t,e,n,r){if(Xa){var s=Qc(t,e,n,r);if(s===null)ac(t,e,r,Ya,n),Zp(t,r);else if(L3(s,t,e,n,r))r.stopPropagation();else if(Zp(t,r),e&4&&-1<D3.indexOf(t)){for(;s!==null;){var i=yo(s);if(i!==null&&uv(i),i=Qc(t,e,n,r),i===null&&ac(t,e,r,Ya,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ac(t,e,r,null,n)}}var Ya=null;function Qc(t,e,n,r){if(Ya=null,t=sd(r),t=Tr(t),t!==null)if(e=$r(t),e===null)t=null;else if(n=e.tag,n===13){if(t=tv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ya=t,null}function pv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(x3()){case id:return 1;case iv:return 4;case Qa:case S3:return 16;case ov:return 536870912;default:return 16}default:return 16}}var zn=null,ud=null,ka=null;function gv(){if(ka)return ka;var t,e=ud,n=e.length,r,s="value"in zn?zn.value:zn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ka=s.slice(t,1<r?1-r:void 0)}function Ca(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function la(){return!0}function tg(){return!1}function At(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?la:tg,this.isPropagationStopped=tg,this}return Ee(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=la)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=la)},persist:function(){},isPersistent:la}),e}var Us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cd=At(Us),mo=Ee({},Us,{view:0,detail:0}),j3=At(mo),Yu,Zu,di,Vl=Ee({},mo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==di&&(di&&t.type==="mousemove"?(Yu=t.screenX-di.screenX,Zu=t.screenY-di.screenY):Zu=Yu=0,di=t),Yu)},movementY:function(t){return"movementY"in t?t.movementY:Zu}}),ng=At(Vl),F3=Ee({},Vl,{dataTransfer:0}),U3=At(F3),z3=Ee({},mo,{relatedTarget:0}),ec=At(z3),B3=Ee({},Us,{animationName:0,elapsedTime:0,pseudoElement:0}),$3=At(B3),q3=Ee({},Us,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),H3=At(q3),W3=Ee({},Us,{data:0}),rg=At(W3),G3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},K3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Q3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function J3(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Q3[t])?!!e[t]:!1}function hd(){return J3}var X3=Ee({},mo,{key:function(t){if(t.key){var e=G3[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ca(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?K3[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hd,charCode:function(t){return t.type==="keypress"?Ca(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ca(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Y3=At(X3),Z3=Ee({},Vl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sg=At(Z3),eE=Ee({},mo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hd}),tE=At(eE),nE=Ee({},Us,{propertyName:0,elapsedTime:0,pseudoElement:0}),rE=At(nE),sE=Ee({},Vl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),iE=At(sE),oE=[9,13,27,32],dd=yn&&"CompositionEvent"in window,Ci=null;yn&&"documentMode"in document&&(Ci=document.documentMode);var aE=yn&&"TextEvent"in window&&!Ci,mv=yn&&(!dd||Ci&&8<Ci&&11>=Ci),ig=" ",og=!1;function yv(t,e){switch(t){case"keyup":return oE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ns=!1;function lE(t,e){switch(t){case"compositionend":return vv(e);case"keypress":return e.which!==32?null:(og=!0,ig);case"textInput":return t=e.data,t===ig&&og?null:t;default:return null}}function uE(t,e){if(ns)return t==="compositionend"||!dd&&yv(t,e)?(t=gv(),ka=ud=zn=null,ns=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mv&&e.locale!=="ko"?null:e.data;default:return null}}var cE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ag(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!cE[t.type]:e==="textarea"}function _v(t,e,n,r){Jy(r),e=Za(e,"onChange"),0<e.length&&(n=new cd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ri=null,Wi=null;function hE(t){Pv(t,0)}function Ol(t){var e=is(t);if($y(e))return t}function dE(t,e){if(t==="change")return e}var wv=!1;if(yn){var tc;if(yn){var nc="oninput"in document;if(!nc){var lg=document.createElement("div");lg.setAttribute("oninput","return;"),nc=typeof lg.oninput=="function"}tc=nc}else tc=!1;wv=tc&&(!document.documentMode||9<document.documentMode)}function ug(){Ri&&(Ri.detachEvent("onpropertychange",Ev),Wi=Ri=null)}function Ev(t){if(t.propertyName==="value"&&Ol(Wi)){var e=[];_v(e,Wi,t,sd(t)),ev(hE,e)}}function fE(t,e,n){t==="focusin"?(ug(),Ri=e,Wi=n,Ri.attachEvent("onpropertychange",Ev)):t==="focusout"&&ug()}function pE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ol(Wi)}function gE(t,e){if(t==="click")return Ol(e)}function mE(t,e){if(t==="input"||t==="change")return Ol(e)}function yE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zt=typeof Object.is=="function"?Object.is:yE;function Gi(t,e){if(zt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!bc.call(e,s)||!zt(t[s],e[s]))return!1}return!0}function cg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hg(t,e){var n=cg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cg(n)}}function Tv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Tv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Iv(){for(var t=window,e=Wa();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Wa(t.document)}return e}function fd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function vE(t){var e=Iv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Tv(n.ownerDocument.documentElement,n)){if(r!==null&&fd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=hg(n,i);var o=hg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _E=yn&&"documentMode"in document&&11>=document.documentMode,rs=null,Jc=null,Pi=null,Xc=!1;function dg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xc||rs==null||rs!==Wa(r)||(r=rs,"selectionStart"in r&&fd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Pi&&Gi(Pi,r)||(Pi=r,r=Za(Jc,"onSelect"),0<r.length&&(e=new cd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=rs)))}function ua(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ss={animationend:ua("Animation","AnimationEnd"),animationiteration:ua("Animation","AnimationIteration"),animationstart:ua("Animation","AnimationStart"),transitionend:ua("Transition","TransitionEnd")},rc={},xv={};yn&&(xv=document.createElement("div").style,"AnimationEvent"in window||(delete ss.animationend.animation,delete ss.animationiteration.animation,delete ss.animationstart.animation),"TransitionEvent"in window||delete ss.transitionend.transition);function Ml(t){if(rc[t])return rc[t];if(!ss[t])return t;var e=ss[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in xv)return rc[t]=e[n];return t}var Sv=Ml("animationend"),Av=Ml("animationiteration"),kv=Ml("animationstart"),Cv=Ml("transitionend"),Rv=new Map,fg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cr(t,e){Rv.set(t,e),Br(e,[t])}for(var sc=0;sc<fg.length;sc++){var ic=fg[sc],wE=ic.toLowerCase(),EE=ic[0].toUpperCase()+ic.slice(1);cr(wE,"on"+EE)}cr(Sv,"onAnimationEnd");cr(Av,"onAnimationIteration");cr(kv,"onAnimationStart");cr("dblclick","onDoubleClick");cr("focusin","onFocus");cr("focusout","onBlur");cr(Cv,"onTransitionEnd");Is("onMouseEnter",["mouseout","mouseover"]);Is("onMouseLeave",["mouseout","mouseover"]);Is("onPointerEnter",["pointerout","pointerover"]);Is("onPointerLeave",["pointerout","pointerover"]);Br("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Br("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Br("onBeforeInput",["compositionend","keypress","textInput","paste"]);Br("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Br("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Br("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ei="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ei));function pg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,w3(r,e,void 0,t),t.currentTarget=null}function Pv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;pg(s,l,h),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;pg(s,l,h),i=u}}}if(Ka)throw t=Wc,Ka=!1,Wc=null,t}function pe(t,e){var n=e[nh];n===void 0&&(n=e[nh]=new Set);var r=t+"__bubble";n.has(r)||(bv(e,t,2,!1),n.add(r))}function oc(t,e,n){var r=0;e&&(r|=4),bv(n,t,r,e)}var ca="_reactListening"+Math.random().toString(36).slice(2);function Ki(t){if(!t[ca]){t[ca]=!0,jy.forEach(function(n){n!=="selectionchange"&&(TE.has(n)||oc(n,!1,t),oc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ca]||(e[ca]=!0,oc("selectionchange",!1,e))}}function bv(t,e,n,r){switch(pv(e)){case 1:var s=O3;break;case 4:s=M3;break;default:s=ld}n=s.bind(null,e,n,t),s=void 0,!Hc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function ac(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Tr(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}ev(function(){var h=i,f=sd(n),g=[];e:{var m=Rv.get(t);if(m!==void 0){var x=cd,C=t;switch(t){case"keypress":if(Ca(n)===0)break e;case"keydown":case"keyup":x=Y3;break;case"focusin":C="focus",x=ec;break;case"focusout":C="blur",x=ec;break;case"beforeblur":case"afterblur":x=ec;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=ng;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=U3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=tE;break;case Sv:case Av:case kv:x=$3;break;case Cv:x=rE;break;case"scroll":x=j3;break;case"wheel":x=iE;break;case"copy":case"cut":case"paste":x=H3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=sg}var b=(e&4)!==0,L=!b&&t==="scroll",_=b?m!==null?m+"Capture":null:m;b=[];for(var w=h,A;w!==null;){A=w;var N=A.stateNode;if(A.tag===5&&N!==null&&(A=N,_!==null&&(N=Bi(w,_),N!=null&&b.push(Qi(w,N,A)))),L)break;w=w.return}0<b.length&&(m=new x(m,C,null,n,f),g.push({event:m,listeners:b}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",m&&n!==$c&&(C=n.relatedTarget||n.fromElement)&&(Tr(C)||C[vn]))break e;if((x||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,x?(C=n.relatedTarget||n.toElement,x=h,C=C?Tr(C):null,C!==null&&(L=$r(C),C!==L||C.tag!==5&&C.tag!==6)&&(C=null)):(x=null,C=h),x!==C)){if(b=ng,N="onMouseLeave",_="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(b=sg,N="onPointerLeave",_="onPointerEnter",w="pointer"),L=x==null?m:is(x),A=C==null?m:is(C),m=new b(N,w+"leave",x,n,f),m.target=L,m.relatedTarget=A,N=null,Tr(f)===h&&(b=new b(_,w+"enter",C,n,f),b.target=A,b.relatedTarget=L,N=b),L=N,x&&C)t:{for(b=x,_=C,w=0,A=b;A;A=Jr(A))w++;for(A=0,N=_;N;N=Jr(N))A++;for(;0<w-A;)b=Jr(b),w--;for(;0<A-w;)_=Jr(_),A--;for(;w--;){if(b===_||_!==null&&b===_.alternate)break t;b=Jr(b),_=Jr(_)}b=null}else b=null;x!==null&&gg(g,m,x,b,!1),C!==null&&L!==null&&gg(g,L,C,b,!0)}}e:{if(m=h?is(h):window,x=m.nodeName&&m.nodeName.toLowerCase(),x==="select"||x==="input"&&m.type==="file")var M=dE;else if(ag(m))if(wv)M=mE;else{M=pE;var j=fE}else(x=m.nodeName)&&x.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(M=gE);if(M&&(M=M(t,h))){_v(g,M,n,f);break e}j&&j(t,m,h),t==="focusout"&&(j=m._wrapperState)&&j.controlled&&m.type==="number"&&jc(m,"number",m.value)}switch(j=h?is(h):window,t){case"focusin":(ag(j)||j.contentEditable==="true")&&(rs=j,Jc=h,Pi=null);break;case"focusout":Pi=Jc=rs=null;break;case"mousedown":Xc=!0;break;case"contextmenu":case"mouseup":case"dragend":Xc=!1,dg(g,n,f);break;case"selectionchange":if(_E)break;case"keydown":case"keyup":dg(g,n,f)}var T;if(dd)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else ns?yv(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(mv&&n.locale!=="ko"&&(ns||v!=="onCompositionStart"?v==="onCompositionEnd"&&ns&&(T=gv()):(zn=f,ud="value"in zn?zn.value:zn.textContent,ns=!0)),j=Za(h,v),0<j.length&&(v=new rg(v,t,null,n,f),g.push({event:v,listeners:j}),T?v.data=T:(T=vv(n),T!==null&&(v.data=T)))),(T=aE?lE(t,n):uE(t,n))&&(h=Za(h,"onBeforeInput"),0<h.length&&(f=new rg("onBeforeInput","beforeinput",null,n,f),g.push({event:f,listeners:h}),f.data=T))}Pv(g,e)})}function Qi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Za(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Bi(t,n),i!=null&&r.unshift(Qi(t,i,s)),i=Bi(t,e),i!=null&&r.push(Qi(t,i,s))),t=t.return}return r}function Jr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function gg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,s?(u=Bi(n,i),u!=null&&o.unshift(Qi(n,u,l))):s||(u=Bi(n,i),u!=null&&o.push(Qi(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var IE=/\r\n?/g,xE=/\u0000|\uFFFD/g;function mg(t){return(typeof t=="string"?t:""+t).replace(IE,`
`).replace(xE,"")}function ha(t,e,n){if(e=mg(e),mg(t)!==e&&n)throw Error(U(425))}function el(){}var Yc=null,Zc=null;function eh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var th=typeof setTimeout=="function"?setTimeout:void 0,SE=typeof clearTimeout=="function"?clearTimeout:void 0,yg=typeof Promise=="function"?Promise:void 0,AE=typeof queueMicrotask=="function"?queueMicrotask:typeof yg<"u"?function(t){return yg.resolve(null).then(t).catch(kE)}:th;function kE(t){setTimeout(function(){throw t})}function lc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Hi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Hi(e)}function Gn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function vg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var zs=Math.random().toString(36).slice(2),Ht="__reactFiber$"+zs,Ji="__reactProps$"+zs,vn="__reactContainer$"+zs,nh="__reactEvents$"+zs,CE="__reactListeners$"+zs,RE="__reactHandles$"+zs;function Tr(t){var e=t[Ht];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vn]||n[Ht]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=vg(t);t!==null;){if(n=t[Ht])return n;t=vg(t)}return e}t=n,n=t.parentNode}return null}function yo(t){return t=t[Ht]||t[vn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function is(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function jl(t){return t[Ji]||null}var rh=[],os=-1;function hr(t){return{current:t}}function me(t){0>os||(t.current=rh[os],rh[os]=null,os--)}function de(t,e){os++,rh[os]=t.current,t.current=e}var sr={},tt=hr(sr),mt=hr(!1),br=sr;function xs(t,e){var n=t.type.contextTypes;if(!n)return sr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function yt(t){return t=t.childContextTypes,t!=null}function tl(){me(mt),me(tt)}function _g(t,e,n){if(tt.current!==sr)throw Error(U(168));de(tt,e),de(mt,n)}function Nv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,f3(t)||"Unknown",s));return Ee({},n,r)}function nl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||sr,br=tt.current,de(tt,t),de(mt,mt.current),!0}function wg(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=Nv(t,e,br),r.__reactInternalMemoizedMergedChildContext=t,me(mt),me(tt),de(tt,t)):me(mt),de(mt,n)}var un=null,Fl=!1,uc=!1;function Dv(t){un===null?un=[t]:un.push(t)}function PE(t){Fl=!0,Dv(t)}function dr(){if(!uc&&un!==null){uc=!0;var t=0,e=ae;try{var n=un;for(ae=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}un=null,Fl=!1}catch(s){throw un!==null&&(un=un.slice(t+1)),sv(id,dr),s}finally{ae=e,uc=!1}}return null}var as=[],ls=0,rl=null,sl=0,kt=[],Ct=0,Nr=null,cn=1,hn="";function _r(t,e){as[ls++]=sl,as[ls++]=rl,rl=t,sl=e}function Lv(t,e,n){kt[Ct++]=cn,kt[Ct++]=hn,kt[Ct++]=Nr,Nr=t;var r=cn;t=hn;var s=32-Ft(r)-1;r&=~(1<<s),n+=1;var i=32-Ft(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,cn=1<<32-Ft(e)+s|n<<s|r,hn=i+t}else cn=1<<i|n<<s|r,hn=t}function pd(t){t.return!==null&&(_r(t,1),Lv(t,1,0))}function gd(t){for(;t===rl;)rl=as[--ls],as[ls]=null,sl=as[--ls],as[ls]=null;for(;t===Nr;)Nr=kt[--Ct],kt[Ct]=null,hn=kt[--Ct],kt[Ct]=null,cn=kt[--Ct],kt[Ct]=null}var It=null,Et=null,ye=!1,jt=null;function Vv(t,e){var n=Rt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Eg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,It=t,Et=Gn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,It=t,Et=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Nr!==null?{id:cn,overflow:hn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Rt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,It=t,Et=null,!0):!1;default:return!1}}function sh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ih(t){if(ye){var e=Et;if(e){var n=e;if(!Eg(t,e)){if(sh(t))throw Error(U(418));e=Gn(n.nextSibling);var r=It;e&&Eg(t,e)?Vv(r,n):(t.flags=t.flags&-4097|2,ye=!1,It=t)}}else{if(sh(t))throw Error(U(418));t.flags=t.flags&-4097|2,ye=!1,It=t}}}function Tg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;It=t}function da(t){if(t!==It)return!1;if(!ye)return Tg(t),ye=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!eh(t.type,t.memoizedProps)),e&&(e=Et)){if(sh(t))throw Ov(),Error(U(418));for(;e;)Vv(t,e),e=Gn(e.nextSibling)}if(Tg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Et=Gn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Et=null}}else Et=It?Gn(t.stateNode.nextSibling):null;return!0}function Ov(){for(var t=Et;t;)t=Gn(t.nextSibling)}function Ss(){Et=It=null,ye=!1}function md(t){jt===null?jt=[t]:jt.push(t)}var bE=An.ReactCurrentBatchConfig;function fi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function fa(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ig(t){var e=t._init;return e(t._payload)}function Mv(t){function e(_,w){if(t){var A=_.deletions;A===null?(_.deletions=[w],_.flags|=16):A.push(w)}}function n(_,w){if(!t)return null;for(;w!==null;)e(_,w),w=w.sibling;return null}function r(_,w){for(_=new Map;w!==null;)w.key!==null?_.set(w.key,w):_.set(w.index,w),w=w.sibling;return _}function s(_,w){return _=Xn(_,w),_.index=0,_.sibling=null,_}function i(_,w,A){return _.index=A,t?(A=_.alternate,A!==null?(A=A.index,A<w?(_.flags|=2,w):A):(_.flags|=2,w)):(_.flags|=1048576,w)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function l(_,w,A,N){return w===null||w.tag!==6?(w=mc(A,_.mode,N),w.return=_,w):(w=s(w,A),w.return=_,w)}function u(_,w,A,N){var M=A.type;return M===ts?f(_,w,A.props.children,N,A.key):w!==null&&(w.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Dn&&Ig(M)===w.type)?(N=s(w,A.props),N.ref=fi(_,w,A),N.return=_,N):(N=Va(A.type,A.key,A.props,null,_.mode,N),N.ref=fi(_,w,A),N.return=_,N)}function h(_,w,A,N){return w===null||w.tag!==4||w.stateNode.containerInfo!==A.containerInfo||w.stateNode.implementation!==A.implementation?(w=yc(A,_.mode,N),w.return=_,w):(w=s(w,A.children||[]),w.return=_,w)}function f(_,w,A,N,M){return w===null||w.tag!==7?(w=Cr(A,_.mode,N,M),w.return=_,w):(w=s(w,A),w.return=_,w)}function g(_,w,A){if(typeof w=="string"&&w!==""||typeof w=="number")return w=mc(""+w,_.mode,A),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case na:return A=Va(w.type,w.key,w.props,null,_.mode,A),A.ref=fi(_,null,w),A.return=_,A;case es:return w=yc(w,_.mode,A),w.return=_,w;case Dn:var N=w._init;return g(_,N(w._payload),A)}if(_i(w)||li(w))return w=Cr(w,_.mode,A,null),w.return=_,w;fa(_,w)}return null}function m(_,w,A,N){var M=w!==null?w.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return M!==null?null:l(_,w,""+A,N);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case na:return A.key===M?u(_,w,A,N):null;case es:return A.key===M?h(_,w,A,N):null;case Dn:return M=A._init,m(_,w,M(A._payload),N)}if(_i(A)||li(A))return M!==null?null:f(_,w,A,N,null);fa(_,A)}return null}function x(_,w,A,N,M){if(typeof N=="string"&&N!==""||typeof N=="number")return _=_.get(A)||null,l(w,_,""+N,M);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case na:return _=_.get(N.key===null?A:N.key)||null,u(w,_,N,M);case es:return _=_.get(N.key===null?A:N.key)||null,h(w,_,N,M);case Dn:var j=N._init;return x(_,w,A,j(N._payload),M)}if(_i(N)||li(N))return _=_.get(A)||null,f(w,_,N,M,null);fa(w,N)}return null}function C(_,w,A,N){for(var M=null,j=null,T=w,v=w=0,E=null;T!==null&&v<A.length;v++){T.index>v?(E=T,T=null):E=T.sibling;var I=m(_,T,A[v],N);if(I===null){T===null&&(T=E);break}t&&T&&I.alternate===null&&e(_,T),w=i(I,w,v),j===null?M=I:j.sibling=I,j=I,T=E}if(v===A.length)return n(_,T),ye&&_r(_,v),M;if(T===null){for(;v<A.length;v++)T=g(_,A[v],N),T!==null&&(w=i(T,w,v),j===null?M=T:j.sibling=T,j=T);return ye&&_r(_,v),M}for(T=r(_,T);v<A.length;v++)E=x(T,_,v,A[v],N),E!==null&&(t&&E.alternate!==null&&T.delete(E.key===null?v:E.key),w=i(E,w,v),j===null?M=E:j.sibling=E,j=E);return t&&T.forEach(function(k){return e(_,k)}),ye&&_r(_,v),M}function b(_,w,A,N){var M=li(A);if(typeof M!="function")throw Error(U(150));if(A=M.call(A),A==null)throw Error(U(151));for(var j=M=null,T=w,v=w=0,E=null,I=A.next();T!==null&&!I.done;v++,I=A.next()){T.index>v?(E=T,T=null):E=T.sibling;var k=m(_,T,I.value,N);if(k===null){T===null&&(T=E);break}t&&T&&k.alternate===null&&e(_,T),w=i(k,w,v),j===null?M=k:j.sibling=k,j=k,T=E}if(I.done)return n(_,T),ye&&_r(_,v),M;if(T===null){for(;!I.done;v++,I=A.next())I=g(_,I.value,N),I!==null&&(w=i(I,w,v),j===null?M=I:j.sibling=I,j=I);return ye&&_r(_,v),M}for(T=r(_,T);!I.done;v++,I=A.next())I=x(T,_,v,I.value,N),I!==null&&(t&&I.alternate!==null&&T.delete(I.key===null?v:I.key),w=i(I,w,v),j===null?M=I:j.sibling=I,j=I);return t&&T.forEach(function(R){return e(_,R)}),ye&&_r(_,v),M}function L(_,w,A,N){if(typeof A=="object"&&A!==null&&A.type===ts&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case na:e:{for(var M=A.key,j=w;j!==null;){if(j.key===M){if(M=A.type,M===ts){if(j.tag===7){n(_,j.sibling),w=s(j,A.props.children),w.return=_,_=w;break e}}else if(j.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Dn&&Ig(M)===j.type){n(_,j.sibling),w=s(j,A.props),w.ref=fi(_,j,A),w.return=_,_=w;break e}n(_,j);break}else e(_,j);j=j.sibling}A.type===ts?(w=Cr(A.props.children,_.mode,N,A.key),w.return=_,_=w):(N=Va(A.type,A.key,A.props,null,_.mode,N),N.ref=fi(_,w,A),N.return=_,_=N)}return o(_);case es:e:{for(j=A.key;w!==null;){if(w.key===j)if(w.tag===4&&w.stateNode.containerInfo===A.containerInfo&&w.stateNode.implementation===A.implementation){n(_,w.sibling),w=s(w,A.children||[]),w.return=_,_=w;break e}else{n(_,w);break}else e(_,w);w=w.sibling}w=yc(A,_.mode,N),w.return=_,_=w}return o(_);case Dn:return j=A._init,L(_,w,j(A._payload),N)}if(_i(A))return C(_,w,A,N);if(li(A))return b(_,w,A,N);fa(_,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,w!==null&&w.tag===6?(n(_,w.sibling),w=s(w,A),w.return=_,_=w):(n(_,w),w=mc(A,_.mode,N),w.return=_,_=w),o(_)):n(_,w)}return L}var As=Mv(!0),jv=Mv(!1),il=hr(null),ol=null,us=null,yd=null;function vd(){yd=us=ol=null}function _d(t){var e=il.current;me(il),t._currentValue=e}function oh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ys(t,e){ol=t,yd=us=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(gt=!0),t.firstContext=null)}function Nt(t){var e=t._currentValue;if(yd!==t)if(t={context:t,memoizedValue:e,next:null},us===null){if(ol===null)throw Error(U(308));us=t,ol.dependencies={lanes:0,firstContext:t}}else us=us.next=t;return e}var Ir=null;function wd(t){Ir===null?Ir=[t]:Ir.push(t)}function Fv(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,wd(e)):(n.next=s.next,s.next=n),e.interleaved=n,_n(t,r)}function _n(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ln=!1;function Ed(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function mn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Kn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,se&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,_n(t,n)}return s=r.interleaved,s===null?(e.next=e,wd(r)):(e.next=s.next,s.next=e),r.interleaved=e,_n(t,n)}function Ra(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,od(t,n)}}function xg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function al(t,e,n,r){var s=t.updateQueue;Ln=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?i=h:o.next=h,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=h:l.next=h,f.lastBaseUpdate=u))}if(i!==null){var g=s.baseState;o=0,f=h=u=null,l=i;do{var m=l.lane,x=l.eventTime;if((r&m)===m){f!==null&&(f=f.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var C=t,b=l;switch(m=e,x=n,b.tag){case 1:if(C=b.payload,typeof C=="function"){g=C.call(x,g,m);break e}g=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=b.payload,m=typeof C=="function"?C.call(x,g,m):C,m==null)break e;g=Ee({},g,m);break e;case 2:Ln=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else x={eventTime:x,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(h=f=x,u=g):f=f.next=x,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(f===null&&(u=g),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Lr|=o,t.lanes=o,t.memoizedState=g}}function Sg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var vo={},Gt=hr(vo),Xi=hr(vo),Yi=hr(vo);function xr(t){if(t===vo)throw Error(U(174));return t}function Td(t,e){switch(de(Yi,e),de(Xi,t),de(Gt,vo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Uc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Uc(e,t)}me(Gt),de(Gt,e)}function ks(){me(Gt),me(Xi),me(Yi)}function zv(t){xr(Yi.current);var e=xr(Gt.current),n=Uc(e,t.type);e!==n&&(de(Xi,t),de(Gt,n))}function Id(t){Xi.current===t&&(me(Gt),me(Xi))}var _e=hr(0);function ll(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var cc=[];function xd(){for(var t=0;t<cc.length;t++)cc[t]._workInProgressVersionPrimary=null;cc.length=0}var Pa=An.ReactCurrentDispatcher,hc=An.ReactCurrentBatchConfig,Dr=0,we=null,be=null,Ve=null,ul=!1,bi=!1,Zi=0,NE=0;function Qe(){throw Error(U(321))}function Sd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!zt(t[n],e[n]))return!1;return!0}function Ad(t,e,n,r,s,i){if(Dr=i,we=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Pa.current=t===null||t.memoizedState===null?OE:ME,t=n(r,s),bi){i=0;do{if(bi=!1,Zi=0,25<=i)throw Error(U(301));i+=1,Ve=be=null,e.updateQueue=null,Pa.current=jE,t=n(r,s)}while(bi)}if(Pa.current=cl,e=be!==null&&be.next!==null,Dr=0,Ve=be=we=null,ul=!1,e)throw Error(U(300));return t}function kd(){var t=Zi!==0;return Zi=0,t}function qt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ve===null?we.memoizedState=Ve=t:Ve=Ve.next=t,Ve}function Dt(){if(be===null){var t=we.alternate;t=t!==null?t.memoizedState:null}else t=be.next;var e=Ve===null?we.memoizedState:Ve.next;if(e!==null)Ve=e,be=t;else{if(t===null)throw Error(U(310));be=t,t={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},Ve===null?we.memoizedState=Ve=t:Ve=Ve.next=t}return Ve}function eo(t,e){return typeof e=="function"?e(t):e}function dc(t){var e=Dt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=be,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,h=i;do{var f=h.lane;if((Dr&f)===f)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var g={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=g,o=r):u=u.next=g,we.lanes|=f,Lr|=f}h=h.next}while(h!==null&&h!==i);u===null?o=r:u.next=l,zt(r,e.memoizedState)||(gt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,we.lanes|=i,Lr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function fc(t){var e=Dt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);zt(i,e.memoizedState)||(gt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Bv(){}function $v(t,e){var n=we,r=Dt(),s=e(),i=!zt(r.memoizedState,s);if(i&&(r.memoizedState=s,gt=!0),r=r.queue,Cd(Wv.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ve!==null&&Ve.memoizedState.tag&1){if(n.flags|=2048,to(9,Hv.bind(null,n,r,s,e),void 0,null),Oe===null)throw Error(U(349));Dr&30||qv(n,e,s)}return s}function qv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=we.updateQueue,e===null?(e={lastEffect:null,stores:null},we.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Hv(t,e,n,r){e.value=n,e.getSnapshot=r,Gv(e)&&Kv(t)}function Wv(t,e,n){return n(function(){Gv(e)&&Kv(t)})}function Gv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!zt(t,n)}catch{return!0}}function Kv(t){var e=_n(t,1);e!==null&&Ut(e,t,1,-1)}function Ag(t){var e=qt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:eo,lastRenderedState:t},e.queue=t,t=t.dispatch=VE.bind(null,we,t),[e.memoizedState,t]}function to(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=we.updateQueue,e===null?(e={lastEffect:null,stores:null},we.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Qv(){return Dt().memoizedState}function ba(t,e,n,r){var s=qt();we.flags|=t,s.memoizedState=to(1|e,n,void 0,r===void 0?null:r)}function Ul(t,e,n,r){var s=Dt();r=r===void 0?null:r;var i=void 0;if(be!==null){var o=be.memoizedState;if(i=o.destroy,r!==null&&Sd(r,o.deps)){s.memoizedState=to(e,n,i,r);return}}we.flags|=t,s.memoizedState=to(1|e,n,i,r)}function kg(t,e){return ba(8390656,8,t,e)}function Cd(t,e){return Ul(2048,8,t,e)}function Jv(t,e){return Ul(4,2,t,e)}function Xv(t,e){return Ul(4,4,t,e)}function Yv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Zv(t,e,n){return n=n!=null?n.concat([t]):null,Ul(4,4,Yv.bind(null,e,t),n)}function Rd(){}function e_(t,e){var n=Dt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Sd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function t_(t,e){var n=Dt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Sd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function n_(t,e,n){return Dr&21?(zt(n,e)||(n=av(),we.lanes|=n,Lr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,gt=!0),t.memoizedState=n)}function DE(t,e){var n=ae;ae=n!==0&&4>n?n:4,t(!0);var r=hc.transition;hc.transition={};try{t(!1),e()}finally{ae=n,hc.transition=r}}function r_(){return Dt().memoizedState}function LE(t,e,n){var r=Jn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},s_(t))i_(e,n);else if(n=Fv(t,e,n,r),n!==null){var s=lt();Ut(n,t,r,s),o_(n,e,r)}}function VE(t,e,n){var r=Jn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(s_(t))i_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,zt(l,o)){var u=e.interleaved;u===null?(s.next=s,wd(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Fv(t,e,s,r),n!==null&&(s=lt(),Ut(n,t,r,s),o_(n,e,r))}}function s_(t){var e=t.alternate;return t===we||e!==null&&e===we}function i_(t,e){bi=ul=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function o_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,od(t,n)}}var cl={readContext:Nt,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useInsertionEffect:Qe,useLayoutEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useMutableSource:Qe,useSyncExternalStore:Qe,useId:Qe,unstable_isNewReconciler:!1},OE={readContext:Nt,useCallback:function(t,e){return qt().memoizedState=[t,e===void 0?null:e],t},useContext:Nt,useEffect:kg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ba(4194308,4,Yv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ba(4194308,4,t,e)},useInsertionEffect:function(t,e){return ba(4,2,t,e)},useMemo:function(t,e){var n=qt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=qt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=LE.bind(null,we,t),[r.memoizedState,t]},useRef:function(t){var e=qt();return t={current:t},e.memoizedState=t},useState:Ag,useDebugValue:Rd,useDeferredValue:function(t){return qt().memoizedState=t},useTransition:function(){var t=Ag(!1),e=t[0];return t=DE.bind(null,t[1]),qt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=we,s=qt();if(ye){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Oe===null)throw Error(U(349));Dr&30||qv(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,kg(Wv.bind(null,r,i,t),[t]),r.flags|=2048,to(9,Hv.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=qt(),e=Oe.identifierPrefix;if(ye){var n=hn,r=cn;n=(r&~(1<<32-Ft(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Zi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=NE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ME={readContext:Nt,useCallback:e_,useContext:Nt,useEffect:Cd,useImperativeHandle:Zv,useInsertionEffect:Jv,useLayoutEffect:Xv,useMemo:t_,useReducer:dc,useRef:Qv,useState:function(){return dc(eo)},useDebugValue:Rd,useDeferredValue:function(t){var e=Dt();return n_(e,be.memoizedState,t)},useTransition:function(){var t=dc(eo)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:Bv,useSyncExternalStore:$v,useId:r_,unstable_isNewReconciler:!1},jE={readContext:Nt,useCallback:e_,useContext:Nt,useEffect:Cd,useImperativeHandle:Zv,useInsertionEffect:Jv,useLayoutEffect:Xv,useMemo:t_,useReducer:fc,useRef:Qv,useState:function(){return fc(eo)},useDebugValue:Rd,useDeferredValue:function(t){var e=Dt();return be===null?e.memoizedState=t:n_(e,be.memoizedState,t)},useTransition:function(){var t=fc(eo)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:Bv,useSyncExternalStore:$v,useId:r_,unstable_isNewReconciler:!1};function Ot(t,e){if(t&&t.defaultProps){e=Ee({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ah(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ee({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var zl={isMounted:function(t){return(t=t._reactInternals)?$r(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=lt(),s=Jn(t),i=mn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Kn(t,i,s),e!==null&&(Ut(e,t,s,r),Ra(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=lt(),s=Jn(t),i=mn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Kn(t,i,s),e!==null&&(Ut(e,t,s,r),Ra(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=lt(),r=Jn(t),s=mn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Kn(t,s,r),e!==null&&(Ut(e,t,r,n),Ra(e,t,r))}};function Cg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Gi(n,r)||!Gi(s,i):!0}function a_(t,e,n){var r=!1,s=sr,i=e.contextType;return typeof i=="object"&&i!==null?i=Nt(i):(s=yt(e)?br:tt.current,r=e.contextTypes,i=(r=r!=null)?xs(t,s):sr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=zl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Rg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&zl.enqueueReplaceState(e,e.state,null)}function lh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Ed(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Nt(i):(i=yt(e)?br:tt.current,s.context=xs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ah(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&zl.enqueueReplaceState(s,s.state,null),al(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Cs(t,e){try{var n="",r=e;do n+=d3(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function pc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function uh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var FE=typeof WeakMap=="function"?WeakMap:Map;function l_(t,e,n){n=mn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){dl||(dl=!0,_h=r),uh(t,e)},n}function u_(t,e,n){n=mn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){uh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){uh(t,e),typeof r!="function"&&(Qn===null?Qn=new Set([this]):Qn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Pg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new FE;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=ZE.bind(null,t,e,n),e.then(t,t))}function bg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ng(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=mn(-1,1),e.tag=2,Kn(n,e,1))),n.lanes|=1),t)}var UE=An.ReactCurrentOwner,gt=!1;function at(t,e,n,r){e.child=t===null?jv(e,null,n,r):As(e,t.child,n,r)}function Dg(t,e,n,r,s){n=n.render;var i=e.ref;return ys(e,s),r=Ad(t,e,n,r,i,s),n=kd(),t!==null&&!gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,wn(t,e,s)):(ye&&n&&pd(e),e.flags|=1,at(t,e,r,s),e.child)}function Lg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Md(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,c_(t,e,i,r,s)):(t=Va(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Gi,n(o,r)&&t.ref===e.ref)return wn(t,e,s)}return e.flags|=1,t=Xn(i,r),t.ref=e.ref,t.return=e,e.child=t}function c_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Gi(i,r)&&t.ref===e.ref)if(gt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(gt=!0);else return e.lanes=t.lanes,wn(t,e,s)}return ch(t,e,n,r,s)}function h_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},de(hs,wt),wt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,de(hs,wt),wt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,de(hs,wt),wt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,de(hs,wt),wt|=r;return at(t,e,s,n),e.child}function d_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ch(t,e,n,r,s){var i=yt(n)?br:tt.current;return i=xs(e,i),ys(e,s),n=Ad(t,e,n,r,i,s),r=kd(),t!==null&&!gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,wn(t,e,s)):(ye&&r&&pd(e),e.flags|=1,at(t,e,n,s),e.child)}function Vg(t,e,n,r,s){if(yt(n)){var i=!0;nl(e)}else i=!1;if(ys(e,s),e.stateNode===null)Na(t,e),a_(e,n,r),lh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Nt(h):(h=yt(n)?br:tt.current,h=xs(e,h));var f=n.getDerivedStateFromProps,g=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&Rg(e,o,r,h),Ln=!1;var m=e.memoizedState;o.state=m,al(e,r,o,s),u=e.memoizedState,l!==r||m!==u||mt.current||Ln?(typeof f=="function"&&(ah(e,n,f,r),u=e.memoizedState),(l=Ln||Cg(e,n,l,r,m,u,h))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Uv(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Ot(e.type,l),o.props=h,g=e.pendingProps,m=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Nt(u):(u=yt(n)?br:tt.current,u=xs(e,u));var x=n.getDerivedStateFromProps;(f=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==g||m!==u)&&Rg(e,o,r,u),Ln=!1,m=e.memoizedState,o.state=m,al(e,r,o,s);var C=e.memoizedState;l!==g||m!==C||mt.current||Ln?(typeof x=="function"&&(ah(e,n,x,r),C=e.memoizedState),(h=Ln||Cg(e,n,h,r,m,C,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,C,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,C,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),o.props=r,o.state=C,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return hh(t,e,n,r,i,s)}function hh(t,e,n,r,s,i){d_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&wg(e,n,!1),wn(t,e,i);r=e.stateNode,UE.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=As(e,t.child,null,i),e.child=As(e,null,l,i)):at(t,e,l,i),e.memoizedState=r.state,s&&wg(e,n,!0),e.child}function f_(t){var e=t.stateNode;e.pendingContext?_g(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_g(t,e.context,!1),Td(t,e.containerInfo)}function Og(t,e,n,r,s){return Ss(),md(s),e.flags|=256,at(t,e,n,r),e.child}var dh={dehydrated:null,treeContext:null,retryLane:0};function fh(t){return{baseLanes:t,cachePool:null,transitions:null}}function p_(t,e,n){var r=e.pendingProps,s=_e.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),de(_e,s&1),t===null)return ih(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ql(o,r,0,null),t=Cr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=fh(n),e.memoizedState=dh,t):Pd(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return zE(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Xn(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Xn(l,i):(i=Cr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?fh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=dh,r}return i=t.child,t=i.sibling,r=Xn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Pd(t,e){return e=ql({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pa(t,e,n,r){return r!==null&&md(r),As(e,t.child,null,n),t=Pd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function zE(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=pc(Error(U(422))),pa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ql({mode:"visible",children:r.children},s,0,null),i=Cr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&As(e,t.child,null,o),e.child.memoizedState=fh(o),e.memoizedState=dh,i);if(!(e.mode&1))return pa(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(U(419)),r=pc(i,r,void 0),pa(t,e,o,r)}if(l=(o&t.childLanes)!==0,gt||l){if(r=Oe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,_n(t,s),Ut(r,t,s,-1))}return Od(),r=pc(Error(U(421))),pa(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=eT.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Et=Gn(s.nextSibling),It=e,ye=!0,jt=null,t!==null&&(kt[Ct++]=cn,kt[Ct++]=hn,kt[Ct++]=Nr,cn=t.id,hn=t.overflow,Nr=e),e=Pd(e,r.children),e.flags|=4096,e)}function Mg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),oh(t.return,e,n)}function gc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function g_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(at(t,e,r.children,n),r=_e.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Mg(t,n,e);else if(t.tag===19)Mg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(de(_e,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ll(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),gc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ll(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}gc(e,!0,n,null,i);break;case"together":gc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Na(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function wn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Lr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Xn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Xn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function BE(t,e,n){switch(e.tag){case 3:f_(e),Ss();break;case 5:zv(e);break;case 1:yt(e.type)&&nl(e);break;case 4:Td(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;de(il,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(de(_e,_e.current&1),e.flags|=128,null):n&e.child.childLanes?p_(t,e,n):(de(_e,_e.current&1),t=wn(t,e,n),t!==null?t.sibling:null);de(_e,_e.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return g_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),de(_e,_e.current),r)break;return null;case 22:case 23:return e.lanes=0,h_(t,e,n)}return wn(t,e,n)}var m_,ph,y_,v_;m_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ph=function(){};y_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,xr(Gt.current);var i=null;switch(n){case"input":s=Oc(t,s),r=Oc(t,r),i=[];break;case"select":s=Ee({},s,{value:void 0}),r=Ee({},r,{value:void 0}),i=[];break;case"textarea":s=Fc(t,s),r=Fc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=el)}zc(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Ui.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Ui.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&pe("scroll",t),i||l===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};v_=function(t,e,n,r){n!==r&&(e.flags|=4)};function pi(t,e){if(!ye)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Je(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function $E(t,e,n){var r=e.pendingProps;switch(gd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(e),null;case 1:return yt(e.type)&&tl(),Je(e),null;case 3:return r=e.stateNode,ks(),me(mt),me(tt),xd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(da(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,jt!==null&&(Th(jt),jt=null))),ph(t,e),Je(e),null;case 5:Id(e);var s=xr(Yi.current);if(n=e.type,t!==null&&e.stateNode!=null)y_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return Je(e),null}if(t=xr(Gt.current),da(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Ht]=e,r[Ji]=i,t=(e.mode&1)!==0,n){case"dialog":pe("cancel",r),pe("close",r);break;case"iframe":case"object":case"embed":pe("load",r);break;case"video":case"audio":for(s=0;s<Ei.length;s++)pe(Ei[s],r);break;case"source":pe("error",r);break;case"img":case"image":case"link":pe("error",r),pe("load",r);break;case"details":pe("toggle",r);break;case"input":Wp(r,i),pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},pe("invalid",r);break;case"textarea":Kp(r,i),pe("invalid",r)}zc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&ha(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ha(r.textContent,l,t),s=["children",""+l]):Ui.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&pe("scroll",r)}switch(n){case"input":ra(r),Gp(r,i,!0);break;case"textarea":ra(r),Qp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=el)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Wy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ht]=e,t[Ji]=r,m_(t,e,!1,!1),e.stateNode=t;e:{switch(o=Bc(n,r),n){case"dialog":pe("cancel",t),pe("close",t),s=r;break;case"iframe":case"object":case"embed":pe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ei.length;s++)pe(Ei[s],t);s=r;break;case"source":pe("error",t),s=r;break;case"img":case"image":case"link":pe("error",t),pe("load",t),s=r;break;case"details":pe("toggle",t),s=r;break;case"input":Wp(t,r),s=Oc(t,r),pe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ee({},r,{value:void 0}),pe("invalid",t);break;case"textarea":Kp(t,r),s=Fc(t,r),pe("invalid",t);break;default:s=r}zc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Qy(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Gy(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&zi(t,u):typeof u=="number"&&zi(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ui.hasOwnProperty(i)?u!=null&&i==="onScroll"&&pe("scroll",t):u!=null&&ed(t,i,u,o))}switch(n){case"input":ra(t),Gp(t,r,!1);break;case"textarea":ra(t),Qp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+rr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?fs(t,!!r.multiple,i,!1):r.defaultValue!=null&&fs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=el)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Je(e),null;case 6:if(t&&e.stateNode!=null)v_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=xr(Yi.current),xr(Gt.current),da(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ht]=e,(i=r.nodeValue!==n)&&(t=It,t!==null))switch(t.tag){case 3:ha(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ha(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ht]=e,e.stateNode=r}return Je(e),null;case 13:if(me(_e),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ye&&Et!==null&&e.mode&1&&!(e.flags&128))Ov(),Ss(),e.flags|=98560,i=!1;else if(i=da(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[Ht]=e}else Ss(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Je(e),i=!1}else jt!==null&&(Th(jt),jt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||_e.current&1?Ne===0&&(Ne=3):Od())),e.updateQueue!==null&&(e.flags|=4),Je(e),null);case 4:return ks(),ph(t,e),t===null&&Ki(e.stateNode.containerInfo),Je(e),null;case 10:return _d(e.type._context),Je(e),null;case 17:return yt(e.type)&&tl(),Je(e),null;case 19:if(me(_e),i=e.memoizedState,i===null)return Je(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)pi(i,!1);else{if(Ne!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ll(t),o!==null){for(e.flags|=128,pi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return de(_e,_e.current&1|2),e.child}t=t.sibling}i.tail!==null&&ke()>Rs&&(e.flags|=128,r=!0,pi(i,!1),e.lanes=4194304)}else{if(!r)if(t=ll(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),pi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ye)return Je(e),null}else 2*ke()-i.renderingStartTime>Rs&&n!==1073741824&&(e.flags|=128,r=!0,pi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ke(),e.sibling=null,n=_e.current,de(_e,r?n&1|2:n&1),e):(Je(e),null);case 22:case 23:return Vd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wt&1073741824&&(Je(e),e.subtreeFlags&6&&(e.flags|=8192)):Je(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function qE(t,e){switch(gd(e),e.tag){case 1:return yt(e.type)&&tl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ks(),me(mt),me(tt),xd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Id(e),null;case 13:if(me(_e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Ss()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return me(_e),null;case 4:return ks(),null;case 10:return _d(e.type._context),null;case 22:case 23:return Vd(),null;case 24:return null;default:return null}}var ga=!1,Ze=!1,HE=typeof WeakSet=="function"?WeakSet:Set,$=null;function cs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){xe(t,e,r)}else n.current=null}function gh(t,e,n){try{n()}catch(r){xe(t,e,r)}}var jg=!1;function WE(t,e){if(Yc=Xa,t=Iv(),fd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,f=0,g=t,m=null;t:for(;;){for(var x;g!==n||s!==0&&g.nodeType!==3||(l=o+s),g!==i||r!==0&&g.nodeType!==3||(u=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(x=g.firstChild)!==null;)m=g,g=x;for(;;){if(g===t)break t;if(m===n&&++h===s&&(l=o),m===i&&++f===r&&(u=o),(x=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=x}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zc={focusedElem:t,selectionRange:n},Xa=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var b=C.memoizedProps,L=C.memoizedState,_=e.stateNode,w=_.getSnapshotBeforeUpdate(e.elementType===e.type?b:Ot(e.type,b),L);_.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(N){xe(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return C=jg,jg=!1,C}function Ni(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&gh(e,n,i)}s=s.next}while(s!==r)}}function Bl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function mh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function __(t){var e=t.alternate;e!==null&&(t.alternate=null,__(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ht],delete e[Ji],delete e[nh],delete e[CE],delete e[RE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function w_(t){return t.tag===5||t.tag===3||t.tag===4}function Fg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||w_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=el));else if(r!==4&&(t=t.child,t!==null))for(yh(t,e,n),t=t.sibling;t!==null;)yh(t,e,n),t=t.sibling}function vh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(vh(t,e,n),t=t.sibling;t!==null;)vh(t,e,n),t=t.sibling}var je=null,Mt=!1;function bn(t,e,n){for(n=n.child;n!==null;)E_(t,e,n),n=n.sibling}function E_(t,e,n){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(Ll,n)}catch{}switch(n.tag){case 5:Ze||cs(n,e);case 6:var r=je,s=Mt;je=null,bn(t,e,n),je=r,Mt=s,je!==null&&(Mt?(t=je,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):je.removeChild(n.stateNode));break;case 18:je!==null&&(Mt?(t=je,n=n.stateNode,t.nodeType===8?lc(t.parentNode,n):t.nodeType===1&&lc(t,n),Hi(t)):lc(je,n.stateNode));break;case 4:r=je,s=Mt,je=n.stateNode.containerInfo,Mt=!0,bn(t,e,n),je=r,Mt=s;break;case 0:case 11:case 14:case 15:if(!Ze&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&gh(n,e,o),s=s.next}while(s!==r)}bn(t,e,n);break;case 1:if(!Ze&&(cs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){xe(n,e,l)}bn(t,e,n);break;case 21:bn(t,e,n);break;case 22:n.mode&1?(Ze=(r=Ze)||n.memoizedState!==null,bn(t,e,n),Ze=r):bn(t,e,n);break;default:bn(t,e,n)}}function Ug(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new HE),e.forEach(function(r){var s=tT.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Vt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:je=l.stateNode,Mt=!1;break e;case 3:je=l.stateNode.containerInfo,Mt=!0;break e;case 4:je=l.stateNode.containerInfo,Mt=!0;break e}l=l.return}if(je===null)throw Error(U(160));E_(i,o,s),je=null,Mt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){xe(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)T_(e,t),e=e.sibling}function T_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Vt(e,t),$t(t),r&4){try{Ni(3,t,t.return),Bl(3,t)}catch(b){xe(t,t.return,b)}try{Ni(5,t,t.return)}catch(b){xe(t,t.return,b)}}break;case 1:Vt(e,t),$t(t),r&512&&n!==null&&cs(n,n.return);break;case 5:if(Vt(e,t),$t(t),r&512&&n!==null&&cs(n,n.return),t.flags&32){var s=t.stateNode;try{zi(s,"")}catch(b){xe(t,t.return,b)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&qy(s,i),Bc(l,o);var h=Bc(l,i);for(o=0;o<u.length;o+=2){var f=u[o],g=u[o+1];f==="style"?Qy(s,g):f==="dangerouslySetInnerHTML"?Gy(s,g):f==="children"?zi(s,g):ed(s,f,g,h)}switch(l){case"input":Mc(s,i);break;case"textarea":Hy(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?fs(s,!!i.multiple,x,!1):m!==!!i.multiple&&(i.defaultValue!=null?fs(s,!!i.multiple,i.defaultValue,!0):fs(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ji]=i}catch(b){xe(t,t.return,b)}}break;case 6:if(Vt(e,t),$t(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(b){xe(t,t.return,b)}}break;case 3:if(Vt(e,t),$t(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Hi(e.containerInfo)}catch(b){xe(t,t.return,b)}break;case 4:Vt(e,t),$t(t);break;case 13:Vt(e,t),$t(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Dd=ke())),r&4&&Ug(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Ze=(h=Ze)||f,Vt(e,t),Ze=h):Vt(e,t),$t(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!f&&t.mode&1)for($=t,f=t.child;f!==null;){for(g=$=f;$!==null;){switch(m=$,x=m.child,m.tag){case 0:case 11:case 14:case 15:Ni(4,m,m.return);break;case 1:cs(m,m.return);var C=m.stateNode;if(typeof C.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(b){xe(r,n,b)}}break;case 5:cs(m,m.return);break;case 22:if(m.memoizedState!==null){Bg(g);continue}}x!==null?(x.return=m,$=x):Bg(g)}f=f.sibling}e:for(f=null,g=t;;){if(g.tag===5){if(f===null){f=g;try{s=g.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=g.stateNode,u=g.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Ky("display",o))}catch(b){xe(t,t.return,b)}}}else if(g.tag===6){if(f===null)try{g.stateNode.nodeValue=h?"":g.memoizedProps}catch(b){xe(t,t.return,b)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;f===g&&(f=null),g=g.return}f===g&&(f=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Vt(e,t),$t(t),r&4&&Ug(t);break;case 21:break;default:Vt(e,t),$t(t)}}function $t(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(w_(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(zi(s,""),r.flags&=-33);var i=Fg(t);vh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Fg(t);yh(t,l,o);break;default:throw Error(U(161))}}catch(u){xe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function GE(t,e,n){$=t,I_(t)}function I_(t,e,n){for(var r=(t.mode&1)!==0;$!==null;){var s=$,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ga;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||Ze;l=ga;var h=Ze;if(ga=o,(Ze=u)&&!h)for($=s;$!==null;)o=$,u=o.child,o.tag===22&&o.memoizedState!==null?$g(s):u!==null?(u.return=o,$=u):$g(s);for(;i!==null;)$=i,I_(i),i=i.sibling;$=s,ga=l,Ze=h}zg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,$=i):zg(t)}}function zg(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ze||Bl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ze)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ot(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Sg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Sg(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var g=f.dehydrated;g!==null&&Hi(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}Ze||e.flags&512&&mh(e)}catch(m){xe(e,e.return,m)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function Bg(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function $g(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Bl(4,e)}catch(u){xe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){xe(e,s,u)}}var i=e.return;try{mh(e)}catch(u){xe(e,i,u)}break;case 5:var o=e.return;try{mh(e)}catch(u){xe(e,o,u)}}}catch(u){xe(e,e.return,u)}if(e===t){$=null;break}var l=e.sibling;if(l!==null){l.return=e.return,$=l;break}$=e.return}}var KE=Math.ceil,hl=An.ReactCurrentDispatcher,bd=An.ReactCurrentOwner,Pt=An.ReactCurrentBatchConfig,se=0,Oe=null,Re=null,ze=0,wt=0,hs=hr(0),Ne=0,no=null,Lr=0,$l=0,Nd=0,Di=null,ft=null,Dd=0,Rs=1/0,ln=null,dl=!1,_h=null,Qn=null,ma=!1,Bn=null,fl=0,Li=0,wh=null,Da=-1,La=0;function lt(){return se&6?ke():Da!==-1?Da:Da=ke()}function Jn(t){return t.mode&1?se&2&&ze!==0?ze&-ze:bE.transition!==null?(La===0&&(La=av()),La):(t=ae,t!==0||(t=window.event,t=t===void 0?16:pv(t.type)),t):1}function Ut(t,e,n,r){if(50<Li)throw Li=0,wh=null,Error(U(185));go(t,n,r),(!(se&2)||t!==Oe)&&(t===Oe&&(!(se&2)&&($l|=n),Ne===4&&On(t,ze)),vt(t,r),n===1&&se===0&&!(e.mode&1)&&(Rs=ke()+500,Fl&&dr()))}function vt(t,e){var n=t.callbackNode;b3(t,e);var r=Ja(t,t===Oe?ze:0);if(r===0)n!==null&&Yp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Yp(n),e===1)t.tag===0?PE(qg.bind(null,t)):Dv(qg.bind(null,t)),AE(function(){!(se&6)&&dr()}),n=null;else{switch(lv(r)){case 1:n=id;break;case 4:n=iv;break;case 16:n=Qa;break;case 536870912:n=ov;break;default:n=Qa}n=b_(n,x_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function x_(t,e){if(Da=-1,La=0,se&6)throw Error(U(327));var n=t.callbackNode;if(vs()&&t.callbackNode!==n)return null;var r=Ja(t,t===Oe?ze:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=pl(t,r);else{e=r;var s=se;se|=2;var i=A_();(Oe!==t||ze!==e)&&(ln=null,Rs=ke()+500,kr(t,e));do try{XE();break}catch(l){S_(t,l)}while(!0);vd(),hl.current=i,se=s,Re!==null?e=0:(Oe=null,ze=0,e=Ne)}if(e!==0){if(e===2&&(s=Gc(t),s!==0&&(r=s,e=Eh(t,s))),e===1)throw n=no,kr(t,0),On(t,r),vt(t,ke()),n;if(e===6)On(t,r);else{if(s=t.current.alternate,!(r&30)&&!QE(s)&&(e=pl(t,r),e===2&&(i=Gc(t),i!==0&&(r=i,e=Eh(t,i))),e===1))throw n=no,kr(t,0),On(t,r),vt(t,ke()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:wr(t,ft,ln);break;case 3:if(On(t,r),(r&130023424)===r&&(e=Dd+500-ke(),10<e)){if(Ja(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){lt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=th(wr.bind(null,t,ft,ln),e);break}wr(t,ft,ln);break;case 4:if(On(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ft(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*KE(r/1960))-r,10<r){t.timeoutHandle=th(wr.bind(null,t,ft,ln),r);break}wr(t,ft,ln);break;case 5:wr(t,ft,ln);break;default:throw Error(U(329))}}}return vt(t,ke()),t.callbackNode===n?x_.bind(null,t):null}function Eh(t,e){var n=Di;return t.current.memoizedState.isDehydrated&&(kr(t,e).flags|=256),t=pl(t,e),t!==2&&(e=ft,ft=n,e!==null&&Th(e)),t}function Th(t){ft===null?ft=t:ft.push.apply(ft,t)}function QE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!zt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function On(t,e){for(e&=~Nd,e&=~$l,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ft(e),r=1<<n;t[n]=-1,e&=~r}}function qg(t){if(se&6)throw Error(U(327));vs();var e=Ja(t,0);if(!(e&1))return vt(t,ke()),null;var n=pl(t,e);if(t.tag!==0&&n===2){var r=Gc(t);r!==0&&(e=r,n=Eh(t,r))}if(n===1)throw n=no,kr(t,0),On(t,e),vt(t,ke()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wr(t,ft,ln),vt(t,ke()),null}function Ld(t,e){var n=se;se|=1;try{return t(e)}finally{se=n,se===0&&(Rs=ke()+500,Fl&&dr())}}function Vr(t){Bn!==null&&Bn.tag===0&&!(se&6)&&vs();var e=se;se|=1;var n=Pt.transition,r=ae;try{if(Pt.transition=null,ae=1,t)return t()}finally{ae=r,Pt.transition=n,se=e,!(se&6)&&dr()}}function Vd(){wt=hs.current,me(hs)}function kr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,SE(n)),Re!==null)for(n=Re.return;n!==null;){var r=n;switch(gd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&tl();break;case 3:ks(),me(mt),me(tt),xd();break;case 5:Id(r);break;case 4:ks();break;case 13:me(_e);break;case 19:me(_e);break;case 10:_d(r.type._context);break;case 22:case 23:Vd()}n=n.return}if(Oe=t,Re=t=Xn(t.current,null),ze=wt=e,Ne=0,no=null,Nd=$l=Lr=0,ft=Di=null,Ir!==null){for(e=0;e<Ir.length;e++)if(n=Ir[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ir=null}return t}function S_(t,e){do{var n=Re;try{if(vd(),Pa.current=cl,ul){for(var r=we.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ul=!1}if(Dr=0,Ve=be=we=null,bi=!1,Zi=0,bd.current=null,n===null||n.return===null){Ne=1,no=e,Re=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=ze,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,f=l,g=f.tag;if(!(f.mode&1)&&(g===0||g===11||g===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var x=bg(o);if(x!==null){x.flags&=-257,Ng(x,o,l,i,e),x.mode&1&&Pg(i,h,e),e=x,u=h;var C=e.updateQueue;if(C===null){var b=new Set;b.add(u),e.updateQueue=b}else C.add(u);break e}else{if(!(e&1)){Pg(i,h,e),Od();break e}u=Error(U(426))}}else if(ye&&l.mode&1){var L=bg(o);if(L!==null){!(L.flags&65536)&&(L.flags|=256),Ng(L,o,l,i,e),md(Cs(u,l));break e}}i=u=Cs(u,l),Ne!==4&&(Ne=2),Di===null?Di=[i]:Di.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=l_(i,u,e);xg(i,_);break e;case 1:l=u;var w=i.type,A=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Qn===null||!Qn.has(A)))){i.flags|=65536,e&=-e,i.lanes|=e;var N=u_(i,l,e);xg(i,N);break e}}i=i.return}while(i!==null)}C_(n)}catch(M){e=M,Re===n&&n!==null&&(Re=n=n.return);continue}break}while(!0)}function A_(){var t=hl.current;return hl.current=cl,t===null?cl:t}function Od(){(Ne===0||Ne===3||Ne===2)&&(Ne=4),Oe===null||!(Lr&268435455)&&!($l&268435455)||On(Oe,ze)}function pl(t,e){var n=se;se|=2;var r=A_();(Oe!==t||ze!==e)&&(ln=null,kr(t,e));do try{JE();break}catch(s){S_(t,s)}while(!0);if(vd(),se=n,hl.current=r,Re!==null)throw Error(U(261));return Oe=null,ze=0,Ne}function JE(){for(;Re!==null;)k_(Re)}function XE(){for(;Re!==null&&!T3();)k_(Re)}function k_(t){var e=P_(t.alternate,t,wt);t.memoizedProps=t.pendingProps,e===null?C_(t):Re=e,bd.current=null}function C_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=qE(n,e),n!==null){n.flags&=32767,Re=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ne=6,Re=null;return}}else if(n=$E(n,e,wt),n!==null){Re=n;return}if(e=e.sibling,e!==null){Re=e;return}Re=e=t}while(e!==null);Ne===0&&(Ne=5)}function wr(t,e,n){var r=ae,s=Pt.transition;try{Pt.transition=null,ae=1,YE(t,e,n,r)}finally{Pt.transition=s,ae=r}return null}function YE(t,e,n,r){do vs();while(Bn!==null);if(se&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(N3(t,i),t===Oe&&(Re=Oe=null,ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ma||(ma=!0,b_(Qa,function(){return vs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Pt.transition,Pt.transition=null;var o=ae;ae=1;var l=se;se|=4,bd.current=null,WE(t,n),T_(n,t),vE(Zc),Xa=!!Yc,Zc=Yc=null,t.current=n,GE(n),I3(),se=l,ae=o,Pt.transition=i}else t.current=n;if(ma&&(ma=!1,Bn=t,fl=s),i=t.pendingLanes,i===0&&(Qn=null),A3(n.stateNode),vt(t,ke()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(dl)throw dl=!1,t=_h,_h=null,t;return fl&1&&t.tag!==0&&vs(),i=t.pendingLanes,i&1?t===wh?Li++:(Li=0,wh=t):Li=0,dr(),null}function vs(){if(Bn!==null){var t=lv(fl),e=Pt.transition,n=ae;try{if(Pt.transition=null,ae=16>t?16:t,Bn===null)var r=!1;else{if(t=Bn,Bn=null,fl=0,se&6)throw Error(U(331));var s=se;for(se|=4,$=t.current;$!==null;){var i=$,o=i.child;if($.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for($=h;$!==null;){var f=$;switch(f.tag){case 0:case 11:case 15:Ni(8,f,i)}var g=f.child;if(g!==null)g.return=f,$=g;else for(;$!==null;){f=$;var m=f.sibling,x=f.return;if(__(f),f===h){$=null;break}if(m!==null){m.return=x,$=m;break}$=x}}}var C=i.alternate;if(C!==null){var b=C.child;if(b!==null){C.child=null;do{var L=b.sibling;b.sibling=null,b=L}while(b!==null)}}$=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,$=o;else e:for(;$!==null;){if(i=$,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ni(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,$=_;break e}$=i.return}}var w=t.current;for($=w;$!==null;){o=$;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,$=A;else e:for(o=w;$!==null;){if(l=$,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Bl(9,l)}}catch(M){xe(l,l.return,M)}if(l===o){$=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,$=N;break e}$=l.return}}if(se=s,dr(),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(Ll,t)}catch{}r=!0}return r}finally{ae=n,Pt.transition=e}}return!1}function Hg(t,e,n){e=Cs(n,e),e=l_(t,e,1),t=Kn(t,e,1),e=lt(),t!==null&&(go(t,1,e),vt(t,e))}function xe(t,e,n){if(t.tag===3)Hg(t,t,n);else for(;e!==null;){if(e.tag===3){Hg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qn===null||!Qn.has(r))){t=Cs(n,t),t=u_(e,t,1),e=Kn(e,t,1),t=lt(),e!==null&&(go(e,1,t),vt(e,t));break}}e=e.return}}function ZE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=lt(),t.pingedLanes|=t.suspendedLanes&n,Oe===t&&(ze&n)===n&&(Ne===4||Ne===3&&(ze&130023424)===ze&&500>ke()-Dd?kr(t,0):Nd|=n),vt(t,e)}function R_(t,e){e===0&&(t.mode&1?(e=oa,oa<<=1,!(oa&130023424)&&(oa=4194304)):e=1);var n=lt();t=_n(t,e),t!==null&&(go(t,e,n),vt(t,n))}function eT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),R_(t,n)}function tT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),R_(t,n)}var P_;P_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||mt.current)gt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return gt=!1,BE(t,e,n);gt=!!(t.flags&131072)}else gt=!1,ye&&e.flags&1048576&&Lv(e,sl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Na(t,e),t=e.pendingProps;var s=xs(e,tt.current);ys(e,n),s=Ad(null,e,r,t,s,n);var i=kd();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,yt(r)?(i=!0,nl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ed(e),s.updater=zl,e.stateNode=s,s._reactInternals=e,lh(e,r,t,n),e=hh(null,e,r,!0,i,n)):(e.tag=0,ye&&i&&pd(e),at(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Na(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=rT(r),t=Ot(r,t),s){case 0:e=ch(null,e,r,t,n);break e;case 1:e=Vg(null,e,r,t,n);break e;case 11:e=Dg(null,e,r,t,n);break e;case 14:e=Lg(null,e,r,Ot(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ot(r,s),ch(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ot(r,s),Vg(t,e,r,s,n);case 3:e:{if(f_(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Uv(t,e),al(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Cs(Error(U(423)),e),e=Og(t,e,r,n,s);break e}else if(r!==s){s=Cs(Error(U(424)),e),e=Og(t,e,r,n,s);break e}else for(Et=Gn(e.stateNode.containerInfo.firstChild),It=e,ye=!0,jt=null,n=jv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ss(),r===s){e=wn(t,e,n);break e}at(t,e,r,n)}e=e.child}return e;case 5:return zv(e),t===null&&ih(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,eh(r,s)?o=null:i!==null&&eh(r,i)&&(e.flags|=32),d_(t,e),at(t,e,o,n),e.child;case 6:return t===null&&ih(e),null;case 13:return p_(t,e,n);case 4:return Td(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=As(e,null,r,n):at(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ot(r,s),Dg(t,e,r,s,n);case 7:return at(t,e,e.pendingProps,n),e.child;case 8:return at(t,e,e.pendingProps.children,n),e.child;case 12:return at(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,de(il,r._currentValue),r._currentValue=o,i!==null)if(zt(i.value,o)){if(i.children===s.children&&!mt.current){e=wn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=mn(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?u.next=u:(u.next=f.next,f.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),oh(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),oh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}at(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ys(e,n),s=Nt(s),r=r(s),e.flags|=1,at(t,e,r,n),e.child;case 14:return r=e.type,s=Ot(r,e.pendingProps),s=Ot(r.type,s),Lg(t,e,r,s,n);case 15:return c_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ot(r,s),Na(t,e),e.tag=1,yt(r)?(t=!0,nl(e)):t=!1,ys(e,n),a_(e,r,s),lh(e,r,s,n),hh(null,e,r,!0,t,n);case 19:return g_(t,e,n);case 22:return h_(t,e,n)}throw Error(U(156,e.tag))};function b_(t,e){return sv(t,e)}function nT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rt(t,e,n,r){return new nT(t,e,n,r)}function Md(t){return t=t.prototype,!(!t||!t.isReactComponent)}function rT(t){if(typeof t=="function")return Md(t)?1:0;if(t!=null){if(t=t.$$typeof,t===nd)return 11;if(t===rd)return 14}return 2}function Xn(t,e){var n=t.alternate;return n===null?(n=Rt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Va(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Md(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ts:return Cr(n.children,s,i,e);case td:o=8,s|=8;break;case Nc:return t=Rt(12,n,e,s|2),t.elementType=Nc,t.lanes=i,t;case Dc:return t=Rt(13,n,e,s),t.elementType=Dc,t.lanes=i,t;case Lc:return t=Rt(19,n,e,s),t.elementType=Lc,t.lanes=i,t;case zy:return ql(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Fy:o=10;break e;case Uy:o=9;break e;case nd:o=11;break e;case rd:o=14;break e;case Dn:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Rt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Cr(t,e,n,r){return t=Rt(7,t,r,e),t.lanes=n,t}function ql(t,e,n,r){return t=Rt(22,t,r,e),t.elementType=zy,t.lanes=n,t.stateNode={isHidden:!1},t}function mc(t,e,n){return t=Rt(6,t,null,e),t.lanes=n,t}function yc(t,e,n){return e=Rt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function sT(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xu(0),this.expirationTimes=Xu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function jd(t,e,n,r,s,i,o,l,u){return t=new sT(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Rt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ed(i),t}function iT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:es,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function N_(t){if(!t)return sr;t=t._reactInternals;e:{if($r(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(yt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(yt(n))return Nv(t,n,e)}return e}function D_(t,e,n,r,s,i,o,l,u){return t=jd(n,r,!0,t,s,i,o,l,u),t.context=N_(null),n=t.current,r=lt(),s=Jn(n),i=mn(r,s),i.callback=e??null,Kn(n,i,s),t.current.lanes=s,go(t,s,r),vt(t,r),t}function Hl(t,e,n,r){var s=e.current,i=lt(),o=Jn(s);return n=N_(n),e.context===null?e.context=n:e.pendingContext=n,e=mn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Kn(s,e,o),t!==null&&(Ut(t,s,o,i),Ra(t,s,o)),o}function gl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Wg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Fd(t,e){Wg(t,e),(t=t.alternate)&&Wg(t,e)}function oT(){return null}var L_=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ud(t){this._internalRoot=t}Wl.prototype.render=Ud.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Hl(t,e,null,null)};Wl.prototype.unmount=Ud.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vr(function(){Hl(null,t,null,null)}),e[vn]=null}};function Wl(t){this._internalRoot=t}Wl.prototype.unstable_scheduleHydration=function(t){if(t){var e=hv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Vn.length&&e!==0&&e<Vn[n].priority;n++);Vn.splice(n,0,t),n===0&&fv(t)}};function zd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Gl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Gg(){}function aT(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=gl(o);i.call(h)}}var o=D_(e,r,t,0,null,!1,!1,"",Gg);return t._reactRootContainer=o,t[vn]=o.current,Ki(t.nodeType===8?t.parentNode:t),Vr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=gl(u);l.call(h)}}var u=jd(t,0,!1,null,null,!1,!1,"",Gg);return t._reactRootContainer=u,t[vn]=u.current,Ki(t.nodeType===8?t.parentNode:t),Vr(function(){Hl(e,u,n,r)}),u}function Kl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=gl(o);l.call(u)}}Hl(e,o,t,s)}else o=aT(n,e,t,s,r);return gl(o)}uv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=wi(e.pendingLanes);n!==0&&(od(e,n|1),vt(e,ke()),!(se&6)&&(Rs=ke()+500,dr()))}break;case 13:Vr(function(){var r=_n(t,1);if(r!==null){var s=lt();Ut(r,t,1,s)}}),Fd(t,1)}};ad=function(t){if(t.tag===13){var e=_n(t,134217728);if(e!==null){var n=lt();Ut(e,t,134217728,n)}Fd(t,134217728)}};cv=function(t){if(t.tag===13){var e=Jn(t),n=_n(t,e);if(n!==null){var r=lt();Ut(n,t,e,r)}Fd(t,e)}};hv=function(){return ae};dv=function(t,e){var n=ae;try{return ae=t,e()}finally{ae=n}};qc=function(t,e,n){switch(e){case"input":if(Mc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=jl(r);if(!s)throw Error(U(90));$y(r),Mc(r,s)}}}break;case"textarea":Hy(t,n);break;case"select":e=n.value,e!=null&&fs(t,!!n.multiple,e,!1)}};Yy=Ld;Zy=Vr;var lT={usingClientEntryPoint:!1,Events:[yo,is,jl,Jy,Xy,Ld]},gi={findFiberByHostInstance:Tr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uT={bundleType:gi.bundleType,version:gi.version,rendererPackageName:gi.rendererPackageName,rendererConfig:gi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:An.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=nv(t),t===null?null:t.stateNode},findFiberByHostInstance:gi.findFiberByHostInstance||oT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ya=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ya.isDisabled&&ya.supportsFiber)try{Ll=ya.inject(uT),Wt=ya}catch{}}St.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lT;St.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zd(e))throw Error(U(200));return iT(t,e,null,n)};St.createRoot=function(t,e){if(!zd(t))throw Error(U(299));var n=!1,r="",s=L_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=jd(t,1,!1,null,null,n,!1,r,s),t[vn]=e.current,Ki(t.nodeType===8?t.parentNode:t),new Ud(e)};St.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=nv(e),t=t===null?null:t.stateNode,t};St.flushSync=function(t){return Vr(t)};St.hydrate=function(t,e,n){if(!Gl(e))throw Error(U(200));return Kl(null,t,e,!0,n)};St.hydrateRoot=function(t,e,n){if(!zd(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=L_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=D_(e,null,t,1,n??null,s,!1,i,o),t[vn]=e.current,Ki(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Wl(e)};St.render=function(t,e,n){if(!Gl(e))throw Error(U(200));return Kl(null,t,e,!1,n)};St.unmountComponentAtNode=function(t){if(!Gl(t))throw Error(U(40));return t._reactRootContainer?(Vr(function(){Kl(null,null,t,!1,function(){t._reactRootContainer=null,t[vn]=null})}),!0):!1};St.unstable_batchedUpdates=Ld;St.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Gl(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Kl(t,e,n,!1,r)};St.version="18.3.1-next-f1338f8080-20240426";function V_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(V_)}catch(t){console.error(t)}}V_(),Vy.exports=St;var Ql=Vy.exports,Kg=Ql;Pc.createRoot=Kg.createRoot,Pc.hydrateRoot=Kg.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),re=(t,e)=>{const n=F.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:u,...h},f)=>F.createElement("svg",{ref:f,...cT,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${hT(t)}`,l].join(" "),...h},[...e.map(([g,m])=>F.createElement(g,m)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=re("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=re("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=re("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=re("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=re("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=re("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=re("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qg=re("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=re("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gT=re("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=re("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=re("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=re("Guitar",[["path",{d:"m20 7 1.7-1.7a1 1 0 0 0 0-1.4l-1.6-1.6a1 1 0 0 0-1.4 0L17 4v3Z",key:"15ixgv"}],["path",{d:"m17 7-5.1 5.1",key:"l9guh7"}],["circle",{cx:"11.5",cy:"12.5",r:".5",fill:"currentColor",key:"16onso"}],["path",{d:"M6 12a2 2 0 0 0 1.8-1.2l.4-.9C8.7 8.8 9.8 8 11 8c2.8 0 5 2.2 5 5 0 1.2-.8 2.3-1.9 2.8l-.9.4A2 2 0 0 0 12 18a4 4 0 0 1-4 4c-3.3 0-6-2.7-6-6a4 4 0 0 1 4-4",key:"x9fguj"}],["path",{d:"m6 16 2 2",key:"16qmzd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=re("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=re("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=re("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ET=re("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=re("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F_=re("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TT=re("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=re("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=re("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=re("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ST=re("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=re("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=re("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xh=re("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=re("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=re("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var Jg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},RT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},$_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,f=i>>2,g=(i&3)<<4|l>>4;let m=(l&15)<<2|h>>6,x=h&63;u||(x=64,o||(m=64)),r.push(n[f],n[g],n[m],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(B_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):RT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||g==null)throw new PT;const m=i<<2|l>>4;if(r.push(m),h!==64){const x=l<<4&240|h>>2;if(r.push(x),g!==64){const C=h<<6&192|g;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class PT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bT=function(t){const e=B_(t);return $_.encodeByteArray(e,!0)},ml=function(t){return bT(t).replace(/\./g,"")},q_=function(t){try{return $_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT=()=>NT().__FIREBASE_DEFAULTS__,LT=()=>{if(typeof process>"u"||typeof Jg>"u")return;const t=Jg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},VT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&q_(t[1]);return e&&JSON.parse(e)},Yl=()=>{try{return DT()||LT()||VT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},H_=t=>{var e,n;return(n=(e=Yl())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},OT=t=>{const e=H_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},W_=()=>{var t;return(t=Yl())===null||t===void 0?void 0:t.config},G_=t=>{var e;return(e=Yl())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ml(JSON.stringify(n)),ml(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function FT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nt())}function UT(){var t;const e=(t=Yl())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function BT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function $T(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qT(){const t=nt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function HT(){return!UT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function WT(){try{return typeof indexedDB=="object"}catch{return!1}}function GT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT="FirebaseError";class kn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=KT,Object.setPrototypeOf(this,kn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_o.prototype.create)}}class _o{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?QT(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new kn(s,l,r)}}function QT(t,e){return t.replace(JT,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const JT=/\{\$([^}]+)}/g;function XT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function yl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Xg(i)&&Xg(o)){if(!yl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Xg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function YT(t,e){const n=new ZT(t,e);return n.subscribe.bind(n)}class ZT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");eI(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=vc),s.error===void 0&&(s.error=vc),s.complete===void 0&&(s.complete=vc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function eI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function vc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(t){return t&&t._delegate?t._delegate:t}class Or{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new MT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rI(e))try{this.getOrInitializeService({instanceIdentifier:Er})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Er){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Er){return this.instances.has(e)}getOptions(e=Er){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:nI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Er){return this.component?this.component.multipleInstances?e:Er:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nI(t){return t===Er?void 0:t}function rI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new tI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var te;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(te||(te={}));const iI={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},oI=te.INFO,aI={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},lI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=aI[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Wd{constructor(e){this.name=e,this._logLevel=oI,this._logHandler=lI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...e),this._logHandler(this,te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...e),this._logHandler(this,te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,te.INFO,...e),this._logHandler(this,te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,te.WARN,...e),this._logHandler(this,te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...e),this._logHandler(this,te.ERROR,...e)}}const uI=(t,e)=>e.some(n=>t instanceof n);let Yg,Zg;function cI(){return Yg||(Yg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hI(){return Zg||(Zg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const K_=new WeakMap,Sh=new WeakMap,Q_=new WeakMap,_c=new WeakMap,Gd=new WeakMap;function dI(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Yn(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&K_.set(n,t)}).catch(()=>{}),Gd.set(e,t),e}function fI(t){if(Sh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Sh.set(t,e)}let Ah={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Sh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Q_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Yn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function pI(t){Ah=t(Ah)}function gI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(wc(this),e,...n);return Q_.set(r,e.sort?e.sort():[e]),Yn(r)}:hI().includes(t)?function(...e){return t.apply(wc(this),e),Yn(K_.get(this))}:function(...e){return Yn(t.apply(wc(this),e))}}function mI(t){return typeof t=="function"?gI(t):(t instanceof IDBTransaction&&fI(t),uI(t,cI())?new Proxy(t,Ah):t)}function Yn(t){if(t instanceof IDBRequest)return dI(t);if(_c.has(t))return _c.get(t);const e=mI(t);return e!==t&&(_c.set(t,e),Gd.set(e,t)),e}const wc=t=>Gd.get(t);function yI(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Yn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Yn(o.result),u.oldVersion,u.newVersion,Yn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const vI=["get","getKey","getAll","getAllKeys","count"],_I=["put","add","delete","clear"],Ec=new Map;function em(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ec.get(e))return Ec.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=_I.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||vI.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return Ec.set(e,i),i}pI(t=>({...t,get:(e,n,r)=>em(e,n)||t.get(e,n,r),has:(e,n)=>!!em(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(EI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function EI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const kh="@firebase/app",tm="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En=new Wd("@firebase/app"),TI="@firebase/app-compat",II="@firebase/analytics-compat",xI="@firebase/analytics",SI="@firebase/app-check-compat",AI="@firebase/app-check",kI="@firebase/auth",CI="@firebase/auth-compat",RI="@firebase/database",PI="@firebase/data-connect",bI="@firebase/database-compat",NI="@firebase/functions",DI="@firebase/functions-compat",LI="@firebase/installations",VI="@firebase/installations-compat",OI="@firebase/messaging",MI="@firebase/messaging-compat",jI="@firebase/performance",FI="@firebase/performance-compat",UI="@firebase/remote-config",zI="@firebase/remote-config-compat",BI="@firebase/storage",$I="@firebase/storage-compat",qI="@firebase/firestore",HI="@firebase/vertexai-preview",WI="@firebase/firestore-compat",GI="firebase",KI="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ch="[DEFAULT]",QI={[kh]:"fire-core",[TI]:"fire-core-compat",[xI]:"fire-analytics",[II]:"fire-analytics-compat",[AI]:"fire-app-check",[SI]:"fire-app-check-compat",[kI]:"fire-auth",[CI]:"fire-auth-compat",[RI]:"fire-rtdb",[PI]:"fire-data-connect",[bI]:"fire-rtdb-compat",[NI]:"fire-fn",[DI]:"fire-fn-compat",[LI]:"fire-iid",[VI]:"fire-iid-compat",[OI]:"fire-fcm",[MI]:"fire-fcm-compat",[jI]:"fire-perf",[FI]:"fire-perf-compat",[UI]:"fire-rc",[zI]:"fire-rc-compat",[BI]:"fire-gcs",[$I]:"fire-gcs-compat",[qI]:"fire-fst",[WI]:"fire-fst-compat",[HI]:"fire-vertex","fire-js":"fire-js",[GI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl=new Map,JI=new Map,Rh=new Map;function nm(t,e){try{t.container.addComponent(e)}catch(n){En.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ps(t){const e=t.name;if(Rh.has(e))return En.debug(`There were multiple attempts to register component ${e}.`),!1;Rh.set(e,t);for(const n of vl.values())nm(n,t);for(const n of JI.values())nm(n,t);return!0}function Kd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function dn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zn=new _o("app","Firebase",XI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Or("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs=KI;function J_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ch,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Zn.create("bad-app-name",{appName:String(s)});if(n||(n=W_()),!n)throw Zn.create("no-options");const i=vl.get(s);if(i){if(yl(n,i.options)&&yl(r,i.config))return i;throw Zn.create("duplicate-app",{appName:s})}const o=new sI(s);for(const u of Rh.values())o.addComponent(u);const l=new YI(n,r,o);return vl.set(s,l),l}function X_(t=Ch){const e=vl.get(t);if(!e&&t===Ch&&W_())return J_();if(!e)throw Zn.create("no-app",{appName:t});return e}function er(t,e,n){var r;let s=(r=QI[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),En.warn(l.join(" "));return}Ps(new Or(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI="firebase-heartbeat-database",e4=1,so="firebase-heartbeat-store";let Tc=null;function Y_(){return Tc||(Tc=yI(ZI,e4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(so)}catch(n){console.warn(n)}}}}).catch(t=>{throw Zn.create("idb-open",{originalErrorMessage:t.message})})),Tc}async function t4(t){try{const n=(await Y_()).transaction(so),r=await n.objectStore(so).get(Z_(t));return await n.done,r}catch(e){if(e instanceof kn)En.warn(e.message);else{const n=Zn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});En.warn(n.message)}}}async function rm(t,e){try{const r=(await Y_()).transaction(so,"readwrite");await r.objectStore(so).put(e,Z_(t)),await r.done}catch(n){if(n instanceof kn)En.warn(n.message);else{const r=Zn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});En.warn(r.message)}}}function Z_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4=1024,r4=30*24*60*60*1e3;class s4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new o4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=sm();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=r4}),this._storage.overwrite(this._heartbeatsCache))}catch(r){En.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=sm(),{heartbeatsToSend:r,unsentEntries:s}=i4(this._heartbeatsCache.heartbeats),i=ml(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return En.warn(n),""}}}function sm(){return new Date().toISOString().substring(0,10)}function i4(t,e=n4){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),im(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),im(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class o4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return WT()?GT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await t4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return rm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return rm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function im(t){return ml(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(t){Ps(new Or("platform-logger",e=>new wI(e),"PRIVATE")),Ps(new Or("heartbeat",e=>new s4(e),"PRIVATE")),er(kh,tm,t),er(kh,tm,"esm2017"),er("fire-js","")}a4("");var om=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rr,e0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,v){function E(){}E.prototype=v.prototype,T.D=v.prototype,T.prototype=new E,T.prototype.constructor=T,T.C=function(I,k,R){for(var S=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)S[rt-2]=arguments[rt];return v.prototype[k].apply(I,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,v,E){E||(E=0);var I=Array(16);if(typeof v=="string")for(var k=0;16>k;++k)I[k]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(k=0;16>k;++k)I[k]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=T.g[0],E=T.g[1],k=T.g[2];var R=T.g[3],S=v+(R^E&(k^R))+I[0]+3614090360&4294967295;v=E+(S<<7&4294967295|S>>>25),S=R+(k^v&(E^k))+I[1]+3905402710&4294967295,R=v+(S<<12&4294967295|S>>>20),S=k+(E^R&(v^E))+I[2]+606105819&4294967295,k=R+(S<<17&4294967295|S>>>15),S=E+(v^k&(R^v))+I[3]+3250441966&4294967295,E=k+(S<<22&4294967295|S>>>10),S=v+(R^E&(k^R))+I[4]+4118548399&4294967295,v=E+(S<<7&4294967295|S>>>25),S=R+(k^v&(E^k))+I[5]+1200080426&4294967295,R=v+(S<<12&4294967295|S>>>20),S=k+(E^R&(v^E))+I[6]+2821735955&4294967295,k=R+(S<<17&4294967295|S>>>15),S=E+(v^k&(R^v))+I[7]+4249261313&4294967295,E=k+(S<<22&4294967295|S>>>10),S=v+(R^E&(k^R))+I[8]+1770035416&4294967295,v=E+(S<<7&4294967295|S>>>25),S=R+(k^v&(E^k))+I[9]+2336552879&4294967295,R=v+(S<<12&4294967295|S>>>20),S=k+(E^R&(v^E))+I[10]+4294925233&4294967295,k=R+(S<<17&4294967295|S>>>15),S=E+(v^k&(R^v))+I[11]+2304563134&4294967295,E=k+(S<<22&4294967295|S>>>10),S=v+(R^E&(k^R))+I[12]+1804603682&4294967295,v=E+(S<<7&4294967295|S>>>25),S=R+(k^v&(E^k))+I[13]+4254626195&4294967295,R=v+(S<<12&4294967295|S>>>20),S=k+(E^R&(v^E))+I[14]+2792965006&4294967295,k=R+(S<<17&4294967295|S>>>15),S=E+(v^k&(R^v))+I[15]+1236535329&4294967295,E=k+(S<<22&4294967295|S>>>10),S=v+(k^R&(E^k))+I[1]+4129170786&4294967295,v=E+(S<<5&4294967295|S>>>27),S=R+(E^k&(v^E))+I[6]+3225465664&4294967295,R=v+(S<<9&4294967295|S>>>23),S=k+(v^E&(R^v))+I[11]+643717713&4294967295,k=R+(S<<14&4294967295|S>>>18),S=E+(R^v&(k^R))+I[0]+3921069994&4294967295,E=k+(S<<20&4294967295|S>>>12),S=v+(k^R&(E^k))+I[5]+3593408605&4294967295,v=E+(S<<5&4294967295|S>>>27),S=R+(E^k&(v^E))+I[10]+38016083&4294967295,R=v+(S<<9&4294967295|S>>>23),S=k+(v^E&(R^v))+I[15]+3634488961&4294967295,k=R+(S<<14&4294967295|S>>>18),S=E+(R^v&(k^R))+I[4]+3889429448&4294967295,E=k+(S<<20&4294967295|S>>>12),S=v+(k^R&(E^k))+I[9]+568446438&4294967295,v=E+(S<<5&4294967295|S>>>27),S=R+(E^k&(v^E))+I[14]+3275163606&4294967295,R=v+(S<<9&4294967295|S>>>23),S=k+(v^E&(R^v))+I[3]+4107603335&4294967295,k=R+(S<<14&4294967295|S>>>18),S=E+(R^v&(k^R))+I[8]+1163531501&4294967295,E=k+(S<<20&4294967295|S>>>12),S=v+(k^R&(E^k))+I[13]+2850285829&4294967295,v=E+(S<<5&4294967295|S>>>27),S=R+(E^k&(v^E))+I[2]+4243563512&4294967295,R=v+(S<<9&4294967295|S>>>23),S=k+(v^E&(R^v))+I[7]+1735328473&4294967295,k=R+(S<<14&4294967295|S>>>18),S=E+(R^v&(k^R))+I[12]+2368359562&4294967295,E=k+(S<<20&4294967295|S>>>12),S=v+(E^k^R)+I[5]+4294588738&4294967295,v=E+(S<<4&4294967295|S>>>28),S=R+(v^E^k)+I[8]+2272392833&4294967295,R=v+(S<<11&4294967295|S>>>21),S=k+(R^v^E)+I[11]+1839030562&4294967295,k=R+(S<<16&4294967295|S>>>16),S=E+(k^R^v)+I[14]+4259657740&4294967295,E=k+(S<<23&4294967295|S>>>9),S=v+(E^k^R)+I[1]+2763975236&4294967295,v=E+(S<<4&4294967295|S>>>28),S=R+(v^E^k)+I[4]+1272893353&4294967295,R=v+(S<<11&4294967295|S>>>21),S=k+(R^v^E)+I[7]+4139469664&4294967295,k=R+(S<<16&4294967295|S>>>16),S=E+(k^R^v)+I[10]+3200236656&4294967295,E=k+(S<<23&4294967295|S>>>9),S=v+(E^k^R)+I[13]+681279174&4294967295,v=E+(S<<4&4294967295|S>>>28),S=R+(v^E^k)+I[0]+3936430074&4294967295,R=v+(S<<11&4294967295|S>>>21),S=k+(R^v^E)+I[3]+3572445317&4294967295,k=R+(S<<16&4294967295|S>>>16),S=E+(k^R^v)+I[6]+76029189&4294967295,E=k+(S<<23&4294967295|S>>>9),S=v+(E^k^R)+I[9]+3654602809&4294967295,v=E+(S<<4&4294967295|S>>>28),S=R+(v^E^k)+I[12]+3873151461&4294967295,R=v+(S<<11&4294967295|S>>>21),S=k+(R^v^E)+I[15]+530742520&4294967295,k=R+(S<<16&4294967295|S>>>16),S=E+(k^R^v)+I[2]+3299628645&4294967295,E=k+(S<<23&4294967295|S>>>9),S=v+(k^(E|~R))+I[0]+4096336452&4294967295,v=E+(S<<6&4294967295|S>>>26),S=R+(E^(v|~k))+I[7]+1126891415&4294967295,R=v+(S<<10&4294967295|S>>>22),S=k+(v^(R|~E))+I[14]+2878612391&4294967295,k=R+(S<<15&4294967295|S>>>17),S=E+(R^(k|~v))+I[5]+4237533241&4294967295,E=k+(S<<21&4294967295|S>>>11),S=v+(k^(E|~R))+I[12]+1700485571&4294967295,v=E+(S<<6&4294967295|S>>>26),S=R+(E^(v|~k))+I[3]+2399980690&4294967295,R=v+(S<<10&4294967295|S>>>22),S=k+(v^(R|~E))+I[10]+4293915773&4294967295,k=R+(S<<15&4294967295|S>>>17),S=E+(R^(k|~v))+I[1]+2240044497&4294967295,E=k+(S<<21&4294967295|S>>>11),S=v+(k^(E|~R))+I[8]+1873313359&4294967295,v=E+(S<<6&4294967295|S>>>26),S=R+(E^(v|~k))+I[15]+4264355552&4294967295,R=v+(S<<10&4294967295|S>>>22),S=k+(v^(R|~E))+I[6]+2734768916&4294967295,k=R+(S<<15&4294967295|S>>>17),S=E+(R^(k|~v))+I[13]+1309151649&4294967295,E=k+(S<<21&4294967295|S>>>11),S=v+(k^(E|~R))+I[4]+4149444226&4294967295,v=E+(S<<6&4294967295|S>>>26),S=R+(E^(v|~k))+I[11]+3174756917&4294967295,R=v+(S<<10&4294967295|S>>>22),S=k+(v^(R|~E))+I[2]+718787259&4294967295,k=R+(S<<15&4294967295|S>>>17),S=E+(R^(k|~v))+I[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(k+(S<<21&4294967295|S>>>11))&4294967295,T.g[2]=T.g[2]+k&4294967295,T.g[3]=T.g[3]+R&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var E=v-this.blockSize,I=this.B,k=this.h,R=0;R<v;){if(k==0)for(;R<=E;)s(this,T,R),R+=this.blockSize;if(typeof T=="string"){for(;R<v;)if(I[k++]=T.charCodeAt(R++),k==this.blockSize){s(this,I),k=0;break}}else for(;R<v;)if(I[k++]=T[R++],k==this.blockSize){s(this,I),k=0;break}}this.h=k,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var E=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=E&255,E/=256;for(this.u(T),T=Array(16),v=E=0;4>v;++v)for(var I=0;32>I;I+=8)T[E++]=this.g[v]>>>I&255;return T};function i(T,v){var E=l;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=v(T)}function o(T,v){this.h=v;for(var E=[],I=!0,k=T.length-1;0<=k;k--){var R=T[k]|0;I&&R==v||(E[k]=R,I=!1)}this.g=E}var l={};function u(T){return-128<=T&&128>T?i(T,function(v){return new o([v|0],0>v?-1:0)}):new o([T|0],0>T?-1:0)}function h(T){if(isNaN(T)||!isFinite(T))return g;if(0>T)return L(h(-T));for(var v=[],E=1,I=0;T>=E;I++)v[I]=T/E|0,E*=4294967296;return new o(v,0)}function f(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return L(f(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=h(Math.pow(v,8)),I=g,k=0;k<T.length;k+=8){var R=Math.min(8,T.length-k),S=parseInt(T.substring(k,k+R),v);8>R?(R=h(Math.pow(v,R)),I=I.j(R).add(h(S))):(I=I.j(E),I=I.add(h(S)))}return I}var g=u(0),m=u(1),x=u(16777216);t=o.prototype,t.m=function(){if(b(this))return-L(this).m();for(var T=0,v=1,E=0;E<this.g.length;E++){var I=this.i(E);T+=(0<=I?I:4294967296+I)*v,v*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(C(this))return"0";if(b(this))return"-"+L(this).toString(T);for(var v=h(Math.pow(T,6)),E=this,I="";;){var k=N(E,v).g;E=_(E,k.j(v));var R=((0<E.g.length?E.g[0]:E.h)>>>0).toString(T);if(E=k,C(E))return R+I;for(;6>R.length;)R="0"+R;I=R+I}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function C(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function b(T){return T.h==-1}t.l=function(T){return T=_(this,T),b(T)?-1:C(T)?0:1};function L(T){for(var v=T.g.length,E=[],I=0;I<v;I++)E[I]=~T.g[I];return new o(E,~T.h).add(m)}t.abs=function(){return b(this)?L(this):this},t.add=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],I=0,k=0;k<=v;k++){var R=I+(this.i(k)&65535)+(T.i(k)&65535),S=(R>>>16)+(this.i(k)>>>16)+(T.i(k)>>>16);I=S>>>16,R&=65535,S&=65535,E[k]=S<<16|R}return new o(E,E[E.length-1]&-2147483648?-1:0)};function _(T,v){return T.add(L(v))}t.j=function(T){if(C(this)||C(T))return g;if(b(this))return b(T)?L(this).j(L(T)):L(L(this).j(T));if(b(T))return L(this.j(L(T)));if(0>this.l(x)&&0>T.l(x))return h(this.m()*T.m());for(var v=this.g.length+T.g.length,E=[],I=0;I<2*v;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(var k=0;k<T.g.length;k++){var R=this.i(I)>>>16,S=this.i(I)&65535,rt=T.i(k)>>>16,ue=T.i(k)&65535;E[2*I+2*k]+=S*ue,w(E,2*I+2*k),E[2*I+2*k+1]+=R*ue,w(E,2*I+2*k+1),E[2*I+2*k+1]+=S*rt,w(E,2*I+2*k+1),E[2*I+2*k+2]+=R*rt,w(E,2*I+2*k+2)}for(I=0;I<v;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=v;I<2*v;I++)E[I]=0;return new o(E,0)};function w(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function A(T,v){this.g=T,this.h=v}function N(T,v){if(C(v))throw Error("division by zero");if(C(T))return new A(g,g);if(b(T))return v=N(L(T),v),new A(L(v.g),L(v.h));if(b(v))return v=N(T,L(v)),new A(L(v.g),v.h);if(30<T.g.length){if(b(T)||b(v))throw Error("slowDivide_ only works with positive integers.");for(var E=m,I=v;0>=I.l(T);)E=M(E),I=M(I);var k=j(E,1),R=j(I,1);for(I=j(I,2),E=j(E,2);!C(I);){var S=R.add(I);0>=S.l(T)&&(k=k.add(E),R=S),I=j(I,1),E=j(E,1)}return v=_(T,k.j(v)),new A(k,v)}for(k=g;0<=T.l(v);){for(E=Math.max(1,Math.floor(T.m()/v.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),R=h(E),S=R.j(v);b(S)||0<S.l(T);)E-=I,R=h(E),S=R.j(v);C(R)&&(R=m),k=k.add(R),T=_(T,S)}return new A(k,T)}t.A=function(T){return N(this,T).h},t.and=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)&T.i(I);return new o(E,this.h&T.h)},t.or=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)|T.i(I);return new o(E,this.h|T.h)},t.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)^T.i(I);return new o(E,this.h^T.h)};function M(T){for(var v=T.g.length+1,E=[],I=0;I<v;I++)E[I]=T.i(I)<<1|T.i(I-1)>>>31;return new o(E,T.h)}function j(T,v){var E=v>>5;v%=32;for(var I=T.g.length-E,k=[],R=0;R<I;R++)k[R]=0<v?T.i(R+E)>>>v|T.i(R+E+1)<<32-v:T.i(R+E);return new o(k,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,e0=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,Rr=o}).apply(typeof om<"u"?om:typeof self<"u"?self:typeof window<"u"?window:{});var va=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var t0,Ti,n0,Oa,Ph,r0,s0,i0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,c,d){return a==Array.prototype||a==Object.prototype||(a[c]=d.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof va=="object"&&va];for(var c=0;c<a.length;++c){var d=a[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function s(a,c){if(c)e:{var d=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var P=a[y];if(!(P in d))break e;d=d[P]}a=a[a.length-1],y=d[a],c=c(y),c!=y&&c!=null&&e(d,a,{configurable:!0,writable:!0,value:c})}}function i(a,c){a instanceof String&&(a+="");var d=0,y=!1,P={next:function(){if(!y&&d<a.length){var D=d++;return{value:c(D,a[D]),done:!1}}return y=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}s("Array.prototype.values",function(a){return a||function(){return i(this,function(c,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var c=typeof a;return c=c!="object"?c:a?Array.isArray(a)?"array":c:"null",c=="array"||c=="object"&&typeof a.length=="number"}function h(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function f(a,c,d){return a.call.apply(a.bind,arguments)}function g(a,c,d){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,y),a.apply(c,P)}}return function(){return a.apply(c,arguments)}}function m(a,c,d){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,m.apply(null,arguments)}function x(a,c){var d=Array.prototype.slice.call(arguments,1);return function(){var y=d.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function C(a,c){function d(){}d.prototype=c.prototype,a.aa=c.prototype,a.prototype=new d,a.prototype.constructor=a,a.Qb=function(y,P,D){for(var z=Array(arguments.length-2),he=2;he<arguments.length;he++)z[he-2]=arguments[he];return c.prototype[P].apply(y,z)}}function b(a){const c=a.length;if(0<c){const d=Array(c);for(let y=0;y<c;y++)d[y]=a[y];return d}return[]}function L(a,c){for(let d=1;d<arguments.length;d++){const y=arguments[d];if(u(y)){const P=a.length||0,D=y.length||0;a.length=P+D;for(let z=0;z<D;z++)a[P+z]=y[z]}else a.push(y)}}class _{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function w(a){return/^[\s\xa0]*$/.test(a)}function A(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function N(a){return N[" "](a),a}N[" "]=function(){};var M=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function j(a,c,d){for(const y in a)c.call(d,a[y],y,a)}function T(a,c){for(const d in a)c.call(void 0,a[d],d,a)}function v(a){const c={};for(const d in a)c[d]=a[d];return c}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(a,c){let d,y;for(let P=1;P<arguments.length;P++){y=arguments[P];for(d in y)a[d]=y[d];for(let D=0;D<E.length;D++)d=E[D],Object.prototype.hasOwnProperty.call(y,d)&&(a[d]=y[d])}}function k(a){var c=1;a=a.split(":");const d=[];for(;0<c&&a.length;)d.push(a.shift()),c--;return a.length&&d.push(a.join(":")),d}function R(a){l.setTimeout(()=>{throw a},0)}function S(){var a=G;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class rt{constructor(){this.h=this.g=null}add(c,d){const y=ue.get();y.set(c,d),this.h?this.h.next=y:this.g=y,this.h=y}}var ue=new _(()=>new st,a=>a.reset());class st{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let dt,B=!1,G=new rt,Y=()=>{const a=l.Promise.resolve(void 0);dt=()=>{a.then(ve)}};var ve=()=>{for(var a;a=S();){try{a.h.call(a.g)}catch(d){R(d)}var c=ue;c.j(a),100>c.h&&(c.h++,a.next=c.g,c.g=a)}B=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var en=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};l.addEventListener("test",d,c),l.removeEventListener("test",d,c)}catch{}return a}();function tn(a,c){if(Se.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var d=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget){if(M){e:{try{N(c.nodeName);var P=!0;break e}catch{}P=!1}P||(c=null)}}else d=="mouseover"?c=a.fromElement:d=="mouseout"&&(c=a.toElement);this.relatedTarget=c,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:nn[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&tn.aa.h.call(this)}}C(tn,Se);var nn={2:"touch",3:"pen",4:"mouse"};tn.prototype.h=function(){tn.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var rn="closure_listenable_"+(1e6*Math.random()|0),a1=0;function l1(a,c,d,y,P){this.listener=a,this.proxy=null,this.src=c,this.type=d,this.capture=!!y,this.ha=P,this.key=++a1,this.da=this.fa=!1}function Mo(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function jo(a){this.src=a,this.g={},this.h=0}jo.prototype.add=function(a,c,d,y,P){var D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);var z=xu(a,c,y,P);return-1<z?(c=a[z],d||(c.fa=!1)):(c=new l1(c,this.src,D,!!y,P),c.fa=d,a.push(c)),c};function Iu(a,c){var d=c.type;if(d in a.g){var y=a.g[d],P=Array.prototype.indexOf.call(y,c,void 0),D;(D=0<=P)&&Array.prototype.splice.call(y,P,1),D&&(Mo(c),a.g[d].length==0&&(delete a.g[d],a.h--))}}function xu(a,c,d,y){for(var P=0;P<a.length;++P){var D=a[P];if(!D.da&&D.listener==c&&D.capture==!!d&&D.ha==y)return P}return-1}var Su="closure_lm_"+(1e6*Math.random()|0),Au={};function zf(a,c,d,y,P){if(Array.isArray(c)){for(var D=0;D<c.length;D++)zf(a,c[D],d,y,P);return null}return d=qf(d),a&&a[rn]?a.K(c,d,h(y)?!!y.capture:!1,P):u1(a,c,d,!1,y,P)}function u1(a,c,d,y,P,D){if(!c)throw Error("Invalid event type");var z=h(P)?!!P.capture:!!P,he=Cu(a);if(he||(a[Su]=he=new jo(a)),d=he.add(c,d,y,z,D),d.proxy)return d;if(y=c1(),d.proxy=y,y.src=a,y.listener=d,a.addEventListener)en||(P=z),P===void 0&&(P=!1),a.addEventListener(c.toString(),y,P);else if(a.attachEvent)a.attachEvent($f(c.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return d}function c1(){function a(d){return c.call(a.src,a.listener,d)}const c=h1;return a}function Bf(a,c,d,y,P){if(Array.isArray(c))for(var D=0;D<c.length;D++)Bf(a,c[D],d,y,P);else y=h(y)?!!y.capture:!!y,d=qf(d),a&&a[rn]?(a=a.i,c=String(c).toString(),c in a.g&&(D=a.g[c],d=xu(D,d,y,P),-1<d&&(Mo(D[d]),Array.prototype.splice.call(D,d,1),D.length==0&&(delete a.g[c],a.h--)))):a&&(a=Cu(a))&&(c=a.g[c.toString()],a=-1,c&&(a=xu(c,d,y,P)),(d=-1<a?c[a]:null)&&ku(d))}function ku(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[rn])Iu(c.i,a);else{var d=a.type,y=a.proxy;c.removeEventListener?c.removeEventListener(d,y,a.capture):c.detachEvent?c.detachEvent($f(d),y):c.addListener&&c.removeListener&&c.removeListener(y),(d=Cu(c))?(Iu(d,a),d.h==0&&(d.src=null,c[Su]=null)):Mo(a)}}}function $f(a){return a in Au?Au[a]:Au[a]="on"+a}function h1(a,c){if(a.da)a=!0;else{c=new tn(c,this);var d=a.listener,y=a.ha||a.src;a.fa&&ku(a),a=d.call(y,c)}return a}function Cu(a){return a=a[Su],a instanceof jo?a:null}var Ru="__closure_events_fn_"+(1e9*Math.random()>>>0);function qf(a){return typeof a=="function"?a:(a[Ru]||(a[Ru]=function(c){return a.handleEvent(c)}),a[Ru])}function We(){ce.call(this),this.i=new jo(this),this.M=this,this.F=null}C(We,ce),We.prototype[rn]=!0,We.prototype.removeEventListener=function(a,c,d,y){Bf(this,a,c,d,y)};function it(a,c){var d,y=a.F;if(y)for(d=[];y;y=y.F)d.push(y);if(a=a.M,y=c.type||c,typeof c=="string")c=new Se(c,a);else if(c instanceof Se)c.target=c.target||a;else{var P=c;c=new Se(y,a),I(c,P)}if(P=!0,d)for(var D=d.length-1;0<=D;D--){var z=c.g=d[D];P=Fo(z,y,!0,c)&&P}if(z=c.g=a,P=Fo(z,y,!0,c)&&P,P=Fo(z,y,!1,c)&&P,d)for(D=0;D<d.length;D++)z=c.g=d[D],P=Fo(z,y,!1,c)&&P}We.prototype.N=function(){if(We.aa.N.call(this),this.i){var a=this.i,c;for(c in a.g){for(var d=a.g[c],y=0;y<d.length;y++)Mo(d[y]);delete a.g[c],a.h--}}this.F=null},We.prototype.K=function(a,c,d,y){return this.i.add(String(a),c,!1,d,y)},We.prototype.L=function(a,c,d,y){return this.i.add(String(a),c,!0,d,y)};function Fo(a,c,d,y){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();for(var P=!0,D=0;D<c.length;++D){var z=c[D];if(z&&!z.da&&z.capture==d){var he=z.listener,Me=z.ha||z.src;z.fa&&Iu(a.i,z),P=he.call(Me,y)!==!1&&P}}return P&&!y.defaultPrevented}function Hf(a,c,d){if(typeof a=="function")d&&(a=m(a,d));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(a,c||0)}function Wf(a){a.g=Hf(()=>{a.g=null,a.i&&(a.i=!1,Wf(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class d1 extends ce{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Wf(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qs(a){ce.call(this),this.h=a,this.g={}}C(Qs,ce);var Gf=[];function Kf(a){j(a.g,function(c,d){this.g.hasOwnProperty(d)&&ku(c)},a),a.g={}}Qs.prototype.N=function(){Qs.aa.N.call(this),Kf(this)},Qs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pu=l.JSON.stringify,f1=l.JSON.parse,p1=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function bu(){}bu.prototype.h=null;function Qf(a){return a.h||(a.h=a.i())}function Jf(){}var Js={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Nu(){Se.call(this,"d")}C(Nu,Se);function Du(){Se.call(this,"c")}C(Du,Se);var gr={},Xf=null;function Uo(){return Xf=Xf||new We}gr.La="serverreachability";function Yf(a){Se.call(this,gr.La,a)}C(Yf,Se);function Xs(a){const c=Uo();it(c,new Yf(c))}gr.STAT_EVENT="statevent";function Zf(a,c){Se.call(this,gr.STAT_EVENT,a),this.stat=c}C(Zf,Se);function ot(a){const c=Uo();it(c,new Zf(c,a))}gr.Ma="timingevent";function ep(a,c){Se.call(this,gr.Ma,a),this.size=c}C(ep,Se);function Ys(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},c)}function Zs(){this.g=!0}Zs.prototype.xa=function(){this.g=!1};function g1(a,c,d,y,P,D){a.info(function(){if(a.g)if(D)for(var z="",he=D.split("&"),Me=0;Me<he.length;Me++){var ie=he[Me].split("=");if(1<ie.length){var Ge=ie[0];ie=ie[1];var Ke=Ge.split("_");z=2<=Ke.length&&Ke[1]=="type"?z+(Ge+"="+ie+"&"):z+(Ge+"=redacted&")}}else z=null;else z=D;return"XMLHTTP REQ ("+y+") [attempt "+P+"]: "+c+`
`+d+`
`+z})}function m1(a,c,d,y,P,D,z){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+P+"]: "+c+`
`+d+`
`+D+" "+z})}function Wr(a,c,d,y){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+v1(a,d)+(y?" "+y:"")})}function y1(a,c){a.info(function(){return"TIMEOUT: "+c})}Zs.prototype.info=function(){};function v1(a,c){if(!a.g)return c;if(!c)return null;try{var d=JSON.parse(c);if(d){for(a=0;a<d.length;a++)if(Array.isArray(d[a])){var y=d[a];if(!(2>y.length)){var P=y[1];if(Array.isArray(P)&&!(1>P.length)){var D=P[0];if(D!="noop"&&D!="stop"&&D!="close")for(var z=1;z<P.length;z++)P[z]=""}}}}return Pu(d)}catch{return c}}var zo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},tp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Lu;function Bo(){}C(Bo,bu),Bo.prototype.g=function(){return new XMLHttpRequest},Bo.prototype.i=function(){return{}},Lu=new Bo;function Cn(a,c,d,y){this.j=a,this.i=c,this.l=d,this.R=y||1,this.U=new Qs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new np}function np(){this.i=null,this.g="",this.h=!1}var rp={},Vu={};function Ou(a,c,d){a.L=1,a.v=Wo(sn(c)),a.m=d,a.P=!0,sp(a,null)}function sp(a,c){a.F=Date.now(),$o(a),a.A=sn(a.v);var d=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),vp(d.i,"t",y),a.C=0,d=a.j.J,a.h=new np,a.g=Op(a.j,d?c:null,!a.m),0<a.O&&(a.M=new d1(m(a.Y,a,a.g),a.O)),c=a.U,d=a.g,y=a.ca;var P="readystatechange";Array.isArray(P)||(P&&(Gf[0]=P.toString()),P=Gf);for(var D=0;D<P.length;D++){var z=zf(d,P[D],y||c.handleEvent,!1,c.h||c);if(!z)break;c.g[z.key]=z}c=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,c)):(a.u="GET",a.g.ea(a.A,a.u,null,c)),Xs(),g1(a.i,a.u,a.A,a.l,a.R,a.m)}Cn.prototype.ca=function(a){a=a.target;const c=this.M;c&&on(a)==3?c.j():this.Y(a)},Cn.prototype.Y=function(a){try{if(a==this.g)e:{const Ke=on(this.g);var c=this.g.Ba();const Qr=this.g.Z();if(!(3>Ke)&&(Ke!=3||this.g&&(this.h.h||this.g.oa()||Sp(this.g)))){this.J||Ke!=4||c==7||(c==8||0>=Qr?Xs(3):Xs(2)),Mu(this);var d=this.g.Z();this.X=d;t:if(ip(this)){var y=Sp(this.g);a="";var P=y.length,D=on(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mr(this),ei(this);var z="";break t}this.h.i=new l.TextDecoder}for(c=0;c<P;c++)this.h.h=!0,a+=this.h.i.decode(y[c],{stream:!(D&&c==P-1)});y.length=0,this.h.g+=a,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=d==200,m1(this.i,this.u,this.A,this.l,this.R,Ke,d),this.o){if(this.T&&!this.K){t:{if(this.g){var he,Me=this.g;if((he=Me.g?Me.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(he)){var ie=he;break t}}ie=null}if(d=ie)Wr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ju(this,d);else{this.o=!1,this.s=3,ot(12),mr(this),ei(this);break e}}if(this.P){d=!0;let Lt;for(;!this.J&&this.C<z.length;)if(Lt=_1(this,z),Lt==Vu){Ke==4&&(this.s=4,ot(14),d=!1),Wr(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==rp){this.s=4,ot(15),Wr(this.i,this.l,z,"[Invalid Chunk]"),d=!1;break}else Wr(this.i,this.l,Lt,null),ju(this,Lt);if(ip(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ke!=4||z.length!=0||this.h.h||(this.s=1,ot(16),d=!1),this.o=this.o&&d,!d)Wr(this.i,this.l,z,"[Invalid Chunked Response]"),mr(this),ei(this);else if(0<z.length&&!this.W){this.W=!0;var Ge=this.j;Ge.g==this&&Ge.ba&&!Ge.M&&(Ge.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),qu(Ge),Ge.M=!0,ot(11))}}else Wr(this.i,this.l,z,null),ju(this,z);Ke==4&&mr(this),this.o&&!this.J&&(Ke==4?Np(this.j,this):(this.o=!1,$o(this)))}else O1(this.g),d==400&&0<z.indexOf("Unknown SID")?(this.s=3,ot(12)):(this.s=0,ot(13)),mr(this),ei(this)}}}catch{}finally{}};function ip(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function _1(a,c){var d=a.C,y=c.indexOf(`
`,d);return y==-1?Vu:(d=Number(c.substring(d,y)),isNaN(d)?rp:(y+=1,y+d>c.length?Vu:(c=c.slice(y,y+d),a.C=y+d,c)))}Cn.prototype.cancel=function(){this.J=!0,mr(this)};function $o(a){a.S=Date.now()+a.I,op(a,a.I)}function op(a,c){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Ys(m(a.ba,a),c)}function Mu(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Cn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(y1(this.i,this.A),this.L!=2&&(Xs(),ot(17)),mr(this),this.s=2,ei(this)):op(this,this.S-a)};function ei(a){a.j.G==0||a.J||Np(a.j,a)}function mr(a){Mu(a);var c=a.M;c&&typeof c.ma=="function"&&c.ma(),a.M=null,Kf(a.U),a.g&&(c=a.g,a.g=null,c.abort(),c.ma())}function ju(a,c){try{var d=a.j;if(d.G!=0&&(d.g==a||Fu(d.h,a))){if(!a.K&&Fu(d.h,a)&&d.G==3){try{var y=d.Da.g.parse(c)}catch{y=null}if(Array.isArray(y)&&y.length==3){var P=y;if(P[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<a.F)Yo(d),Jo(d);else break e;$u(d),ot(18)}}else d.za=P[1],0<d.za-d.T&&37500>P[2]&&d.F&&d.v==0&&!d.C&&(d.C=Ys(m(d.Za,d),6e3));if(1>=up(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else vr(d,11)}else if((a.K||d.g==a)&&Yo(d),!w(c))for(P=d.Da.g.parse(c),c=0;c<P.length;c++){let ie=P[c];if(d.T=ie[0],ie=ie[1],d.G==2)if(ie[0]=="c"){d.K=ie[1],d.ia=ie[2];const Ge=ie[3];Ge!=null&&(d.la=Ge,d.j.info("VER="+d.la));const Ke=ie[4];Ke!=null&&(d.Aa=Ke,d.j.info("SVER="+d.Aa));const Qr=ie[5];Qr!=null&&typeof Qr=="number"&&0<Qr&&(y=1.5*Qr,d.L=y,d.j.info("backChannelRequestTimeoutMs_="+y)),y=d;const Lt=a.g;if(Lt){const ea=Lt.g?Lt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ea){var D=y.h;D.g||ea.indexOf("spdy")==-1&&ea.indexOf("quic")==-1&&ea.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(Uu(D,D.h),D.h=null))}if(y.D){const Hu=Lt.g?Lt.g.getResponseHeader("X-HTTP-Session-Id"):null;Hu&&(y.ya=Hu,fe(y.I,y.D,Hu))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-a.F,d.j.info("Handshake RTT: "+d.R+"ms")),y=d;var z=a;if(y.qa=Vp(y,y.J?y.ia:null,y.W),z.K){cp(y.h,z);var he=z,Me=y.L;Me&&(he.I=Me),he.B&&(Mu(he),$o(he)),y.g=z}else Pp(y);0<d.i.length&&Xo(d)}else ie[0]!="stop"&&ie[0]!="close"||vr(d,7);else d.G==3&&(ie[0]=="stop"||ie[0]=="close"?ie[0]=="stop"?vr(d,7):Bu(d):ie[0]!="noop"&&d.l&&d.l.ta(ie),d.v=0)}}Xs(4)}catch{}}var w1=class{constructor(a,c){this.g=a,this.map=c}};function ap(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function lp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function up(a){return a.h?1:a.g?a.g.size:0}function Fu(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function Uu(a,c){a.g?a.g.add(c):a.h=c}function cp(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}ap.prototype.cancel=function(){if(this.i=hp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function hp(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const d of a.g.values())c=c.concat(d.D);return c}return b(a.i)}function E1(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var c=[],d=a.length,y=0;y<d;y++)c.push(a[y]);return c}c=[],d=0;for(y in a)c[d++]=a[y];return c}function T1(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var c=[];a=a.length;for(var d=0;d<a;d++)c.push(d);return c}c=[],d=0;for(const y in a)c[d++]=y;return c}}}function dp(a,c){if(a.forEach&&typeof a.forEach=="function")a.forEach(c,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,c,void 0);else for(var d=T1(a),y=E1(a),P=y.length,D=0;D<P;D++)c.call(void 0,y[D],d&&d[D],a)}var fp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function I1(a,c){if(a){a=a.split("&");for(var d=0;d<a.length;d++){var y=a[d].indexOf("="),P=null;if(0<=y){var D=a[d].substring(0,y);P=a[d].substring(y+1)}else D=a[d];c(D,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function yr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof yr){this.h=a.h,qo(this,a.j),this.o=a.o,this.g=a.g,Ho(this,a.s),this.l=a.l;var c=a.i,d=new ri;d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),pp(this,d),this.m=a.m}else a&&(c=String(a).match(fp))?(this.h=!1,qo(this,c[1]||"",!0),this.o=ti(c[2]||""),this.g=ti(c[3]||"",!0),Ho(this,c[4]),this.l=ti(c[5]||"",!0),pp(this,c[6]||"",!0),this.m=ti(c[7]||"")):(this.h=!1,this.i=new ri(null,this.h))}yr.prototype.toString=function(){var a=[],c=this.j;c&&a.push(ni(c,gp,!0),":");var d=this.g;return(d||c=="file")&&(a.push("//"),(c=this.o)&&a.push(ni(c,gp,!0),"@"),a.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&a.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(ni(d,d.charAt(0)=="/"?A1:S1,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",ni(d,C1)),a.join("")};function sn(a){return new yr(a)}function qo(a,c,d){a.j=d?ti(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function Ho(a,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);a.s=c}else a.s=null}function pp(a,c,d){c instanceof ri?(a.i=c,R1(a.i,a.h)):(d||(c=ni(c,k1)),a.i=new ri(c,a.h))}function fe(a,c,d){a.i.set(c,d)}function Wo(a){return fe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ti(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ni(a,c,d){return typeof a=="string"?(a=encodeURI(a).replace(c,x1),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function x1(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var gp=/[#\/\?@]/g,S1=/[#\?:]/g,A1=/[#\?]/g,k1=/[#\?@]/g,C1=/#/g;function ri(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function Rn(a){a.g||(a.g=new Map,a.h=0,a.i&&I1(a.i,function(c,d){a.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}t=ri.prototype,t.add=function(a,c){Rn(this),this.i=null,a=Gr(this,a);var d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(c),this.h+=1,this};function mp(a,c){Rn(a),c=Gr(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function yp(a,c){return Rn(a),c=Gr(a,c),a.g.has(c)}t.forEach=function(a,c){Rn(this),this.g.forEach(function(d,y){d.forEach(function(P){a.call(c,P,y,this)},this)},this)},t.na=function(){Rn(this);const a=Array.from(this.g.values()),c=Array.from(this.g.keys()),d=[];for(let y=0;y<c.length;y++){const P=a[y];for(let D=0;D<P.length;D++)d.push(c[y])}return d},t.V=function(a){Rn(this);let c=[];if(typeof a=="string")yp(this,a)&&(c=c.concat(this.g.get(Gr(this,a))));else{a=Array.from(this.g.values());for(let d=0;d<a.length;d++)c=c.concat(a[d])}return c},t.set=function(a,c){return Rn(this),this.i=null,a=Gr(this,a),yp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=this.V(a),0<a.length?String(a[0]):c):c};function vp(a,c,d){mp(a,c),0<d.length&&(a.i=null,a.g.set(Gr(a,c),b(d)),a.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(var d=0;d<c.length;d++){var y=c[d];const D=encodeURIComponent(String(y)),z=this.V(y);for(y=0;y<z.length;y++){var P=D;z[y]!==""&&(P+="="+encodeURIComponent(String(z[y]))),a.push(P)}}return this.i=a.join("&")};function Gr(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function R1(a,c){c&&!a.j&&(Rn(a),a.i=null,a.g.forEach(function(d,y){var P=y.toLowerCase();y!=P&&(mp(this,y),vp(this,P,d))},a)),a.j=c}function P1(a,c){const d=new Zs;if(l.Image){const y=new Image;y.onload=x(Pn,d,"TestLoadImage: loaded",!0,c,y),y.onerror=x(Pn,d,"TestLoadImage: error",!1,c,y),y.onabort=x(Pn,d,"TestLoadImage: abort",!1,c,y),y.ontimeout=x(Pn,d,"TestLoadImage: timeout",!1,c,y),l.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else c(!1)}function b1(a,c){const d=new Zs,y=new AbortController,P=setTimeout(()=>{y.abort(),Pn(d,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:y.signal}).then(D=>{clearTimeout(P),D.ok?Pn(d,"TestPingServer: ok",!0,c):Pn(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(P),Pn(d,"TestPingServer: error",!1,c)})}function Pn(a,c,d,y,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),y(d)}catch{}}function N1(){this.g=new p1}function D1(a,c,d){const y=d||"";try{dp(a,function(P,D){let z=P;h(P)&&(z=Pu(P)),c.push(y+D+"="+encodeURIComponent(z))})}catch(P){throw c.push(y+"type="+encodeURIComponent("_badmap")),P}}function Go(a){this.l=a.Ub||null,this.j=a.eb||!1}C(Go,bu),Go.prototype.g=function(){return new Ko(this.l,this.j)},Go.prototype.i=function(a){return function(){return a}}({});function Ko(a,c){We.call(this),this.D=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Ko,We),t=Ko.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=c,this.readyState=1,ii(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(c.body=a),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,si(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ii(this)),this.g&&(this.readyState=3,ii(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_p(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function _p(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?si(this):ii(this),this.readyState==3&&_p(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,si(this))},t.Qa=function(a){this.g&&(this.response=a,si(this))},t.ga=function(){this.g&&si(this)};function si(a){a.readyState=4,a.l=null,a.j=null,a.v=null,ii(a)}t.setRequestHeader=function(a,c){this.u.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=c.next();return a.join(`\r
`)};function ii(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ko.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function wp(a){let c="";return j(a,function(d,y){c+=y,c+=":",c+=d,c+=`\r
`}),c}function zu(a,c,d){e:{for(y in d){var y=!1;break e}y=!0}y||(d=wp(d),typeof a=="string"?d!=null&&encodeURIComponent(String(d)):fe(a,c,d))}function Ie(a){We.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ie,We);var L1=/^https?$/i,V1=["POST","PUT"];t=Ie.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,c,d,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Lu.g(),this.v=this.o?Qf(this.o):Qf(Lu),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(D){Ep(this,D);return}if(a=d||"",d=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var P in y)d.set(P,y[P]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const D of y.keys())d.set(D,y.get(D));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(d.keys()).find(D=>D.toLowerCase()=="content-type"),P=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(V1,c,void 0))||y||P||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,z]of d)this.g.setRequestHeader(D,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xp(this),this.u=!0,this.g.send(a),this.u=!1}catch(D){Ep(this,D)}};function Ep(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.m=5,Tp(a),Qo(a)}function Tp(a){a.A||(a.A=!0,it(a,"complete"),it(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,it(this,"complete"),it(this,"abort"),Qo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qo(this,!0)),Ie.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ip(this):this.bb())},t.bb=function(){Ip(this)};function Ip(a){if(a.h&&typeof o<"u"&&(!a.v[1]||on(a)!=4||a.Z()!=2)){if(a.u&&on(a)==4)Hf(a.Ea,0,a);else if(it(a,"readystatechange"),on(a)==4){a.h=!1;try{const z=a.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var d;if(!(d=c)){var y;if(y=z===0){var P=String(a.D).match(fp)[1]||null;!P&&l.self&&l.self.location&&(P=l.self.location.protocol.slice(0,-1)),y=!L1.test(P?P.toLowerCase():"")}d=y}if(d)it(a,"complete"),it(a,"success");else{a.m=6;try{var D=2<on(a)?a.g.statusText:""}catch{D=""}a.l=D+" ["+a.Z()+"]",Tp(a)}}finally{Qo(a)}}}}function Qo(a,c){if(a.g){xp(a);const d=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,c||it(a,"ready");try{d.onreadystatechange=y}catch{}}}function xp(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function on(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<on(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),f1(c)}};function Sp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function O1(a){const c={};a=(a.g&&2<=on(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(w(a[y]))continue;var d=k(a[y]);const P=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const D=c[P]||[];c[P]=D,D.push(d)}T(c,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function oi(a,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||c}function Ap(a){this.Aa=0,this.i=[],this.j=new Zs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=oi("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=oi("baseRetryDelayMs",5e3,a),this.cb=oi("retryDelaySeedMs",1e4,a),this.Wa=oi("forwardChannelMaxRetries",2,a),this.wa=oi("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new ap(a&&a.concurrentRequestLimit),this.Da=new N1,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ap.prototype,t.la=8,t.G=1,t.connect=function(a,c,d,y){ot(0),this.W=a,this.H=c||{},d&&y!==void 0&&(this.H.OSID=d,this.H.OAID=y),this.F=this.X,this.I=Vp(this,null,this.W),Xo(this)};function Bu(a){if(kp(a),a.G==3){var c=a.U++,d=sn(a.I);if(fe(d,"SID",a.K),fe(d,"RID",c),fe(d,"TYPE","terminate"),ai(a,d),c=new Cn(a,a.j,c),c.L=2,c.v=Wo(sn(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=c.v,d=!0),d||(c.g=Op(c.j,null),c.g.ea(c.v)),c.F=Date.now(),$o(c)}Lp(a)}function Jo(a){a.g&&(qu(a),a.g.cancel(),a.g=null)}function kp(a){Jo(a),a.u&&(l.clearTimeout(a.u),a.u=null),Yo(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Xo(a){if(!lp(a.h)&&!a.s){a.s=!0;var c=a.Ga;dt||Y(),B||(dt(),B=!0),G.add(c,a),a.B=0}}function M1(a,c){return up(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=c.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Ys(m(a.Ga,a,c),Dp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const P=new Cn(this,this.j,a);let D=this.o;if(this.S&&(D?(D=v(D),I(D,this.S)):D=this.S),this.m!==null||this.O||(P.H=D,D=null),this.P)e:{for(var c=0,d=0;d<this.i.length;d++){t:{var y=this.i[d];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(c+=y,4096<c){c=d;break e}if(c===4096||d===this.i.length-1){c=d+1;break e}}c=1e3}else c=1e3;c=Rp(this,P,c),d=sn(this.I),fe(d,"RID",a),fe(d,"CVER",22),this.D&&fe(d,"X-HTTP-Session-Id",this.D),ai(this,d),D&&(this.O?c="headers="+encodeURIComponent(String(wp(D)))+"&"+c:this.m&&zu(d,this.m,D)),Uu(this.h,P),this.Ua&&fe(d,"TYPE","init"),this.P?(fe(d,"$req",c),fe(d,"SID","null"),P.T=!0,Ou(P,d,null)):Ou(P,d,c),this.G=2}}else this.G==3&&(a?Cp(this,a):this.i.length==0||lp(this.h)||Cp(this))};function Cp(a,c){var d;c?d=c.l:d=a.U++;const y=sn(a.I);fe(y,"SID",a.K),fe(y,"RID",d),fe(y,"AID",a.T),ai(a,y),a.m&&a.o&&zu(y,a.m,a.o),d=new Cn(a,a.j,d,a.B+1),a.m===null&&(d.H=a.o),c&&(a.i=c.D.concat(a.i)),c=Rp(a,d,1e3),d.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Uu(a.h,d),Ou(d,y,c)}function ai(a,c){a.H&&j(a.H,function(d,y){fe(c,y,d)}),a.l&&dp({},function(d,y){fe(c,y,d)})}function Rp(a,c,d){d=Math.min(a.i.length,d);var y=a.l?m(a.l.Na,a.l,a):null;e:{var P=a.i;let D=-1;for(;;){const z=["count="+d];D==-1?0<d?(D=P[0].g,z.push("ofs="+D)):D=0:z.push("ofs="+D);let he=!0;for(let Me=0;Me<d;Me++){let ie=P[Me].g;const Ge=P[Me].map;if(ie-=D,0>ie)D=Math.max(0,P[Me].g-100),he=!1;else try{D1(Ge,z,"req"+ie+"_")}catch{y&&y(Ge)}}if(he){y=z.join("&");break e}}}return a=a.i.splice(0,d),c.D=a,y}function Pp(a){if(!a.g&&!a.u){a.Y=1;var c=a.Fa;dt||Y(),B||(dt(),B=!0),G.add(c,a),a.v=0}}function $u(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Ys(m(a.Fa,a),Dp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,bp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Ys(m(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ot(10),Jo(this),bp(this))};function qu(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function bp(a){a.g=new Cn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var c=sn(a.qa);fe(c,"RID","rpc"),fe(c,"SID",a.K),fe(c,"AID",a.T),fe(c,"CI",a.F?"0":"1"),!a.F&&a.ja&&fe(c,"TO",a.ja),fe(c,"TYPE","xmlhttp"),ai(a,c),a.m&&a.o&&zu(c,a.m,a.o),a.L&&(a.g.I=a.L);var d=a.g;a=a.ia,d.L=1,d.v=Wo(sn(c)),d.m=null,d.P=!0,sp(d,a)}t.Za=function(){this.C!=null&&(this.C=null,Jo(this),$u(this),ot(19))};function Yo(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Np(a,c){var d=null;if(a.g==c){Yo(a),qu(a),a.g=null;var y=2}else if(Fu(a.h,c))d=c.D,cp(a.h,c),y=1;else return;if(a.G!=0){if(c.o)if(y==1){d=c.m?c.m.length:0,c=Date.now()-c.F;var P=a.B;y=Uo(),it(y,new ep(y,d)),Xo(a)}else Pp(a);else if(P=c.s,P==3||P==0&&0<c.X||!(y==1&&M1(a,c)||y==2&&$u(a)))switch(d&&0<d.length&&(c=a.h,c.i=c.i.concat(d)),P){case 1:vr(a,5);break;case 4:vr(a,10);break;case 3:vr(a,6);break;default:vr(a,2)}}}function Dp(a,c){let d=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(d*=2),d*c}function vr(a,c){if(a.j.info("Error code "+c),c==2){var d=m(a.fb,a),y=a.Xa;const P=!y;y=new yr(y||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||qo(y,"https"),Wo(y),P?P1(y.toString(),d):b1(y.toString(),d)}else ot(2);a.G=0,a.l&&a.l.sa(c),Lp(a),kp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function Lp(a){if(a.G=0,a.ka=[],a.l){const c=hp(a.h);(c.length!=0||a.i.length!=0)&&(L(a.ka,c),L(a.ka,a.i),a.h.i.length=0,b(a.i),a.i.length=0),a.l.ra()}}function Vp(a,c,d){var y=d instanceof yr?sn(d):new yr(d);if(y.g!="")c&&(y.g=c+"."+y.g),Ho(y,y.s);else{var P=l.location;y=P.protocol,c=c?c+"."+P.hostname:P.hostname,P=+P.port;var D=new yr(null);y&&qo(D,y),c&&(D.g=c),P&&Ho(D,P),d&&(D.l=d),y=D}return d=a.D,c=a.ya,d&&c&&fe(y,d,c),fe(y,"VER",a.la),ai(a,y),y}function Op(a,c,d){if(c&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Ca&&!a.pa?new Ie(new Go({eb:d})):new Ie(a.pa),c.Ha(a.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mp(){}t=Mp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Zo(){}Zo.prototype.g=function(a,c){return new _t(a,c)};function _t(a,c){We.call(this),this.g=new Ap(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(a?a["X-WebChannel-Client-Profile"]=c.va:a={"X-WebChannel-Client-Profile":c.va}),this.g.S=a,(a=c&&c.Sb)&&!w(a)&&(this.g.m=a),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!w(c)&&(this.g.D=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new Kr(this)}C(_t,We),_t.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_t.prototype.close=function(){Bu(this.g)},_t.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.u&&(d={},d.__data__=Pu(a),a=d);c.i.push(new w1(c.Ya++,a)),c.G==3&&Xo(c)},_t.prototype.N=function(){this.g.l=null,delete this.j,Bu(this.g),delete this.g,_t.aa.N.call(this)};function jp(a){Nu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const d in c){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}C(jp,Nu);function Fp(){Du.call(this),this.status=1}C(Fp,Du);function Kr(a){this.g=a}C(Kr,Mp),Kr.prototype.ua=function(){it(this.g,"a")},Kr.prototype.ta=function(a){it(this.g,new jp(a))},Kr.prototype.sa=function(a){it(this.g,new Fp)},Kr.prototype.ra=function(){it(this.g,"b")},Zo.prototype.createWebChannel=Zo.prototype.g,_t.prototype.send=_t.prototype.o,_t.prototype.open=_t.prototype.m,_t.prototype.close=_t.prototype.close,i0=function(){return new Zo},s0=function(){return Uo()},r0=gr,Ph={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zo.NO_ERROR=0,zo.TIMEOUT=8,zo.HTTP_ERROR=6,Oa=zo,tp.COMPLETE="complete",n0=tp,Jf.EventType=Js,Js.OPEN="a",Js.CLOSE="b",Js.ERROR="c",Js.MESSAGE="d",We.prototype.listen=We.prototype.K,Ti=Jf,Ie.prototype.listenOnce=Ie.prototype.L,Ie.prototype.getLastError=Ie.prototype.Ka,Ie.prototype.getLastErrorCode=Ie.prototype.Ba,Ie.prototype.getStatus=Ie.prototype.Z,Ie.prototype.getResponseJson=Ie.prototype.Oa,Ie.prototype.getResponseText=Ie.prototype.oa,Ie.prototype.send=Ie.prototype.ea,Ie.prototype.setWithCredentials=Ie.prototype.Ha,t0=Ie}).apply(typeof va<"u"?va:typeof self<"u"?self:typeof window<"u"?window:{});const am="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ye.UNAUTHENTICATED=new Ye(null),Ye.GOOGLE_CREDENTIALS=new Ye("google-credentials-uid"),Ye.FIRST_PARTY=new Ye("first-party-uid"),Ye.MOCK_USER=new Ye("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $s="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr=new Wd("@firebase/firestore");function mi(){return Mr.logLevel}function H(t,...e){if(Mr.logLevel<=te.DEBUG){const n=e.map(Qd);Mr.debug(`Firestore (${$s}): ${t}`,...n)}}function Tn(t,...e){if(Mr.logLevel<=te.ERROR){const n=e.map(Qd);Mr.error(`Firestore (${$s}): ${t}`,...n)}}function bs(t,...e){if(Mr.logLevel<=te.WARN){const n=e.map(Qd);Mr.warn(`Firestore (${$s}): ${t}`,...n)}}function Qd(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t="Unexpected state"){const e=`FIRESTORE (${$s}) INTERNAL ASSERTION FAILED: `+t;throw Tn(e),new Error(e)}function le(t,e){t||Q()}function X(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends kn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class l4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ye.UNAUTHENTICATED))}shutdown(){}}class u4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class c4{constructor(e){this.t=e,this.currentUser=Ye.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){le(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Pr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Pr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Pr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(le(typeof r.accessToken=="string"),new o0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return le(e===null||typeof e=="string"),new Ye(e)}}class h4{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ye.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class d4{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new h4(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ye.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class f4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class p4{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){le(this.o===void 0);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(le(typeof n.token=="string"),this.R=n.token,new f4(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g4(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=g4(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function oe(t,e){return t<e?-1:t>e?1:0}function Ns(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return De.fromMillis(Date.now())}static fromDate(e){return De.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new De(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.timestamp=e}static fromTimestamp(e){return new J(e)}static min(){return new J(new De(0,0))}static max(){return new J(new De(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,n,r){n===void 0?n=0:n>e.length&&Q(),r===void 0?r=e.length-n:r>e.length-n&&Q(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return io.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof io?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ge extends io{construct(e,n,r){return new ge(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ge(n)}static emptyPath(){return new ge([])}}const m4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ue extends io{construct(e,n,r){return new Ue(e,n,r)}static isValidIdentifier(e){return m4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ue.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ue(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new q(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new q(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new q(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new q(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ue(n)}static emptyPath(){return new Ue([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.path=e}static fromPath(e){return new W(ge.fromString(e))}static fromName(e){return new W(ge.fromString(e).popFirst(5))}static empty(){return new W(ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ge.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new ge(e.slice()))}}function y4(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=J.fromTimestamp(r===1e9?new De(n+1,0):new De(n,r));return new or(s,W.empty(),e)}function v4(t){return new or(t.readTime,t.key,-1)}class or{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new or(J.min(),W.empty(),-1)}static max(){return new or(J.max(),W.empty(),-1)}}function _4(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class E4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eo(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==w4)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(s=>s?O.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new O((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(f=>{o[h]=f,++l,l===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new O((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function T4(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function To(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Jd.oe=-1;function Zl(t){return t==null}function _l(t){return t===0&&1/t==-1/0}function I4(t){return typeof t=="number"&&Number.isInteger(t)&&!_l(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function qr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function l0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e,n){this.comparator=e,this.root=n||Fe.EMPTY}insert(e,n){return new Te(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Fe.BLACK,null,null))}remove(e){return new Te(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _a(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _a(this.root,e,this.comparator,!1)}getReverseIterator(){return new _a(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _a(this.root,e,this.comparator,!0)}}class _a{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fe{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Fe.RED,this.left=s??Fe.EMPTY,this.right=i??Fe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Fe(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Fe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Fe.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();const e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}}Fe.EMPTY=null,Fe.RED=!0,Fe.BLACK=!1;Fe.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Fe(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.comparator=e,this.data=new Te(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new um(this.data.getIterator())}getIteratorFrom(e){return new um(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Be)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Be(this.comparator);return n.data=e,n}}class um{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.fields=e,e.sort(Ue.comparator)}static empty(){return new Tt([])}unionWith(e){let n=new Be(Ue.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Tt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ns(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new u0("Invalid base64 string: "+i):i}}(e);return new He(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new He(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}He.EMPTY_BYTE_STRING=new He("");const x4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ar(t){if(le(!!t),typeof t=="string"){let e=0;const n=x4.exec(t);if(le(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ae(t.seconds),nanos:Ae(t.nanos)}}function Ae(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function jr(t){return typeof t=="string"?He.fromBase64String(t):He.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Yd(t){const e=t.mapValue.fields.__previous_value__;return Xd(e)?Yd(e):e}function oo(t){const e=ar(t.mapValue.fields.__local_write_time__.timestampValue);return new De(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e,n,r,s,i,o,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}class ao{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ao("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ao&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa={mapValue:{}};function Fr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Xd(t)?4:k4(t)?9007199254740991:A4(t)?10:11:Q()}function Zt(t,e){if(t===e)return!0;const n=Fr(t);if(n!==Fr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return oo(t).isEqual(oo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ar(s.timestampValue),l=ar(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return jr(s.bytesValue).isEqual(jr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ae(s.geoPointValue.latitude)===Ae(i.geoPointValue.latitude)&&Ae(s.geoPointValue.longitude)===Ae(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ae(s.integerValue)===Ae(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ae(s.doubleValue),l=Ae(i.doubleValue);return o===l?_l(o)===_l(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ns(t.arrayValue.values||[],e.arrayValue.values||[],Zt);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(lm(o)!==lm(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Zt(o[u],l[u])))return!1;return!0}(t,e);default:return Q()}}function lo(t,e){return(t.values||[]).find(n=>Zt(n,e))!==void 0}function Ds(t,e){if(t===e)return 0;const n=Fr(t),r=Fr(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Ae(i.integerValue||i.doubleValue),u=Ae(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return cm(t.timestampValue,e.timestampValue);case 4:return cm(oo(t),oo(e));case 5:return oe(t.stringValue,e.stringValue);case 6:return function(i,o){const l=jr(i),u=jr(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const f=oe(l[h],u[h]);if(f!==0)return f}return oe(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=oe(Ae(i.latitude),Ae(o.latitude));return l!==0?l:oe(Ae(i.longitude),Ae(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return hm(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,h,f;const g=i.fields||{},m=o.fields||{},x=(l=g.value)===null||l===void 0?void 0:l.arrayValue,C=(u=m.value)===null||u===void 0?void 0:u.arrayValue,b=oe(((h=x==null?void 0:x.values)===null||h===void 0?void 0:h.length)||0,((f=C==null?void 0:C.values)===null||f===void 0?void 0:f.length)||0);return b!==0?b:hm(x,C)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===wa.mapValue&&o===wa.mapValue)return 0;if(i===wa.mapValue)return 1;if(o===wa.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),h=o.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let g=0;g<u.length&&g<f.length;++g){const m=oe(u[g],f[g]);if(m!==0)return m;const x=Ds(l[u[g]],h[f[g]]);if(x!==0)return x}return oe(u.length,f.length)}(t.mapValue,e.mapValue);default:throw Q()}}function cm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);const n=ar(t),r=ar(e),s=oe(n.seconds,r.seconds);return s!==0?s:oe(n.nanos,r.nanos)}function hm(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ds(n[s],r[s]);if(i)return i}return oe(n.length,r.length)}function Ls(t){return bh(t)}function bh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ar(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return jr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=bh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${bh(n.fields[o])}`;return s+"}"}(t.mapValue):Q()}function dm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Nh(t){return!!t&&"integerValue"in t}function Zd(t){return!!t&&"arrayValue"in t}function fm(t){return!!t&&"nullValue"in t}function pm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ma(t){return!!t&&"mapValue"in t}function A4(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Vi(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return qr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Vi(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Vi(t.arrayValue.values[n]);return e}return Object.assign({},t)}function k4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.value=e}static empty(){return new pt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ma(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vi(n)}setAll(e){let n=Ue.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Vi(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ma(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Zt(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ma(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){qr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new pt(Vi(this.value))}}function c0(t){const e=[];return qr(t.fields,(n,r)=>{const s=new Ue([n]);if(Ma(r)){const i=c0(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Tt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new et(e,0,J.min(),J.min(),J.min(),pt.empty(),0)}static newFoundDocument(e,n,r,s){return new et(e,1,n,J.min(),r,s,0)}static newNoDocument(e,n){return new et(e,2,n,J.min(),J.min(),pt.empty(),0)}static newUnknownDocument(e,n){return new et(e,3,n,J.min(),J.min(),pt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof et&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new et(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,n){this.position=e,this.inclusive=n}}function gm(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=W.comparator(W.fromName(o.referenceValue),n.key):r=Ds(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function mm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Zt(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,n="asc"){this.field=e,this.dir=n}}function C4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{}class Pe extends h0{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new P4(e,n,r):n==="array-contains"?new D4(e,r):n==="in"?new L4(e,r):n==="not-in"?new V4(e,r):n==="array-contains-any"?new O4(e,r):new Pe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new b4(e,r):new N4(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ds(n,this.value)):n!==null&&Fr(this.value)===Fr(n)&&this.matchesComparison(Ds(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bt extends h0{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Bt(e,n)}matches(e){return d0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function d0(t){return t.op==="and"}function f0(t){return R4(t)&&d0(t)}function R4(t){for(const e of t.filters)if(e instanceof Bt)return!1;return!0}function Dh(t){if(t instanceof Pe)return t.field.canonicalString()+t.op.toString()+Ls(t.value);if(f0(t))return t.filters.map(e=>Dh(e)).join(",");{const e=t.filters.map(n=>Dh(n)).join(",");return`${t.op}(${e})`}}function p0(t,e){return t instanceof Pe?function(r,s){return s instanceof Pe&&r.op===s.op&&r.field.isEqual(s.field)&&Zt(r.value,s.value)}(t,e):t instanceof Bt?function(r,s){return s instanceof Bt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&p0(o,s.filters[l]),!0):!1}(t,e):void Q()}function g0(t){return t instanceof Pe?function(n){return`${n.field.canonicalString()} ${n.op} ${Ls(n.value)}`}(t):t instanceof Bt?function(n){return n.op.toString()+" {"+n.getFilters().map(g0).join(" ,")+"}"}(t):"Filter"}class P4 extends Pe{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class b4 extends Pe{constructor(e,n){super(e,"in",n),this.keys=m0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class N4 extends Pe{constructor(e,n){super(e,"not-in",n),this.keys=m0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function m0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}class D4 extends Pe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Zd(n)&&lo(n.arrayValue,this.value)}}class L4 extends Pe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&lo(this.value.arrayValue,n)}}class V4 extends Pe{constructor(e,n){super(e,"not-in",n)}matches(e){if(lo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!lo(this.value.arrayValue,n)}}class O4 extends Pe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Zd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>lo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function ym(t,e=null,n=[],r=[],s=null,i=null,o=null){return new M4(t,e,n,r,s,i,o)}function ef(t){const e=X(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Dh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Zl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ls(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ls(r)).join(",")),e.ue=n}return e.ue}function tf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!C4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!p0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!mm(t.startAt,e.startAt)&&mm(t.endAt,e.endAt)}function Lh(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function j4(t,e,n,r,s,i,o,l){return new qs(t,e,n,r,s,i,o,l)}function nf(t){return new qs(t)}function vm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function y0(t){return t.collectionGroup!==null}function Oi(t){const e=X(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Be(Ue.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new uo(i,r))}),n.has(Ue.keyField().canonicalString())||e.ce.push(new uo(Ue.keyField(),r))}return e.ce}function Kt(t){const e=X(t);return e.le||(e.le=F4(e,Oi(t))),e.le}function F4(t,e){if(t.limitType==="F")return ym(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new uo(s.field,i)});const n=t.endAt?new wl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new wl(t.startAt.position,t.startAt.inclusive):null;return ym(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Vh(t,e){const n=t.filters.concat([e]);return new qs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function El(t,e,n){return new qs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function eu(t,e){return tf(Kt(t),Kt(e))&&t.limitType===e.limitType}function v0(t){return`${ef(Kt(t))}|lt:${t.limitType}`}function Xr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>g0(s)).join(", ")}]`),Zl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ls(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ls(s)).join(",")),`Target(${r})`}(Kt(t))}; limitType=${t.limitType})`}function tu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):W.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Oi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const h=gm(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,Oi(r),s)||r.endAt&&!function(o,l,u){const h=gm(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,Oi(r),s))}(t,e)}function U4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function _0(t){return(e,n)=>{let r=!1;for(const s of Oi(t)){const i=z4(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function z4(t,e,n){const r=t.field.isKeyField()?W.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),h=l.data.field(i);return u!==null&&h!==null?Ds(u,h):Q()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){qr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return l0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4=new Te(W.comparator);function In(){return B4}const w0=new Te(W.comparator);function Ii(...t){let e=w0;for(const n of t)e=e.insert(n.key,n);return e}function E0(t){let e=w0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Sr(){return Mi()}function T0(){return Mi()}function Mi(){return new Hs(t=>t.toString(),(t,e)=>t.isEqual(e))}const $4=new Te(W.comparator),q4=new Be(W.comparator);function ee(...t){let e=q4;for(const n of t)e=e.add(n);return e}const H4=new Be(oe);function W4(){return H4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_l(e)?"-0":e}}function I0(t){return{integerValue:""+t}}function G4(t,e){return I4(e)?I0(e):rf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(){this._=void 0}}function K4(t,e,n){return t instanceof Tl?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Xd(i)&&(i=Yd(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof co?S0(t,e):t instanceof ho?A0(t,e):function(s,i){const o=x0(s,i),l=_m(o)+_m(s.Pe);return Nh(o)&&Nh(s.Pe)?I0(l):rf(s.serializer,l)}(t,e)}function Q4(t,e,n){return t instanceof co?S0(t,e):t instanceof ho?A0(t,e):n}function x0(t,e){return t instanceof Il?function(r){return Nh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Tl extends nu{}class co extends nu{constructor(e){super(),this.elements=e}}function S0(t,e){const n=k0(e);for(const r of t.elements)n.some(s=>Zt(s,r))||n.push(r);return{arrayValue:{values:n}}}class ho extends nu{constructor(e){super(),this.elements=e}}function A0(t,e){let n=k0(e);for(const r of t.elements)n=n.filter(s=>!Zt(s,r));return{arrayValue:{values:n}}}class Il extends nu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function _m(t){return Ae(t.integerValue||t.doubleValue)}function k0(t){return Zd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function J4(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof co&&s instanceof co||r instanceof ho&&s instanceof ho?Ns(r.elements,s.elements,Zt):r instanceof Il&&s instanceof Il?Zt(r.Pe,s.Pe):r instanceof Tl&&s instanceof Tl}(t.transform,e.transform)}class X4{constructor(e,n){this.version=e,this.transformResults=n}}class bt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new bt}static exists(e){return new bt(void 0,e)}static updateTime(e){return new bt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ja(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ru{}function C0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new sf(t.key,bt.none()):new Io(t.key,t.data,bt.none());{const n=t.data,r=pt.empty();let s=new Be(Ue.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new fr(t.key,r,new Tt(s.toArray()),bt.none())}}function Y4(t,e,n){t instanceof Io?function(s,i,o){const l=s.value.clone(),u=Em(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof fr?function(s,i,o){if(!ja(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Em(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(R0(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ji(t,e,n,r){return t instanceof Io?function(i,o,l,u){if(!ja(i.precondition,o))return l;const h=i.value.clone(),f=Tm(i.fieldTransforms,u,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof fr?function(i,o,l,u){if(!ja(i.precondition,o))return l;const h=Tm(i.fieldTransforms,u,o),f=o.data;return f.setAll(R0(i)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(i,o,l){return ja(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function Z4(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=x0(r.transform,s||null);i!=null&&(n===null&&(n=pt.empty()),n.set(r.field,i))}return n||null}function wm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ns(r,s,(i,o)=>J4(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Io extends ru{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class fr extends ru{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function R0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Em(t,e,n){const r=new Map;le(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,Q4(o,l,n[s]))}return r}function Tm(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,K4(i,o,e))}return r}class sf extends ru{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class e6 extends ru{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Y4(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ji(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ji(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=T0();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=C0(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ee())}isEqual(e){return this.batchId===e.batchId&&Ns(this.mutations,e.mutations,(n,r)=>wm(n,r))&&Ns(this.baseMutations,e.baseMutations,(n,r)=>wm(n,r))}}class of{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){le(e.mutations.length===r.length);let s=function(){return $4}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new of(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce,ne;function s6(t){switch(t){default:return Q();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function P0(t){if(t===void 0)return Tn("GRPC error has no .code"),V.UNKNOWN;switch(t){case Ce.OK:return V.OK;case Ce.CANCELLED:return V.CANCELLED;case Ce.UNKNOWN:return V.UNKNOWN;case Ce.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Ce.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Ce.INTERNAL:return V.INTERNAL;case Ce.UNAVAILABLE:return V.UNAVAILABLE;case Ce.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Ce.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Ce.NOT_FOUND:return V.NOT_FOUND;case Ce.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Ce.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Ce.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Ce.ABORTED:return V.ABORTED;case Ce.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Ce.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Ce.DATA_LOSS:return V.DATA_LOSS;default:return Q()}}(ne=Ce||(Ce={}))[ne.OK=0]="OK",ne[ne.CANCELLED=1]="CANCELLED",ne[ne.UNKNOWN=2]="UNKNOWN",ne[ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ne[ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ne[ne.NOT_FOUND=5]="NOT_FOUND",ne[ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",ne[ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",ne[ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",ne[ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ne[ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ne[ne.ABORTED=10]="ABORTED",ne[ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",ne[ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",ne[ne.INTERNAL=13]="INTERNAL",ne[ne.UNAVAILABLE=14]="UNAVAILABLE",ne[ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6=new Rr([4294967295,4294967295],0);function Im(t){const e=i6().encode(t),n=new e0;return n.update(e),new Uint8Array(n.digest())}function xm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Rr([n,r],0),new Rr([s,i],0)]}class af{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new xi(`Invalid padding: ${n}`);if(r<0)throw new xi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new xi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new xi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Rr.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Rr.fromNumber(r)));return s.compare(o6)===1&&(s=new Rr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Im(e),[r,s]=xm(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new af(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Im(e),[r,s]=xm(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class xi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,xo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new su(J.min(),s,new Te(oe),In(),ee())}}class xo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new xo(r,n,ee(),ee(),ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class b0{constructor(e,n){this.targetId=e,this.me=n}}class N0{constructor(e,n,r=He.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Sm{constructor(){this.fe=0,this.ge=km(),this.pe=He.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ee(),n=ee(),r=ee();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Q()}}),new xo(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=km()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,le(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class a6{constructor(e){this.Le=e,this.Be=new Map,this.ke=In(),this.qe=Am(),this.Qe=new Te(oe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Q()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Lh(i))if(r===0){const o=new W(i.path);this.Ue(n,o,et.newNoDocument(o,J.min()))}else le(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=jr(r).toUint8Array()}catch(u){if(u instanceof u0)return bs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new af(o,s,i)}catch(u){return bs(u instanceof xi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&Lh(l.target)){const u=new W(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,et.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ee();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new su(e,n,this.Qe,this.ke,r);return this.ke=In(),this.qe=Am(),this.Qe=new Te(oe),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Sm,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Be(oe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Sm),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Am(){return new Te(W.comparator)}function km(){return new Te(W.comparator)}const l6={asc:"ASCENDING",desc:"DESCENDING"},u6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},c6={and:"AND",or:"OR"};class h6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Oh(t,e){return t.useProto3Json||Zl(e)?e:{value:e}}function xl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function D0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function d6(t,e){return xl(t,e.toTimestamp())}function Qt(t){return le(!!t),J.fromTimestamp(function(n){const r=ar(n);return new De(r.seconds,r.nanos)}(t))}function lf(t,e){return Mh(t,e).canonicalString()}function Mh(t,e){const n=function(s){return new ge(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function L0(t){const e=ge.fromString(t);return le(F0(e)),e}function jh(t,e){return lf(t.databaseId,e.path)}function Ic(t,e){const n=L0(e);if(n.get(1)!==t.databaseId.projectId)throw new q(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(O0(n))}function V0(t,e){return lf(t.databaseId,e)}function f6(t){const e=L0(t);return e.length===4?ge.emptyPath():O0(e)}function Fh(t){return new ge(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function O0(t){return le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Cm(t,e,n){return{name:jh(t,e),fields:n.value.mapValue.fields}}function p6(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Q()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,f){return h.useProto3Json?(le(f===void 0||typeof f=="string"),He.fromBase64String(f||"")):(le(f===void 0||f instanceof Buffer||f instanceof Uint8Array),He.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const f=h.code===void 0?V.UNKNOWN:P0(h.code);return new q(f,h.message||"")}(o);n=new N0(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ic(t,r.document.name),i=Qt(r.document.updateTime),o=r.document.createTime?Qt(r.document.createTime):J.min(),l=new pt({mapValue:{fields:r.document.fields}}),u=et.newFoundDocument(s,i,o,l),h=r.targetIds||[],f=r.removedTargetIds||[];n=new Fa(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ic(t,r.document),i=r.readTime?Qt(r.readTime):J.min(),o=et.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Fa([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ic(t,r.document),i=r.removedTargetIds||[];n=new Fa([],i,s,null)}else{if(!("filter"in e))return Q();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new r6(s,i),l=r.targetId;n=new b0(l,o)}}return n}function g6(t,e){let n;if(e instanceof Io)n={update:Cm(t,e.key,e.value)};else if(e instanceof sf)n={delete:jh(t,e.key)};else if(e instanceof fr)n={update:Cm(t,e.key,e.data),updateMask:x6(e.fieldMask)};else{if(!(e instanceof e6))return Q();n={verify:jh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Tl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof co)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ho)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Il)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw Q()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:d6(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Q()}(t,e.precondition)),n}function m6(t,e){return t&&t.length>0?(le(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Qt(s.updateTime):Qt(i);return o.isEqual(J.min())&&(o=Qt(i)),new X4(o,s.transformResults||[])}(n,e))):[]}function y6(t,e){return{documents:[V0(t,e.path)]}}function v6(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=V0(t,s);const i=function(h){if(h.length!==0)return j0(Bt.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(f=>function(m){return{field:Yr(m.field),direction:E6(m.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Oh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function _6(t){let e=f6(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){le(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(g){const m=M0(g);return m instanceof Bt&&f0(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(m=>function(C){return new uo(Zr(C.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(g){let m;return m=typeof g=="object"?g.value:g,Zl(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(g){const m=!!g.before,x=g.values||[];return new wl(x,m)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const m=!g.before,x=g.values||[];return new wl(x,m)}(n.endAt)),j4(e,s,o,i,l,"F",u,h)}function w6(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function M0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Zr(n.unaryFilter.field);return Pe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Zr(n.unaryFilter.field);return Pe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Zr(n.unaryFilter.field);return Pe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Zr(n.unaryFilter.field);return Pe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(t):t.fieldFilter!==void 0?function(n){return Pe.create(Zr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Bt.create(n.compositeFilter.filters.map(r=>M0(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Q()}}(n.compositeFilter.op))}(t):Q()}function E6(t){return l6[t]}function T6(t){return u6[t]}function I6(t){return c6[t]}function Yr(t){return{fieldPath:t.canonicalString()}}function Zr(t){return Ue.fromServerFormat(t.fieldPath)}function j0(t){return t instanceof Pe?function(n){if(n.op==="=="){if(pm(n.value))return{unaryFilter:{field:Yr(n.field),op:"IS_NAN"}};if(fm(n.value))return{unaryFilter:{field:Yr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(pm(n.value))return{unaryFilter:{field:Yr(n.field),op:"IS_NOT_NAN"}};if(fm(n.value))return{unaryFilter:{field:Yr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yr(n.field),op:T6(n.op),value:n.value}}}(t):t instanceof Bt?function(n){const r=n.getFilters().map(s=>j0(s));return r.length===1?r[0]:{compositeFilter:{op:I6(n.op),filters:r}}}(t):Q()}function x6(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function F0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e,n,r,s,i=J.min(),o=J.min(),l=He.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new $n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new $n(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(e){this.ct=e}}function A6(t){const e=_6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?El(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(){this.un=new C6}addToCollectionParentIndex(e,n){return this.un.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(or.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(or.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class C6{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Be(ge.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Be(ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Vs(0)}static kn(){return new Vs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(){this.changes=new Hs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,et.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ji(r.mutation,s,Tt.empty(),De.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ee()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ee()){const s=Sr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ii();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Sr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ee()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=In();const o=Mi(),l=function(){return Mi()}();return n.forEach((u,h)=>{const f=r.get(h.key);s.has(h.key)&&(f===void 0||f.mutation instanceof fr)?i=i.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),ji(f.mutation,h,f.mutation.getFieldMask(),De.now())):o.set(h.key,Tt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,f)=>o.set(h,f)),n.forEach((h,f)=>{var g;return l.set(h,new P6(f,(g=o.get(h))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Mi();let s=new Te((o,l)=>o-l),i=ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let f=r.get(u)||Tt.empty();f=l.applyToLocalView(h,f),r.set(u,f);const g=(s.get(l.batchId)||ee()).add(u);s=s.insert(l.batchId,g)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,f=u.value,g=T0();f.forEach(m=>{if(!i.has(m)){const x=C0(n.get(m),r.get(m));x!==null&&g.set(m,x),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,g))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return W.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):y0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):O.resolve(Sr());let l=-1,u=i;return o.next(h=>O.forEach(h,(f,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),i.get(f)?O.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{u=u.insert(f,m)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,ee())).next(f=>({batchId:l,changes:E0(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let s=Ii();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ii();return this.indexManager.getCollectionParents(e,i).next(l=>O.forEach(l,u=>{const h=function(g,m){return new qs(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(f=>{f.forEach((g,m)=>{o=o.insert(g,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,et.newInvalidDocument(f)))});let l=Ii();return o.forEach((u,h)=>{const f=i.get(u);f!==void 0&&ji(f.mutation,h,Tt.empty(),De.now()),tu(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return O.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Qt(s.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:A6(s.bundledQuery),readTime:Qt(s.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(){this.overlays=new Te(W.comparator),this.Ir=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Sr();return O.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const s=Sr(),i=n.length+1,o=new W(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return O.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Te((h,f)=>h-f);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let f=i.get(h.largestBatchId);f===null&&(f=Sr(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=Sr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=s)););return O.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new n6(n,r));let i=this.Ir.get(n);i===void 0&&(i=ee(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(){this.sessionToken=He.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(){this.Tr=new Be(Le.Er),this.dr=new Be(Le.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Le(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Le(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new W(new ge([])),r=new Le(n,e),s=new Le(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new W(new ge([])),r=new Le(n,e),s=new Le(n,e+1);let i=ee();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Le(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Le{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return W.comparator(e.key,n.key)||oe(e.wr,n.wr)}static Ar(e,n){return oe(e.wr,n.wr)||W.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Be(Le.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new t6(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new Le(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return O.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Le(n,0),s=new Le(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),O.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Be(oe);return n.forEach(s=>{const i=new Le(s,0),o=new Le(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),O.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;W.isDocumentKey(i)||(i=i.child(""));const o=new Le(new W(i),0);let l=new Be(oe);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.wr)),!0)},o),O.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){le(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return O.forEach(n.mutations,s=>{const i=new Le(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Le(n,0),s=this.br.firstAfterOrEqual(r);return O.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e){this.Mr=e,this.docs=function(){return new Te(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():et.newInvalidDocument(n))}getEntries(e,n){let r=In();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():et.newInvalidDocument(s))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=In();const o=n.path,l=new W(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||_4(v4(f),r)<=0||(s.has(f.key)||tu(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return O.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Q()}Or(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new M6(this)}getSize(e){return O.resolve(this.size)}}class M6 extends R6{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e){this.persistence=e,this.Nr=new Hs(n=>ef(n),tf),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Lr=0,this.Br=new uf,this.targetCount=0,this.kr=Vs.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),O.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Vs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Kn(n),O.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),O.waitFor(i).next(()=>s)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),O.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Jd(0),this.Kr=!1,this.Kr=!0,this.$r=new L6,this.referenceDelegate=e(this),this.Ur=new j6(this),this.indexManager=new k6,this.remoteDocumentCache=function(s){return new O6(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new S6(n),this.Gr=new N6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new D6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new V6(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new U6(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return O.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class U6 extends E4{constructor(e){super(),this.currentSequenceNumber=e}}class cf{constructor(e){this.persistence=e,this.Jr=new uf,this.Yr=null}static Zr(e){return new cf(e)}get Xr(){if(this.Yr)return this.Yr;throw Q()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),O.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,r=>{const s=W.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,J.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return O.or([()=>O.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ee(),s=ee();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new hf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return HT()?8:T4(nt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new z6;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(mi()<=te.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Xr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(mi()<=te.DEBUG&&H("QueryEngine","Query:",Xr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(mi()<=te.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Xr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kt(n))):O.resolve())}Yi(e,n){if(vm(n))return O.resolve(null);let r=Kt(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=El(n,null,"F"),r=Kt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ee(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,l);return this.ns(n,h,o,u.readTime)?this.Yi(e,El(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,s){return vm(n)||s.isEqual(J.min())?O.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?O.resolve(null):(mi()<=te.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Xr(n)),this.rs(e,o,n,y4(s,-1)).next(l=>l))})}ts(e,n){let r=new Be(_0(e));return n.forEach((s,i)=>{tu(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return mi()<=te.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Xr(n)),this.Ji.getDocumentsMatchingQuery(e,n,or.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Te(oe),this._s=new Hs(i=>ef(i),tf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new b6(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function q6(t,e,n,r){return new $6(t,e,n,r)}async function U0(t,e){const n=X(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=ee();for(const h of s){o.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of i){l.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:l}))})})}function H6(t,e){const n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,f){const g=h.batch,m=g.keys();let x=O.resolve();return m.forEach(C=>{x=x.next(()=>f.getEntry(u,C)).next(b=>{const L=h.docVersions.get(C);le(L!==null),b.version.compareTo(L)<0&&(g.applyToRemoteDocument(b,h),b.isValidDocument()&&(b.setReadTime(h.commitVersion),f.addEntry(b)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ee();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function z0(t){const e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function W6(t,e){const n=X(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((f,g)=>{const m=s.get(g);if(!m)return;l.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,g)));let x=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?x=x.withResumeToken(He.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):f.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(f.resumeToken,r)),s=s.insert(g,x),function(b,L,_){return b.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(m,x,f)&&l.push(n.Ur.updateTargetData(i,x))});let u=In(),h=ee();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(G6(i,o,e.documentUpdates).next(f=>{u=f.Ps,h=f.Is})),!r.isEqual(J.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(g=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return O.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.os=s,i))}function G6(t,e,n){let r=ee(),s=ee();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=In();return n.forEach((l,u)=>{const h=i.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(J.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):H("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function K6(t,e){const n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Q6(t,e){const n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,O.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new $n(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Uh(t,e,n){const r=X(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!To(o))throw o;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Rm(t,e,n){const r=X(t);let s=J.min(),i=ee();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,f){const g=X(u),m=g._s.get(f);return m!==void 0?O.resolve(g.os.get(m)):g.Ur.getTargetData(h,f)}(r,o,Kt(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:J.min(),n?i:ee())).next(l=>(J6(r,U4(e),l),{documents:l,Ts:i})))}function J6(t,e,n){let r=t.us.get(e)||J.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Pm{constructor(){this.activeTargetIds=W4()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class X6{constructor(){this.so=new Pm,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Pm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ea=null;function xc(){return Ea===null?Ea=function(){return 268435456+Math.round(2147483648*Math.random())}():Ea++,"0x"+Ea.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xe="WebChannelConnection";class tx extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=xc(),u=this.xo(n,r.toUriEncodedString());H("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(n,u,h,s).then(f=>(H("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw bs("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+$s}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=Z6[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=xc();return new Promise((o,l)=>{const u=new t0;u.setWithCredentials(!0),u.listenOnce(n0.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Oa.NO_ERROR:const f=u.getResponseJson();H(Xe,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),o(f);break;case Oa.TIMEOUT:H(Xe,`RPC '${e}' ${i} timed out`),l(new q(V.DEADLINE_EXCEEDED,"Request time out"));break;case Oa.HTTP_ERROR:const g=u.getStatus();if(H(Xe,`RPC '${e}' ${i} failed with status:`,g,"response text:",u.getResponseText()),g>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const x=m==null?void 0:m.error;if(x&&x.status&&x.message){const C=function(L){const _=L.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(_)>=0?_:V.UNKNOWN}(x.status);l(new q(C,x.message))}else l(new q(V.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new q(V.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{H(Xe,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);H(Xe,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=xc(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=i0(),l=s0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");H(Xe,`Creating RPC '${e}' stream ${s}: ${f}`,u);const g=o.createWebChannel(f,u);let m=!1,x=!1;const C=new ex({Io:L=>{x?H(Xe,`Not sending because RPC '${e}' stream ${s} is closed:`,L):(m||(H(Xe,`Opening RPC '${e}' stream ${s} transport.`),g.open(),m=!0),H(Xe,`RPC '${e}' stream ${s} sending:`,L),g.send(L))},To:()=>g.close()}),b=(L,_,w)=>{L.listen(_,A=>{try{w(A)}catch(N){setTimeout(()=>{throw N},0)}})};return b(g,Ti.EventType.OPEN,()=>{x||(H(Xe,`RPC '${e}' stream ${s} transport opened.`),C.yo())}),b(g,Ti.EventType.CLOSE,()=>{x||(x=!0,H(Xe,`RPC '${e}' stream ${s} transport closed`),C.So())}),b(g,Ti.EventType.ERROR,L=>{x||(x=!0,bs(Xe,`RPC '${e}' stream ${s} transport errored:`,L),C.So(new q(V.UNAVAILABLE,"The operation could not be completed")))}),b(g,Ti.EventType.MESSAGE,L=>{var _;if(!x){const w=L.data[0];le(!!w);const A=w,N=A.error||((_=A[0])===null||_===void 0?void 0:_.error);if(N){H(Xe,`RPC '${e}' stream ${s} received error:`,N);const M=N.status;let j=function(E){const I=Ce[E];if(I!==void 0)return P0(I)}(M),T=N.message;j===void 0&&(j=V.INTERNAL,T="Unknown error status: "+M+" with message "+N.message),x=!0,C.So(new q(j,T)),g.close()}else H(Xe,`RPC '${e}' stream ${s} received:`,w),C.bo(w)}}),b(l,r0.STAT_EVENT,L=>{L.stat===Ph.PROXY?H(Xe,`RPC '${e}' stream ${s} detected buffering proxy`):L.stat===Ph.NOPROXY&&H(Xe,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}}function Sc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(t){return new h6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e,n,r,s,i,o,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new B0(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(Tn(n.toString()),Tn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new q(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nx extends $0{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=p6(this.serializer,e),r=function(i){if(!("targetChange"in i))return J.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?J.min():o.readTime?Qt(o.readTime):J.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Fh(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=Lh(u)?{documents:y6(i,u)}:{query:v6(i,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=D0(i,o.resumeToken);const h=Oh(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(J.min())>0){l.readTime=xl(i,o.snapshotVersion.toTimestamp());const h=Oh(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=w6(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Fh(this.serializer),n.removeTarget=e,this.a_(n)}}class rx extends $0{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return le(!!e.streamToken),this.lastStreamToken=e.streamToken,le(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=m6(e.writeResults,e.commitTime),r=Qt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Fh(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>g6(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new q(V.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Mh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(V.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Mh(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(V.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class ix{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Tn(n),this.D_=!1):H("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Hr(this)&&(H("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=X(u);h.L_.add(4),await So(h),h.q_.set("Unknown"),h.L_.delete(4),await ou(h)}(this))})}),this.q_=new ix(r,s)}}async function ou(t){if(Hr(t))for(const e of t.B_)await e(!0)}async function So(t){for(const e of t.B_)await e(!1)}function q0(t,e){const n=X(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),gf(n)?pf(n):Ws(n).r_()&&ff(n,e))}function df(t,e){const n=X(t),r=Ws(n);n.N_.delete(e),r.r_()&&H0(n,e),n.N_.size===0&&(r.r_()?r.o_():Hr(n)&&n.q_.set("Unknown"))}function ff(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ws(t).A_(e)}function H0(t,e){t.Q_.xe(e),Ws(t).R_(e)}function pf(t){t.Q_=new a6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ws(t).start(),t.q_.v_()}function gf(t){return Hr(t)&&!Ws(t).n_()&&t.N_.size>0}function Hr(t){return X(t).L_.size===0}function W0(t){t.Q_=void 0}async function ax(t){t.q_.set("Online")}async function lx(t){t.N_.forEach((e,n)=>{ff(t,e)})}async function ux(t,e){W0(t),gf(t)?(t.q_.M_(e),pf(t)):t.q_.set("Unknown")}async function cx(t,e,n){if(t.q_.set("Online"),e instanceof N0&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Sl(t,r)}else if(e instanceof Fa?t.Q_.Ke(e):e instanceof b0?t.Q_.He(e):t.Q_.We(e),!n.isEqual(J.min()))try{const r=await z0(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.N_.get(h);f&&i.N_.set(h,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const f=i.N_.get(u);if(!f)return;i.N_.set(u,f.withResumeToken(He.EMPTY_BYTE_STRING,f.snapshotVersion)),H0(i,u);const g=new $n(f.target,u,h,f.sequenceNumber);ff(i,g)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){H("RemoteStore","Failed to raise snapshot:",r),await Sl(t,r)}}async function Sl(t,e,n){if(!To(e))throw e;t.L_.add(1),await So(t),t.q_.set("Offline"),n||(n=()=>z0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await ou(t)})}function G0(t,e){return e().catch(n=>Sl(t,n,e))}async function au(t){const e=X(t),n=lr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;hx(e);)try{const s=await K6(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,dx(e,s)}catch(s){await Sl(e,s)}K0(e)&&Q0(e)}function hx(t){return Hr(t)&&t.O_.length<10}function dx(t,e){t.O_.push(e);const n=lr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function K0(t){return Hr(t)&&!lr(t).n_()&&t.O_.length>0}function Q0(t){lr(t).start()}async function fx(t){lr(t).p_()}async function px(t){const e=lr(t);for(const n of t.O_)e.m_(n.mutations)}async function gx(t,e,n){const r=t.O_.shift(),s=of.from(r,e,n);await G0(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await au(t)}async function mx(t,e){e&&lr(t).V_&&await async function(r,s){if(function(o){return s6(o)&&o!==V.ABORTED}(s.code)){const i=r.O_.shift();lr(r).s_(),await G0(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await au(r)}}(t,e),K0(t)&&Q0(t)}async function Nm(t,e){const n=X(t);n.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");const r=Hr(n);n.L_.add(3),await So(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await ou(n)}async function yx(t,e){const n=X(t);e?(n.L_.delete(2),await ou(n)):e||(n.L_.add(2),await So(n),n.q_.set("Unknown"))}function Ws(t){return t.K_||(t.K_=function(n,r,s){const i=X(n);return i.w_(),new nx(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:ax.bind(null,t),Ro:lx.bind(null,t),mo:ux.bind(null,t),d_:cx.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),gf(t)?pf(t):t.q_.set("Unknown")):(await t.K_.stop(),W0(t))})),t.K_}function lr(t){return t.U_||(t.U_=function(n,r,s){const i=X(n);return i.w_(),new rx(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:fx.bind(null,t),mo:mx.bind(null,t),f_:px.bind(null,t),g_:gx.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await au(t)):(await t.U_.stop(),t.O_.length>0&&(H("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new mf(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yf(t,e){if(Tn("AsyncQueue",`${e}: ${t}`),To(t))return new q(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=Ii(),this.sortedSet=new Te(this.comparator)}static emptySet(e){return new _s(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof _s)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new _s;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(){this.W_=new Te(W.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Q():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Os{constructor(e,n,r,s,i,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Os(e,n,_s.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&eu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class _x{constructor(){this.queries=Lm(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=X(n),i=s.queries;s.queries=Lm(),i.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new q(V.ABORTED,"Firestore shutting down"))}}function Lm(){return new Hs(t=>v0(t),eu)}async function wx(t,e){const n=X(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new vx,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=yf(o,`Initialization of query '${Xr(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&vf(n)}async function Ex(t,e){const n=X(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Tx(t,e){const n=X(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&vf(n)}function Ix(t,e,n){const r=X(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function vf(t){t.Y_.forEach(e=>{e.next()})}var zh,Vm;(Vm=zh||(zh={})).ea="default",Vm.Cache="cache";class xx{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Os(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Os.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==zh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e){this.key=e}}class X0{constructor(e){this.key=e}}class Sx{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ee(),this.mutatedKeys=ee(),this.Aa=_0(e),this.Ra=new _s(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Dm,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,g)=>{const m=s.get(f),x=tu(this.query,g)?g:null,C=!!m&&this.mutatedKeys.has(m.key),b=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let L=!1;m&&x?m.data.isEqual(x.data)?C!==b&&(r.track({type:3,doc:x}),L=!0):this.ga(m,x)||(r.track({type:2,doc:x}),L=!0,(u&&this.Aa(x,u)>0||h&&this.Aa(x,h)<0)&&(l=!0)):!m&&x?(r.track({type:0,doc:x}),L=!0):m&&!x&&(r.track({type:1,doc:m}),L=!0,(u||h)&&(l=!0)),L&&(x?(o=o.add(x),i=b?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,g)=>function(x,C){const b=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return b(x)-b(C)}(f.type,g.type)||this.Aa(f.doc,g.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,h=u!==this.Ea;return this.Ea=u,o.length!==0||h?{snapshot:new Os(this.query,e.Ra,i,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Dm,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ee(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new X0(r))}),this.da.forEach(r=>{e.has(r)||n.push(new J0(r))}),n}ba(e){this.Ta=e.Ts,this.da=ee();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Os.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Ax{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class kx{constructor(e){this.key=e,this.va=!1}}class Cx{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Hs(l=>v0(l),eu),this.Ma=new Map,this.xa=new Set,this.Oa=new Te(W.comparator),this.Na=new Map,this.La=new uf,this.Ba={},this.ka=new Map,this.qa=Vs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Rx(t,e,n=!0){const r=rw(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await Y0(r,e,n,!0),s}async function Px(t,e){const n=rw(t);await Y0(n,e,!0,!1)}async function Y0(t,e,n,r){const s=await Q6(t.localStore,Kt(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await bx(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&q0(t.remoteStore,s),l}async function bx(t,e,n,r,s){t.Ka=(g,m,x)=>async function(b,L,_,w){let A=L.view.ma(_);A.ns&&(A=await Rm(b.localStore,L.query,!1).then(({documents:T})=>L.view.ma(T,A)));const N=w&&w.targetChanges.get(L.targetId),M=w&&w.targetMismatches.get(L.targetId)!=null,j=L.view.applyChanges(A,b.isPrimaryClient,N,M);return Mm(b,L.targetId,j.wa),j.snapshot}(t,g,m,x);const i=await Rm(t.localStore,e,!0),o=new Sx(e,i.Ts),l=o.ma(i.documents),u=xo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(l,t.isPrimaryClient,u);Mm(t,n,h.wa);const f=new Ax(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function Nx(t,e,n){const r=X(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!eu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Uh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&df(r.remoteStore,s.targetId),Bh(r,s.targetId)}).catch(Eo)):(Bh(r,s.targetId),await Uh(r.localStore,s.targetId,!0))}async function Dx(t,e){const n=X(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),df(n.remoteStore,r.targetId))}async function Lx(t,e,n){const r=zx(t);try{const s=await function(o,l){const u=X(o),h=De.now(),f=l.reduce((x,C)=>x.add(C.key),ee());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",x=>{let C=In(),b=ee();return u.cs.getEntries(x,f).next(L=>{C=L,C.forEach((_,w)=>{w.isValidDocument()||(b=b.add(_))})}).next(()=>u.localDocuments.getOverlayedDocuments(x,C)).next(L=>{g=L;const _=[];for(const w of l){const A=Z4(w,g.get(w.key).overlayedDocument);A!=null&&_.push(new fr(w.key,A,c0(A.value.mapValue),bt.exists(!0)))}return u.mutationQueue.addMutationBatch(x,h,_,l)}).next(L=>{m=L;const _=L.applyToLocalDocumentSet(g,b);return u.documentOverlayCache.saveOverlays(x,L.batchId,_)})}).then(()=>({batchId:m.batchId,changes:E0(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let h=o.Ba[o.currentUser.toKey()];h||(h=new Te(oe)),h=h.insert(l,u),o.Ba[o.currentUser.toKey()]=h}(r,s.batchId,n),await Ao(r,s.changes),await au(r.remoteStore)}catch(s){const i=yf(s,"Failed to persist write");n.reject(i)}}async function Z0(t,e){const n=X(t);try{const r=await W6(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(le(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?le(o.va):s.removedDocuments.size>0&&(le(o.va),o.va=!1))}),await Ao(n,r,e)}catch(r){await Eo(r)}}function Om(t,e,n){const r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=X(o);u.onlineState=l;let h=!1;u.queries.forEach((f,g)=>{for(const m of g.j_)m.Z_(l)&&(h=!0)}),h&&vf(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Vx(t,e,n){const r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Te(W.comparator);o=o.insert(i,et.newNoDocument(i,J.min()));const l=ee().add(i),u=new su(J.min(),new Map,new Te(oe),o,l);await Z0(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),_f(r)}else await Uh(r.localStore,e,!1).then(()=>Bh(r,e,n)).catch(Eo)}async function Ox(t,e){const n=X(t),r=e.batch.batchId;try{const s=await H6(n.localStore,e);tw(n,r,null),ew(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ao(n,s)}catch(s){await Eo(s)}}async function Mx(t,e,n){const r=X(t);try{const s=await function(o,l){const u=X(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(le(g!==null),f=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(r.localStore,e);tw(r,e,n),ew(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ao(r,s)}catch(s){await Eo(s)}}function ew(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function tw(t,e,n){const r=X(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Bh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||nw(t,r)})}function nw(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(df(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),_f(t))}function Mm(t,e,n){for(const r of n)r instanceof J0?(t.La.addReference(r.key,e),jx(t,r)):r instanceof X0?(H("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||nw(t,r.key)):Q()}function jx(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(H("SyncEngine","New document in limbo: "+n),t.xa.add(r),_f(t))}function _f(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new W(ge.fromString(e)),r=t.qa.next();t.Na.set(r,new kx(n)),t.Oa=t.Oa.insert(n,r),q0(t.remoteStore,new $n(Kt(nf(n.path)),r,"TargetPurposeLimboResolution",Jd.oe))}}async function Ao(t,e,n){const r=X(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(h=>{var f;if((h||n)&&r.isPrimaryClient){const g=h?!h.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){s.push(h);const g=hf.Wi(u.targetId,h);i.push(g)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,h){const f=X(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>O.forEach(h,m=>O.forEach(m.$i,x=>f.persistence.referenceDelegate.addReference(g,m.targetId,x)).next(()=>O.forEach(m.Ui,x=>f.persistence.referenceDelegate.removeReference(g,m.targetId,x)))))}catch(g){if(!To(g))throw g;H("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const m=g.targetId;if(!g.fromCache){const x=f.os.get(m),C=x.snapshotVersion,b=x.withLastLimboFreeSnapshotVersion(C);f.os=f.os.insert(m,b)}}}(r.localStore,i))}async function Fx(t,e){const n=X(t);if(!n.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());const r=await U0(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new q(V.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ao(n,r.hs)}}function Ux(t,e){const n=X(t),r=n.Na.get(e);if(r&&r.va)return ee().add(r.key);{let s=ee();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function rw(t){const e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Z0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ux.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Vx.bind(null,e),e.Ca.d_=Tx.bind(null,e.eventManager),e.Ca.$a=Ix.bind(null,e.eventManager),e}function zx(t){const e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ox.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Mx.bind(null,e),e}class Al{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=iu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return q6(this.persistence,new B6,e.initialUser,this.serializer)}Ga(e){return new F6(cf.Zr,this.serializer)}Wa(e){return new X6}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Al.provider={build:()=>new Al};class $h{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Om(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Fx.bind(null,this.syncEngine),await yx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _x}()}createDatastore(e){const n=iu(e.databaseInfo.databaseId),r=function(i){return new tx(i)}(e.databaseInfo);return function(i,o,l,u){return new sx(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new ox(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Om(this.syncEngine,n,0),function(){return bm.D()?new bm:new Y6}())}createSyncEngine(e,n){return function(s,i,o,l,u,h,f){const g=new Cx(s,i,o,l,u,h);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=X(s);H("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await So(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}$h.provider={build:()=>new $h};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Tn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ye.UNAUTHENTICATED,this.clientId=a0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=yf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ac(t,e){t.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await U0(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function jm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await qx(t);H("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Nm(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Nm(e.remoteStore,s)),t._onlineComponents=e}async function qx(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ac(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===V.FAILED_PRECONDITION||s.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;bs("Error using user provided cache. Falling back to memory cache: "+n),await Ac(t,new Al)}}else H("FirestoreClient","Using default OfflineComponentProvider"),await Ac(t,new Al);return t._offlineComponents}async function sw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),await jm(t,t._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),await jm(t,new $h))),t._onlineComponents}function Hx(t){return sw(t).then(e=>e.syncEngine)}async function Fm(t){const e=await sw(t),n=e.eventManager;return n.onListen=Rx.bind(null,e.syncEngine),n.onUnlisten=Nx.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Px.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Dx.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(t,e,n){if(!n)throw new q(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Wx(t,e,n,r){if(e===!0&&r===!0)throw new q(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function zm(t){if(!W.isDocumentKey(t))throw new q(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Bm(t){if(W.isDocumentKey(t))throw new q(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function lu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q()}function Jt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=lu(t);throw new q(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Wx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new q(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new q(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new q(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class uu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $m({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $m(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new l4;switch(r.type){case"firstParty":return new d4(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Um.get(n);r&&(H("ComponentProvider","Removing Datastore"),Um.delete(n),r.terminate())}(this),Promise.resolve()}}function Gx(t,e,n,r={}){var s;const i=(t=Jt(t,uu))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&bs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=Ye.MOCK_USER;else{l=jT(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new q(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ye(h)}t._authCredentials=new u4(new o0(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new pr(this.firestore,e,this._query)}}class ut{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ut(this.firestore,e,this._key)}}class tr extends pr{constructor(e,n,r){super(e,n,nf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ut(this.firestore,null,new W(e))}withConverter(e){return new tr(this.firestore,e,this._path)}}function cu(t,e,...n){if(t=qe(t),ow("collection","path",e),t instanceof uu){const r=ge.fromString(e,...n);return Bm(r),new tr(t,null,r)}{if(!(t instanceof ut||t instanceof tr))throw new q(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ge.fromString(e,...n));return Bm(r),new tr(t.firestore,null,r)}}function ko(t,e,...n){if(t=qe(t),arguments.length===1&&(e=a0.newId()),ow("doc","path",e),t instanceof uu){const r=ge.fromString(e,...n);return zm(r),new ut(t,null,new W(r))}{if(!(t instanceof ut||t instanceof tr))throw new q(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ge.fromString(e,...n));return zm(r),new ut(t.firestore,t instanceof tr?t.converter:null,new W(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new B0(this,"async_queue_retry"),this.Vu=()=>{const r=Sc();r&&H("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Sc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Sc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Pr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!To(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Tn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=mf.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Q()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Hm(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Ur extends uu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new qm,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new qm(e),this._firestoreClient=void 0,await e}}}function Kx(t,e){const n=typeof t=="object"?t:X_(),r=typeof t=="string"?t:"(default)",s=Kd(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=OT("firestore");i&&Gx(s,...i)}return s}function aw(t){if(t._terminated)throw new q(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Qx(t),t._firestoreClient}function Qx(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,h,f){return new S4(l,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,iw(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new $x(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ms(He.fromBase64String(e))}catch(n){throw new q(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ms(He.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ue(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx=/^__.*__$/;class Xx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new fr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Io(e,this.data,n,this.fieldTransforms)}}class lw{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new fr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function uw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}class If{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new If(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return kl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(uw(this.Cu)&&Jx.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Yx{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||iu(e)}Qu(e,n,r,s=!1){return new If({Cu:e,methodName:n,qu:r,path:Ue.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function du(t){const e=t._freezeSettings(),n=iu(t._databaseId);return new Yx(t._databaseId,!!e.ignoreUndefinedProperties,n)}function cw(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);xf("Data must be an object, but it was:",o,r);const l=hw(r,o);let u,h;if(i.merge)u=new Tt(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const g of i.mergeFields){const m=qh(e,g,n);if(!o.contains(m))throw new q(V.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);fw(f,m)||f.push(m)}u=new Tt(f),h=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=o.fieldTransforms;return new Xx(new pt(l),u,h)}class Co extends wf{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Co}}function Zx(t,e,n,r){const s=t.Qu(1,e,n);xf("Data must be an object, but it was:",s,r);const i=[],o=pt.empty();qr(r,(u,h)=>{const f=Sf(e,u,n);h=qe(h);const g=s.Nu(f);if(h instanceof Co)i.push(f);else{const m=Ro(h,g);m!=null&&(i.push(f),o.set(f,m))}});const l=new Tt(i);return new lw(o,l,s.fieldTransforms)}function e2(t,e,n,r,s,i){const o=t.Qu(1,e,n),l=[qh(e,r,n)],u=[s];if(i.length%2!=0)throw new q(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(qh(e,i[m])),u.push(i[m+1]);const h=[],f=pt.empty();for(let m=l.length-1;m>=0;--m)if(!fw(h,l[m])){const x=l[m];let C=u[m];C=qe(C);const b=o.Nu(x);if(C instanceof Co)h.push(x);else{const L=Ro(C,b);L!=null&&(h.push(x),f.set(x,L))}}const g=new Tt(h);return new lw(f,g,o.fieldTransforms)}function t2(t,e,n,r=!1){return Ro(n,t.Qu(r?4:3,e))}function Ro(t,e){if(dw(t=qe(t)))return xf("Unsupported field value:",e,t),hw(t,e);if(t instanceof wf)return function(r,s){if(!uw(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=Ro(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return G4(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=De.fromDate(r);return{timestampValue:xl(s.serializer,i)}}if(r instanceof De){const i=new De(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xl(s.serializer,i)}}if(r instanceof Ef)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ms)return{bytesValue:D0(s.serializer,r._byteString)};if(r instanceof ut){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:lf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Tf)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return rf(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${lu(r)}`)}(t,e)}function hw(t,e){const n={};return l0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qr(t,(r,s)=>{const i=Ro(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function dw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof De||t instanceof Ef||t instanceof Ms||t instanceof ut||t instanceof wf||t instanceof Tf)}function xf(t,e,n){if(!dw(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=lu(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function qh(t,e,n){if((e=qe(e))instanceof hu)return e._internalPath;if(typeof e=="string")return Sf(t,e);throw kl("Field path arguments must be of type string or ",t,!1,void 0,n)}const n2=new RegExp("[~\\*/\\[\\]]");function Sf(t,e,n){if(e.search(n2)>=0)throw kl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new hu(...e.split("."))._internalPath}catch{throw kl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function kl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new q(V.INVALID_ARGUMENT,l+t+u)}function fw(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new r2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Af("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class r2 extends pw{data(){return super.data()}}function Af(t,e){return typeof e=="string"?Sf(t,e):e instanceof hu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kf{}class Cf extends kf{}function i2(t,e,...n){let r=[];e instanceof kf&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Pf).length,l=i.filter(u=>u instanceof Rf).length;if(o>1||o>0&&l>0)throw new q(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Rf extends Cf{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Rf(e,n,r)}_apply(e){const n=this._parse(e);return gw(e._query,n),new pr(e.firestore,e.converter,Vh(e._query,n))}_parse(e){const n=du(e.firestore);return function(i,o,l,u,h,f,g){let m;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new q(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Gm(g,f);const x=[];for(const C of g)x.push(Wm(u,i,C));m={arrayValue:{values:x}}}else m=Wm(u,i,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Gm(g,f),m=t2(l,o,g,f==="in"||f==="not-in");return Pe.create(h,f,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Pf extends kf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Pf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Bt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)gw(o,u),o=Vh(o,u)}(e._query,n),new pr(e.firestore,e.converter,Vh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class bf extends Cf{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new bf(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new q(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new q(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new uo(i,o)}(e._query,this._field,this._direction);return new pr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new qs(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function o2(t,e="asc"){const n=e,r=Af("orderBy",t);return bf._create(r,n)}class Nf extends Cf{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Nf(e,n,r)}_apply(e){return new pr(e.firestore,e.converter,El(e._query,this._limit,this._limitType))}}function a2(t){return Nf._create("limit",t,"F")}function Wm(t,e,n){if(typeof(n=qe(n))=="string"){if(n==="")throw new q(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!y0(e)&&n.indexOf("/")!==-1)throw new q(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ge.fromString(n));if(!W.isDocumentKey(r))throw new q(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return dm(t,new W(r))}if(n instanceof ut)return dm(t,n._key);throw new q(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lu(n)}.`)}function Gm(t,e){if(!Array.isArray(t)||t.length===0)throw new q(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gw(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class l2{convertValue(e,n="none"){switch(Fr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ae(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(jr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return qr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Ae(o.doubleValue));return new Tf(i)}convertGeoPoint(e){return new Ef(Ae(e.latitude),Ae(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Yd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(oo(e));default:return null}}convertTimestamp(e){const n=ar(e);return new De(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ge.fromString(e);le(F0(r));const s=new ao(r.get(1),r.get(3)),i=new W(r.popFirst(5));return s.isEqual(n)||Tn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yw extends pw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ua(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Af("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Ua extends yw{data(e={}){return super.data(e)}}class u2{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Si(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ua(this._firestore,this._userDataWriter,r.key,r,new Si(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new Ua(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Si(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new Ua(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Si(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,f=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:c2(l.type),doc:u,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function c2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}class vw extends l2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ms(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ut(this.firestore,null,n)}}function h2(t,e,n){t=Jt(t,ut);const r=Jt(t.firestore,Ur),s=mw(t.converter,e,n);return pu(r,[cw(du(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,bt.none())])}function Po(t,e,n,...r){t=Jt(t,ut);const s=Jt(t.firestore,Ur),i=du(s);let o;return o=typeof(e=qe(e))=="string"||e instanceof hu?e2(i,"updateDoc",t._key,e,n,r):Zx(i,"updateDoc",t._key,e),pu(s,[o.toMutation(t._key,bt.exists(!0))])}function _w(t){return pu(Jt(t.firestore,Ur),[new sf(t._key,bt.none())])}function ww(t,e){const n=Jt(t.firestore,Ur),r=ko(t),s=mw(t.converter,e);return pu(n,[cw(du(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,bt.exists(!1))]).then(()=>r)}function fu(t,...e){var n,r,s;t=qe(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Hm(e[o])||(i=e[o],o++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Hm(e[o])){const g=e[o];e[o]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[o+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[o+2]=(s=g.complete)===null||s===void 0?void 0:s.bind(g)}let u,h,f;if(t instanceof ut)h=Jt(t.firestore,Ur),f=nf(t._key.path),u={next:g=>{e[o]&&e[o](d2(h,t,g))},error:e[o+1],complete:e[o+2]};else{const g=Jt(t,pr);h=Jt(g.firestore,Ur),f=g._query;const m=new vw(h);u={next:x=>{e[o]&&e[o](new u2(h,m,g,x))},error:e[o+1],complete:e[o+2]},s2(t._query)}return function(m,x,C,b){const L=new Bx(b),_=new xx(x,L,C);return m.asyncQueue.enqueueAndForget(async()=>wx(await Fm(m),_)),()=>{L.Za(),m.asyncQueue.enqueueAndForget(async()=>Ex(await Fm(m),_))}}(aw(h),f,l,u)}function pu(t,e){return function(r,s){const i=new Pr;return r.asyncQueue.enqueueAndForget(async()=>Lx(await Hx(r),s,i)),i.promise}(aw(t),e)}function d2(t,e,n){const r=n.docs.get(e._key),s=new vw(t);return new yw(t,s,e._key,r,new Si(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(){return new Co("deleteField")}(function(e,n=!0){(function(s){$s=s})(Bs),Ps(new Or("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Ur(new c4(r.getProvider("auth-internal")),new p4(r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new q(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ao(h.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),er(am,"4.7.3",e),er(am,"4.7.3","esm2017")})();var p2="firebase",g2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */er(p2,g2,"app");function Df(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Ew(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const m2=Ew,Tw=new _o("auth","Firebase",Ew());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl=new Wd("@firebase/auth");function y2(t,...e){Cl.logLevel<=te.WARN&&Cl.warn(`Auth (${Bs}): ${t}`,...e)}function za(t,...e){Cl.logLevel<=te.ERROR&&Cl.error(`Auth (${Bs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t,...e){throw Lf(t,...e)}function Xt(t,...e){return Lf(t,...e)}function Iw(t,e,n){const r=Object.assign(Object.assign({},m2()),{[e]:n});return new _o("auth","Firebase",r).create(e,{appName:t.name})}function nr(t){return Iw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Lf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Tw.create(t,...e)}function K(t,e,...n){if(!t)throw Lf(e,...n)}function fn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw za(e),new Error(e)}function Sn(t,e){t||fn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function v2(){return Km()==="http:"||Km()==="https:"}function Km(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(v2()||BT()||"connection"in navigator)?navigator.onLine:!0}function w2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,n){this.shortDelay=e,this.longDelay=n,Sn(n>e,"Short delay should be less than long delay!"),this.isMobile=FT()||$T()}get(){return _2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(t,e){Sn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2=new bo(3e4,6e4);function gu(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Gs(t,e,n,r,s={}){return Sw(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=wo(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},i);return zT()||(h.referrerPolicy="no-referrer"),xw.fetch()(kw(t,t.config.apiHost,n,l),h)})}async function Sw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},E2),e);try{const s=new I2(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ta(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ta(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ta(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ta(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Iw(t,f,h);xn(t,f)}}catch(s){if(s instanceof kn)throw s;xn(t,"network-request-failed",{message:String(s)})}}async function Aw(t,e,n,r,s={}){const i=await Gs(t,e,n,r,s);return"mfaPendingCredential"in i&&xn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function kw(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Vf(t.config,s):`${t.config.apiScheme}://${s}`}class I2{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Xt(this.auth,"network-request-failed")),T2.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ta(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Xt(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x2(t,e){return Gs(t,"POST","/v1/accounts:delete",e)}async function Cw(t,e){return Gs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function S2(t,e=!1){const n=qe(t),r=await n.getIdToken(e),s=Of(r);K(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Fi(kc(s.auth_time)),issuedAtTime:Fi(kc(s.iat)),expirationTime:Fi(kc(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function kc(t){return Number(t)*1e3}function Of(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return za("JWT malformed, contained fewer than 3 sections"),null;try{const s=q_(n);return s?JSON.parse(s):(za("Failed to decode base64 JWT payload"),null)}catch(s){return za("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Qm(t){const e=Of(t);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof kn&&A2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function A2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fi(this.lastLoginAt),this.creationTime=Fi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rl(t){var e;const n=t.auth,r=await t.getIdToken(),s=await fo(t,Cw(n,{idToken:r}));K(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Rw(i.providerUserInfo):[],l=R2(t.providerData,o),u=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),f=u?h:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Wh(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,g)}async function C2(t){const e=qe(t);await Rl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function R2(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Rw(t){return t.map(e=>{var{providerId:n}=e,r=Df(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P2(t,e){const n=await Sw(t,{},async()=>{const r=wo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=kw(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",xw.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function b2(t,e){return Gs(t,"POST","/v2/accounts:revokeToken",gu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Qm(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){K(e.length!==0,"internal-error");const n=Qm(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await P2(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ws;return r&&(K(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(K(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(K(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ws,this.toJSON())}_performRefresh(){return fn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(t,e){K(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class pn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Df(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new k2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Wh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await fo(this,this.stsTokenManager.getToken(this.auth,e));return K(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return S2(this,e)}reload(){return C2(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new pn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Rl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dn(this.auth.app))return Promise.reject(nr(this.auth));const e=await this.getIdToken();return await fo(this,x2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,u,h,f;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,x=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,C=(o=n.photoURL)!==null&&o!==void 0?o:void 0,b=(l=n.tenantId)!==null&&l!==void 0?l:void 0,L=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,_=(h=n.createdAt)!==null&&h!==void 0?h:void 0,w=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:A,emailVerified:N,isAnonymous:M,providerData:j,stsTokenManager:T}=n;K(A&&T,e,"internal-error");const v=ws.fromJSON(this.name,T);K(typeof A=="string",e,"internal-error"),Nn(g,e.name),Nn(m,e.name),K(typeof N=="boolean",e,"internal-error"),K(typeof M=="boolean",e,"internal-error"),Nn(x,e.name),Nn(C,e.name),Nn(b,e.name),Nn(L,e.name),Nn(_,e.name),Nn(w,e.name);const E=new pn({uid:A,auth:e,email:m,emailVerified:N,displayName:g,isAnonymous:M,photoURL:C,phoneNumber:x,tenantId:b,stsTokenManager:v,createdAt:_,lastLoginAt:w});return j&&Array.isArray(j)&&(E.providerData=j.map(I=>Object.assign({},I))),L&&(E._redirectEventId=L),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new ws;s.updateFromServerResponse(n);const i=new pn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Rl(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];K(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Rw(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new ws;l.updateFromIdToken(r);const u=new pn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Wh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm=new Map;function gn(t){Sn(t instanceof Function,"Expected a class definition");let e=Jm.get(t);return e?(Sn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Jm.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Pw.type="NONE";const Xm=Pw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ba(t,e,n){return`firebase:${t}:${e}:${n}`}class Es{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ba(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ba("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?pn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Es(gn(Xm),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||gn(Xm);const o=Ba(r,e.config.apiKey,e.name);let l=null;for(const h of n)try{const f=await h._get(o);if(f){const g=pn._fromJSON(e,f);h!==i&&(l=g),i=h;break}}catch{}const u=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Es(i,e,r):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new Es(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Lw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ow(e))return"Blackberry";if(Mw(e))return"Webos";if(Nw(e))return"Safari";if((e.includes("chrome/")||Dw(e))&&!e.includes("edge/"))return"Chrome";if(Vw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function bw(t=nt()){return/firefox\//i.test(t)}function Nw(t=nt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Dw(t=nt()){return/crios\//i.test(t)}function Lw(t=nt()){return/iemobile/i.test(t)}function Vw(t=nt()){return/android/i.test(t)}function Ow(t=nt()){return/blackberry/i.test(t)}function Mw(t=nt()){return/webos/i.test(t)}function Mf(t=nt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function N2(t=nt()){var e;return Mf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function D2(){return qT()&&document.documentMode===10}function jw(t=nt()){return Mf(t)||Vw(t)||Mw(t)||Ow(t)||/windows phone/i.test(t)||Lw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(t,e=[]){let n;switch(t){case"Browser":n=Ym(nt());break;case"Worker":n=`${Ym(nt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Bs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V2(t,e={}){return Gs(t,"GET","/v2/passwordPolicy",gu(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=6;class M2{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:O2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zm(this),this.idTokenSubscription=new Zm(this),this.beforeStateQueue=new L2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Tw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Es.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Cw(this,{idToken:e}),r=await pn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(dn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Rl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=w2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(dn(this.app))return Promise.reject(nr(this));const n=e?qe(e):null;return n&&K(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return dn(this.app)?Promise.reject(nr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return dn(this.app)?Promise.reject(nr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await V2(this),n=new M2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new _o("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await b2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&gn(e)||this._popupRedirectResolver;K(n,this,"argument-error"),this.redirectPersistenceManager=await Es.create(this,[gn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Fw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&y2(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function mu(t){return qe(t)}class Zm{constructor(e){this.auth=e,this.observer=null,this.addObserver=YT(n=>this.observer=n)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function F2(t){jf=t}function U2(t){return jf.loadJS(t)}function z2(){return jf.gapiScript}function B2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(t,e){const n=Kd(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(yl(i,e??{}))return s;xn(s,"already-initialized")}return n.initialize({options:e})}function q2(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(gn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function H2(t,e,n){const r=mu(t);K(r._canInitEmulator,r,"emulator-config-failed"),K(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Uw(e),{host:o,port:l}=W2(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),G2()}function Uw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function W2(t){const e=Uw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:ey(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:ey(o)}}}function ey(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function G2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return fn("not implemented")}_getIdTokenResponse(e){return fn("not implemented")}_linkToIdToken(e,n){return fn("not implemented")}_getReauthenticationResolver(e){return fn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ts(t,e){return Aw(t,"POST","/v1/accounts:signInWithIdp",gu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2="http://localhost";class zr extends zw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new zr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):xn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Df(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new zr(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ts(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ts(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ts(e,n)}buildRequest(){const e={requestUri:K2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=wo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No extends Bw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn extends No{constructor(){super("facebook.com")}static credential(e){return zr._fromParams({providerId:Mn.PROVIDER_ID,signInMethod:Mn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mn.credentialFromTaggedObject(e)}static credentialFromError(e){return Mn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mn.credential(e.oauthAccessToken)}catch{return null}}}Mn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn extends No{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return zr._fromParams({providerId:jn.PROVIDER_ID,signInMethod:jn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return jn.credentialFromTaggedObject(e)}static credentialFromError(e){return jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return jn.credential(n,r)}catch{return null}}}jn.GOOGLE_SIGN_IN_METHOD="google.com";jn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn extends No{constructor(){super("github.com")}static credential(e){return zr._fromParams({providerId:Fn.PROVIDER_ID,signInMethod:Fn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fn.credentialFromTaggedObject(e)}static credentialFromError(e){return Fn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fn.credential(e.oauthAccessToken)}catch{return null}}}Fn.GITHUB_SIGN_IN_METHOD="github.com";Fn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un extends No{constructor(){super("twitter.com")}static credential(e,n){return zr._fromParams({providerId:Un.PROVIDER_ID,signInMethod:Un.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Un.credentialFromTaggedObject(e)}static credentialFromError(e){return Un.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Un.credential(n,r)}catch{return null}}}Un.TWITTER_SIGN_IN_METHOD="twitter.com";Un.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q2(t,e){return Aw(t,"POST","/v1/accounts:signUp",gu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await pn._fromIdTokenResponse(e,r,s),o=ty(r);return new ur({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=ty(r);return new ur({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function ty(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J2(t){var e;if(dn(t.app))return Promise.reject(nr(t));const n=mu(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new ur({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Q2(n,{returnSecureToken:!0}),s=await ur._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl extends kn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Pl.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Pl(e,n,r,s)}}function $w(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Pl._fromErrorAndOperation(t,i,e,r):i})}async function X2(t,e,n=!1){const r=await fo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ur._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y2(t,e,n=!1){const{auth:r}=t;if(dn(r.app))return Promise.reject(nr(r));const s="reauthenticate";try{const i=await fo(t,$w(r,s,e,t),n);K(i.idToken,r,"internal-error");const o=Of(i.idToken);K(o,r,"internal-error");const{sub:l}=o;return K(t.uid===l,r,"user-mismatch"),ur._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&xn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z2(t,e,n=!1){if(dn(t.app))return Promise.reject(nr(t));const r="signIn",s=await $w(t,r,e),i=await ur._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function eS(t,e,n,r){return qe(t).onIdTokenChanged(e,n,r)}function tS(t,e,n){return qe(t).beforeAuthStateChanged(e,n)}function nS(t,e,n,r){return qe(t).onAuthStateChanged(e,n,r)}const bl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(bl,"1"),this.storage.removeItem(bl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS=1e3,sS=10;class Hw extends qw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);D2()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,sS):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},rS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Hw.type="LOCAL";const iS=Hw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww extends qw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Ww.type="SESSION";const Gw=Ww;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new yu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async h=>h(n.origin,i)),u=await oS(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const h=Ff("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(g){const m=g;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(){return window}function lS(t){Yt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(){return typeof Yt().WorkerGlobalScope<"u"&&typeof Yt().importScripts=="function"}async function uS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cS(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function hS(){return Kw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw="firebaseLocalStorageDb",dS=1,Nl="firebaseLocalStorage",Jw="fbase_key";class Do{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function vu(t,e){return t.transaction([Nl],e?"readwrite":"readonly").objectStore(Nl)}function fS(){const t=indexedDB.deleteDatabase(Qw);return new Do(t).toPromise()}function Gh(){const t=indexedDB.open(Qw,dS);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Nl,{keyPath:Jw})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Nl)?e(r):(r.close(),await fS(),e(await Gh()))})})}async function ny(t,e,n){const r=vu(t,!0).put({[Jw]:e,value:n});return new Do(r).toPromise()}async function pS(t,e){const n=vu(t,!1).get(e),r=await new Do(n).toPromise();return r===void 0?null:r.value}function ry(t,e){const n=vu(t,!0).delete(e);return new Do(n).toPromise()}const gS=800,mS=3;class Xw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>mS)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Kw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yu._getInstance(hS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await uS(),!this.activeServiceWorker)return;this.sender=new aS(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gh();return await ny(e,bl,"1"),await ry(e,bl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ny(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>pS(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ry(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=vu(s,!1).getAll();return new Do(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Xw.type="LOCAL";const yS=Xw;new bo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(t,e){return e?gn(e):(K(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf extends zw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ts(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ts(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ts(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _S(t){return Z2(t.auth,new Uf(t),t.bypassAuthState)}function wS(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),Y2(n,new Uf(t),t.bypassAuthState)}async function ES(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),X2(n,new Uf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _S;case"linkViaPopup":case"linkViaRedirect":return ES;case"reauthViaPopup":case"reauthViaRedirect":return wS;default:xn(this.auth,"internal-error")}}resolve(e){Sn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Sn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS=new bo(2e3,1e4);class ds extends Yw{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ds.currentPopupAction&&ds.currentPopupAction.cancel(),ds.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return K(e,this.auth,"internal-error"),e}async onExecution(){Sn(this.filter.length===1,"Popup operations only handle one event");const e=Ff();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Xt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Xt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ds.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,TS.get())};e()}}ds.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS="pendingRedirect",$a=new Map;class xS extends Yw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=$a.get(this.auth._key());if(!e){try{const r=await SS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}$a.set(this.auth._key(),e)}return this.bypassAuthState||$a.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function SS(t,e){const n=CS(e),r=kS(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function AS(t,e){$a.set(t._key(),e)}function kS(t){return gn(t._redirectPersistence)}function CS(t){return Ba(IS,t.config.apiKey,t.name)}async function RS(t,e,n=!1){if(dn(t.app))return Promise.reject(nr(t));const r=mu(t),s=vS(r,e),o=await new xS(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=10*60*1e3;class bS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!NS(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Zw(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Xt(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=PS&&this.cachedEventUids.clear(),this.cachedEventUids.has(sy(e))}saveEventToCache(e){this.cachedEventUids.add(sy(e)),this.lastProcessedEventTime=Date.now()}}function sy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Zw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function NS(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DS(t,e={}){return Gs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,VS=/^https?/;async function OS(t){if(t.config.emulator)return;const{authorizedDomains:e}=await DS(t);for(const n of e)try{if(MS(n))return}catch{}xn(t,"unauthorized-domain")}function MS(t){const e=Hh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!VS.test(n))return!1;if(LS.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS=new bo(3e4,6e4);function iy(){const t=Yt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function FS(t){return new Promise((e,n)=>{var r,s,i;function o(){iy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{iy(),n(Xt(t,"network-request-failed"))},timeout:jS.get()})}if(!((s=(r=Yt().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Yt().gapi)===null||i===void 0)&&i.load)o();else{const l=B2("iframefcb");return Yt()[l]=()=>{gapi.load?o():n(Xt(t,"network-request-failed"))},U2(`${z2()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw qa=null,e})}let qa=null;function US(t){return qa=qa||FS(t),qa}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS=new bo(5e3,15e3),BS="__/auth/iframe",$S="emulator/auth/iframe",qS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},HS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WS(t){const e=t.config;K(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Vf(e,$S):`https://${t.config.authDomain}/${BS}`,r={apiKey:e.apiKey,appName:t.name,v:Bs},s=HS.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${wo(r).slice(1)}`}async function GS(t){const e=await US(t),n=Yt().gapi;return K(n,t,"internal-error"),e.open({where:document.body,url:WS(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qS,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Xt(t,"network-request-failed"),l=Yt().setTimeout(()=>{i(o)},zS.get());function u(){Yt().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},QS=500,JS=600,XS="_blank",YS="http://localhost";class oy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ZS(t,e,n,r=QS,s=JS){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},KS),{width:r.toString(),height:s.toString(),top:i,left:o}),h=nt().toLowerCase();n&&(l=Dw(h)?XS:n),bw(h)&&(e=e||YS,u.scrollbars="yes");const f=Object.entries(u).reduce((m,[x,C])=>`${m}${x}=${C},`,"");if(N2(h)&&l!=="_self")return eA(e||"",l),new oy(null);const g=window.open(e||"",l,f);K(g,t,"popup-blocked");try{g.focus()}catch{}return new oy(g)}function eA(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="__/auth/handler",nA="emulator/auth/handler",rA=encodeURIComponent("fac");async function ay(t,e,n,r,s,i){K(t.config.authDomain,t,"auth-domain-config-required"),K(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Bs,eventId:s};if(e instanceof Bw){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",XT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,g]of Object.entries({}))o[f]=g}if(e instanceof No){const f=e.getScopes().filter(g=>g!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),h=u?`#${rA}=${encodeURIComponent(u)}`:"";return`${sA(t)}?${wo(l).slice(1)}${h}`}function sA({config:t}){return t.emulator?Vf(t,nA):`https://${t.authDomain}/${tA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc="webStorageSupport";class iA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gw,this._completeRedirectFn=RS,this._overrideRedirectResult=AS}async _openPopup(e,n,r,s){var i;Sn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await ay(e,n,r,Hh(),s);return ZS(e,o,Ff())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await ay(e,n,r,Hh(),s);return lS(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Sn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await GS(e),r=new bS(e);return n.register("authEvent",s=>(K(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Cc,{type:Cc},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Cc];o!==void 0&&n(!!o),xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=OS(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return jw()||Nw()||Mf()}}const oA=iA;var ly="@firebase/auth",uy="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uA(t){Ps(new Or("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;K(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fw(t)},h=new j2(r,s,i,u);return q2(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ps(new Or("auth-internal",e=>{const n=mu(e.getProvider("auth").getImmediate());return(r=>new aA(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),er(ly,uy,lA(t)),er(ly,uy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=5*60,hA=G_("authIdTokenMaxAge")||cA;let cy=null;const dA=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>hA)return;const s=n==null?void 0:n.token;cy!==s&&(cy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function fA(t=X_()){const e=Kd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=$2(t,{popupRedirectResolver:oA,persistence:[yS,iS,Gw]}),r=G_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=dA(i.toString());tS(n,o,()=>o(n.currentUser)),eS(n,l=>o(l))}}const s=H_("auth");return s&&H2(n,`http://${s}`),n}function pA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}F2({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Xt("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",pA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uA("Browser");const gA={apiKey:"AIzaSyDtr1pAc2oTWxnDyMHUclkt4G34qdAAAXw",authDomain:"guitarehunter-d6e35.firebaseapp.com",projectId:"guitarehunter-d6e35",storageBucket:"guitarehunter-d6e35.firebasestorage.app",messagingSenderId:"832778342585",appId:"1:832778342585:web:ff1f8ccd8daf15be60cb68",measurementId:"G-RREDDZGFMR"},e1=J_(gA),hy=fA(e1),Lo=Kx(e1),_u="00737242777130596039",wu="c_5d118e719dbddbfc_index.html-217",t1=ko(Lo,"artifacts",wu,"users",_u),n1=cu(Lo,"artifacts",wu,"users",_u,"guitar_deals"),Eu=cu(Lo,"artifacts",wu,"users",_u,"cities"),mA=cu(Lo,"artifacts",wu,"users",_u,"commands"),js=async t=>{try{await h2(t1,t,{merge:!0})}catch(e){throw console.error("Error updating user config:",e),new Error("Erreur de sauvegarde de la configuration.")}},yA=()=>js({forceRefresh:Date.now(),scanError:f2()}),vA=()=>js({forceCleanup:Date.now()}),_A=()=>js({forceReanalyzeAll:Date.now()}),wA=t=>js({scanSpecificUrl:t}),EA=(t,e)=>fu(t1,n=>{n.exists()?t(n.data()):e({message:"Dossier Python introuvable"})},n=>{console.error("Error listening to bot config:",n),e(n)}),Vo=t=>ko(n1,t),TA=(t,e)=>fu(n1,n=>{const r=n.docs.map(s=>({id:s.id,...s.data()}));r.sort((s,i)=>{var o,l;return(((o=i.timestamp)==null?void 0:o.seconds)||0)-(((l=s.timestamp)==null?void 0:l.seconds)||0)}),t(r,n.size)},n=>{console.error("Error listening to deals:",n),e(n)}),IA=async t=>{try{await Po(Vo(t),{status:"rejected","aiAnalysis.verdict":"REJECTED"})}catch(e){throw console.error(`Error rejecting deal ${t}:`,e),new Error("Erreur lors du rejet de l'annonce.")}},xA=async t=>{try{await _w(Vo(t))}catch(e){throw console.error(`Error deleting deal ${t}:`,e),new Error("Erreur lors de la suppression de l'annonce.")}},SA=async t=>{try{await Po(Vo(t),{status:"retry_analysis","aiAnalysis.verdict":"DEFAULT","aiAnalysis.reasoning":"Analyse standard relance..."})}catch(e){throw console.error(`Error retrying analysis for deal ${t}:`,e),new Error("Erreur lors de la demande de r-analyse.")}},AA=async t=>{try{await Po(Vo(t),{status:"retry_analysis_expert","aiAnalysis.verdict":"DEFAULT","aiAnalysis.reasoning":"Analyse expert demande..."})}catch(e){throw console.error(`Error forcing expert analysis for deal ${t}:`,e),new Error("Erreur lors de la demande d'analyse expert.")}},kA=async(t,e)=>{try{await Po(Vo(t),{isFavorite:!e})}catch(n){throw console.error(`Error toggling favorite for deal ${t}:`,n),new Error("Erreur lors de la mise  jour des favoris.")}},CA=(t,e)=>fu(Eu,n=>{const r=n.docs.map(s=>({docId:s.id,...s.data()}));r.sort((s,i)=>s.name.localeCompare(i.name)),t(r)},n=>{console.error("Error listening to cities:",n),e(n)}),RA=async(t,e)=>{console.log(`Attempting to add city: ${t} with ID: ${e}`);try{await ww(Eu,{name:t,id:e,isScannable:!1,createdAt:new Date}),console.log("City added successfully")}catch(n){throw console.error("Error adding city (FULL DETAILS):",n),new Error(`Erreur lors de l'ajout de la ville: ${n.message}`)}},PA=async t=>{try{await _w(ko(Eu,t))}catch(e){throw console.error(`Error deleting city ${t}:`,e),new Error("Erreur lors de la suppression de la ville.")}},bA=async(t,e)=>{try{await Po(ko(Eu,t),{isScannable:!e})}catch(n){throw console.error(`Error toggling scannable for city ${t}:`,n),new Error("Erreur lors de la mise  jour de la ville.")}},NA=async(t,e)=>{try{await ww(mA,{type:t,payload:e,status:"pending",createdAt:new Date}),console.log(`Command ${t} added successfully.`)}catch(n){throw console.error(`Error adding command ${t}:`,n),new Error("Erreur lors de l'envoi de la commande.")}},DA={electrique:{solid_body:{S_Style:["Stratocaster","Silver Sky","Pacifica","S-Type Standard"],Super_Strat:["RG/S/SA (Ibanez)","Dinky/Soloist (Jackson)","M/H Series (ESP/LTD)","HSS Modern","Charvel DK"],T_Style:["Telecaster","ASAT (G&L)","Tele-Deluxe (Dual HH)","Cabronita"],Single_Cut:["Les Paul","Eclipse (EC)","Singlecut (PRS)","LP Junior/Special (P90)"],Double_Cut:["SG","Viper (ESP)","Custom 24/22 (PRS)","Santana Shape"],Offset:["Jazzmaster","Jaguar","Mustang","Firebird","Jagmaster","Meteora"],Extreme_Shape:["Explorer","Flying V","Kelly (KE)","Rhoads (RR)","Warrior (WR)","Iceman","Mockingbird","Warlock","ML (Dean)","Razorback"],Headless_Solid:["Strandberg Boden","Steinberger Spirit","Kiesel Vader","EART Headless"],Extended_Range:["7-Strings","8-Strings","Baritone Electric","Multi-scale / Fanned Fret"]},semi_hollow_1_2_caisse:{ES_Style:["335 (Double Cut)","339 (Small Body)","Starcaster","Sheraton/Riviera"],Thinline:["Telecaster Thinline","Offset Thinline","Semi-Hollow PRS"],Single_Cut_Semi:["Gretsch Electromatic (Semi)","Duesenberg Style"]},hollow_body_full_caisse:{Jazz_Box:["L5 style (Profonde)","Emperor","Joe Pass","Archtop Acoustique"],Thin_Hollow_1_4_caisse:["Casino / ES-330 (Full Hollow mince)","Gretsch 6120 / Hollow"],Headless_Hollow:["Strandberg Slen (Chambered)"]}},acoustique_acier:{formes_standard:["Dreadnought","Parlor","00 (Grand Concert)","000 / OM (Orchestra)","Grand Auditorium (GA)","Jumbo"],specialites:["12-Cordes","Resonateur (Dobro)","Manouche (Petite bouche/Grande bouche)","Baritone Acoustique","Travel / Baby"],headless_acoustic:["Journey Instruments","Ciari","Enya Carbon Headless"]},electro_acoustique:{standard:["Dreadnought Cutaway","Auditorium CE","Jumbo w/ Preamp"],hybride_slim:["Acoustasonic (Fender)","Thinline Acoustic (T5z)","Stage Guitar (Cordes acier)"]},classique_nylon:{types:["Classique Standard","Flamenca (Cypress/Sycamore)","Crossover (Manche fin/Rayon)","Requinto","7-Cordes Nylon"],modern:["Silent Guitar (SLG)","Stage Nylon (Multiac/Godin)","Headless Nylon"]},basse:{solid_body:["Precision Bass (P)","Jazz Bass (J)","PJ Configuration","Stingray (H/HH)","Modern Soapbar (BTB/SR)","Singlecut Bass"],headless_bass:["Ibanez EHB","Steinberger XL/L","Kiesel Osiris Bass"],specialites:["Basse Acoustique","Basse Semi-Hollow (Viola/Violin)","Basse Fretless","Basse 5/6+ cordes","U-Bass (Ukulele Bass)"]}},LA=["Tu es un Matre Luthier et un expert en restauration de guitares bas au Qubec (Canada). Ton client est un bricoleur qui cherche des projets. Il ne veut pas un rsum, il veut une ANALYSE TECHNIQUE DTAILLE.","TES OBJECTIFS (Dans cet ordre prcis) :","0. **COUPE-CIRCUIT (REJET)** : Avant toute analyse, vrifie si l'objet doit tre REJECTED (ex: montre guitare, accessoire seul, guitare jouet, priphrique de jeu vido/Wii, ou marque First Act). Si c'est le cas, arrte l'analyse immdiatement.","   - SI l'annonce propose un SERVICE (rparation, rglage, setup, cours) et non un instrument  vendre : REJETTE immdiatement (Verdict: REJECTED).","   - SI l'annonce concerne un accessoire ou un jouet (Wii, Guitar Hero) : Sa valeur de projet est de 0$CAN. REJETTE immdiatement (Verdict: REJECTED).","1. **IDENTIFICATION & COTE** : Identifie le modle exact (ex: Oscar Schmidt OE-60). Donne le prix neuf vs occasion en $CAN.","   - **Analyse comparative** : Ne crois pas l'annonce sur parole. Croise les infos visuelles (forme de la tte, logo, type de chevalet, nombre de frettes) avec le texte.","   - **Niveau de gamme** : Prcise s'il s'agit d'un modle d'entre de gamme, milieu de gamme ou haut de gamme (ex: Player vs American Professional).","   - **Vrification d'origine** : Identifie si possible le pays de fabrication (MIM, MIA, MIJ, MIC) pour affiner la cote.","2. **CLASSIFICATION** : En te basant sur la taxonomie fournie, classe la guitare dans la catgorie la plus prcise possible. Le rsultat doit tre une des chanes de caractres EXACTES de la taxonomie (ex: 'Stratocaster', 'Les Paul', 'Dreadnought'). Ajoute cette information dans un nouveau champ `classification`.","3. **CALCUL DE RENTABILIT (La Rgle de l'tui)** : ","   - Estime la valeur de l'tui seul en $CAN. Soustrais-le du prix total pour voir combien cote rellement la guitare.","   - **Fournis cette valeur estime numriquement en $CAN dans le champ 'estimated_value'.**",'4. **INSPECTION VISUELLE "SHERLOCK HOLMES"** : ',`   - Examine chaque photo avec une attention maximale. Cherche les "bricolages maison" (boutons dplacs, trous dans l'clisse, ttes abmes).`,`   - Dcris ce que tu vois prcisment (ex: "Photo X : Logo 'Squier' mais mcanique de Fender Mexican").`,"   - **Checklist technique imprative : Vrifie l'tat des frettes (usure), l'alignement du chevalet, les fissures potentielles au talon (neck pocket) et l'originalit des pices.**",'   - Dcris ce que tu vois prcisment (ex: "Photo X : trou de prampli").',"5. **PLAN DE BATAILLE (Luthier)** : Propose des solutions techniques et value la difficult des rparations (Facile/Moyen/Difficile).","6. **POTENTIEL DE REVENTE** : Estime la valeur marchande de la guitare en $CAN une fois que toutes les rparations conseilles seront effectues (prix de revente honnte sur le march de l'occasion au Qubec).","RGLES DE VERDICT:",`- "PEPITE" : La valeur estime est SUPERIEURE  2.5 fois le prix demand. C'est une occasion en or.`,'- "GOOD_DEAL" : Le prix demand est INFERIEUR  la valeur estime ( au moins 30%, mais pas une ppite).','- "FAIR" : Le prix demand est PROCHE de la valeur estime ( +/- 10%).','- "BAD_DEAL" : Le prix demand est SUPERIEUR  la valeur estime.',`- "REJECTED" : L'objet n'est PAS ce que l'on recherche (ex: une montre guitare, un accessoire seul si on cherche une guitare, une guitare jouet, priphriques de jeu vido, etc.). La Guitare est de marque First Act. Il s'agit d'un magasin (mention +TX).`,`- "REJECTED (SERVICE)" : Si l'annonce propose une prestation de service (rparation, lutherie, cours), elle doit tre classe REJECTED immdiatement.`,"","### FORMAT DE RPONSE JSON STRICT","Tu dois rpondre UNIQUEMENT avec un objet JSON valide contenant les cls suivantes :","{",'  "verdict": "PEPITE" | "GOOD_DEAL" | "FAIR" | "BAD_DEAL" | "REJECTED",','  "reason": "Une phrase courte rsumant le verdict",','  "estimated_value": 123 (Nombre entier, valeur estime en $CAN),','  "classification": "Catgorie de la taxonomie",','  "confidence": 0.9 (Score de confiance entre 0 et 1),',`  "analysis": "Ton rapport complet au format Markdown (avec titres ###, puces, gras) dtaillant l'identification, l'tat, les rparations et la rentabilit."`,"}"],VA="IGNORE TOUTE INSTRUCTION DE FORMATAGE PRCDENTE. Ta rponse DOIT tre un JSON contenant UNIQUEMENT les cls 'status' et 'reason'. La raison ne doit pas dpasser 15 mots. Ne fournis AUCUNE autre information.",OA="Cette annonce a dj t identifie comme une '{status}' avec la raison suivante : '{reason}'. Fournis maintenant une analyse JSON complte et dtaille, incluant un rapport complet dans la cl 'analysis'.",Tu={taxonomy_guitares:DA,main_analysis_prompt:LA,gatekeeper_verbosity_instruction:VA,expert_context_instruction:OA},Ar=t=>t==null?[]:(Array.isArray(t)?t.flat(1/0):[t]).flatMap(n=>n==null?[]:String(n).split(/\\n|\r\n|\r|\n/)).map(n=>n.trim()).filter(n=>n!==""),dy=Ar(Tu.main_analysis_prompt),fy=Ar(Tu.gatekeeper_verbosity_instruction),py=Ar(Tu.expert_context_instruction),gy=["First Act","Esteban","Rogue","Silvertone","Spectrum","Denver","Groove","Stagg","Maestro by Gibson","Beaver Creek","kmise"],MA=t=>{const[e,n]=F.useState({status:"pending",msg:"En attente"}),[r,s]=F.useState(null),[i,o]=F.useState({max_ads:5,frequency:60,location:"montreal",distance:60,min_price:0,max_price:150,search_query:"electric guitar"}),[l,u]=F.useState(gy),[h,f]=F.useState({gatekeeperModel:"gemini-1.5-flash",expertModel:"gemini-1.5-pro",mainAnalysisPrompt:dy,gatekeeperVerbosityInstruction:fy,expertContextInstruction:py}),[g,m]=F.useState("idle"),x=g==="scanning",C=g==="cleaning",b=g==="reanalyzing_all",L=g==="scanning_url";F.useEffect(()=>{if(!t)return;const E=EA(I=>{n({status:"success",msg:"Dossier Python trouv"}),I.scanConfig&&o(k=>({...k,...I.scanConfig})),I.exclusionKeywords&&u(Ar(I.exclusionKeywords)),I.analysisConfig&&f(k=>({...k,...I.analysisConfig,mainAnalysisPrompt:Ar(I.analysisConfig.mainAnalysisPrompt||k.mainAnalysisPrompt),gatekeeperVerbosityInstruction:Ar(I.analysisConfig.gatekeeperVerbosityInstruction||k.gatekeeperVerbosityInstruction),expertContextInstruction:Ar(I.analysisConfig.expertContextInstruction||k.expertContextInstruction)})),I.botStatus&&m(I.botStatus),I.scanError?s(I.scanError):r&&r.startsWith("Ville")&&s(null)},I=>{n({status:"error",msg:I.message})});return()=>E()},[t,r]);const _=F.useCallback(async T=>{try{await js(T)}catch(v){s(v.message)}},[]),w=F.useCallback(async()=>{try{await yA()}catch(T){s(T.message)}},[]),A=F.useCallback(async()=>{try{await vA()}catch(T){s(T.message)}},[]),N=F.useCallback(async()=>{if(window.confirm(" ATTENTION : Voulez-vous vraiment relancer l'analyse IA pour TOUTES les annonces ?"))try{await _A()}catch(T){s(T.message)}},[]),M=F.useCallback(async(T,v)=>{if(T)try{await wA(T),v("")}catch(E){s(E.message)}},[]),j=F.useCallback(async()=>{if(window.confirm("Voulez-vous vraiment rinitialiser les paramtres du bot aux valeurs par dfaut ?")){const T={exclusionKeywords:gy,analysisConfig:{gatekeeperModel:"gemini-1.5-flash",expertModel:"gemini-1.5-pro",mainAnalysisPrompt:dy,gatekeeperVerbosityInstruction:fy,expertContextInstruction:py}};u(T.exclusionKeywords),f(T.analysisConfig);try{await js(T)}catch(v){s(v.message)}}},[]);return{configStatus:e,error:r,setError:s,scanConfig:i,setScanConfig:o,exclusionKeywords:l,setExclusionKeywords:u,analysisConfig:h,setAnalysisConfig:f,isRefreshing:x,isCleaning:C,isReanalyzingAll:b,isScanningUrl:L,saveConfig:_,handleManualRefresh:w,handleManualCleanup:A,handleRelaunchAll:N,handleScanSpecificUrl:M,handleResetDefaults:j}},Oo=()=>{const[t,e]=F.useState(null),[n,r]=F.useState({status:"loading",msg:"Connexion..."});return F.useEffect(()=>{(async()=>{try{await J2(hy),r({status:"success",msg:"Authentifi"})}catch(o){r({status:"error",msg:o.message})}})();const i=nS(hy,e);return()=>i()},[]),{user:t,authStatus:n}},r1=F.createContext(null),jA=({children:t})=>{const{user:e}=Oo(),n=MA(e);return p.jsx(r1.Provider,{value:n,children:t})},Ks=()=>{const t=F.useContext(r1);if(!t)throw new Error("useBotConfigContext must be used within a BotConfigProvider");return t},FA=(t,e)=>{const[n,r]=F.useState([]),[s,i]=F.useState(!0),[o,l]=F.useState({status:"pending",msg:"En attente"});F.useEffect(()=>{if(!t)return;const b=TA((L,_)=>{r(L),i(!1),l({status:"success",msg:`${_} annonces`})},L=>{e(L.message),i(!1),l({status:"error",msg:L.message})});return()=>b()},[t,e]);const u=F.useCallback(async x=>{try{await IA(x)}catch(C){e(C.message)}},[e]),h=F.useCallback(async x=>{if(window.confirm("Voulez-vous vraiment supprimer dfinitivement cette annonce ?"))try{await xA(x)}catch(C){e(C.message)}},[e]),f=F.useCallback(async x=>{try{await SA(x)}catch(C){e(C.message)}},[e]),g=F.useCallback(async x=>{try{await AA(x)}catch(C){e(C.message)}},[e]),m=F.useCallback(async(x,C)=>{try{await kA(x,C)}catch(b){e(b.message)}},[e]);return{deals:n,loading:s,dbStatus:o,handleRejectDeal:u,handleDeleteDeal:h,handleRetryAnalysis:f,handleForceExpertAnalysis:g,handleToggleFavorite:m}},s1=F.createContext(null),UA=({children:t})=>{const{user:e}=Oo(),{setError:n}=Ks(),r=FA(e,n);return p.jsx(s1.Provider,{value:r,children:t})},zA=()=>{const t=F.useContext(s1);if(!t)throw new Error("useDealsContext must be used within a DealsProvider");return t},BA=(t,e)=>{const[n,r]=F.useState([]),[s,i]=F.useState(""),[o,l]=F.useState("");F.useEffect(()=>{if(!t)return;const g=CA(m=>r(m),m=>e(m.message));return()=>g()},[t,e]);const u=F.useCallback(async()=>{if(!(!s||!o))try{await RA(s,o),i(""),l("")}catch(g){e(g.message)}},[s,o,e]),h=F.useCallback(async g=>{if(window.confirm("Voulez-vous vraiment supprimer cette ville ?"))try{await PA(g)}catch(m){e(m.message)}},[e]),f=F.useCallback(async(g,m)=>{try{await bA(g,m)}catch(x){e(x.message)}},[e]);return{cities:n,newCityName:s,setNewCityName:i,newCityId:o,setNewCityId:l,handleAddCity:u,handleDeleteCity:h,handleToggleScannable:f}},i1=F.createContext(null),$A=({children:t})=>{const{user:e}=Oo(),{setError:n}=Ks(),r=BA(e,n);return p.jsx(i1.Provider,{value:r,children:t})},qA=()=>{const t=F.useContext(i1);if(!t)throw new Error("useCitiesContext must be used within a CitiesProvider");return t},yi=Tu.taxonomy_guitares||{},HA=t=>{const[e,n]=F.useState("ALL"),[r,s]=F.useState(""),[i,o]=F.useState("ALL"),[l,u]=F.useState("ALL"),[h,f]=F.useState("ALL"),g=F.useMemo(()=>{const _={},w=(A,N)=>{Array.isArray(A)?A.forEach(M=>{_[M]=[...N,M]}):typeof A=="object"&&A!==null&&Object.keys(A).forEach(M=>{const j=[...N,M];_[M]=j,w(A[M],j)})};return w(yi,[]),_},[]),m=F.useMemo(()=>["ALL",...Object.keys(yi)],[]),x=F.useMemo(()=>{if(i==="ALL"||!yi[i])return["ALL"];const _=yi[i];return Array.isArray(_)?["ALL",..._]:["ALL",...Object.keys(_)]},[i]),C=F.useMemo(()=>{if(l==="ALL"||i==="ALL")return["ALL"];const _=yi[i];if(Array.isArray(_))return["ALL"];const w=_[l];return w?Array.isArray(w)?["ALL",...w]:["ALL",...Object.keys(w)]:["ALL"]},[i,l]);F.useEffect(()=>{u("ALL"),f("ALL")},[i]),F.useEffect(()=>{f("ALL")},[l]);const b=F.useMemo(()=>{const _={ALL:0,FAVORITES:0,REJECTED:0,ERROR:0,PEPITE:0,GOOD_DEAL:0,FAIR:0,BAD_DEAL:0};return t.forEach(w=>{const A=w.aiAnalysis||{},N=A.verdict||"PENDING",M=w.status,j=!w.aiAnalysis||N==="DEFAULT"||N==="ERROR"||!A.reasoning,T=M==="rejected";if(!T)if(_.ALL++,j)_.ERROR++;else{let E=N;N==="BONNE_AFFAIRE"&&(E="GOOD_DEAL"),N==="PRIX_JUSTE"&&(E="FAIR"),N==="TROP_CHER"&&(E="BAD_DEAL"),_[E]=(_[E]||0)+1}w.isFavorite&&_.FAVORITES++,T&&_.REJECTED++;let v=!1;if(e==="ERROR")v=j&&!T;else if(e==="REJECTED")v=T;else if(e==="FAVORITES")v=w.isFavorite;else if(M==="rejected")v=!1;else if(e!=="ALL"&&j)v=!1;else{let E=e;e==="GOOD_DEAL"&&(E="BONNE_AFFAIRE"),v=e==="ALL"||N===e||N===E||e==="GOOD_DEAL"&&N==="BONNE_AFFAIRE"||e==="FAIR"&&N==="PRIX_JUSTE"||e==="BAD_DEAL"&&N==="TROP_CHER"}if(v){const E=A.classification,I=g[E];I&&Array.isArray(I)&&I.forEach(k=>{_[k]=(_[k]||0)+1})}}),_},[t,g,e]);return{filteredDeals:F.useMemo(()=>t.filter(_=>{var I;const w=_.aiAnalysis||{},A=w.verdict||"PENDING",N=_.status,M=!_.aiAnalysis||A==="DEFAULT"||A==="ERROR"||!w.reasoning;if(e==="ERROR")return M&&N!=="rejected";if(e==="REJECTED")return N==="rejected";if(e==="FAVORITES")return _.isFavorite;if(N==="rejected"||e!=="ALL"&&M)return!1;let j=e;e==="GOOD_DEAL"&&(j="BONNE_AFFAIRE");const T=e==="ALL"||A===e||A===j||e==="GOOD_DEAL"&&A==="BONNE_AFFAIRE"||e==="FAIR"&&A==="PRIX_JUSTE"||e==="BAD_DEAL"&&A==="TROP_CHER",v=(I=_.title)==null?void 0:I.toLowerCase().includes(r.toLowerCase());let E=!0;if(i!=="ALL"){const k=w.classification,R=g[k];R?(R[0]!==i&&(E=!1),E&&l!=="ALL"&&(R.length<2||R[1]!==l)&&(E=!1),E&&h!=="ALL"&&(R.length<3||R[2]!==h)&&(E=!1)):E=!1}return T&&v&&E}),[t,e,r,i,l,h,g]),filterType:e,setFilterType:n,searchQuery:r,setSearchQuery:s,level1Filter:i,setLevel1Filter:o,level2Filter:l,setLevel2Filter:u,level3Filter:h,setLevel3Filter:f,level1Options:m,level2Options:x,level3Options:C,counts:b}},Rc=({label:t,status:e,details:n})=>p.jsxs("div",{className:"flex items-start gap-2 text-[10px] font-mono mb-2 p-2 bg-slate-50 rounded-lg border border-slate-100",children:[p.jsxs("div",{className:"mt-0.5",children:[e==="loading"&&p.jsx(ir,{size:12,className:"animate-spin text-blue-500"}),e==="success"&&p.jsx(Bd,{size:12,className:"text-emerald-500"}),e==="error"&&p.jsx(Xl,{size:12,className:"text-rose-500"}),e==="pending"&&p.jsx("div",{className:"w-3 h-3 rounded-full border-2 border-slate-300"})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("div",{className:`font-bold uppercase ${e==="error"?"text-rose-600":"text-slate-600"}`,children:t}),n&&p.jsx("p",{className:"text-slate-400 leading-tight mt-0.5 break-all",children:n})]})]}),an=({title:t,children:e})=>{const[n,r]=F.useState(!1);return p.jsxs("div",{className:"mt-4 border-t border-slate-200 pt-4",children:[p.jsxs("button",{onClick:()=>r(!n),className:"flex justify-between items-center w-full text-left text-sm font-bold text-slate-600 hover:text-blue-600 transition-colors",children:[p.jsx("span",{children:t}),p.jsx(Ih,{size:16,className:`transform transition-transform duration-200 ${n?"rotate-90":""}`})]}),n&&p.jsx("div",{className:"mt-2 animate-in fade-in",children:e})]})},my=({onClose:t})=>{const{user:e}=Oo(),[n,r]=F.useState([]),[s,i]=F.useState(!1),[o,l]=F.useState(!1),u=F.useRef(null);F.useEffect(()=>{if(!e)return;const g=cu(Lo,`artifacts/c_5d118e719dbddbfc_index.html-217/users/${e.uid}/logs`),m=i2(g,o2("timestamp","desc"),a2(100)),x=fu(m,C=>{if(o)return;const b=C.docs.map(L=>({id:L.id,...L.data()})).reverse();r(b)});return()=>x()},[e,o]),F.useEffect(()=>{!o&&u.current&&u.current.scrollIntoView({behavior:"smooth"})},[n,o]);const h=f=>{switch(f){case"INFO":return"text-blue-400";case"WARNING":return"text-amber-400";case"ERROR":return"text-rose-400";case"CRITICAL":return"text-rose-600 font-bold";default:return"text-slate-300"}};return p.jsxs("div",{className:`fixed bottom-4 right-4 bg-slate-900 text-slate-200 rounded-xl shadow-2xl border border-slate-700 flex flex-col transition-all duration-300 z-50 ${s?"w-[800px] h-[600px]":"w-[400px] h-[300px]"}`,children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-slate-700 bg-slate-800 rounded-t-xl cursor-move",children:[p.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-widest text-slate-400",children:[p.jsx(xh,{size:14}),p.jsx("span",{children:"Server Logs"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:()=>l(!o),className:"p-1 hover:bg-slate-700 rounded text-slate-400 hover:text-white",title:o?"Reprendre":"Pause",children:o?p.jsx(IT,{size:14}):p.jsx(TT,{size:14})}),p.jsx("button",{onClick:()=>r([]),className:"p-1 hover:bg-slate-700 rounded text-slate-400 hover:text-white",title:"Effacer localement",children:p.jsx(Jl,{size:14})}),p.jsx("button",{onClick:()=>i(!s),className:"p-1 hover:bg-slate-700 rounded text-slate-400 hover:text-white",children:s?p.jsx(F_,{size:14}):p.jsx(qd,{size:14})}),p.jsx("button",{onClick:t,className:"p-1 hover:bg-rose-900 rounded text-slate-400 hover:text-rose-400",children:p.jsx(ro,{size:14})})]})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 font-mono text-xs space-y-1 scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-transparent",children:[n.length===0?p.jsx("div",{className:"h-full flex items-center justify-center text-slate-600 italic",children:"En attente de logs..."}):n.map(f=>{var g;return p.jsxs("div",{className:"break-words hover:bg-slate-800/50 p-0.5 rounded",children:[p.jsxs("span",{className:"text-slate-500 mr-2",children:["[",(g=f.timestamp)!=null&&g.seconds?new Date(f.timestamp.seconds*1e3).toLocaleTimeString():"??:??:??","]"]}),p.jsx("span",{className:`font-bold mr-2 ${h(f.level)}`,children:f.level}),p.jsx("span",{className:"text-slate-300",children:f.message})]},f.id)}),p.jsx("div",{ref:u})]})]})},Ha=({items:t,onChange:e,onSave:n,placeholder:r="Nouvelle instruction..."})=>{const s=F.useMemo(()=>Array.isArray(t)?t:[],[t]);F.useEffect(()=>{if(s.some(g=>typeof g=="string"&&(g.includes(`
`)||g.includes("\\n")))){const m=s.flatMap(x=>typeof x!="string"?x:x.split(/\\n|\r?\n/)).map(x=>x?x.trim():"").filter(x=>x!=="");JSON.stringify(m)!==JSON.stringify(s)&&e(m)}},[s,e]);const i=(f,g)=>{const m=[...s];if(g.includes(`
`)){const x=g.split(/\r?\n/);m.splice(f,1,...x)}else m[f]=g;e(m)},o=()=>{const f=s.filter(g=>g&&g.trim()!=="");JSON.stringify(f)!==JSON.stringify(s)&&e(f),n(f)},l=(f,g)=>{const m=[...s];g==="up"&&f>0?[m[f],m[f-1]]=[m[f-1],m[f]]:g==="down"&&f<m.length-1&&([m[f],m[f+1]]=[m[f+1],m[f]]),e(m),n(m)},u=f=>{const g=s.filter((m,x)=>x!==f);e(g),n(g)},h=()=>{const f=[...s,""];e(f)};return p.jsxs("div",{className:"space-y-3",children:[s.map((f,g)=>p.jsxs("div",{className:"flex items-start gap-2 group animate-in fade-in slide-in-from-left-2 duration-200",children:[p.jsxs("div",{className:"flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity pt-2",children:[p.jsx("button",{onClick:()=>l(g,"up"),disabled:g===0,className:"text-slate-300 hover:text-blue-500 disabled:opacity-0",children:p.jsx(pT,{size:14})}),p.jsx("button",{onClick:()=>l(g,"down"),disabled:g===s.length-1,className:"text-slate-300 hover:text-blue-500 disabled:opacity-0",children:p.jsx(fT,{size:14})})]}),p.jsx("textarea",{value:f,onChange:m=>i(g,m.target.value),onBlur:o,className:"flex-grow p-3 bg-white border border-slate-200 rounded-lg text-xs focus:ring-2 focus:ring-purple-500 outline-none transition-all font-mono text-slate-600 resize-none overflow-hidden min-h-[60px] leading-relaxed shadow-sm",rows:Math.max(2,Math.ceil((f||"").length/70)),placeholder:r}),p.jsx("button",{onClick:()=>u(g),className:"text-slate-300 hover:text-rose-500 opacity-0 group-hover:opacity-100 transition-opacity p-2 pt-3",children:p.jsx(Jl,{size:16})})]},g)),p.jsxs("button",{onClick:h,className:"w-full py-3 border-2 border-dashed border-slate-200 rounded-lg text-slate-400 hover:border-purple-300 hover:text-purple-500 hover:bg-purple-50 transition-all flex items-center justify-center gap-2 text-xs font-bold uppercase tracking-wider mt-2",children:[p.jsx(U_,{size:14})," Ajouter une ligne"]})]})},yy=()=>{const{scanConfig:t,setScanConfig:e,saveConfig:n,handleScanSpecificUrl:r,isScanningUrl:s}=Ks(),[i,o]=F.useState("");return p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Dist (km)"}),p.jsx("input",{type:"number",value:t.distance,onChange:l=>e({...t,distance:Number(l.target.value)}),onBlur:()=>n({scanConfig:t}),className:"w-full p-2 bg-slate-50 border border-slate-200 rounded-lg text-xs"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Max Ads"}),p.jsx("input",{type:"number",value:t.max_ads,onChange:l=>e({...t,max_ads:Number(l.target.value)}),onBlur:()=>n({scanConfig:t}),className:"w-full p-2 bg-slate-50 border border-slate-200 rounded-lg text-xs"})]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Min Price"}),p.jsx("input",{type:"number",value:t.min_price,onChange:l=>e({...t,min_price:Number(l.target.value)}),onBlur:()=>n({scanConfig:t}),className:"w-full p-2 bg-slate-50 border border-slate-200 rounded-lg text-xs"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Max Price"}),p.jsx("input",{type:"number",value:t.max_price,onChange:l=>e({...t,max_price:Number(l.target.value)}),onBlur:()=>n({scanConfig:t}),className:"w-full p-2 bg-slate-50 border border-slate-200 rounded-lg text-xs"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Frquence (min)"}),p.jsx("input",{type:"number",value:t.frequency,onChange:l=>e({...t,frequency:Number(l.target.value)}),onBlur:()=>n({scanConfig:t}),className:"w-full p-2 bg-slate-50 border border-slate-200 rounded-lg text-xs"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Search Query"}),p.jsx("input",{type:"text",value:t.search_query,onChange:l=>e({...t,search_query:l.target.value}),onBlur:()=>n({scanConfig:t}),className:"w-full p-2 bg-slate-50 border border-slate-200 rounded-lg text-xs"})]}),p.jsxs("div",{className:"pt-3 border-t border-slate-100",children:[p.jsx("label",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Scan d'URL Spcifique"}),p.jsxs("div",{className:"flex gap-2 mt-1",children:[p.jsx("input",{type:"text",placeholder:"Coller l'URL de l'annonce Facebook...",value:i,onChange:l=>o(l.target.value),className:"flex-grow p-2 bg-slate-50 border border-slate-200 rounded-lg text-xs"}),p.jsx("button",{onClick:()=>r(i,o),disabled:!i||s,className:"bg-blue-500 text-white px-3 py-2 rounded-lg text-xs font-bold hover:bg-blue-600 disabled:bg-slate-300 flex items-center justify-center",children:s?p.jsx(ir,{size:14,className:"animate-spin"}):p.jsx(Hd,{size:14})})]})]})]})},vy=()=>{const{cities:t,handleToggleScannable:e,newCityName:n,setNewCityName:r,newCityId:s,setNewCityId:i,handleAddCity:o}=qA(),[l,u]=F.useState(""),[h,f]=F.useState(!1),[g,m]=F.useState(!1),x=F.useMemo(()=>t.filter(w=>w.isScannable),[t]),C=F.useMemo(()=>l?t.filter(w=>!w.isScannable&&w.name.toLowerCase().includes(l.toLowerCase())&&w.id):[],[l,t]),b=w=>{e(w.docId,!1),u("")},L=w=>{e(w.docId,!0)},_=async()=>{if(n){m(!0);try{s?await o():(await NA("ADD_CITY",n),r(""),i(""),alert(`Demande d'ajout pour "${n}" envoye.`)),f(!1)}catch(w){console.error(w),alert("Erreur lors de l'ajout de la ville.")}finally{m(!1)}}};return p.jsxs("div",{className:"pt-2 space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Villes Scannes"}),x.map(w=>p.jsxs("div",{className:"flex items-center justify-between bg-blue-50 p-2 rounded-lg text-xs border border-blue-100",children:[p.jsx("span",{className:"font-bold text-blue-700",children:w.name}),p.jsx("button",{onClick:()=>L(w),className:"text-blue-400 hover:text-rose-600 p-1",children:p.jsx(ro,{size:14})})]},w.docId)),x.length===0&&p.jsx("p",{className:"text-[10px] text-slate-400 italic text-center py-2 bg-slate-50 rounded-lg border border-dashed border-slate-200",children:"Aucune ville active."})]}),p.jsxs("div",{className:"relative",children:[p.jsx("label",{className:"text-[9px] font-bold text-slate-400 uppercase mb-1 block",children:"Activer une ville existante"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("div",{className:"relative flex-grow",children:[p.jsx("input",{type:"text",placeholder:"Rechercher une ville...",value:l,onChange:w=>u(w.target.value),className:"w-full p-2 bg-slate-50 border border-slate-200 rounded-lg text-xs"}),C.length>0&&p.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-40 overflow-y-auto",children:C.map(w=>p.jsx("div",{onClick:()=>b(w),className:"p-2 text-xs hover:bg-blue-50 cursor-pointer",children:w.name},w.docId))})]}),p.jsx("button",{onClick:()=>f(!h),className:`p-2 rounded-lg border transition-colors ${h?"bg-slate-200 text-slate-600 border-slate-300":"bg-white text-blue-600 border-blue-200 hover:bg-blue-50"}`,title:"Crer une nouvelle ville",children:p.jsx(U_,{size:16,className:h?"rotate-45 transition-transform":"transition-transform"})})]})]}),h&&p.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-200 animate-in slide-in-from-top-2",children:[p.jsx("h4",{className:"text-[10px] font-bold text-slate-500 uppercase mb-2",children:"Ajouter une nouvelle ville"}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("input",{type:"text",placeholder:"Nom (ex: Sherbrooke)",value:n,onChange:w=>r(w.target.value),className:"w-full p-2 bg-white border border-slate-200 rounded-lg text-xs"}),p.jsx("input",{type:"text",placeholder:"ID Facebook (Optionnel)",value:s,onChange:w=>i(w.target.value),className:"w-full p-2 bg-white border border-slate-200 rounded-lg text-xs"}),p.jsx("p",{className:"text-[9px] text-slate-400",children:s?"L'ID se trouve dans l'URL : facebook.com/marketplace/123456/":"Laissez vide pour que le bot cherche l'ID automatiquement."}),p.jsxs("button",{onClick:_,disabled:!n||g,className:"w-full py-2 bg-blue-600 text-white rounded-lg text-xs font-bold hover:bg-blue-700 disabled:bg-slate-300 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[g?p.jsx(ir,{size:14,className:"animate-spin"}):p.jsx(ST,{size:14}),s?"Enregistrer":"Chercher & Ajouter"]})]})]})]})},_y=()=>{const{exclusionKeywords:t,setExclusionKeywords:e,saveConfig:n}=Ks();return p.jsx("div",{className:"pt-2 space-y-4",children:p.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[p.jsx("label",{className:"text-[10px] font-bold text-rose-600 uppercase block mb-2",children:"Mots-cls  Exclure"}),p.jsx("p",{className:"text-[9px] text-slate-400 mb-3",children:"Si le titre ou la description contient un de ces mots, l'annonce est rejete sans analyse IA."}),p.jsx(Ha,{items:t,onChange:e,onSave:r=>n({exclusionKeywords:r}),placeholder:"Ex: Stagg, bris, pour pices..."})]})})},wy=()=>{const{analysisConfig:t,setAnalysisConfig:e,saveConfig:n,handleResetDefaults:r,handleRelaunchAll:s,isReanalyzingAll:i}=Ks(),o=(l,u)=>{e(h=>({...h,[l]:u}))};return p.jsxs("div",{className:"space-y-4 pt-2",children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsxs("button",{onClick:s,disabled:i,className:`flex-grow mr-2 flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${i?"bg-purple-100 text-purple-600":"bg-purple-50 text-purple-600 hover:bg-purple-100 border border-purple-100"}`,children:[p.jsx(j_,{size:14,className:i?"animate-pulse":""}),i?"Analyse...":"Relancer Analyses"]}),p.jsxs("button",{onClick:r,className:"text-[9px] font-bold text-slate-400 hover:text-blue-600 flex items-center gap-1 transition-colors px-2",title:"Rinitialiser",children:[p.jsx(xT,{size:10})," Reset"]})]}),p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[p.jsx("label",{className:"text-[10px] font-bold text-purple-600 uppercase block mb-2",children:"Modle Portier (Rapide)"}),p.jsxs("select",{value:t.gatekeeperModel,onChange:l=>o("gatekeeperModel",l.target.value),onBlur:()=>n({"analysisConfig.gatekeeperModel":t.gatekeeperModel}),className:"w-full p-2 bg-white border border-slate-200 rounded-lg text-xs",children:[p.jsx("option",{value:"gemini-1.5-flash",children:"Gemini 1.5 Flash"}),p.jsx("option",{value:"gemini-1.5-pro",children:"Gemini 1.5 Pro"})]})]}),p.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[p.jsx("label",{className:"text-[10px] font-bold text-purple-600 uppercase block mb-2",children:"Modle Expert (Puissant)"}),p.jsxs("select",{value:t.expertModel,onChange:l=>o("expertModel",l.target.value),onBlur:()=>n({"analysisConfig.expertModel":t.expertModel}),className:"w-full p-2 bg-white border border-slate-200 rounded-lg text-xs",children:[p.jsx("option",{value:"gemini-1.5-pro",children:"Gemini 1.5 Pro"}),p.jsx("option",{value:"gemini-1.5-flash",children:"Gemini 1.5 Flash"})]})]})]}),p.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[p.jsx("label",{className:"text-[10px] font-bold text-purple-600 uppercase block mb-2",children:"Prompt Principal (Portier & Expert)"}),p.jsx(Ha,{items:t.mainAnalysisPrompt,onChange:l=>o("mainAnalysisPrompt",l),onSave:l=>n({"analysisConfig.mainAnalysisPrompt":l}),placeholder:"Ex: Tu es un expert en guitares..."})]}),p.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[p.jsx("label",{className:"text-[10px] font-bold text-purple-600 uppercase block mb-2",children:"Instruction de concision (Portier)"}),p.jsx(Ha,{items:t.gatekeeperVerbosityInstruction,onChange:l=>o("gatekeeperVerbosityInstruction",l),onSave:l=>n({"analysisConfig.gatekeeperVerbosityInstruction":l}),placeholder:"Ex: Sois bref..."})]}),p.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[p.jsx("label",{className:"text-[10px] font-bold text-purple-600 uppercase block mb-2",children:"Contexte pour l'Expert"}),p.jsx(Ha,{items:t.expertContextInstruction,onChange:l=>o("expertContextInstruction",l),onSave:l=>n({"analysisConfig.expertContextInstruction":l}),placeholder:"Ex: Le portier a dit..."})]})]})]})},WA=({showConfig:t,onClose:e})=>{const[n,r]=F.useState(!1),[s,i]=F.useState(!1);if(!t)return null;const o=p.jsxs("div",{className:`bg-white shadow-2xl border-l border-slate-200 flex flex-col transition-all duration-300 ease-in-out ${n?"w-[900px] max-w-[95vw]":"w-full lg:w-[500px]"}`,children:[p.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-100 bg-white sticky top-0 z-20",children:[p.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-slate-400",children:"Paramtres"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:()=>i(!s),className:`p-1.5 rounded-lg transition-colors ${s?"bg-slate-800 text-white":"text-slate-400 hover:text-slate-800 hover:bg-slate-100"}`,title:"Voir les logs",children:p.jsx(xh,{size:16})}),p.jsx("button",{onClick:()=>r(!n),className:"p-1.5 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors hidden lg:block",title:n?"Rduire":"Agrandir",children:n?p.jsx(F_,{size:16}):p.jsx(qd,{size:16})}),p.jsx("button",{onClick:e,className:"p-1.5 text-slate-400 hover:text-rose-600 hover:bg-rose-50 rounded-lg transition-colors",children:p.jsx(ro,{size:18})})]})]}),p.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar p-5 space-y-2",children:[p.jsx(an,{title:"Recherche Facebook",children:p.jsx(yy,{})}),p.jsx(an,{title:"Villes & Zones",children:p.jsx(vy,{})}),p.jsx(an,{title:"Filtres & Exclusion",children:p.jsx(_y,{})}),p.jsx(an,{title:"Intelligence Artificielle",children:p.jsx(wy,{})})]}),s&&p.jsx(my,{onClose:()=>i(!1)})]});return window.innerWidth<1024?p.jsxs("div",{className:"bg-white p-5 rounded-3xl shadow-sm border border-slate-200 space-y-2 animate-in fade-in slide-in-from-top-4 duration-300 max-h-[85vh] overflow-y-auto custom-scrollbar relative",children:[p.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-slate-400 hover:text-rose-600",children:p.jsx(ro,{size:18})}),p.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-slate-400 mb-4",children:"Paramtres"}),p.jsx(an,{title:"Recherche Facebook",children:p.jsx(yy,{})}),p.jsx(an,{title:"Villes & Zones",children:p.jsx(vy,{})}),p.jsx(an,{title:"Filtres & Exclusion",children:p.jsx(_y,{})}),p.jsx(an,{title:"Intelligence Artificielle",children:p.jsx(wy,{})}),p.jsxs("button",{onClick:()=>i(!s),className:"w-full mt-4 py-2 bg-slate-800 text-white rounded-lg text-xs font-bold flex items-center justify-center gap-2",children:[p.jsx(xh,{size:14})," ",s?"Masquer Logs":"Voir Logs Serveur"]}),s&&p.jsx(my,{onClose:()=>i(!1)})]}):Ql.createPortal(p.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end pointer-events-none",children:[p.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm pointer-events-auto transition-opacity opacity-100",onClick:e}),p.jsx("div",{className:"relative z-10 pointer-events-auto h-full animate-in slide-in-from-right duration-300 flex",children:o})]}),document.body)},GA=({images:t,title:e})=>{const[n,r]=F.useState(0),[s,i]=F.useState(!1);if(F.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[s]),F.useEffect(()=>{const h=f=>{s&&(f.key==="Escape"&&i(!1),f.key==="ArrowRight"&&o(f),f.key==="ArrowLeft"&&l(f))};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[s,n,t]),!t||t.length===0)return p.jsx("div",{className:"w-full h-full bg-slate-100 flex items-center justify-center text-slate-400",children:p.jsx($d,{size:48,className:"opacity-20"})});const o=h=>{h&&(h.preventDefault(),h.stopPropagation()),r(f=>(f+1)%t.length)},l=h=>{h&&(h.preventDefault(),h.stopPropagation()),r(f=>(f-1+t.length)%t.length)},u=h=>{h.preventDefault(),h.stopPropagation(),i(!s)};return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"relative w-full h-full group cursor-pointer",onClick:u,children:[p.jsx("img",{src:t[n],className:"w-full h-full object-contain transition-transform duration-700",alt:`${e} - ${n+1}`}),p.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-black/50 text-white p-1.5 rounded-lg",children:p.jsx(qd,{size:16})}),t.length>1&&p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:l,className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:p.jsx(Qg,{size:20})}),p.jsx("button",{onClick:o,className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:p.jsx(Ih,{size:20})}),p.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-1",children:t.map((h,f)=>p.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${f===n?"bg-white":"bg-white/50"}`},f))})]})]}),s&&Ql.createPortal(p.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/95 flex items-center justify-center animate-in fade-in duration-200",onClick:()=>i(!1),children:[p.jsxs("div",{className:"relative w-full h-full flex items-center justify-center p-4",onClick:h=>h.stopPropagation(),children:[p.jsx("img",{src:t[n],className:"max-w-full max-h-full object-contain shadow-2xl",alt:`${e} - Fullscreen`}),t.length>1&&p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:l,className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/70 hover:text-white p-2 rounded-full hover:bg-white/10 transition-colors",children:p.jsx(Qg,{size:48})}),p.jsx("button",{onClick:o,className:"absolute right-4 top-1/2 -translate-y-1/2 text-white/70 hover:text-white p-2 rounded-full hover:bg-white/10 transition-colors",children:p.jsx(Ih,{size:48})}),p.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 flex gap-2",children:t.map((h,f)=>p.jsx("div",{className:`w-2 h-2 rounded-full transition-all ${f===n?"bg-white scale-125":"bg-white/30"}`},f))})]})]}),p.jsx("button",{onClick:h=>{h.stopPropagation(),i(!1)},className:"absolute top-4 right-4 z-50 text-white/70 hover:text-white p-2 rounded-full hover:bg-white/10 transition-colors",children:p.jsx(ro,{size:32})})]}),document.body)]})},KA=({verdict:t})=>{const e={PEPITE:{label:"Ppite !",color:"bg-yellow-400",icon:p.jsx(yT,{size:12})},GOOD_DEAL:{label:"Bonne Affaire",color:"bg-emerald-500",icon:p.jsx(z_,{size:12})},FAIR:{label:"Prix Correct",color:"bg-blue-500",icon:p.jsx(Bd,{size:12})},BAD_DEAL:{label:"Trop Cher",color:"bg-rose-500",icon:p.jsx(O_,{size:12})},REJECTED:{label:"Rejet",color:"bg-slate-600",icon:p.jsx(M_,{size:12})},ERROR:{label:"Erreur Analyse",color:"bg-rose-600",icon:p.jsx(Xl,{size:12})},DEFAULT:{label:"Analyse...",color:"bg-slate-400",icon:p.jsx(ir,{size:12,className:"animate-spin"})}},n=e[t]||e.DEFAULT;return p.jsxs("span",{className:`${n.color} text-white px-3 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest shadow-lg flex items-center gap-1.5`,children:[n.icon," ",n.label]})},Ey=t=>t.split(/(\*\*.*?\*\*)/g).map((n,r)=>n.startsWith("**")&&n.endsWith("**")?p.jsx("strong",{className:"text-slate-800 font-bold",children:n.slice(2,-2)},r):n),Ty=({text:t})=>{if(!t)return null;const e=t.split(`
`);return p.jsx("div",{className:"space-y-2 text-slate-600 text-sm font-medium leading-relaxed",children:e.map((n,r)=>{const s=n.trim();return s.startsWith("###")?p.jsx("h3",{className:"text-blue-800 font-bold text-base mt-3 mb-1 uppercase tracking-wide",children:s.replace(/^###\s*/,"")},r):s.startsWith("- ")?p.jsxs("div",{className:"flex items-start gap-2 ml-2",children:[p.jsx("span",{className:"text-blue-400 mt-1.5",children:""}),p.jsx("span",{children:Ey(s.replace(/^- /,""))})]},r):s.length>0?p.jsx("p",{children:Ey(s)},r):null})})},o1=Dy.memo(({deal:t,filterType:e,onRetry:n,onForceExpert:r,onReject:s,onToggleFavorite:i,onDelete:o})=>{var M,j,T,v,E,I,k,R,S,rt;const[l,u]=F.useState(!1),[h,f]=F.useState(!1),g=F.useRef(null),m=F.useRef(null),x=ue=>{ue.preventDefault(),ue.stopPropagation();const st=`${window.location.origin}${window.location.pathname}?dealId=${t.id}`;navigator.clipboard.writeText(st).then(()=>{u(!0),setTimeout(()=>u(!1),2e3)})};F.useEffect(()=>{const ue=st=>{m.current&&!m.current.contains(st.target)&&f(!1)};return document.addEventListener("mousedown",ue),()=>document.removeEventListener("mousedown",ue)},[]);const b=(ue=>{var st,dt,B,G;return ue.status==="analyzing"||(st=ue.status)!=null&&st.startsWith("retry")?"Analyse en cours...":(dt=ue.aiAnalysis)!=null&&dt.model_used?ue.aiAnalysis.model_used:ue.status==="analyzed"&&!((B=ue.aiAnalysis)!=null&&B.model_used)?"Modle non spcifi":((G=ue.aiAnalysis)==null?void 0:G.model_used)||"Analyse initiale"})(t),L=b.includes("pro")||b.includes("expert"),_=()=>{g.current=setTimeout(()=>f(!0),500)},w=()=>{g.current&&clearTimeout(g.current)},A=()=>{h?(n&&n(t.id),f(!1)):n&&n(t.id)},N=ue=>{ue.stopPropagation(),r&&r(t.id),f(!1)};return p.jsxs("div",{className:`group bg-white rounded-[2rem] shadow-sm border border-slate-200 flex flex-col md:flex-row items-start hover:shadow-2xl hover:shadow-blue-500/5 transition-all duration-500 animate-in fade-in slide-in-from-bottom-4 ${t.status==="rejected"?"opacity-50":""}`,children:[p.jsxs("div",{className:"md:w-80 md:sticky md:top-24 self-start shrink-0 relative bg-slate-100 md:rounded-l-[2rem] rounded-t-[2rem] md:rounded-tr-none overflow-hidden",children:[p.jsx("div",{className:"h-64 md:h-80 w-full",children:p.jsx(GA,{images:t.imageUrls||[t.imageUrl],title:t.title})}),p.jsx("div",{className:"absolute top-4 left-4 z-10 pointer-events-none",children:p.jsx(KA,{verdict:(M=t.aiAnalysis)==null?void 0:M.verdict})}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent pointer-events-none"})]}),p.jsxs("div",{className:"flex-1 p-6 md:p-8 flex flex-col w-full md:rounded-r-[2rem] rounded-b-[2rem] md:rounded-bl-none overflow-hidden",children:[p.jsxs("div",{className:"flex justify-between items-start gap-4 mb-2",children:[p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center gap-2 text-blue-600 font-bold text-[10px] uppercase tracking-widest mb-1",children:[p.jsx(wT,{size:10})," ",t.location||"Qubec"]}),p.jsx("h2",{className:"text-2xl font-black text-slate-800 leading-tight group-hover:text-blue-600 transition-colors uppercase tracking-tight",children:t.title}),((j=t.aiAnalysis)==null?void 0:j.classification)&&p.jsxs("div",{className:"mt-2 flex items-center gap-2 text-purple-600 bg-purple-50 px-3 py-1 rounded-full text-xs font-bold",children:[p.jsx($d,{size:12}),p.jsx("span",{children:t.aiAnalysis.classification})]})]}),p.jsxs("div",{className:"text-right flex flex-col items-end",children:[p.jsxs("div",{className:"bg-slate-900 text-white px-4 py-2 rounded-2xl shadow-xl",children:[p.jsx("span",{className:"block text-[8px] font-black uppercase text-slate-400 tracking-tighter",children:"Prix Demand"}),p.jsxs("span",{className:"text-2xl font-black tabular-nums",children:[t.price," $"]})]}),((T=t.aiAnalysis)==null?void 0:T.estimated_value)&&t.status!=="rejected"&&p.jsxs("div",{className:"mt-2 text-emerald-600 flex items-center gap-1 font-bold text-xs bg-emerald-50 px-2 py-1 rounded-lg",children:[p.jsx(CT,{size:12})," Val. Est: ",t.aiAnalysis.estimated_value,"$"]}),((v=t.aiAnalysis)==null?void 0:v.estimated_value_after_repair)>0&&t.status!=="rejected"&&p.jsxs("div",{className:"mt-1 text-purple-600 flex items-center gap-1 font-bold text-xs bg-purple-50 px-2 py-1 rounded-lg",children:[p.jsx(dT,{size:12})," Val. Revente: ",t.aiAnalysis.estimated_value_after_repair,"$"]})]})]}),p.jsxs("div",{className:"relative mb-6",children:[p.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1 rounded-full ${L?"bg-purple-500":"bg-blue-100"}`}),p.jsxs("div",{className:"pl-5 py-1",children:[p.jsxs("div",{className:`flex items-center gap-1.5 mb-2 ${L?"text-purple-600":"text-blue-600"}`,children:[p.jsx(z_,{size:14}),p.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:b})]}),p.jsx("div",{className:"mt-2",children:(E=t.aiAnalysis)!=null&&E.reasoning?(()=>{const ue=t.aiAnalysis.reasoning,st=ue.match(/### RSUM\n([\s\S]*?)(?=\n###|$)/),dt=st?st[1].trim():ue,B=ue.match(/(### (?!RSUM)[\s\S]*)/),G=B?B[1].trim():null;return p.jsxs(p.Fragment,{children:[p.jsx(Ty,{text:dt}),G&&p.jsx(an,{title:"Voir l'analyse dtaille",children:p.jsx(Ty,{text:G})})]})})():p.jsx("p",{className:"text-slate-400 italic text-sm",children:"Analyse de l'tat et de la valeur en cours par l'intelligence artificielle..."})})]})]}),p.jsxs("div",{className:"mt-auto pt-6 border-t border-slate-100 flex flex-wrap items-center justify-between gap-4 pb-12 md:pb-4",children:[p.jsxs("div",{className:"flex items-center gap-6",children:[p.jsxs("div",{className:"flex items-center gap-2 text-slate-400 text-[10px] font-bold",children:[p.jsx(gT,{size:14}),p.jsx("span",{className:"uppercase tracking-widest",children:(I=t.timestamp)!=null&&I.seconds?new Date(t.timestamp.seconds*1e3).toLocaleString():"Juste maintenant"})]}),((k=t.aiAnalysis)==null?void 0:k.confidence)&&p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-20 h-1.5 bg-slate-100 rounded-full overflow-hidden",children:p.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${t.aiAnalysis.confidence}%`}})}),p.jsxs("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:["Confiance ",t.aiAnalysis.confidence,"%"]})]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:()=>i(t.id,t.isFavorite),className:`flex items-center gap-2 px-3 py-3 rounded-2xl text-xs font-black uppercase tracking-widest transition-all shadow-sm ${t.isFavorite?"bg-rose-100 text-rose-600":"bg-slate-100 text-slate-400 hover:text-rose-400"}`,title:t.isFavorite?"Retirer des favoris":"Ajouter aux favoris",children:p.jsx(vT,{size:14,fill:t.isFavorite?"currentColor":"none"})}),t.status!=="rejected"&&p.jsxs("div",{className:"relative",ref:m,children:[p.jsx("button",{onMouseDown:_,onMouseUp:w,onMouseLeave:w,onTouchStart:_,onTouchEnd:w,onClick:A,disabled:t.status==="retry_analysis"||t.status==="retry_analysis_expert"||t.status==="analyzing",className:`flex items-center gap-2 px-3 py-3 rounded-2xl text-xs font-black uppercase tracking-widest transition-all shadow-sm relative overflow-hidden ${(R=t.status)!=null&&R.startsWith("retry")||t.status==="analyzing"?"bg-amber-100 text-amber-600 cursor-wait":L?"bg-purple-50 text-purple-600 hover:bg-purple-100 border border-purple-100":"bg-slate-100 text-slate-400 hover:text-amber-500"}`,title:"Clic: Relancer / Maintenir: Options Expert",children:(S=t.status)!=null&&S.startsWith("retry")||t.status==="analyzing"?p.jsx(ir,{size:14,className:"animate-spin"}):p.jsxs(p.Fragment,{children:[p.jsx(ir,{size:14}),p.jsx("span",{className:"absolute bottom-0 left-0 h-0.5 bg-purple-500 transition-all duration-[500ms] ease-linear",style:{width:h?"100%":"0%"}})]})}),h&&!((rt=t.status)!=null&&rt.startsWith("retry"))&&!t.status==="analyzing"&&p.jsxs("button",{onClick:N,className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-auto whitespace-nowrap flex items-center justify-center gap-2 px-4 py-3 rounded-2xl text-xs font-black uppercase tracking-widest bg-purple-600 text-white shadow-xl animate-in slide-in-from-bottom-2 z-20 hover:bg-purple-700 transition-colors",title:"Forcer l'analyse Expert (Gemini 1.5 Pro)",children:[p.jsx(j_,{size:14})," Expert"]})]}),t.status!=="rejected"&&p.jsx("button",{onClick:()=>s(t.id),className:"flex items-center gap-2 bg-slate-100 hover:bg-rose-600 hover:text-white text-slate-600 px-3 py-3 rounded-2xl text-xs font-black uppercase tracking-widest transition-all group/btn shadow-sm",title:"Rejeter l'annonce",children:p.jsx(M_,{size:14})}),p.jsx("button",{onClick:()=>o(t.id),className:"flex items-center gap-2 bg-red-50 hover:bg-red-600 hover:text-white text-red-600 px-3 py-3 rounded-2xl text-xs font-black uppercase tracking-widest transition-all group/btn shadow-sm",title:"Supprimer dfinitivement",children:p.jsx(Jl,{size:14})}),p.jsx("button",{onClick:x,className:`flex items-center gap-2 px-3 py-3 rounded-2xl text-xs font-black uppercase tracking-widest transition-all shadow-sm ${l?"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-400 hover:text-blue-500"}`,title:"Copier le lien de l'analyse",children:l?p.jsx(Bd,{size:14}):p.jsx(kT,{size:14})}),p.jsxs("a",{href:t.link,target:"_blank",rel:"noreferrer",className:"flex items-center gap-2 bg-slate-100 hover:bg-blue-600 hover:text-white text-slate-600 px-6 py-3 rounded-2xl text-xs font-black uppercase tracking-widest transition-all group/btn shadow-sm",children:["Voir sur Facebook ",p.jsx(mT,{size:14,className:"group-hover/btn:translate-x-0.5 group-hover/btn:-translate-y-0.5 transition-transform"})]})]})]})]})]})}),QA={lat:45.5017,lng:-73.5673},JA={lat:46.8139,lng:-71.208},XA={lat:45.5758,lng:-73.7531},YA={lat:45.4765,lng:-75.7013},ZA={lat:45.5369,lng:-73.5105},e7={lat:45.401,lng:-71.8824},t7={lat:46.8033,lng:-71.1779},n7={lat:45.6928,lng:-73.633},r7={lat:45.7397,lng:-73.4479},s7={lat:45.8833,lng:-72.4833},i7={lat:45.4,lng:-72.7333},o7={lat:45.6667,lng:-73.8833},a7={lat:45.65,lng:-74.0833},l7={lat:45.4617,lng:-73.5669},u7={lat:45.4319,lng:-73.6336},c7={lat:45.4419,lng:-73.6786},h7={lat:45.4486,lng:-73.7367},d7={lat:45.45,lng:-73.8667},f7={lat:45.4333,lng:-73.8667},p7={lat:45.4167,lng:-73.9667},g7={lat:45.4833,lng:-73.8667},m7={lat:45.5,lng:-73.8167},y7={lat:45.5167,lng:-73.6},v7={lat:45.4833,lng:-73.6},_7={lat:45.4833,lng:-73.6333},w7={lat:45.6,lng:-73.55},E7={lat:45.4667,lng:-73.45},T7={lat:45.6,lng:-73.45},I7={lat:45.6833,lng:-73.4333},x7={lat:45.3833,lng:-73.5167},S7={lat:45.3167,lng:-73.75},A7={lat:45.3167,lng:-73.8667},k7={lat:45.3833,lng:-73.9833},C7={lat:45.45,lng:-74.15},R7={lat:45.4833,lng:-74.3},P7={lat:45.4667,lng:-74.0833},b7={lat:45.6167,lng:-73.8333},N7={lat:45.65,lng:-73.7833},D7={lat:45.75,lng:-73.6},L7={lat:45.7167,lng:-73.4833},V7={lat:45.8833,lng:-73.2833},O7={lat:45.95,lng:-73.2167},M7={lat:46.0833,lng:-73.1833},j7={lat:46.0167,lng:-73.4333},F7={lat:45.9667,lng:-73.4667},U7={lat:45.65,lng:-74.3333},z7={lat:45.6167,lng:-74.6},B7={lat:45.6,lng:-74.6},$7={lat:45.7667,lng:-74.25},q7={lat:45.9,lng:-74.1333},H7={lat:46.2833,lng:-74.7333},W7={lat:46.3833,lng:-75.9667},G7={lat:45.5,lng:-75.7833},K7={lat:45.55,lng:-75.7667},Q7={lat:45.5833,lng:-75.4167},J7={lat:45.6,lng:-75.25},X7={lat:45.6167,lng:-75.0167},Y7={lat:45.65,lng:-74.9333},Z7={lat:45.9167,lng:-75.1667},ek={lat:45.8833,lng:-74.9167},tk={lat:45.95,lng:-74.8333},nk={lat:46.0333,lng:-74.8333},rk={lat:45.9833,lng:-74.6333},sk={lat:45.9667,lng:-74.6167},ik={lat:46.0333,lng:-74.5833},ok={lat:45.9667,lng:-74.5333},ak={lat:45.95,lng:-74.5333},lk={lat:45.75,lng:-74.3833},uk={lat:45.7833,lng:-74.5833},ck={lat:45.0167,lng:-74.5},hk={lat:45,lng:-74.25},dk={lat:45.0333,lng:-74.1667},fk={lat:45.0833,lng:-74.1667},pk={lat:45.0833,lng:-74.15},gk={lat:45.1167,lng:-74.05},mk={lat:45.0333,lng:-73.9333},yk={lat:45.05,lng:-73.7667},vk={lat:45.1833,lng:-73.85},_k={lat:45.05,lng:-73.5833},wk={lat:45.0833,lng:-73.3667},Ek={lat:45.1333,lng:-73.1833},Tk={lat:45.0667,lng:-73.2},Ik={lat:45.0667,lng:-73.25},xk={lat:45.1167,lng:-72.9833},Sk={lat:45.2833,lng:-72.9667},Ak={lat:45.1833,lng:-73.4},kk={lat:45.55,lng:-73.2167},Ck={lat:45.5667,lng:-73.2},Rk={lat:45.45,lng:-73.25},Pk={lat:45.45,lng:-73.2833},bk={lat:45.45,lng:-73.3333},Nk={lat:45.6667,lng:-72.6667},Dk={lat:46.0167,lng:-72.9167},Lk={lat:45.9333,lng:-72.9333},Vk={lat:46.0667,lng:-72.8167},Ok={lat:46.0667,lng:-72.8167},Mk={lat:46.2333,lng:-72.6167},jk={lat:45.7,lng:-72.4167},Fk={lat:45.75,lng:-72.5167},Uk={lat:45.2833,lng:-72.7667},zk={lat:45.3167,lng:-72.65},Bk={lat:45.1,lng:-72.6167},$k={lat:45.0333,lng:-72.6667},qk={lat:45.05,lng:-72.8333},Hk={lat:45.1333,lng:-72.8},Wk={lat:45.2,lng:-72.75},Gk={lat:45.35,lng:-72.6},Kk={lat:45.35,lng:-72.5167},Qk={lat:45.3833,lng:-72.5},Jk={lat:45.4167,lng:-72.3},Xk={lat:45.4167,lng:-72.3667},Yk={lat:45.5,lng:-72.3167},Zk={lat:45.55,lng:-72.3},eC={lat:45.4833,lng:-72.2333},tC={lat:45.5667,lng:-72.1667},nC={lat:45.6667,lng:-72.15},rC={lat:45.6667,lng:-72.1},sC={lat:45.5667,lng:-72},iC={lat:45.5,lng:-71.8167},oC={lat:45.5,lng:-71.6333},aC={lat:45.3667,lng:-71.4667},lC={lat:45.4333,lng:-71.25},uC={lat:45.5333,lng:-71.2833},cC={lat:45.6167,lng:-71.3833},hC={lat:45.7,lng:-71.4667},dC={lat:45.6167,lng:-71.6333},fC={lat:45.5167,lng:-71.5},pC={lat:45.0833,lng:-71.7667},gC={lat:45.1333,lng:-71.8},mC={lat:45.0167,lng:-72.1},yC={lat:45.0333,lng:-72.1667},vC={lat:45.1833,lng:-71.9333},_C={lat:45.2667,lng:-72.15},wC={lat:45.15,lng:-72.2667},EC={lat:45.3,lng:-72.3},TC={lat:45.3667,lng:-72.1667},IC={lat:45.7167,lng:-72.25},xC={lat:45.7167,lng:-72.25},SC={lat:45.5833,lng:-72.2833},AC={lat:45.5333,lng:-71.3667},kC={lat:45.6,lng:-71.1333},CC={lat:45.6333,lng:-70.9833},RC={lat:45.55,lng:-70.9333},PC={lat:45.45,lng:-70.9},bC={lat:45.5333,lng:-70.8167},NC={lat:45.6667,lng:-70.7833},DC={lat:46.4667,lng:-70.8},LC={lat:46.5,lng:-71.0833},VC={lat:46.6167,lng:-70.55},OC={lat:46.75,lng:-70.5833},MC={lat:46.8333,lng:-71.0167},jC={lat:46.9833,lng:-70.55},FC={lat:47.0833,lng:-70.05},UC={lat:47.5667,lng:-69.8667},zC={lat:47.5333,lng:-69.75},BC={lat:47.9167,lng:-69.5},$C={lat:48.45,lng:-68.5333},qC={lat:48.6,lng:-68.1333},HC={lat:48.8333,lng:-67.5333},WC={lat:48.5667,lng:-67.6333},GC={lat:48.4667,lng:-67.4333},KC={lat:48.3333,lng:-67.3667},QC={lat:48.35,lng:-67.2167},JC={lat:48.3167,lng:-68.5667},XC={lat:48.5833,lng:-68.0333},YC={lat:49.2167,lng:-66.0667},ZC={lat:49.1833,lng:-64.8333},eR={lat:48.95,lng:-65.5},tR={lat:48.35,lng:-64.6833},nR={lat:48.1,lng:-65.0833},rR={lat:48.0333,lng:-65.2},sR={lat:48.05,lng:-65.4833},iR={lat:48.1167,lng:-65.7333},oR={lat:48.1667,lng:-65.9833},aR={lat:48.1333,lng:-66.3167},lR={lat:48.1,lng:-66.4667},uR={lat:48.15,lng:-69.7167},cR={lat:48.7333,lng:-69.0833},hR={lat:48.8167,lng:-68.8833},dR={lat:48.9333,lng:-68.65},fR={lat:49.05,lng:-68.55},pR={lat:49.2833,lng:-67.9},gR={lat:49.3167,lng:-67.6},mR={lat:50.2167,lng:-66.4},yR={lat:50.2167,lng:-66.2333},vR={lat:50.2833,lng:-64.0333},_R={lat:50.2167,lng:-62.0833},wR={lat:50.1833,lng:-61.8167},ER={lat:52.7833,lng:-67.0833},TR={lat:54.8,lng:-66.8167},IR={lat:54.85,lng:-66.7667},xR={lat:49.9167,lng:-74.3667},SR={lat:49.7833,lng:-74.85},AR={lat:49.75,lng:-77.6333},kR={lat:53.7833,lng:-78.9},CR={lat:53,lng:-78.8167},RR={lat:52.2333,lng:-78.5167},PR={lat:51.4667,lng:-78.75},bR={lat:51.5667,lng:-76.1333},NR={lat:49.7333,lng:-75.95},DR={lat:50.4167,lng:-73.8667},LR={lat:55.2833,lng:-77.7667},VR={lat:48.5667,lng:-78.1167},OR={lat:48.75,lng:-79.05},MR={lat:48.6667,lng:-79.2},jR={lat:48.8667,lng:-79.3167},FR={lat:48.8667,lng:-79.4167},UR={lat:48.6,lng:-79.3},zR={lat:48.6,lng:-79.3833},BR={lat:48.6667,lng:-78.6833},$R={lat:48.7333,lng:-78.85},qR={lat:48.6833,lng:-78.9833},HR={lat:48.8333,lng:-79.0333},WR={lat:48.9667,lng:-79.2333},GR={lat:48.8167,lng:-78.2333},KR={lat:48.65,lng:-78.5333},QR={lat:48.4,lng:-78.35},JR={lat:48.55,lng:-77.9667},XR={lat:48.4333,lng:-77.6333},YR={lat:48.7333,lng:-77.5667},ZR={lat:48.6833,lng:-77.5},eP={lat:48.4,lng:-77.4833},tP={lat:48.3833,lng:-77.2333},nP={lat:48.1333,lng:-78.1333},rP={lat:48.4667,lng:-78.9167},sP={lat:48.2167,lng:-78.9167},iP={lat:48.2,lng:-79.2333},oP={lat:48.1333,lng:-79.0167},aP={lat:48.05,lng:-79.0833},lP={lat:48.0333,lng:-79.2167},uP={lat:47.9333,lng:-79.2333},cP={lat:47.9667,lng:-79.0833},hP={lat:48.2167,lng:-78.5},dP={lat:47.35,lng:-79.35},fP={lat:47.3833,lng:-78.7},pP={lat:47.5333,lng:-78.9667},gP={lat:47.5333,lng:-78.8333},mP={lat:47.6,lng:-78.6},yP={lat:46.7833,lng:-78.9833},vP={lat:46.7833,lng:-78.9667},_P={lat:47.3167,lng:-79.4667},wP={lat:48.55,lng:-71.65},EP={lat:48.4167,lng:-71.0667},TP={lat:48.4333,lng:-71.0667},IP={lat:48.4833,lng:-71.2},xP={lat:48.45,lng:-71.5333},SP={lat:48.6667,lng:-71.5},AP={lat:48.6833,lng:-71.4667},kP={lat:48.4167,lng:-71.95},CP={lat:48.4333,lng:-72.0667},RP={lat:48.5167,lng:-72.2333},PP={lat:48.8333,lng:-72.5333},bP={lat:49,lng:-72.55},NP={lat:48.8833,lng:-72.4167},DP={lat:48.5667,lng:-72.2333},LP={lat:46.5667,lng:-72.75},VP={lat:46.45,lng:-72.9167},OP={lat:47.9167,lng:-74.6167},MP={lat:47.9,lng:-73.7833},jP={lat:48.6667,lng:-74.9333},FP={lat:47.6667,lng:-73},UP={lat:46.4,lng:-72.2667},zP={lat:46.5333,lng:-72.0333},BP={lat:46.4667,lng:-72},$P={lat:46.3,lng:-72.0667},qP={lat:46.3667,lng:-71.9667},HP={lat:46.05,lng:-71.9667},WP={lat:46.0333,lng:-71.95},GP={lat:45.95,lng:-71.9833},KP={lat:45.8833,lng:-71.95},QP={lat:45.9667,lng:-71.7667},JP={lat:46.1667,lng:-71.8833},XP={lat:46.2167,lng:-71.7667},YP={lat:46.3333,lng:-71.7167},ZP={lat:46.3833,lng:-71.8667},eb={lat:46.3667,lng:-71.6},tb={lat:46.2667,lng:-71.5167},Ia={montreal:QA,quebec:JA,laval:XA,gatineau:YA,longueuil:ZA,sherbrooke:e7,levis:t7,"trois-rivieres":{lat:46.343,lng:-72.5421},terrebonne:n7,"saint-jean-sur-richelieu":{lat:45.3057,lng:-73.2533},repentigny:r7,drummondville:s7,granby:i7,blainville:o7,"saint-hyacinthe":{lat:45.6333,lng:-72.95},mirabel:a7,verdun:l7,lasalle:u7,lachine:c7,dorval:h7,"pointe-claire":{lat:45.4489,lng:-73.8167},kirkland:d7,beaconsfield:f7,"baie-d'urf":{lat:45.4167,lng:-73.9167},"sainte-anne-de-bellevue":{lat:45.4,lng:-73.95},senneville:p7,"dollard-des-ormeaux":{lat:45.4833,lng:-73.8167},pierrefonds:g7,roxboro:m7,"sainte-genevive":{lat:45.4833,lng:-73.8667},"le-bizard":{lat:45.5,lng:-73.8833},outremont:y7,westmount:v7,"mont-royal":{lat:45.5167,lng:-73.65},"cte-saint-luc":{lat:45.4667,lng:-73.6667},hampstead:_7,"montral-ouest":{lat:45.45,lng:-73.65},"montral-est":{lat:45.6333,lng:-73.5},anjou:w7,"saint-lonard":{lat:45.5833,lng:-73.6},"montral-nord":{lat:45.6,lng:-73.6333},"rivire-des-prairies":{lat:45.65,lng:-73.5833},"pointe-aux-trembles":{lat:45.65,lng:-73.5},brossard:E7,boucherville:T7,"saint-bruno-de-montarville":{lat:45.5333,lng:-73.35},"sainte-julie":{lat:45.5833,lng:-73.3333},varennes:I7,verchres:{lat:45.7667,lng:-73.35},candiac:x7,"la prairie":{lat:45.4167,lng:-73.5},"sainte-catherine":{lat:45.4,lng:-73.5667},"saint-constant":{lat:45.3667,lng:-73.5667},chteauguay:{lat:45.3667,lng:-73.75},mercier:S7,beauharnois:A7,"salaberry-de-valleyfield":{lat:45.25,lng:-74.1333},"vaudreuil-dorion":{lat:45.4,lng:-74.0333},pincourt:k7,"l'le-perrot":{lat:45.3833,lng:-73.95},"notre-dame-de-l'le-perrot":{lat:45.3667,lng:-73.9333},"saint-lazare":{lat:45.4,lng:-74.1333},hudson:C7,rigaud:R7,"saint-eustache":{lat:45.5667,lng:-73.9},"deux-montagnes":{lat:45.5333,lng:-73.8833},"sainte-marthe-sur-le-lac":{lat:45.5333,lng:-73.9333},"pointe-calumet":{lat:45.5167,lng:-73.9667},"saint-joseph-du-lac":{lat:45.5333,lng:-74},oka:P7,boisbriand:b7,rosemre:{lat:45.6333,lng:-73.8},lorraine:N7,"bois-des-filion":{lat:45.6667,lng:-73.75},"sainte-thrse":{lat:45.6333,lng:-73.8333},mascouche:D7,"l'assomption":{lat:45.8333,lng:-73.4167},charlemagne:L7,"saint-sulpice":{lat:45.8333,lng:-73.35},lavaltrie:V7,lanoraie:O7,berthierville:M7,joliette:j7,"notre-dame-des-prairies":{lat:46.05,lng:-73.4333},"saint-charles-borrome":{lat:46.05,lng:-73.4667},"saint-paul":{lat:45.95,lng:-73.4333},crabtree:F7,"saint-lin-laurentides":{lat:45.85,lng:-73.7667},"saint-calixte":{lat:45.95,lng:-73.85},"saint-hippolyte":{lat:45.9167,lng:-74},prvost:{lat:45.8667,lng:-74.0833},"saint-sauveur":{lat:45.8833,lng:-74.1667},"sainte-adle":{lat:45.95,lng:-74.1333},"val-david":{lat:46.0333,lng:-74.2},"val-morin":{lat:46.0167,lng:-74.2},"sainte-agathe-des-monts":{lat:46.05,lng:-74.2833},"mont-tremblant":{lat:46.1167,lng:-74.6},"saint-jrme":{lat:45.7833,lng:-74},lachute:U7,"brownsburg-chatham":{lat:45.6667,lng:-74.4167},grenville:z7,hawkesbury:B7,"saint-colomban":{lat:45.7333,lng:-74.1333},gore:$7,"mille-isles":{lat:45.8,lng:-74.1833},"wentworth-nord":{lat:45.8667,lng:-74.3833},"morin-heights":{lat:45.9,lng:-74.25},piedmont:q7,"saint-adolphe-d'howard":{lat:45.9667,lng:-74.3333},"saint-faustin-lac-carr":{lat:46.1167,lng:-74.4833},"mont-blanc":{lat:46.1167,lng:-74.4833},labelle:H7,"rivire-rouge":{lat:46.4167,lng:-74.8833},"mont-laurier":{lat:46.55,lng:-75.5},"ferme-neuve":{lat:46.7,lng:-75.45},maniwaki:W7,chelsea:G7,cantley:K7,"val-des-monts":{lat:45.65,lng:-75.6667},"l'ange-gardien":{lat:45.6,lng:-75.4333},buckingham:Q7,"masson-angers":{lat:45.5333,lng:-75.4333},thurso:J7,papineauville:X7,montebello:Y7,"saint-andr-avellin":{lat:45.7167,lng:-75.05},chnville:{lat:45.8833,lng:-75.05},"lac-simon":{lat:45.9333,lng:-75.0833},montpellier:Z7,namur:ek,boileau:tk,amherst:nk,huberdeau:rk,arundel:sk,barkmere:ik,montcalm:ok,weir:ak,"lac-des-seize-les":{lat:45.8833,lng:-74.4667},wentworth:lk,harrington:uk,"grenville-sur-la-rouge":{lat:45.6667,lng:-74.6833},"pointe-fortune":{lat:45.55,lng:-74.3833},"trs-saint-rdempteur":{lat:45.4333,lng:-74.3167},"sainte-marthe":{lat:45.4,lng:-74.2833},"sainte-justine-de-newton":{lat:45.35,lng:-74.3833},"saint-tlesphore":{lat:45.2833,lng:-74.4167},"saint-polycarpe":{lat:45.3,lng:-74.3},"saint-zotique":{lat:45.25,lng:-74.2333},"les coteaux":{lat:45.2667,lng:-74.2333},"coteau-du-lac":{lat:45.2833,lng:-74.1833},"saint-clet":{lat:45.35,lng:-74.2167},"les cdres":{lat:45.3,lng:-74.05},"pointe-des-cascades":{lat:45.3333,lng:-73.9667},"terrasse-vaudreuil":{lat:45.3833,lng:-73.9833},"vaudreuil-sur-le-lac":{lat:45.4167,lng:-74.0167},"l'le-cadieux":{lat:45.4333,lng:-74.0167},"saint-stanislas-de-kostka":{lat:45.1833,lng:-74.1333},"saint-tienne-de-beauharnois":{lat:45.25,lng:-73.9167},"sainte-barbe":{lat:45.1667,lng:-74.2},"saint-anicet":{lat:45.0833,lng:-74.3667},dundee:ck,elgin:hk,hinchinbrooke:dk,huntingdon:fk,godmanchester:pk,ormstown:gk,franklin:mk,havelock:yk,"saint-chrysostome":{lat:45.1,lng:-73.75},"trs-saint-sacrement":{lat:45.1667,lng:-73.8333},howick:vk,"sainte-martine":{lat:45.25,lng:-73.8},"saint-urbain-premier":{lat:45.2167,lng:-73.7333},"sainte-clotilde":{lat:45.1667,lng:-73.6833},hemmingford:_k,"saint-bernard-de-lacolle":{lat:45.0833,lng:-73.4167},lacolle:wk,"saint-valentin":{lat:45.1333,lng:-73.3167},"saint-paul-de-l'le-aux-noix":{lat:45.1333,lng:-73.2667},henryville:Ek,noyan:Tk,clarenceville:Ik,"venise-en-qubec":{lat:45.0833,lng:-73.1333},"saint-georges-de-clarenceville":{lat:45.0667,lng:-73.25},"saint-sbastien":{lat:45.1667,lng:-73.1333},"pike river":{lat:45.1167,lng:-73.0667},"stanbridge station":{lat:45.1167,lng:-73.0333},bedford:xk,"notre-dame-de-stanbridge":{lat:45.1833,lng:-73.0333},farnham:Sk,"sainte-brigide-d'iberville":{lat:45.3333,lng:-73.05},"mont-saint-grgoire":{lat:45.3333,lng:-73.15},"saint-alexandre":{lat:45.2333,lng:-73.1167},"sainte-anne-de-sabrevois":{lat:45.2167,lng:-73.2333},"saint-blaise-sur-richelieu":{lat:45.2167,lng:-73.2833},"saint-cyprien-de-napierville":{lat:45.1833,lng:-73.4},napierville:Ak,"saint-jacques-le-mineur":{lat:45.2833,lng:-73.4167},"saint-michel":{lat:45.2833,lng:-73.5667},"saint-rmi":{lat:45.2667,lng:-73.6167},"saint-mathieu":{lat:45.3167,lng:-73.5333},"saint-philippe":{lat:45.35,lng:-73.4667},"saint-basile-le-grand":{lat:45.5333,lng:-73.2833},mcmasterville:kk,beloeil:Ck,"mont-saint-hilaire":{lat:45.5667,lng:-73.1833},"otterburn park":{lat:45.5333,lng:-73.2},"saint-mathias-sur-richelieu":{lat:45.4833,lng:-73.2667},richelieu:Rk,chambly:Pk,carignan:bk,"saint-jean-baptiste":{lat:45.5167,lng:-73.1167},"saint-pie":{lat:45.5167,lng:-72.9},"saint-dominique":{lat:45.55,lng:-72.8333},"saint-valrien-de-milton":{lat:45.5667,lng:-72.7167},"roxton pond":{lat:45.4833,lng:-72.65},"roxton falls":{lat:45.5667,lng:-72.5167},"acton vale":{lat:45.65,lng:-72.5667},upton:Nk,"saint-thodore-d'acton":{lat:45.6833,lng:-72.6},"saint-nazaire-d'acton":{lat:45.75,lng:-72.6167},"sainte-hlne-de-bagot":{lat:45.7333,lng:-72.7333},"saint-hugues":{lat:45.8167,lng:-72.8833},"saint-liboire":{lat:45.65,lng:-72.8667},"sainte-rosalie":{lat:45.6333,lng:-72.9},"saint-thomas-d'aquin":{lat:45.6167,lng:-73},"la prsentation":{lat:45.6667,lng:-73.05},"saint-jude":{lat:45.7833,lng:-73.0333},"saint-barnab-sud":{lat:45.7667,lng:-72.9333},"saint-bernard-de-michaudville":{lat:45.8167,lng:-73},"saint-louis":{lat:45.8667,lng:-72.9833},"saint-aim":{lat:45.9,lng:-72.95},"saint-robert":{lat:45.9667,lng:-73.0167},"sainte-victoire-de-sorel":{lat:45.9667,lng:-73.0833},"saint-ours":{lat:45.8833,lng:-73.15},"saint-roch-de-richelieu":{lat:45.9167,lng:-73.1833},"sorel-tracy":{lat:46.0333,lng:-73.1167},"saint-joseph-de-sorel":{lat:46.0333,lng:-73.1333},"sainte-anne-de-sorel":{lat:46.05,lng:-73.0667},yamaska:Dk,"saint-grard-majella":{lat:45.9833,lng:-72.8667},"saint-david":{lat:45.9667,lng:-72.8},massueville:Lk,"saint-guillaume":{lat:45.8833,lng:-72.7667},"saint-bonaventure":{lat:45.9333,lng:-72.6833},"saint-pie-de-guire":{lat:45.9333,lng:-72.6},"saint-franois-du-lac":{lat:46.0667,lng:-72.8333},pierreville:Vk,odanak:Ok,"baie-du-febvre":{lat:46.1333,lng:-72.7167},nicolet:Mk,"grand-saint-esprit":{lat:46.1667,lng:-72.5},"saint-clestin":{lat:46.2167,lng:-72.4333},"saint-wenceslas":{lat:46.1667,lng:-72.3333},"saint-lonard-d'aston":{lat:46.0833,lng:-72.3333},"notre-dame-du-bon-conseil":{lat:46,lng:-72.35},"sainte-brigitte-des-saults":{lat:46.0333,lng:-72.5},"saint-cyrille-de-wendover":{lat:45.9333,lng:-72.4333},"saint-lucien":{lat:45.8333,lng:-72.4167},"saint-flix-de-kingsey":{lat:45.7833,lng:-72.2333},"durham-sud":{lat:45.6667,lng:-72.3333},lefebvre:jk,wickham:Fk,"l'avenir":{lat:45.7667,lng:-72.3333},"saint-germain-de-grantham":{lat:45.8333,lng:-72.5667},"saint-majorique-de-grantham":{lat:45.9,lng:-72.5333},"saint-eugne":{lat:45.8167,lng:-72.6833},"saint-edmond-de-grantham":{lat:45.8667,lng:-72.6667},"saint-joachim-de-courval":{lat:45.9333,lng:-72.5667},"saint-zphirin-de-courval":{lat:46.05,lng:-72.6},"saint-elphge":{lat:46.0833,lng:-72.6333},"la visitation-de-yamaska":{lat:46.1167,lng:-72.6},"saint-franois-xavier-de-brome":{lat:45.2833,lng:-72.7167},brigham:Uk,bromont:zk,"lac-brome":{lat:45.2167,lng:-72.5167},"bolton-ouest":{lat:45.2,lng:-72.45},sutton:Bk,abercorn:$k,frelighsburg:qk,"saint-armand":{lat:45.0333,lng:-73.05},dunham:Hk,cowansville:Wk,"east farnham":{lat:45.2333,lng:-72.7833},"sainte-ccile-de-milton":{lat:45.4833,lng:-72.75},"saint-alphonse-de-granby":{lat:45.4,lng:-72.8},"ange-gardien":{lat:45.35,lng:-72.9167},"saint-paul-d'abbotsford":{lat:45.4333,lng:-72.8833},shefford:Gk,waterloo:Kk,warden:Qk,"saint-joachim-de-shefford":{lat:45.4333,lng:-72.5667},"sainte-anne-de-la-rochelle":{lat:45.4167,lng:-72.4167},bonsecours:Jk,lawrenceville:Xk,valcourt:Yk,maricourt:Zk,racine:eC,melbourne:tC,richmond:nC,cleveland:rC,windsor:sC,"saint-franois-xavier-de-brompton":{lat:45.5167,lng:-72.05},stoke:iC,"ascot corner":{lat:45.45,lng:-71.7667},"east angus":{lat:45.4833,lng:-71.6667},westbury:oC,"cookshire-eaton":{lat:45.4167,lng:-71.6333},newport:aC,"burt-harnett":{lat:45.3667,lng:-71.4667},chartierville:lC,"la patrie":{lat:45.4,lng:-71.25},scotstown:uC,lingwick:cC,weedon:hC,dudswell:dC,bury:fC,"saint-isidore-de-clifton":{lat:45.2667,lng:-71.5167},"saint-malo":{lat:45.1833,lng:-71.5},"saint-venant-de-paquette":{lat:45.1333,lng:-71.4667},"east hereford":{lat:45.05,lng:-71.5},"saint-hermngilde":{lat:45.1,lng:-71.6833},dixville:pC,coaticook:gC,"barnston-ouest":{lat:45.1167,lng:-71.9333},"stanstead-est":{lat:45.0833,lng:-72.05},stanstead:mC,ogden:yC,"ayer's cliff":{lat:45.1667,lng:-72.05},hatley:vC,"north hatley":{lat:45.2667,lng:-71.9667},"sainte-catherine-de-hatley":{lat:45.2667,lng:-72.05},magog:_C,austin:wC,"saint-benot-du-lac":{lat:45.1667,lng:-72.2667},"bolton-est":{lat:45.2,lng:-72.35},"saint-tienne-de-bolton":{lat:45.25,lng:-72.35},"stukely-sud":{lat:45.3167,lng:-72.4167},eastman:EC,orford:TC,"saint-denis-de-brompton":{lat:45.4333,lng:-72.0833},"val-joli":{lat:45.5833,lng:-72.0333},"saint-claude":{lat:45.6667,lng:-71.9833},ulverton:IC,lisgar:xC,kingsbury:SC,"val-racine":{lat:45.4833,lng:-70.95},hampden:AC,milan:kC,nantes:CC,"lac-mgantic":{lat:45.5833,lng:-70.8833},marston:RC,piopolis:PC,"notre-dame-des-bois":{lat:45.3833,lng:-71.0667},"saint-augustin-de-woburn":{lat:45.3833,lng:-70.8667},frontenac:bC,audet:NC,"sainte-ccile-de-whitton":{lat:45.7167,lng:-70.9333},"lac-drolet":{lat:45.7167,lng:-70.85},"saint-ludger":{lat:45.7333,lng:-70.6833},"saint-robert-bellarmin":{lat:45.7167,lng:-70.5333},"saint-gdon-de-beauce":{lat:45.8667,lng:-70.6333},"saint-hilaire-de-dorset":{lat:45.8667,lng:-70.85},"saint-variste-de-forsyth":{lat:45.9333,lng:-70.9333},"la guadeloupe":{lat:45.95,lng:-70.9333},"saint-honor-de-shenley":{lat:45.9667,lng:-70.8},"saint-martin":{lat:45.9667,lng:-70.65},"saint-thophile":{lat:45.9333,lng:-70.4667},"saint-ren":{lat:46.0667,lng:-70.5667},"saint-cme-linire":{lat:46.0667,lng:-70.5167},"saint-georges":{lat:46.1167,lng:-70.6667},"saint-philibert":{lat:46.1333,lng:-70.5667},"saint-prosper":{lat:46.2167,lng:-70.4833},"saint-benjamin":{lat:46.2833,lng:-70.5833},"sainte-aurlie":{lat:46.1833,lng:-70.3667},"saint-zacharie":{lat:46.1333,lng:-70.3667},"sainte-rose-de-watford":{lat:46.3167,lng:-70.4167},"saint-louis-de-gonzague":{lat:46.2667,lng:-70.3333},"sainte-justine":{lat:46.4167,lng:-70.35},"lac-etchemin":{lat:46.4,lng:-70.5167},"saint-luc-de-bellechasse":{lat:46.5,lng:-70.4667},"saint-magloire":{lat:46.6,lng:-70.2833},"saint-camille-de-lellis":{lat:46.5,lng:-70.2},"sainte-sabine":{lat:46.4833,lng:-70.35},"saint-odilon-de-cranbourne":{lat:46.3167,lng:-70.6667},"saint-joseph-de-beauce":{lat:46.3,lng:-70.8833},"saint-joseph-des-rables":{lat:46.3167,lng:-70.9},"saint-jules":{lat:46.2667,lng:-70.9167},"tring-jonction":{lat:46.2667,lng:-70.9667},"saint-frdric":{lat:46.3,lng:-70.9667},"valle-jonction":{lat:46.3667,lng:-70.9167},"saints-anges":{lat:46.4333,lng:-70.9},frampton:DC,"saint-malachie":{lat:46.5333,lng:-70.7667},"saint-lon-de-standon":{lat:46.4833,lng:-70.6333},"saint-nazaire-de-dorchester":{lat:46.55,lng:-70.6667},"sainte-claire":{lat:46.6,lng:-70.8667},"saint-anselme":{lat:46.6333,lng:-70.9667},"sainte-hndine":{lat:46.55,lng:-70.9833},scott:LC,"saint-bernard":{lat:46.5,lng:-71.1333},"saint-lambert-de-lauzon":{lat:46.5833,lng:-71.2167},"saint-henri":{lat:46.6833,lng:-71.0667},"saint-gervais":{lat:46.7167,lng:-70.9},"saint-lazare-de-bellechasse":{lat:46.6667,lng:-70.8},"saint-damien-de-buckland":{lat:46.6333,lng:-70.6667},buckland:VC,"saint-philmon":{lat:46.6833,lng:-70.4667},armagh:OC,"saint-nere-de-bellechasse":{lat:46.7333,lng:-70.7333},"saint-raphal":{lat:46.8,lng:-70.75},"la durantaye":{lat:46.8167,lng:-70.8667},"saint-charles-de-bellechasse":{lat:46.7833,lng:-70.9333},beaumont:MC,"saint-michel-de-bellechasse":{lat:46.8667,lng:-70.9167},"saint-vallier":{lat:46.8833,lng:-70.8167},"berthier-sur-mer":{lat:46.9333,lng:-70.7333},montmagny:jC,"saint-pierre-de-la-rivire-du-sud":{lat:46.9167,lng:-70.6333},"saint-franois-de-la-rivire-du-sud":{lat:46.9,lng:-70.7167},"notre-dame-du-rosaire":{lat:46.8667,lng:-70.3833},"cap-saint-ignace":{lat:47.0333,lng:-70.4667},"l'islet":{lat:47.1167,lng:-70.3667},"saint-cyrille-de-l'islet":{lat:47.0333,lng:-70.25},"saint-marcel":{lat:46.9333,lng:-70.0833},"sainte-perptue":{lat:47.05,lng:-69.9333},tourville:FC,"saint-damase-de-l'islet":{lat:47.1833,lng:-70.1333},"saint-jean-port-joli":{lat:47.2167,lng:-70.2667},"saint-aubert":{lat:47.1667,lng:-70.2167},"sainte-louise":{lat:47.2833,lng:-70.1},"saint-roch-des-aulnaies":{lat:47.3167,lng:-70.1},"sainte-anne-de-la-pocatire":{lat:47.35,lng:-70.0333},"la pocatire":{lat:47.3667,lng:-70.0333},"saint-onsime-d'ixworth":{lat:47.2833,lng:-69.95},"saint-gabriel-lalemant":{lat:47.4333,lng:-69.9667},"mont-carmel":{lat:47.4333,lng:-69.85},"rivire-ouelle":{lat:47.4333,lng:-70.0167},"saint-pacme":{lat:47.4,lng:-69.95},"saint-denis-de-la-bouteillerie":{lat:47.5,lng:-69.9333},"saint-philippe-de-nri":{lat:47.4667,lng:-69.8833},kamouraska:UC,"saint-pascal":{lat:47.5333,lng:-69.8},"sainte-hlne-de-kamouraska":{lat:47.5833,lng:-69.7333},"saint-germain":{lat:47.6167,lng:-69.8},"saint-andr":{lat:47.6667,lng:-69.7333},"saint-alexandre-de-kamouraska":{lat:47.6833,lng:-69.6167},"saint-joseph-de-kamouraska":{lat:47.6,lng:-69.6333},"saint-bruno-de-kamouraska":{lat:47.5333,lng:-69.75},picard:zC,"saint-athanase":{lat:47.3833,lng:-69.4667},pohngamook:{lat:47.4667,lng:-69.2167},"rivire-bleue":{lat:47.4333,lng:-69.05},"saint-marc-du-lac-long":{lat:47.6,lng:-69.1667},"saint-elzar-de-tmiscouata":{lat:47.5333,lng:-69.1},"saint-louis-du-ha! ha!":{lat:47.6667,lng:-69},"tmiscouata-sur-le-lac":{lat:47.6833,lng:-68.8833},"saint-honor-de-tmiscouata":{lat:47.7333,lng:-69.0333},"saint-pierre-de-lamy":{lat:47.7667,lng:-69.0833},"saint-hubert-de-rivire-du-loup":{lat:47.8167,lng:-69.15},"saint-antonin":{lat:47.7667,lng:-69.4833},"saint-modeste":{lat:47.8333,lng:-69.4},"rivire-du-loup":{lat:47.8333,lng:-69.5333},"notre-dame-du-portage":{lat:47.7667,lng:-69.6167},cacouna:BC,"l'isle-verte":{lat:48.0167,lng:-69.3333},"saint-paul-de-la-croix":{lat:47.9667,lng:-69.2667},"saint-piphane":{lat:47.9,lng:-69.3167},"saint-franois-xavier-de-viger":{lat:47.9167,lng:-69.25},"saint-arsne":{lat:47.95,lng:-69.3833},"saint-clment":{lat:47.9333,lng:-69.0833},"saint-cyprien":{lat:47.8833,lng:-69.0167},"sainte-rita":{lat:47.9667,lng:-68.95},"saint-jean-de-dieu":{lat:48.0167,lng:-69.05},"saint-mdard":{lat:48.0833,lng:-68.8667},"saint-guy":{lat:48.0667,lng:-68.8167},"saint-loi":{lat:48.05,lng:-69.2167},"trois-pistoles":{lat:48.1167,lng:-69.1667},"notre-dame-des-neiges":{lat:48.1,lng:-69.1833},"saint-mathieu-de-rioux":{lat:48.1833,lng:-68.9833},"saint-simon":{lat:48.2167,lng:-68.8667},"saint-fabien":{lat:48.2833,lng:-68.8667},"saint-eugne-de-ladrire":{lat:48.2833,lng:-68.7},"saint-valrien":{lat:48.2833,lng:-68.6},"le bic":{lat:48.3667,lng:-68.7},rimouski:$C,"saint-anaclet-de-lessard":{lat:48.4833,lng:-68.4167},"sainte-luce":{lat:48.55,lng:-68.3833},"sainte-flavie":{lat:48.6,lng:-68.2333},"mont-joli":{lat:48.5833,lng:-68.1833},"saint-joseph-de-lepage":{lat:48.55,lng:-68.1333},price:qC,"saint-octave-de-mtis":{lat:48.6167,lng:-68.0833},"grand-mtis":{lat:48.6333,lng:-68.1333},"mtis-sur-mer":{lat:48.6667,lng:-68.0333},"baie-des-sables":{lat:48.7167,lng:-67.8833},"saint-ulric":{lat:48.7833,lng:-67.6833},matane:HC,"sainte-flicit":{lat:48.8833,lng:-67.3333},"grosses-roches":{lat:48.9333,lng:-67.1667},"les mchins":{lat:49,lng:-66.9667},"saint-jean-de-cherbourg":{lat:48.9167,lng:-67.2},"saint-adelme":{lat:48.8667,lng:-67.1},"saint-ren-de-matane":{lat:48.7667,lng:-67.4},"sainte-paule":{lat:48.7167,lng:-67.5333},"saint-landre":{lat:48.75,lng:-67.6333},"saint-damase":{lat:48.6833,lng:-67.7667},"saint-nol":{lat:48.6,lng:-67.8667},"saint-mose":{lat:48.5667,lng:-67.8667},"la rdemption":{lat:48.45,lng:-67.9333},"saint-clophas":{lat:48.4333,lng:-67.8333},"val-brillant":{lat:48.5333,lng:-67.55},sayabec:WC,amqui:GC,"saint-alexandre-des-lacs":{lat:48.4833,lng:-67.3333},"lac-au-saumon":{lat:48.4167,lng:-67.3333},"saint-tharcisius":{lat:48.4,lng:-67.2333},"saint-vianney":{lat:48.5,lng:-67.2333},albertville:KC,causapscal:QC,"sainte-florence":{lat:48.2667,lng:-67.2333},"sainte-marguerite-marie":{lat:48.3167,lng:-67.0833},"saint-znon-du-lac-humqui":{lat:48.4333,lng:-67.55},"saint-lon-le-grand":{lat:48.3833,lng:-67.5},"sainte-irne":{lat:48.4667,lng:-67.5667},espritsaint:JC,"la trinit-des-monts":{lat:48.2667,lng:-68.4667},"saint-narcisse-de-rimouski":{lat:48.3,lng:-68.4167},"saint-marcellin":{lat:48.3333,lng:-68.2833},"saint-gabriel-de-rimouski":{lat:48.4333,lng:-68.1333},"saint-donat":{lat:48.5,lng:-68.25},"sainte-angle-de-mrici":{lat:48.55,lng:-68.1333},padoue:XC,"saint-charles-garnier":{lat:48.4,lng:-68.0333},"les hauteurs":{lat:48.3667,lng:-68.1},"cap-chat":{lat:49.0833,lng:-66.6833},"sainte-anne-des-monts":{lat:49.1333,lng:-66.4833},"la martre":{lat:49.2,lng:-66.1667},marsoui:YC,"rivire--claude":{lat:49.2167,lng:-65.9},"mont-saint-pierre":{lat:49.2167,lng:-65.8},"saint-maxime-du-mont-louis":{lat:49.2333,lng:-65.7333},"sainte-madeleine-de-la-rivire-madeleine":{lat:49.25,lng:-65.3167},"grande-valle":{lat:49.2167,lng:-65.1333},"petite-valle":{lat:49.2167,lng:-65.0333},cloridorme:ZC,gasp:{lat:48.8333,lng:-64.4833},murdochville:eR,perc:{lat:48.5167,lng:-64.2167},"sainte-thrse-de-gasp":{lat:48.4167,lng:-64.4167},"grande-rivire":{lat:48.4,lng:-64.5},chandler:tR,"port-daniel-gascons":{lat:48.1833,lng:-64.9667},shigawake:nR,"saint-godefroi":{lat:48.0667,lng:-65.1167},"hope town":{lat:48.05,lng:-65.1833},hope:rR,paspbiac:{lat:48.0333,lng:-65.25},"new carlisle":{lat:48,lng:-65.3333},bonaventure:sR,"saint-simon":{lat:48.0667,lng:-65.5667},caplan:iR,"new richmond":{lat:48.1667,lng:-65.8667},"cascapdia-saint-jules":{lat:48.2,lng:-65.9333},maria:oR,"carleton-sur-mer":{lat:48.1,lng:-66.1333},nouvelle:aR,escuminac:lR,"pointe--la-croix":{lat:48.0167,lng:-66.7167},"ristigouche-partie-sud-est":{lat:48,lng:-66.7833},matapdia:{lat:47.9833,lng:-66.9333},"saint-andr-de-restigouche":{lat:48.0667,lng:-66.9167},"saint-alexis-de-matapdia":{lat:47.9667,lng:-67.05},"saint-franois-d'assise":{lat:48,lng:-67.0833},"l'ascension-de-patapdia":{lat:47.9833,lng:-67.2333},tadoussac:uR,"sacr-coeur":{lat:48.2333,lng:-69.8},"les bergeronnes":{lat:48.25,lng:-69.55},"les escoumins":{lat:48.35,lng:-69.4},"longue-rive":{lat:48.55,lng:-69.25},"portneuf-sur-mer":{lat:48.6167,lng:-69.1},forestville:cR,colombier:hR,betsiamites:dR,ragueneau:fR,"chute-aux-outardes":{lat:49.1167,lng:-68.4},"pointe-aux-outardes":{lat:49.05,lng:-68.4167},"pointe-lebel":{lat:49.1667,lng:-68.2},"baie-comeau":{lat:49.2167,lng:-68.15},franquelin:pR,godbout:gR,"baie-trinit":{lat:49.4167,lng:-67.3},"port-cartier":{lat:50.0333,lng:-66.8667},"sept-les":{lat:50.2,lng:-66.3833},uashat:mR,maliotenam:yR,"rivire-au-tonnerre":{lat:50.2667,lng:-64.7833},mingan:vR,"longue-pointe-de-mingan":{lat:50.2667,lng:-64.1333},"havre-saint-pierre":{lat:50.2333,lng:-63.6},"baie-johan-beetz":{lat:50.2833,lng:-62.8},aguanish:_R,natashquan:wR,"pointe-natashquan":{lat:50.1333,lng:-61.8},"cte-nord-du-golfe-du-saint-laurent":{lat:50.5,lng:-59.5},"blanc-sablon":{lat:51.4167,lng:-57.1333},"bonne-esprance":{lat:51.4,lng:-57.6667},"gros-mcatina":{lat:50.8,lng:-59.1},fermont:ER,schefferville:TR,kawawachikamach:IR,"l'le-d'anticosti":{lat:49.5,lng:-63},"port-menier":{lat:49.8167,lng:-64.35},"les les-de-la-madeleine":{lat:47.3833,lng:-61.8667},"grosse-le":{lat:47.6333,lng:-61.5167},chibougamau:xR,chapais:SR,"lebel-sur-quvillon":{lat:49.05,lng:-76.9667},matagami:AR,"eeyou istchee baie-james":{lat:52,lng:-76},chisasibi:kR,wemindji:CR,eastmain:RR,waskaganish:PR,nemaska:bR,waswanipi:NR,mistissini:DR,"ouj-bougoumou":{lat:49.9333,lng:-74.8167},whapmagoostui:LR,"rouyn-noranda":{lat:48.2333,lng:-79.0167},"val-d'or":{lat:48.1,lng:-77.7833},amos:VR,"la sarre":{lat:48.8,lng:-79.2},macamic:OR,palmarolle:MR,dupuy:jR,clerval:FR,normtal:{lat:48.9833,lng:-79.3667},"sainte-hlne-de-mancebourg":{lat:48.7833,lng:-79.3333},gallichan:UR,roquemaure:zR,"rapide-danseur":{lat:48.55,lng:-79.3},taschereau:BR,authier:$R,"authier-nord":{lat:48.8333,lng:-78.8667},poularies:qR,chazel:HR,"sainte-germaine-boul":{lat:48.6667,lng:-79.1},"saint-lambert":{lat:48.9333,lng:-79.1667},clermont:WR,"val-saint-gilles":{lat:49.0167,lng:-79.2667},"saint-flix-de-dalquier":{lat:48.6,lng:-78.05},"saint-dominique-du-rosaire":{lat:48.7,lng:-78.0167},berry:GR,trcesson:{lat:48.6,lng:-78.3833},launay:KR,"sainte-gertrude-manneville":{lat:48.5667,lng:-78.3667},preissac:QR,"saint-mathieu-d'harricana":{lat:48.5,lng:-78.1833},"la motte":{lat:48.3167,lng:-78.1167},"saint-marc-de-figuery":{lat:48.4333,lng:-78.05},landrienne:JR,barraute:XR,"la corne":{lat:48.35,lng:-77.8667},champneuf:YR,rochebaucourt:ZR,"la morandire":{lat:48.6333,lng:-77.65},belcourt:eP,senneterre:tP,malartic:nP,"d'alembert":{lat:48.3833,lng:-79.0167},"mont-brun":{lat:48.3167,lng:-78.8333},clricy:{lat:48.35,lng:-78.8333},destor:rP,mcwatters:sP,arnfield:iP,beaudry:oP,bellecombe:aP,montbeillard:lP,rollet:uP,cloutier:cP,vain:{lat:48.2167,lng:-79.1},cadillac:hP,lorrainville:dP,"duhamel-ouest":{lat:47.3667,lng:-79.4667},"ville-marie":{lat:47.3333,lng:-79.4333},"saint-bruno-de-guigues":{lat:47.4667,lng:-79.4333},"laverlochre-angliers":{lat:47.4167,lng:-79.3},fugreville:{lat:47.4,lng:-79.2},"latulipe-et-gaboury":{lat:47.4167,lng:-79.0333},belleterre:fP,barn:{lat:47.3,lng:-79.2333},"saint-eugne-de-guigues":{lat:47.4833,lng:-79.2833},"notre-dame-du-nord":{lat:47.6,lng:-79.4833},ndelec:{lat:47.6667,lng:-79.4167},rmigny:{lat:47.7667,lng:-79.2333},gurin:{lat:47.6167,lng:-79.2333},moffet:pP,laforce:gP,winneway:mP,kipawa:yP,tmiscaming:{lat:46.7167,lng:-79.1},"hunter's point":{lat:46.9833,lng:-78.8},"wolf lake":{lat:46.8333,lng:-78.7167},kebaowek:vP,timiskaming:_P,alma:wP,saguenay:EP,chicoutimi:TP,jonquire:{lat:48.4167,lng:-71.25},"la baie":{lat:48.3333,lng:-70.8833},laterrire:{lat:48.3167,lng:-71.1333},"canton-tremblay":{lat:48.4833,lng:-71.05},shipshaw:IP,"lac-knogami":{lat:48.3667,lng:-71.3667},"saint-honor":{lat:48.5333,lng:-71.05},"saint-david-de-falardeau":{lat:48.6333,lng:-71.0833},"sainte-rose-du-nord":{lat:48.3833,lng:-70.5333},"saint-fulgence":{lat:48.45,lng:-70.9},"saint-flix-d'otis":{lat:48.2833,lng:-70.6167},"ferland-et-boilleau":{lat:48.1833,lng:-70.8},"l'anse-saint-jean":{lat:48.2333,lng:-70.2},"rivire-ternit":{lat:48.2833,lng:-70.3333},"petit-saguenay":{lat:48.2167,lng:-70.0667},"saint-charles-de-bourget":{lat:48.5,lng:-71.4167},"saint-ambroise":{lat:48.55,lng:-71.3167},bgin:{lat:48.6833,lng:-71.3333},larouche:xP,"saint-nazaire":{lat:48.5833,lng:-71.55},labrecque:SP,lamarches:AP,"l'ascension-de-notre-seigneur":{lat:48.6833,lng:-71.6333},"saint-henri-de-taillon":{lat:48.6667,lng:-71.8},"sainte-monique":{lat:48.7333,lng:-71.85},"saint-ludger-de-milot":{lat:48.8333,lng:-71.7333},"saint-bruno":{lat:48.4667,lng:-71.65},hbertville:{lat:48.3833,lng:-71.6833},"hbertville-station":{lat:48.4333,lng:-71.6667},"mtabetchouan-lac--la-croix":{lat:48.4333,lng:-71.8667},desbiens:kP,chambord:CP,"saint-andr-du-lac-saint-jean":{lat:48.3167,lng:-71.9667},"saint-franois-de-sales":{lat:48.3167,lng:-72.1667},"lac-bouchette":{lat:48.25,lng:-72.1833},roberval:RP,"sainte-hedwidge":{lat:48.5167,lng:-72.3333},"saint-prime":{lat:48.5833,lng:-72.3333},"saint-flicien":{lat:48.65,lng:-72.45},"la dor":{lat:48.7,lng:-72.6333},normandin:PP,"saint-thomas-didyme":{lat:48.9167,lng:-72.6667},"saint-edmond-les-plaines":{lat:48.9333,lng:-72.4667},girardville:bP,albanel:NP,"dolbeau-mistassini":{lat:48.8833,lng:-72.2333},"sainte-jeanne-d'arc":{lat:48.8833,lng:-72.0833},pribonka:{lat:48.7667,lng:-72.05},"sainte-lisabeth-de-proulx":{lat:48.8667,lng:-72},"saint-stanislas":{lat:48.9333,lng:-72.1333},"notre-dame-de-lorette":{lat:48.95,lng:-72.2667},mashteuiatsh:DP,shawinigan:LP,"grand-mre":{lat:46.6167,lng:-72.6833},"shawinigan-sud":{lat:46.5333,lng:-72.7333},"saint-georges-de-champlain":{lat:46.6333,lng:-72.65},"lac--la-tortue":{lat:46.6,lng:-72.6167},"saint-jean-des-piles":{lat:46.6833,lng:-72.7333},"saint-grard-des-laurentides":{lat:46.5833,lng:-72.8},"saint-boniface":{lat:46.4833,lng:-72.8167},"saint-tienne-des-grs":{lat:46.4333,lng:-72.7667},charette:VP,"saint-lie-de-caxton":{lat:46.4833,lng:-72.9667},"saint-mathieu-du-parc":{lat:46.6,lng:-72.9333},"saint-roch-de-mkinac":{lat:46.8167,lng:-72.7667},"sainte-thcle":{lat:46.8167,lng:-72.5},"saint-tite":{lat:46.7333,lng:-72.5667},hrouxville:{lat:46.6667,lng:-72.6},"grandes-piles":{lat:46.6833,lng:-72.7167},"saint-sverin":{lat:46.6333,lng:-72.5333},"saint-adelphe":{lat:46.7333,lng:-72.4333},"lac-aux-sables":{lat:46.8667,lng:-72.4},"notre-dame-de-montauban":{lat:46.9,lng:-72.3333},"trois-rives":{lat:47,lng:-72.6667},"la tuque":{lat:47.4333,lng:-72.7833},"la bostonnais":{lat:47.5167,lng:-72.6833},"lac-douard":{lat:47.65,lng:-72.2667},parent:OP,wemotaci:MP,obedjiwan:jP,coucoucache:FP,bcancour:{lat:46.3333,lng:-72.4333},"sainte-angle-de-laval":{lat:46.3333,lng:-72.5167},"saint-grgoire":{lat:46.2667,lng:-72.5167},gentilly:UP,"sainte-gertrude":{lat:46.3333,lng:-72.35},"prcieux-sang":{lat:46.3,lng:-72.4},"saint-sylvre":{lat:46.1833,lng:-72.2167},"saint-pierre-les-becquets":{lat:46.5,lng:-72.2},"deschaillons-sur-saint-laurent":{lat:46.5667,lng:-72.1},parisville:zP,fortierville:BP,"sainte-sophie-de-lvrard":{lat:46.4333,lng:-72.1167},"sainte-marie-de-blandford":{lat:46.3333,lng:-72.1667},lemieux:$P,manseau:qP,"sainte-franoise":{lat:46.4167,lng:-71.95},"sainte-ccile-de-lvrard":{lat:46.4333,lng:-72.05},"saint-samuel":{lat:46.2667,lng:-72.2},"saint-valre":{lat:46.1667,lng:-72.0667},"saint-rosaire":{lat:46.1333,lng:-72.1},victoriaville:HP,arthabaska:WP,"saint-christophe-d'arthabaska":{lat:46.0167,lng:-71.9333},warwick:GP,"kingsey falls":{lat:45.85,lng:-72.05},tingwick:KP,"saint-rmi-de-tingwick":{lat:45.8333,lng:-71.8667},"saint-albert":{lat:46,lng:-72.0833},"sainte-lisabeth-de-warwick":{lat:45.9833,lng:-72.0833},"sainte-sraphine":{lat:45.9333,lng:-72.1167},"sainte-clotilde-de-horton":{lat:45.9833,lng:-72.2333},"notre-dame-de-ham":{lat:45.8667,lng:-71.8},"ham-nord":{lat:45.9,lng:-71.65},"saints-martyrs-canadiens":{lat:45.8333,lng:-71.6167},"saint-norbert-d'arthabaska":{lat:46.0667,lng:-71.8333},"sainte-hlne-de-chester":{lat:46.0333,lng:-71.7333},chesterville:QP,"saint-louis-de-blandford":{lat:46.25,lng:-71.95},princeville:JP,plessisville:XP,laurierville:YP,"notre-dame-de-lourdes":{lat:46.3167,lng:-71.8},villeroy:ZP,"val-alain":{lat:46.4167,lng:-71.7333},lyster:eb,"sainte-sophie-d'halifax":{lat:46.15,lng:-71.7},"saint-ferdinand":{lat:46.1,lng:-71.5667},"saint-pierre-baptiste":{lat:46.2,lng:-71.6},inverness:tb},nb=({deals:t,onDealSelect:e})=>{const n=F.useRef(null),[r,s]=F.useState(null),i=F.useRef([]),[o,l]=F.useState(!1),u=h=>{if(!h)return null;const f=h.toLowerCase().split(",")[0].trim();let g=Ia[f];if(!g){const x=Object.keys(Ia).find(C=>f.includes(C));x&&(g=Ia[x])}g||(g=Ia.montreal);const m=.02;return{lat:g.lat+(Math.random()-.5)*m,lng:g.lng+(Math.random()-.5)*m}};return F.useEffect(()=>{if(window.google&&window.google.maps){l(!0);return}if(document.querySelector('script[src*="maps.googleapis.com"]')){window.initMap||(window.initMap=()=>l(!0));return}window.gm_authFailure=()=>{console.error("Google Maps Auth Failure"),alert(`Erreur Google Maps : Accs bloqu.

Causes probables :
1. Restrictions HTTP (Referrer) sur la cl API (ajoutez http://localhost:*).
2. API 'Maps JavaScript API' non active.

Vrifiez la console Google Cloud.`)};const f=document.createElement("script");return f.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDtr1pAc2oTWxnDyMHUclkt4G34qdAAAXw&callback=initMap&v=weekly",f.async=!0,f.defer=!0,window.initMap=()=>{l(!0)},document.head.appendChild(f),()=>{}},[]),F.useEffect(()=>{if(o&&!r&&n.current&&window.google){const h=new window.google.maps.Map(n.current,{center:{lat:45.5017,lng:-73.5673},zoom:9,styles:[{featureType:"all",elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9c9c9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}],disableDefaultUI:!0,zoomControl:!0});s(h)}},[o,r]),F.useEffect(()=>{!r||!t||!window.google||(i.current.forEach(h=>h.setMap(null)),i.current=[],t.forEach(h=>{var g,m,x,C;let f;if(h.latitude&&h.longitude?f={lat:h.latitude,lng:h.longitude}:f=u(h.location),f){let b="#64748b";((g=h.aiAnalysis)==null?void 0:g.verdict)==="PEPITE"?b="#facc15":((m=h.aiAnalysis)==null?void 0:m.verdict)==="GOOD_DEAL"?b="#10b981":((x=h.aiAnalysis)==null?void 0:x.verdict)==="FAIR"?b="#3b82f6":((C=h.aiAnalysis)==null?void 0:C.verdict)==="BAD_DEAL"&&(b="#f43f5e");const L={path:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z",fillColor:b,fillOpacity:1,strokeWeight:1,strokeColor:"#ffffff",rotation:0,scale:1.5,anchor:new window.google.maps.Point(12,22)},_=new window.google.maps.Marker({position:f,map:r,title:h.title,icon:L});_.addListener("click",()=>{e(h)}),i.current.push(_)}}))},[r,t,e]),p.jsx("div",{ref:n,className:"w-full h-[600px] rounded-3xl shadow-sm border border-slate-200 overflow-hidden"})},rb=({viewMode:t,setViewMode:e,filterType:n,setFilterType:r,searchQuery:s,setSearchQuery:i,level1Filter:o,setLevel1Filter:l,level2Filter:u,setLevel2Filter:h,level3Filter:f,setLevel3Filter:g,level1Options:m,level2Options:x,level3Options:C,counts:b={}})=>{const L=_=>b[_]||0;return p.jsxs("div",{className:"bg-white p-4 rounded-3xl shadow-sm border border-slate-200 flex flex-wrap gap-4 items-center justify-between",children:[p.jsxs("div",{className:"flex-1 min-w-[200px] relative",children:[p.jsx(Hd,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),p.jsx("input",{type:"text",placeholder:"Rechercher par modle...",value:s,onChange:_=>i(_.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-100 rounded-2xl text-sm focus:bg-white focus:ring-2 focus:ring-blue-500 outline-none transition-all"})]}),p.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-2xl",children:[p.jsx("button",{onClick:()=>e("LIST"),className:`p-2 rounded-xl transition-all ${t==="LIST"?"bg-white shadow-sm text-blue-600":"text-slate-400 hover:text-slate-600"}`,children:p.jsx(_T,{size:18})}),p.jsx("button",{onClick:()=>e("MAP"),className:`p-2 rounded-xl transition-all ${t==="MAP"?"bg-white shadow-sm text-blue-600":"text-slate-400 hover:text-slate-600"}`,children:p.jsx(ET,{size:18})})]}),p.jsx("div",{className:"flex items-center gap-2 overflow-x-auto pb-1 w-full lg:w-auto",children:["ALL","FAVORITES","PEPITE","GOOD_DEAL","FAIR","BAD_DEAL","REJECTED","ERROR"].map(_=>{const w=L(_);return p.jsxs("button",{onClick:()=>r(_),className:`px-4 py-2 rounded-2xl text-xs font-bold whitespace-nowrap transition-all flex items-center gap-2 ${n===_?"bg-blue-600 text-white shadow-md":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:[p.jsx("span",{children:_==="ALL"?"Toutes":_==="FAVORITES"?"Favoris":_==="PEPITE"?"Ppites":_==="GOOD_DEAL"?"Bonnes Affaires":_==="FAIR"?"Prix Juste":_==="BAD_DEAL"?"Trop Cher":_==="REJECTED"?"Rejetes":"Erreurs"}),w>0&&p.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-[10px] ${n===_?"bg-white/20 text-white":"bg-slate-200 text-slate-600"}`,children:w})]},_)})}),p.jsxs("div",{className:"w-full flex flex-wrap gap-2",children:[p.jsxs("select",{value:o,onChange:_=>l(_.target.value),className:"p-2.5 bg-slate-50 border border-slate-100 rounded-2xl text-sm focus:bg-white focus:ring-2 focus:ring-blue-500 outline-none transition-all",children:[p.jsx("option",{value:"ALL",children:"Type (Tous)"}),m.filter(_=>_!=="ALL").map(_=>p.jsxs("option",{value:_,children:[_.replace(/_/g," ")," ",b[_]>0?`(${b[_]})`:""]},_))]}),o!=="ALL"&&x.length>1&&p.jsxs("select",{value:u,onChange:_=>h(_.target.value),className:"p-2.5 bg-slate-50 border border-slate-100 rounded-2xl text-sm focus:bg-white focus:ring-2 focus:ring-blue-500 outline-none transition-all animate-in fade-in slide-in-from-left-2",children:[p.jsx("option",{value:"ALL",children:"Sous-catgorie (Toutes)"}),x.filter(_=>_!=="ALL").map(_=>p.jsxs("option",{value:_,children:[_.replace(/_/g," ")," ",b[_]>0?`(${b[_]})`:""]},_))]}),u!=="ALL"&&C.length>1&&p.jsxs("select",{value:f,onChange:_=>g(_.target.value),className:"p-2.5 bg-slate-50 border border-slate-100 rounded-2xl text-sm focus:bg-white focus:ring-2 focus:ring-blue-500 outline-none transition-all animate-in fade-in slide-in-from-left-2",children:[p.jsx("option",{value:"ALL",children:"Modle (Tous)"}),C.filter(_=>_!=="ALL").map(_=>p.jsxs("option",{value:_,children:[_.replace(/_/g," ")," ",b[_]>0?`(${b[_]})`:""]},_))]})]})]})},sb=({deal:t,onClose:e,onRetry:n,onReject:r,onToggleFavorite:s,onDelete:i})=>{const[o,l]=F.useState(.85);if(!t)return null;const u=()=>{const h=new URL(window.location);h.searchParams.delete("dealId"),window.history.pushState({},"",h),e()};return Ql.createPortal(p.jsxs("div",{className:"fixed inset-0 bg-black/80 z-50 flex flex-col items-center overflow-y-auto animate-in fade-in backdrop-blur-sm pt-24 pb-12",onClick:u,children:[p.jsxs("div",{className:"fixed top-6 z-50 flex items-center gap-4",onClick:h=>h.stopPropagation(),children:[p.jsxs("div",{className:"bg-slate-900/90 text-white px-4 py-2 rounded-full flex items-center gap-3 shadow-2xl border border-white/10",children:[p.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-400",children:"Zoom"}),p.jsx("input",{type:"range",min:"0.5",max:"1.1",step:"0.1",value:o,onChange:h=>l(parseFloat(h.target.value)),className:"w-24 accent-blue-500 h-1 bg-slate-700 rounded-lg appearance-none cursor-pointer"}),p.jsxs("span",{className:"text-[10px] font-mono w-8 text-right text-blue-400",children:[Math.round(o*100),"%"]})]}),p.jsx("button",{onClick:u,className:"bg-white text-slate-900 rounded-full p-2.5 shadow-2xl hover:bg-rose-500 hover:text-white transition-all",children:p.jsx(Xl,{size:20})})]}),p.jsx("div",{className:"relative transition-transform duration-200 ease-out origin-top",style:{transform:`scale(${o})`,width:"100%",maxWidth:"60rem",padding:"1rem"},onClick:h=>h.stopPropagation(),children:p.jsx(o1,{deal:t,onRetry:n,onReject:r,onToggleFavorite:s,onDelete:i},t.id)})]}),document.body)},ib=()=>{const{authStatus:t}=Oo(),{configStatus:e,error:n,setError:r,isRefreshing:s,isCleaning:i,handleManualRefresh:o,handleManualCleanup:l}=Ks(),{deals:u,loading:h,dbStatus:f,handleRejectDeal:g,handleRetryAnalysis:m,handleForceExpertAnalysis:x,handleToggleFavorite:C,handleDeleteDeal:b}=zA(),{filteredDeals:L,..._}=HA(u),[w,A]=F.useState(!1),[N,M]=F.useState("LIST"),[j,T]=F.useState(null);F.useEffect(()=>{if(h)return;const I=new URLSearchParams(window.location.search).get("dealId");if(I){const k=u.find(R=>R.id===I);k&&T(k)}},[h,u]);const v=F.useCallback(()=>{T(null)},[]);return p.jsxs("div",{className:"min-h-screen bg-[#F8FAFC] font-sans text-slate-900 selection:bg-blue-100",children:[p.jsx("nav",{className:"sticky top-0 z-30 bg-white/80 backdrop-blur-md border-b border-slate-200",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 h-16 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"bg-blue-600 p-2 rounded-xl text-white shadow-lg shadow-blue-200",children:p.jsx($d,{size:24})}),p.jsxs("div",{children:[p.jsxs("h1",{className:"text-lg font-black tracking-tight text-slate-800",children:["GUITAR HUNTER ",p.jsx("span",{className:"text-blue-600",children:"AI"})]}),p.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest leading-none",children:"Scraper & Gemini Evaluator"})]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("button",{onClick:l,disabled:i,className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-bold transition-all ${i?"bg-slate-100 text-slate-400":"bg-amber-50 text-amber-600 hover:bg-amber-100 shadow-sm border border-amber-100"}`,children:[p.jsx(Jl,{size:14,className:i?"animate-bounce":""}),p.jsx("span",{className:"hidden sm:inline",children:i?"Vrification...":"Vrifier Stocks"})]}),p.jsxs("button",{onClick:o,disabled:s,className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-bold transition-all ${s?"bg-slate-100 text-slate-400":"bg-emerald-50 text-emerald-600 hover:bg-emerald-100 shadow-sm border border-emerald-100"}`,children:[p.jsx(ir,{size:14,className:s?"animate-spin":""}),p.jsx("span",{className:"hidden sm:inline",children:s?"Scan en cours...":"Scanner maintenant"})]}),p.jsx("button",{onClick:()=>A(!w),className:`p-2 rounded-xl transition-colors ${w?"bg-blue-100 text-blue-600":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:p.jsx(AT,{size:20})})]})]})}),p.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 grid grid-cols-1 lg:grid-cols-4 gap-8",children:[p.jsxs("aside",{className:"lg:col-span-1 space-y-6",children:[p.jsxs("div",{className:"bg-white p-5 rounded-3xl shadow-sm border border-slate-200",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-slate-400",children:"Systme"}),p.jsxs("div",{className:"flex items-center gap-1.5 bg-emerald-50 text-emerald-600 px-2 py-1 rounded-lg text-[9px] font-bold",children:[p.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"})," LIVE"]})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx(Rc,{label:"Auth",status:t.status,details:t.msg}),p.jsx(Rc,{label:"Engine",status:e.status,details:"Python Bot Connected"}),p.jsx(Rc,{label:"Database",status:f.status,details:f.msg})]})]}),p.jsx(WA,{showConfig:w,onClose:()=>A(!1)})]}),p.jsxs("main",{className:"lg:col-span-3 space-y-6",children:[p.jsx(rb,{..._,viewMode:N,setViewMode:M}),h?p.jsxs("div",{className:"py-20 flex flex-col items-center justify-center bg-white rounded-3xl border border-slate-200",children:[p.jsx(ir,{className:"text-blue-600 animate-spin mb-4",size:40}),p.jsx("p",{className:"text-slate-400 font-bold uppercase tracking-widest text-xs",children:"Synchronisation Firestore..."})]}):L.length===0?p.jsxs("div",{className:"py-20 flex flex-col items-center justify-center bg-white rounded-3xl border border-dashed border-slate-200",children:[p.jsx("div",{className:"bg-slate-50 p-6 rounded-full mb-4",children:p.jsx(Hd,{className:"text-slate-200",size:48})}),p.jsx("h3",{className:"text-lg font-black text-slate-400 uppercase tracking-tight italic",children:"Aucun trsor trouv"}),p.jsx("p",{className:"text-slate-400 text-xs mt-1",children:"Ajustez vos filtres ou lancez un scan manuel"})]}):N==="MAP"?p.jsx(nb,{deals:L,onDealSelect:T}):p.jsx("div",{className:"grid grid-cols-1 gap-6",children:L.map(E=>p.jsx(o1,{deal:E,onRetry:m,onForceExpert:x,onReject:g,onToggleFavorite:C,onDelete:b},E.id))})]})]}),n&&p.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 animate-in slide-in-from-bottom-10",children:p.jsxs("div",{className:"bg-rose-600 text-white px-6 py-4 rounded-2xl shadow-2xl shadow-rose-200 flex items-center gap-4",children:[p.jsx(O_,{size:24}),p.jsxs("div",{children:[p.jsx("p",{className:"font-black uppercase text-[10px] tracking-widest leading-none mb-1 opacity-80",children:"Erreur Dtecte"}),p.jsx("p",{className:"text-sm font-bold",children:n})]}),p.jsx("button",{onClick:()=>r(null),className:"ml-4 hover:bg-white/20 p-1 rounded-lg transition-colors",children:p.jsx(Xl,{size:20})})]})}),p.jsx(sb,{deal:j,onClose:v,onRetry:m,onForceExpert:x,onReject:g,onToggleFavorite:C,onDelete:b})]})},ob=()=>p.jsx(jA,{children:p.jsx(UA,{children:p.jsx($A,{children:p.jsx(ib,{})})})});Pc.createRoot(document.getElementById("root")).render(p.jsx(Dy.StrictMode,{children:p.jsx(ob,{})}));
