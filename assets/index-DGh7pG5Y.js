(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Qw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Dy={exports:{}},Vl={},Ly={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mo=Symbol.for("react.element"),Jw=Symbol.for("react.portal"),Yw=Symbol.for("react.fragment"),Xw=Symbol.for("react.strict_mode"),Zw=Symbol.for("react.profiler"),e3=Symbol.for("react.provider"),t3=Symbol.for("react.context"),n3=Symbol.for("react.forward_ref"),r3=Symbol.for("react.suspense"),s3=Symbol.for("react.memo"),i3=Symbol.for("react.lazy"),Kp=Symbol.iterator;function o3(t){return t===null||typeof t!="object"?null:(t=Kp&&t[Kp]||t["@@iterator"],typeof t=="function"?t:null)}var Vy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Oy=Object.assign,My={};function Us(t,e,n){this.props=t,this.context=e,this.refs=My,this.updater=n||Vy}Us.prototype.isReactComponent={};Us.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Us.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function jy(){}jy.prototype=Us.prototype;function Xh(t,e,n){this.props=t,this.context=e,this.refs=My,this.updater=n||Vy}var Zh=Xh.prototype=new jy;Zh.constructor=Xh;Oy(Zh,Us.prototype);Zh.isPureReactComponent=!0;var Qp=Array.isArray,Fy=Object.prototype.hasOwnProperty,ed={current:null},Uy={key:!0,ref:!0,__self:!0,__source:!0};function zy(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Fy.call(e,r)&&!Uy.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:mo,type:t,key:i,ref:o,props:s,_owner:ed.current}}function a3(t,e){return{$$typeof:mo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function td(t){return typeof t=="object"&&t!==null&&t.$$typeof===mo}function l3(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Jp=/\/+/g;function Gu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?l3(""+t.key):e.toString(36)}function Sa(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case mo:case Jw:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Gu(o,0):r,Qp(s)?(n="",t!=null&&(n=t.replace(Jp,"$&/")+"/"),Sa(s,e,n,"",function(h){return h})):s!=null&&(td(s)&&(s=a3(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Jp,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Qp(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+Gu(i,l);o+=Sa(i,e,n,u,s)}else if(u=o3(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+Gu(i,l++),o+=Sa(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ta(t,e,n){if(t==null)return t;var r=[],s=0;return Sa(t,r,"","",function(i){return e.call(n,i,s++)}),r}function u3(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var dt={current:null},Aa={transition:null},c3={ReactCurrentDispatcher:dt,ReactCurrentBatchConfig:Aa,ReactCurrentOwner:ed};function By(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:ta,forEach:function(t,e,n){ta(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ta(t,function(){e++}),e},toArray:function(t){return ta(t,function(e){return e})||[]},only:function(t){if(!td(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=Us;re.Fragment=Yw;re.Profiler=Zw;re.PureComponent=Xh;re.StrictMode=Xw;re.Suspense=r3;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=c3;re.act=By;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Oy({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=ed.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Fy.call(e,u)&&!Uy.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:mo,type:t.type,key:s,ref:i,props:r,_owner:o}};re.createContext=function(t){return t={$$typeof:t3,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:e3,_context:t},t.Consumer=t};re.createElement=zy;re.createFactory=function(t){var e=zy.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:n3,render:t}};re.isValidElement=td;re.lazy=function(t){return{$$typeof:i3,_payload:{_status:-1,_result:t},_init:u3}};re.memo=function(t,e){return{$$typeof:s3,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=Aa.transition;Aa.transition={};try{t()}finally{Aa.transition=e}};re.unstable_act=By;re.useCallback=function(t,e){return dt.current.useCallback(t,e)};re.useContext=function(t){return dt.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return dt.current.useDeferredValue(t)};re.useEffect=function(t,e){return dt.current.useEffect(t,e)};re.useId=function(){return dt.current.useId()};re.useImperativeHandle=function(t,e,n){return dt.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return dt.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return dt.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return dt.current.useMemo(t,e)};re.useReducer=function(t,e,n){return dt.current.useReducer(t,e,n)};re.useRef=function(t){return dt.current.useRef(t)};re.useState=function(t){return dt.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return dt.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return dt.current.useTransition()};re.version="18.3.1";Ly.exports=re;var M=Ly.exports;const h3=Qw(M);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d3=M,f3=Symbol.for("react.element"),p3=Symbol.for("react.fragment"),g3=Object.prototype.hasOwnProperty,m3=d3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y3={key:!0,ref:!0,__self:!0,__source:!0};function $y(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)g3.call(e,r)&&!y3.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:f3,type:t,key:i,ref:o,props:s,_owner:m3.current}}Vl.Fragment=p3;Vl.jsx=$y;Vl.jsxs=$y;Dy.exports=Vl;var p=Dy.exports,Dc={},qy={exports:{}},At={},Hy={exports:{}},Wy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,B){var q=L.length;L.push(B);e:for(;0<q;){var X=q-1>>>1,ae=L[X];if(0<s(ae,B))L[X]=B,L[q]=ae,q=X;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var B=L[0],q=L.pop();if(q!==B){L[0]=q;e:for(var X=0,ae=L.length,se=ae>>>1;X<se;){var Se=2*(X+1)-1,ot=L[Se],Ct=Se+1,sn=L[Ct];if(0>s(ot,q))Ct<ae&&0>s(sn,ot)?(L[X]=sn,L[Ct]=q,X=Ct):(L[X]=ot,L[Se]=q,X=Se);else if(Ct<ae&&0>s(sn,q))L[X]=sn,L[Ct]=q,X=Ct;else break e}}return B}function s(L,B){var q=L.sortIndex-B.sortIndex;return q!==0?q:L.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],f=1,g=null,m=3,S=!1,C=!1,b=!1,V=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(L){for(var B=n(h);B!==null;){if(B.callback===null)r(h);else if(B.startTime<=L)r(h),B.sortIndex=B.expirationTime,e(u,B);else break;B=n(h)}}function N(L){if(b=!1,k(L),!C)if(n(u)!==null)C=!0,Ot(F);else{var B=n(h);B!==null&&H(N,B.startTime-L)}}function F(L,B){C=!1,b&&(b=!1,_(v),v=-1),S=!0;var q=m;try{for(k(B),g=n(u);g!==null&&(!(g.expirationTime>B)||L&&!A());){var X=g.callback;if(typeof X=="function"){g.callback=null,m=g.priorityLevel;var ae=X(g.expirationTime<=B);B=t.unstable_now(),typeof ae=="function"?g.callback=ae:g===n(u)&&r(u),k(B)}else r(u);g=n(u)}if(g!==null)var se=!0;else{var Se=n(h);Se!==null&&H(N,Se.startTime-B),se=!1}return se}finally{g=null,m=q,S=!1}}var z=!1,T=null,v=-1,w=5,I=-1;function A(){return!(t.unstable_now()-I<w)}function R(){if(T!==null){var L=t.unstable_now();I=L;var B=!0;try{B=T(!0,L)}finally{B?x():(z=!1,T=null)}}else z=!1}var x;if(typeof E=="function")x=function(){E(R)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,De=ne.port2;ne.port1.onmessage=R,x=function(){De.postMessage(null)}}else x=function(){V(R,0)};function Ot(L){T=L,z||(z=!0,x())}function H(L,B){v=V(function(){L(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){C||S||(C=!0,Ot(F))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(L){switch(m){case 1:case 2:case 3:var B=3;break;default:B=m}var q=m;m=B;try{return L()}finally{m=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,B){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var q=m;m=L;try{return B()}finally{m=q}},t.unstable_scheduleCallback=function(L,B,q){var X=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?X+q:X):q=X,L){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=q+ae,L={id:f++,callback:B,priorityLevel:L,startTime:q,expirationTime:ae,sortIndex:-1},q>X?(L.sortIndex=q,e(h,L),n(u)===null&&L===n(h)&&(b?(_(v),v=-1):b=!0,H(N,q-X))):(L.sortIndex=ae,e(u,L),C||S||(C=!0,Ot(F))),L},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(L){var B=m;return function(){var q=m;m=B;try{return L.apply(this,arguments)}finally{m=q}}}})(Wy);Hy.exports=Wy;var v3=Hy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _3=M,St=v3;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Gy=new Set,zi={};function $r(t,e){xs(t,e),xs(t+"Capture",e)}function xs(t,e){for(zi[t]=e,t=0;t<e.length;t++)Gy.add(e[t])}var yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lc=Object.prototype.hasOwnProperty,w3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yp={},Xp={};function E3(t){return Lc.call(Xp,t)?!0:Lc.call(Yp,t)?!1:w3.test(t)?Xp[t]=!0:(Yp[t]=!0,!1)}function T3(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function I3(t,e,n,r){if(e===null||typeof e>"u"||T3(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ft(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var We={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){We[t]=new ft(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];We[e]=new ft(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){We[t]=new ft(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){We[t]=new ft(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){We[t]=new ft(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){We[t]=new ft(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){We[t]=new ft(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){We[t]=new ft(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){We[t]=new ft(t,5,!1,t.toLowerCase(),null,!1,!1)});var nd=/[\-:]([a-z])/g;function rd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(nd,rd);We[e]=new ft(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(nd,rd);We[e]=new ft(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(nd,rd);We[e]=new ft(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){We[t]=new ft(t,1,!1,t.toLowerCase(),null,!1,!1)});We.xlinkHref=new ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){We[t]=new ft(t,1,!1,t.toLowerCase(),null,!0,!0)});function sd(t,e,n,r){var s=We.hasOwnProperty(e)?We[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(I3(e,n,s,r)&&(n=null),r||s===null?E3(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var kn=_3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,na=Symbol.for("react.element"),ts=Symbol.for("react.portal"),ns=Symbol.for("react.fragment"),id=Symbol.for("react.strict_mode"),Vc=Symbol.for("react.profiler"),Ky=Symbol.for("react.provider"),Qy=Symbol.for("react.context"),od=Symbol.for("react.forward_ref"),Oc=Symbol.for("react.suspense"),Mc=Symbol.for("react.suspense_list"),ad=Symbol.for("react.memo"),Ln=Symbol.for("react.lazy"),Jy=Symbol.for("react.offscreen"),Zp=Symbol.iterator;function ui(t){return t===null||typeof t!="object"?null:(t=Zp&&t[Zp]||t["@@iterator"],typeof t=="function"?t:null)}var Ie=Object.assign,Ku;function _i(t){if(Ku===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ku=e&&e[1]||""}return`
`+Ku+t}var Qu=!1;function Ju(t,e){if(!t||Qu)return"";Qu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Qu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?_i(t):""}function x3(t){switch(t.tag){case 5:return _i(t.type);case 16:return _i("Lazy");case 13:return _i("Suspense");case 19:return _i("SuspenseList");case 0:case 2:case 15:return t=Ju(t.type,!1),t;case 11:return t=Ju(t.type.render,!1),t;case 1:return t=Ju(t.type,!0),t;default:return""}}function jc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ns:return"Fragment";case ts:return"Portal";case Vc:return"Profiler";case id:return"StrictMode";case Oc:return"Suspense";case Mc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Qy:return(t.displayName||"Context")+".Consumer";case Ky:return(t._context.displayName||"Context")+".Provider";case od:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ad:return e=t.displayName||null,e!==null?e:jc(t.type)||"Memo";case Ln:e=t._payload,t=t._init;try{return jc(t(e))}catch{}}return null}function S3(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jc(e);case 8:return e===id?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function sr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Yy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function A3(t){var e=Yy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ra(t){t._valueTracker||(t._valueTracker=A3(t))}function Xy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Yy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ga(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Fc(t,e){var n=e.checked;return Ie({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function eg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=sr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Zy(t,e){e=e.checked,e!=null&&sd(t,"checked",e,!1)}function Uc(t,e){Zy(t,e);var n=sr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zc(t,e.type,n):e.hasOwnProperty("defaultValue")&&zc(t,e.type,sr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function tg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function zc(t,e,n){(e!=="number"||Ga(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var wi=Array.isArray;function ps(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+sr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Bc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ie({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ng(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(wi(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:sr(n)}}function ev(t,e){var n=sr(e.value),r=sr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function rg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function tv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $c(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?tv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var sa,nv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(sa=sa||document.createElement("div"),sa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=sa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Bi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ki={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},k3=["Webkit","ms","Moz","O"];Object.keys(ki).forEach(function(t){k3.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ki[e]=ki[t]})});function rv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ki.hasOwnProperty(t)&&ki[t]?(""+e).trim():e+"px"}function sv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=rv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var C3=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qc(t,e){if(e){if(C3[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Hc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wc=null;function ld(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gc=null,gs=null,ms=null;function sg(t){if(t=_o(t)){if(typeof Gc!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Ul(e),Gc(t.stateNode,t.type,e))}}function iv(t){gs?ms?ms.push(t):ms=[t]:gs=t}function ov(){if(gs){var t=gs,e=ms;if(ms=gs=null,sg(t),e)for(t=0;t<e.length;t++)sg(e[t])}}function av(t,e){return t(e)}function lv(){}var Yu=!1;function uv(t,e,n){if(Yu)return t(e,n);Yu=!0;try{return av(t,e,n)}finally{Yu=!1,(gs!==null||ms!==null)&&(lv(),ov())}}function $i(t,e){var n=t.stateNode;if(n===null)return null;var r=Ul(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Kc=!1;if(yn)try{var ci={};Object.defineProperty(ci,"passive",{get:function(){Kc=!0}}),window.addEventListener("test",ci,ci),window.removeEventListener("test",ci,ci)}catch{Kc=!1}function R3(t,e,n,r,s,i,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(f){this.onError(f)}}var Ci=!1,Ka=null,Qa=!1,Qc=null,b3={onError:function(t){Ci=!0,Ka=t}};function P3(t,e,n,r,s,i,o,l,u){Ci=!1,Ka=null,R3.apply(b3,arguments)}function N3(t,e,n,r,s,i,o,l,u){if(P3.apply(this,arguments),Ci){if(Ci){var h=Ka;Ci=!1,Ka=null}else throw Error(U(198));Qa||(Qa=!0,Qc=h)}}function qr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function cv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ig(t){if(qr(t)!==t)throw Error(U(188))}function D3(t){var e=t.alternate;if(!e){if(e=qr(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ig(s),t;if(i===r)return ig(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function hv(t){return t=D3(t),t!==null?dv(t):null}function dv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=dv(t);if(e!==null)return e;t=t.sibling}return null}var fv=St.unstable_scheduleCallback,og=St.unstable_cancelCallback,L3=St.unstable_shouldYield,V3=St.unstable_requestPaint,Re=St.unstable_now,O3=St.unstable_getCurrentPriorityLevel,ud=St.unstable_ImmediatePriority,pv=St.unstable_UserBlockingPriority,Ja=St.unstable_NormalPriority,M3=St.unstable_LowPriority,gv=St.unstable_IdlePriority,Ol=null,Jt=null;function j3(t){if(Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(Ol,t,void 0,(t.current.flags&128)===128)}catch{}}var $t=Math.clz32?Math.clz32:z3,F3=Math.log,U3=Math.LN2;function z3(t){return t>>>=0,t===0?32:31-(F3(t)/U3|0)|0}var ia=64,oa=4194304;function Ei(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ya(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Ei(l):(i&=o,i!==0&&(r=Ei(i)))}else o=n&~s,o!==0?r=Ei(o):i!==0&&(r=Ei(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-$t(e),s=1<<n,r|=t[n],e&=~s;return r}function B3(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $3(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-$t(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=B3(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function Jc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function mv(){var t=ia;return ia<<=1,!(ia&4194240)&&(ia=64),t}function Xu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function yo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-$t(e),t[e]=n}function q3(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-$t(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function cd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-$t(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var de=0;function yv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var vv,hd,_v,wv,Ev,Yc=!1,aa=[],Hn=null,Wn=null,Gn=null,qi=new Map,Hi=new Map,On=[],H3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ag(t,e){switch(t){case"focusin":case"focusout":Hn=null;break;case"dragenter":case"dragleave":Wn=null;break;case"mouseover":case"mouseout":Gn=null;break;case"pointerover":case"pointerout":qi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hi.delete(e.pointerId)}}function hi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=_o(e),e!==null&&hd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function W3(t,e,n,r,s){switch(e){case"focusin":return Hn=hi(Hn,t,e,n,r,s),!0;case"dragenter":return Wn=hi(Wn,t,e,n,r,s),!0;case"mouseover":return Gn=hi(Gn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return qi.set(i,hi(qi.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Hi.set(i,hi(Hi.get(i)||null,t,e,n,r,s)),!0}return!1}function Tv(t){var e=Ir(t.target);if(e!==null){var n=qr(e);if(n!==null){if(e=n.tag,e===13){if(e=cv(n),e!==null){t.blockedOn=e,Ev(t.priority,function(){_v(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ka(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Wc=r,n.target.dispatchEvent(r),Wc=null}else return e=_o(n),e!==null&&hd(e),t.blockedOn=n,!1;e.shift()}return!0}function lg(t,e,n){ka(t)&&n.delete(e)}function G3(){Yc=!1,Hn!==null&&ka(Hn)&&(Hn=null),Wn!==null&&ka(Wn)&&(Wn=null),Gn!==null&&ka(Gn)&&(Gn=null),qi.forEach(lg),Hi.forEach(lg)}function di(t,e){t.blockedOn===e&&(t.blockedOn=null,Yc||(Yc=!0,St.unstable_scheduleCallback(St.unstable_NormalPriority,G3)))}function Wi(t){function e(s){return di(s,t)}if(0<aa.length){di(aa[0],t);for(var n=1;n<aa.length;n++){var r=aa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Hn!==null&&di(Hn,t),Wn!==null&&di(Wn,t),Gn!==null&&di(Gn,t),qi.forEach(e),Hi.forEach(e),n=0;n<On.length;n++)r=On[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<On.length&&(n=On[0],n.blockedOn===null);)Tv(n),n.blockedOn===null&&On.shift()}var ys=kn.ReactCurrentBatchConfig,Xa=!0;function K3(t,e,n,r){var s=de,i=ys.transition;ys.transition=null;try{de=1,dd(t,e,n,r)}finally{de=s,ys.transition=i}}function Q3(t,e,n,r){var s=de,i=ys.transition;ys.transition=null;try{de=4,dd(t,e,n,r)}finally{de=s,ys.transition=i}}function dd(t,e,n,r){if(Xa){var s=Xc(t,e,n,r);if(s===null)lc(t,e,r,Za,n),ag(t,r);else if(W3(s,t,e,n,r))r.stopPropagation();else if(ag(t,r),e&4&&-1<H3.indexOf(t)){for(;s!==null;){var i=_o(s);if(i!==null&&vv(i),i=Xc(t,e,n,r),i===null&&lc(t,e,r,Za,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else lc(t,e,r,null,n)}}var Za=null;function Xc(t,e,n,r){if(Za=null,t=ld(r),t=Ir(t),t!==null)if(e=qr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=cv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Za=t,null}function Iv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(O3()){case ud:return 1;case pv:return 4;case Ja:case M3:return 16;case gv:return 536870912;default:return 16}default:return 16}}var Bn=null,fd=null,Ca=null;function xv(){if(Ca)return Ca;var t,e=fd,n=e.length,r,s="value"in Bn?Bn.value:Bn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ca=s.slice(t,1<r?1-r:void 0)}function Ra(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function la(){return!0}function ug(){return!1}function kt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?la:ug,this.isPropagationStopped=ug,this}return Ie(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=la)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=la)},persist:function(){},isPersistent:la}),e}var zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pd=kt(zs),vo=Ie({},zs,{view:0,detail:0}),J3=kt(vo),Zu,ec,fi,Ml=Ie({},vo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fi&&(fi&&t.type==="mousemove"?(Zu=t.screenX-fi.screenX,ec=t.screenY-fi.screenY):ec=Zu=0,fi=t),Zu)},movementY:function(t){return"movementY"in t?t.movementY:ec}}),cg=kt(Ml),Y3=Ie({},Ml,{dataTransfer:0}),X3=kt(Y3),Z3=Ie({},vo,{relatedTarget:0}),tc=kt(Z3),eE=Ie({},zs,{animationName:0,elapsedTime:0,pseudoElement:0}),tE=kt(eE),nE=Ie({},zs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),rE=kt(nE),sE=Ie({},zs,{data:0}),hg=kt(sE),iE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=aE[t])?!!e[t]:!1}function gd(){return lE}var uE=Ie({},vo,{key:function(t){if(t.key){var e=iE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ra(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?oE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gd,charCode:function(t){return t.type==="keypress"?Ra(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ra(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),cE=kt(uE),hE=Ie({},Ml,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dg=kt(hE),dE=Ie({},vo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gd}),fE=kt(dE),pE=Ie({},zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),gE=kt(pE),mE=Ie({},Ml,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),yE=kt(mE),vE=[9,13,27,32],md=yn&&"CompositionEvent"in window,Ri=null;yn&&"documentMode"in document&&(Ri=document.documentMode);var _E=yn&&"TextEvent"in window&&!Ri,Sv=yn&&(!md||Ri&&8<Ri&&11>=Ri),fg=" ",pg=!1;function Av(t,e){switch(t){case"keyup":return vE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var rs=!1;function wE(t,e){switch(t){case"compositionend":return kv(e);case"keypress":return e.which!==32?null:(pg=!0,fg);case"textInput":return t=e.data,t===fg&&pg?null:t;default:return null}}function EE(t,e){if(rs)return t==="compositionend"||!md&&Av(t,e)?(t=xv(),Ca=fd=Bn=null,rs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Sv&&e.locale!=="ko"?null:e.data;default:return null}}var TE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!TE[t.type]:e==="textarea"}function Cv(t,e,n,r){iv(r),e=el(e,"onChange"),0<e.length&&(n=new pd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var bi=null,Gi=null;function IE(t){Fv(t,0)}function jl(t){var e=os(t);if(Xy(e))return t}function xE(t,e){if(t==="change")return e}var Rv=!1;if(yn){var nc;if(yn){var rc="oninput"in document;if(!rc){var mg=document.createElement("div");mg.setAttribute("oninput","return;"),rc=typeof mg.oninput=="function"}nc=rc}else nc=!1;Rv=nc&&(!document.documentMode||9<document.documentMode)}function yg(){bi&&(bi.detachEvent("onpropertychange",bv),Gi=bi=null)}function bv(t){if(t.propertyName==="value"&&jl(Gi)){var e=[];Cv(e,Gi,t,ld(t)),uv(IE,e)}}function SE(t,e,n){t==="focusin"?(yg(),bi=e,Gi=n,bi.attachEvent("onpropertychange",bv)):t==="focusout"&&yg()}function AE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return jl(Gi)}function kE(t,e){if(t==="click")return jl(e)}function CE(t,e){if(t==="input"||t==="change")return jl(e)}function RE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ht=typeof Object.is=="function"?Object.is:RE;function Ki(t,e){if(Ht(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Lc.call(e,s)||!Ht(t[s],e[s]))return!1}return!0}function vg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _g(t,e){var n=vg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vg(n)}}function Pv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Pv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Nv(){for(var t=window,e=Ga();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ga(t.document)}return e}function yd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function bE(t){var e=Nv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Pv(n.ownerDocument.documentElement,n)){if(r!==null&&yd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=_g(n,i);var o=_g(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var PE=yn&&"documentMode"in document&&11>=document.documentMode,ss=null,Zc=null,Pi=null,eh=!1;function wg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;eh||ss==null||ss!==Ga(r)||(r=ss,"selectionStart"in r&&yd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Pi&&Ki(Pi,r)||(Pi=r,r=el(Zc,"onSelect"),0<r.length&&(e=new pd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ss)))}function ua(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var is={animationend:ua("Animation","AnimationEnd"),animationiteration:ua("Animation","AnimationIteration"),animationstart:ua("Animation","AnimationStart"),transitionend:ua("Transition","TransitionEnd")},sc={},Dv={};yn&&(Dv=document.createElement("div").style,"AnimationEvent"in window||(delete is.animationend.animation,delete is.animationiteration.animation,delete is.animationstart.animation),"TransitionEvent"in window||delete is.transitionend.transition);function Fl(t){if(sc[t])return sc[t];if(!is[t])return t;var e=is[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Dv)return sc[t]=e[n];return t}var Lv=Fl("animationend"),Vv=Fl("animationiteration"),Ov=Fl("animationstart"),Mv=Fl("transitionend"),jv=new Map,Eg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cr(t,e){jv.set(t,e),$r(e,[t])}for(var ic=0;ic<Eg.length;ic++){var oc=Eg[ic],NE=oc.toLowerCase(),DE=oc[0].toUpperCase()+oc.slice(1);cr(NE,"on"+DE)}cr(Lv,"onAnimationEnd");cr(Vv,"onAnimationIteration");cr(Ov,"onAnimationStart");cr("dblclick","onDoubleClick");cr("focusin","onFocus");cr("focusout","onBlur");cr(Mv,"onTransitionEnd");xs("onMouseEnter",["mouseout","mouseover"]);xs("onMouseLeave",["mouseout","mouseover"]);xs("onPointerEnter",["pointerout","pointerover"]);xs("onPointerLeave",["pointerout","pointerover"]);$r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$r("onBeforeInput",["compositionend","keypress","textInput","paste"]);$r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ti="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ti));function Tg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,N3(r,e,void 0,t),t.currentTarget=null}function Fv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Tg(s,l,h),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Tg(s,l,h),i=u}}}if(Qa)throw t=Qc,Qa=!1,Qc=null,t}function ye(t,e){var n=e[ih];n===void 0&&(n=e[ih]=new Set);var r=t+"__bubble";n.has(r)||(Uv(e,t,2,!1),n.add(r))}function ac(t,e,n){var r=0;e&&(r|=4),Uv(n,t,r,e)}var ca="_reactListening"+Math.random().toString(36).slice(2);function Qi(t){if(!t[ca]){t[ca]=!0,Gy.forEach(function(n){n!=="selectionchange"&&(LE.has(n)||ac(n,!1,t),ac(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ca]||(e[ca]=!0,ac("selectionchange",!1,e))}}function Uv(t,e,n,r){switch(Iv(e)){case 1:var s=K3;break;case 4:s=Q3;break;default:s=dd}n=s.bind(null,e,n,t),s=void 0,!Kc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function lc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Ir(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}uv(function(){var h=i,f=ld(n),g=[];e:{var m=jv.get(t);if(m!==void 0){var S=pd,C=t;switch(t){case"keypress":if(Ra(n)===0)break e;case"keydown":case"keyup":S=cE;break;case"focusin":C="focus",S=tc;break;case"focusout":C="blur",S=tc;break;case"beforeblur":case"afterblur":S=tc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=cg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=X3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=fE;break;case Lv:case Vv:case Ov:S=tE;break;case Mv:S=gE;break;case"scroll":S=J3;break;case"wheel":S=yE;break;case"copy":case"cut":case"paste":S=rE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=dg}var b=(e&4)!==0,V=!b&&t==="scroll",_=b?m!==null?m+"Capture":null:m;b=[];for(var E=h,k;E!==null;){k=E;var N=k.stateNode;if(k.tag===5&&N!==null&&(k=N,_!==null&&(N=$i(E,_),N!=null&&b.push(Ji(E,N,k)))),V)break;E=E.return}0<b.length&&(m=new S(m,C,null,n,f),g.push({event:m,listeners:b}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",m&&n!==Wc&&(C=n.relatedTarget||n.fromElement)&&(Ir(C)||C[vn]))break e;if((S||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,S?(C=n.relatedTarget||n.toElement,S=h,C=C?Ir(C):null,C!==null&&(V=qr(C),C!==V||C.tag!==5&&C.tag!==6)&&(C=null)):(S=null,C=h),S!==C)){if(b=cg,N="onMouseLeave",_="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(b=dg,N="onPointerLeave",_="onPointerEnter",E="pointer"),V=S==null?m:os(S),k=C==null?m:os(C),m=new b(N,E+"leave",S,n,f),m.target=V,m.relatedTarget=k,N=null,Ir(f)===h&&(b=new b(_,E+"enter",C,n,f),b.target=k,b.relatedTarget=V,N=b),V=N,S&&C)t:{for(b=S,_=C,E=0,k=b;k;k=Yr(k))E++;for(k=0,N=_;N;N=Yr(N))k++;for(;0<E-k;)b=Yr(b),E--;for(;0<k-E;)_=Yr(_),k--;for(;E--;){if(b===_||_!==null&&b===_.alternate)break t;b=Yr(b),_=Yr(_)}b=null}else b=null;S!==null&&Ig(g,m,S,b,!1),C!==null&&V!==null&&Ig(g,V,C,b,!0)}}e:{if(m=h?os(h):window,S=m.nodeName&&m.nodeName.toLowerCase(),S==="select"||S==="input"&&m.type==="file")var F=xE;else if(gg(m))if(Rv)F=CE;else{F=AE;var z=SE}else(S=m.nodeName)&&S.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(F=kE);if(F&&(F=F(t,h))){Cv(g,F,n,f);break e}z&&z(t,m,h),t==="focusout"&&(z=m._wrapperState)&&z.controlled&&m.type==="number"&&zc(m,"number",m.value)}switch(z=h?os(h):window,t){case"focusin":(gg(z)||z.contentEditable==="true")&&(ss=z,Zc=h,Pi=null);break;case"focusout":Pi=Zc=ss=null;break;case"mousedown":eh=!0;break;case"contextmenu":case"mouseup":case"dragend":eh=!1,wg(g,n,f);break;case"selectionchange":if(PE)break;case"keydown":case"keyup":wg(g,n,f)}var T;if(md)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else rs?Av(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(Sv&&n.locale!=="ko"&&(rs||v!=="onCompositionStart"?v==="onCompositionEnd"&&rs&&(T=xv()):(Bn=f,fd="value"in Bn?Bn.value:Bn.textContent,rs=!0)),z=el(h,v),0<z.length&&(v=new hg(v,t,null,n,f),g.push({event:v,listeners:z}),T?v.data=T:(T=kv(n),T!==null&&(v.data=T)))),(T=_E?wE(t,n):EE(t,n))&&(h=el(h,"onBeforeInput"),0<h.length&&(f=new hg("onBeforeInput","beforeinput",null,n,f),g.push({event:f,listeners:h}),f.data=T))}Fv(g,e)})}function Ji(t,e,n){return{instance:t,listener:e,currentTarget:n}}function el(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=$i(t,n),i!=null&&r.unshift(Ji(t,i,s)),i=$i(t,e),i!=null&&r.push(Ji(t,i,s))),t=t.return}return r}function Yr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ig(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,s?(u=$i(n,i),u!=null&&o.unshift(Ji(n,u,l))):s||(u=$i(n,i),u!=null&&o.push(Ji(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var VE=/\r\n?/g,OE=/\u0000|\uFFFD/g;function xg(t){return(typeof t=="string"?t:""+t).replace(VE,`
`).replace(OE,"")}function ha(t,e,n){if(e=xg(e),xg(t)!==e&&n)throw Error(U(425))}function tl(){}var th=null,nh=null;function rh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var sh=typeof setTimeout=="function"?setTimeout:void 0,ME=typeof clearTimeout=="function"?clearTimeout:void 0,Sg=typeof Promise=="function"?Promise:void 0,jE=typeof queueMicrotask=="function"?queueMicrotask:typeof Sg<"u"?function(t){return Sg.resolve(null).then(t).catch(FE)}:sh;function FE(t){setTimeout(function(){throw t})}function uc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Wi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Wi(e)}function Kn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ag(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Bs=Math.random().toString(36).slice(2),Qt="__reactFiber$"+Bs,Yi="__reactProps$"+Bs,vn="__reactContainer$"+Bs,ih="__reactEvents$"+Bs,UE="__reactListeners$"+Bs,zE="__reactHandles$"+Bs;function Ir(t){var e=t[Qt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vn]||n[Qt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ag(t);t!==null;){if(n=t[Qt])return n;t=Ag(t)}return e}t=n,n=t.parentNode}return null}function _o(t){return t=t[Qt]||t[vn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function os(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Ul(t){return t[Yi]||null}var oh=[],as=-1;function hr(t){return{current:t}}function _e(t){0>as||(t.current=oh[as],oh[as]=null,as--)}function ge(t,e){as++,oh[as]=t.current,t.current=e}var ir={},st=hr(ir),yt=hr(!1),Nr=ir;function Ss(t,e){var n=t.type.contextTypes;if(!n)return ir;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function vt(t){return t=t.childContextTypes,t!=null}function nl(){_e(yt),_e(st)}function kg(t,e,n){if(st.current!==ir)throw Error(U(168));ge(st,e),ge(yt,n)}function zv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,S3(t)||"Unknown",s));return Ie({},n,r)}function rl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ir,Nr=st.current,ge(st,t),ge(yt,yt.current),!0}function Cg(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=zv(t,e,Nr),r.__reactInternalMemoizedMergedChildContext=t,_e(yt),_e(st),ge(st,t)):_e(yt),ge(yt,n)}var un=null,zl=!1,cc=!1;function Bv(t){un===null?un=[t]:un.push(t)}function BE(t){zl=!0,Bv(t)}function dr(){if(!cc&&un!==null){cc=!0;var t=0,e=de;try{var n=un;for(de=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}un=null,zl=!1}catch(s){throw un!==null&&(un=un.slice(t+1)),fv(ud,dr),s}finally{de=e,cc=!1}}return null}var ls=[],us=0,sl=null,il=0,Rt=[],bt=0,Dr=null,cn=1,hn="";function wr(t,e){ls[us++]=il,ls[us++]=sl,sl=t,il=e}function $v(t,e,n){Rt[bt++]=cn,Rt[bt++]=hn,Rt[bt++]=Dr,Dr=t;var r=cn;t=hn;var s=32-$t(r)-1;r&=~(1<<s),n+=1;var i=32-$t(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,cn=1<<32-$t(e)+s|n<<s|r,hn=i+t}else cn=1<<i|n<<s|r,hn=t}function vd(t){t.return!==null&&(wr(t,1),$v(t,1,0))}function _d(t){for(;t===sl;)sl=ls[--us],ls[us]=null,il=ls[--us],ls[us]=null;for(;t===Dr;)Dr=Rt[--bt],Rt[bt]=null,hn=Rt[--bt],Rt[bt]=null,cn=Rt[--bt],Rt[bt]=null}var xt=null,Tt=null,we=!1,Bt=null;function qv(t,e){var n=Pt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Rg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,xt=t,Tt=Kn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,xt=t,Tt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Dr!==null?{id:cn,overflow:hn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,xt=t,Tt=null,!0):!1;default:return!1}}function ah(t){return(t.mode&1)!==0&&(t.flags&128)===0}function lh(t){if(we){var e=Tt;if(e){var n=e;if(!Rg(t,e)){if(ah(t))throw Error(U(418));e=Kn(n.nextSibling);var r=xt;e&&Rg(t,e)?qv(r,n):(t.flags=t.flags&-4097|2,we=!1,xt=t)}}else{if(ah(t))throw Error(U(418));t.flags=t.flags&-4097|2,we=!1,xt=t}}}function bg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;xt=t}function da(t){if(t!==xt)return!1;if(!we)return bg(t),we=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!rh(t.type,t.memoizedProps)),e&&(e=Tt)){if(ah(t))throw Hv(),Error(U(418));for(;e;)qv(t,e),e=Kn(e.nextSibling)}if(bg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Tt=Kn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Tt=null}}else Tt=xt?Kn(t.stateNode.nextSibling):null;return!0}function Hv(){for(var t=Tt;t;)t=Kn(t.nextSibling)}function As(){Tt=xt=null,we=!1}function wd(t){Bt===null?Bt=[t]:Bt.push(t)}var $E=kn.ReactCurrentBatchConfig;function pi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function fa(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Pg(t){var e=t._init;return e(t._payload)}function Wv(t){function e(_,E){if(t){var k=_.deletions;k===null?(_.deletions=[E],_.flags|=16):k.push(E)}}function n(_,E){if(!t)return null;for(;E!==null;)e(_,E),E=E.sibling;return null}function r(_,E){for(_=new Map;E!==null;)E.key!==null?_.set(E.key,E):_.set(E.index,E),E=E.sibling;return _}function s(_,E){return _=Xn(_,E),_.index=0,_.sibling=null,_}function i(_,E,k){return _.index=k,t?(k=_.alternate,k!==null?(k=k.index,k<E?(_.flags|=2,E):k):(_.flags|=2,E)):(_.flags|=1048576,E)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function l(_,E,k,N){return E===null||E.tag!==6?(E=yc(k,_.mode,N),E.return=_,E):(E=s(E,k),E.return=_,E)}function u(_,E,k,N){var F=k.type;return F===ns?f(_,E,k.props.children,N,k.key):E!==null&&(E.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Ln&&Pg(F)===E.type)?(N=s(E,k.props),N.ref=pi(_,E,k),N.return=_,N):(N=Oa(k.type,k.key,k.props,null,_.mode,N),N.ref=pi(_,E,k),N.return=_,N)}function h(_,E,k,N){return E===null||E.tag!==4||E.stateNode.containerInfo!==k.containerInfo||E.stateNode.implementation!==k.implementation?(E=vc(k,_.mode,N),E.return=_,E):(E=s(E,k.children||[]),E.return=_,E)}function f(_,E,k,N,F){return E===null||E.tag!==7?(E=Rr(k,_.mode,N,F),E.return=_,E):(E=s(E,k),E.return=_,E)}function g(_,E,k){if(typeof E=="string"&&E!==""||typeof E=="number")return E=yc(""+E,_.mode,k),E.return=_,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case na:return k=Oa(E.type,E.key,E.props,null,_.mode,k),k.ref=pi(_,null,E),k.return=_,k;case ts:return E=vc(E,_.mode,k),E.return=_,E;case Ln:var N=E._init;return g(_,N(E._payload),k)}if(wi(E)||ui(E))return E=Rr(E,_.mode,k,null),E.return=_,E;fa(_,E)}return null}function m(_,E,k,N){var F=E!==null?E.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return F!==null?null:l(_,E,""+k,N);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case na:return k.key===F?u(_,E,k,N):null;case ts:return k.key===F?h(_,E,k,N):null;case Ln:return F=k._init,m(_,E,F(k._payload),N)}if(wi(k)||ui(k))return F!==null?null:f(_,E,k,N,null);fa(_,k)}return null}function S(_,E,k,N,F){if(typeof N=="string"&&N!==""||typeof N=="number")return _=_.get(k)||null,l(E,_,""+N,F);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case na:return _=_.get(N.key===null?k:N.key)||null,u(E,_,N,F);case ts:return _=_.get(N.key===null?k:N.key)||null,h(E,_,N,F);case Ln:var z=N._init;return S(_,E,k,z(N._payload),F)}if(wi(N)||ui(N))return _=_.get(k)||null,f(E,_,N,F,null);fa(E,N)}return null}function C(_,E,k,N){for(var F=null,z=null,T=E,v=E=0,w=null;T!==null&&v<k.length;v++){T.index>v?(w=T,T=null):w=T.sibling;var I=m(_,T,k[v],N);if(I===null){T===null&&(T=w);break}t&&T&&I.alternate===null&&e(_,T),E=i(I,E,v),z===null?F=I:z.sibling=I,z=I,T=w}if(v===k.length)return n(_,T),we&&wr(_,v),F;if(T===null){for(;v<k.length;v++)T=g(_,k[v],N),T!==null&&(E=i(T,E,v),z===null?F=T:z.sibling=T,z=T);return we&&wr(_,v),F}for(T=r(_,T);v<k.length;v++)w=S(T,_,v,k[v],N),w!==null&&(t&&w.alternate!==null&&T.delete(w.key===null?v:w.key),E=i(w,E,v),z===null?F=w:z.sibling=w,z=w);return t&&T.forEach(function(A){return e(_,A)}),we&&wr(_,v),F}function b(_,E,k,N){var F=ui(k);if(typeof F!="function")throw Error(U(150));if(k=F.call(k),k==null)throw Error(U(151));for(var z=F=null,T=E,v=E=0,w=null,I=k.next();T!==null&&!I.done;v++,I=k.next()){T.index>v?(w=T,T=null):w=T.sibling;var A=m(_,T,I.value,N);if(A===null){T===null&&(T=w);break}t&&T&&A.alternate===null&&e(_,T),E=i(A,E,v),z===null?F=A:z.sibling=A,z=A,T=w}if(I.done)return n(_,T),we&&wr(_,v),F;if(T===null){for(;!I.done;v++,I=k.next())I=g(_,I.value,N),I!==null&&(E=i(I,E,v),z===null?F=I:z.sibling=I,z=I);return we&&wr(_,v),F}for(T=r(_,T);!I.done;v++,I=k.next())I=S(T,_,v,I.value,N),I!==null&&(t&&I.alternate!==null&&T.delete(I.key===null?v:I.key),E=i(I,E,v),z===null?F=I:z.sibling=I,z=I);return t&&T.forEach(function(R){return e(_,R)}),we&&wr(_,v),F}function V(_,E,k,N){if(typeof k=="object"&&k!==null&&k.type===ns&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case na:e:{for(var F=k.key,z=E;z!==null;){if(z.key===F){if(F=k.type,F===ns){if(z.tag===7){n(_,z.sibling),E=s(z,k.props.children),E.return=_,_=E;break e}}else if(z.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Ln&&Pg(F)===z.type){n(_,z.sibling),E=s(z,k.props),E.ref=pi(_,z,k),E.return=_,_=E;break e}n(_,z);break}else e(_,z);z=z.sibling}k.type===ns?(E=Rr(k.props.children,_.mode,N,k.key),E.return=_,_=E):(N=Oa(k.type,k.key,k.props,null,_.mode,N),N.ref=pi(_,E,k),N.return=_,_=N)}return o(_);case ts:e:{for(z=k.key;E!==null;){if(E.key===z)if(E.tag===4&&E.stateNode.containerInfo===k.containerInfo&&E.stateNode.implementation===k.implementation){n(_,E.sibling),E=s(E,k.children||[]),E.return=_,_=E;break e}else{n(_,E);break}else e(_,E);E=E.sibling}E=vc(k,_.mode,N),E.return=_,_=E}return o(_);case Ln:return z=k._init,V(_,E,z(k._payload),N)}if(wi(k))return C(_,E,k,N);if(ui(k))return b(_,E,k,N);fa(_,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,E!==null&&E.tag===6?(n(_,E.sibling),E=s(E,k),E.return=_,_=E):(n(_,E),E=yc(k,_.mode,N),E.return=_,_=E),o(_)):n(_,E)}return V}var ks=Wv(!0),Gv=Wv(!1),ol=hr(null),al=null,cs=null,Ed=null;function Td(){Ed=cs=al=null}function Id(t){var e=ol.current;_e(ol),t._currentValue=e}function uh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function vs(t,e){al=t,Ed=cs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(mt=!0),t.firstContext=null)}function Lt(t){var e=t._currentValue;if(Ed!==t)if(t={context:t,memoizedValue:e,next:null},cs===null){if(al===null)throw Error(U(308));cs=t,al.dependencies={lanes:0,firstContext:t}}else cs=cs.next=t;return e}var xr=null;function xd(t){xr===null?xr=[t]:xr.push(t)}function Kv(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,xd(e)):(n.next=s.next,s.next=n),e.interleaved=n,_n(t,r)}function _n(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Vn=!1;function Sd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function mn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Qn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ue&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,_n(t,n)}return s=r.interleaved,s===null?(e.next=e,xd(r)):(e.next=s.next,s.next=e),r.interleaved=e,_n(t,n)}function ba(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,cd(t,n)}}function Ng(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ll(t,e,n,r){var s=t.updateQueue;Vn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?i=h:o.next=h,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=h:l.next=h,f.lastBaseUpdate=u))}if(i!==null){var g=s.baseState;o=0,f=h=u=null,l=i;do{var m=l.lane,S=l.eventTime;if((r&m)===m){f!==null&&(f=f.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var C=t,b=l;switch(m=e,S=n,b.tag){case 1:if(C=b.payload,typeof C=="function"){g=C.call(S,g,m);break e}g=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=b.payload,m=typeof C=="function"?C.call(S,g,m):C,m==null)break e;g=Ie({},g,m);break e;case 2:Vn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else S={eventTime:S,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(h=f=S,u=g):f=f.next=S,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(f===null&&(u=g),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Vr|=o,t.lanes=o,t.memoizedState=g}}function Dg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var wo={},Yt=hr(wo),Xi=hr(wo),Zi=hr(wo);function Sr(t){if(t===wo)throw Error(U(174));return t}function Ad(t,e){switch(ge(Zi,e),ge(Xi,t),ge(Yt,wo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$c(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$c(e,t)}_e(Yt),ge(Yt,e)}function Cs(){_e(Yt),_e(Xi),_e(Zi)}function Jv(t){Sr(Zi.current);var e=Sr(Yt.current),n=$c(e,t.type);e!==n&&(ge(Xi,t),ge(Yt,n))}function kd(t){Xi.current===t&&(_e(Yt),_e(Xi))}var Ee=hr(0);function ul(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var hc=[];function Cd(){for(var t=0;t<hc.length;t++)hc[t]._workInProgressVersionPrimary=null;hc.length=0}var Pa=kn.ReactCurrentDispatcher,dc=kn.ReactCurrentBatchConfig,Lr=0,Te=null,Le=null,je=null,cl=!1,Ni=!1,eo=0,qE=0;function Xe(){throw Error(U(321))}function Rd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ht(t[n],e[n]))return!1;return!0}function bd(t,e,n,r,s,i){if(Lr=i,Te=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Pa.current=t===null||t.memoizedState===null?KE:QE,t=n(r,s),Ni){i=0;do{if(Ni=!1,eo=0,25<=i)throw Error(U(301));i+=1,je=Le=null,e.updateQueue=null,Pa.current=JE,t=n(r,s)}while(Ni)}if(Pa.current=hl,e=Le!==null&&Le.next!==null,Lr=0,je=Le=Te=null,cl=!1,e)throw Error(U(300));return t}function Pd(){var t=eo!==0;return eo=0,t}function Kt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return je===null?Te.memoizedState=je=t:je=je.next=t,je}function Vt(){if(Le===null){var t=Te.alternate;t=t!==null?t.memoizedState:null}else t=Le.next;var e=je===null?Te.memoizedState:je.next;if(e!==null)je=e,Le=t;else{if(t===null)throw Error(U(310));Le=t,t={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},je===null?Te.memoizedState=je=t:je=je.next=t}return je}function to(t,e){return typeof e=="function"?e(t):e}function fc(t){var e=Vt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Le,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,h=i;do{var f=h.lane;if((Lr&f)===f)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var g={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=g,o=r):u=u.next=g,Te.lanes|=f,Vr|=f}h=h.next}while(h!==null&&h!==i);u===null?o=r:u.next=l,Ht(r,e.memoizedState)||(mt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Te.lanes|=i,Vr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function pc(t){var e=Vt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Ht(i,e.memoizedState)||(mt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Yv(){}function Xv(t,e){var n=Te,r=Vt(),s=e(),i=!Ht(r.memoizedState,s);if(i&&(r.memoizedState=s,mt=!0),r=r.queue,Nd(t0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||je!==null&&je.memoizedState.tag&1){if(n.flags|=2048,no(9,e0.bind(null,n,r,s,e),void 0,null),Fe===null)throw Error(U(349));Lr&30||Zv(n,e,s)}return s}function Zv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function e0(t,e,n,r){e.value=n,e.getSnapshot=r,n0(e)&&r0(t)}function t0(t,e,n){return n(function(){n0(e)&&r0(t)})}function n0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ht(t,n)}catch{return!0}}function r0(t){var e=_n(t,1);e!==null&&qt(e,t,1,-1)}function Lg(t){var e=Kt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:to,lastRenderedState:t},e.queue=t,t=t.dispatch=GE.bind(null,Te,t),[e.memoizedState,t]}function no(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function s0(){return Vt().memoizedState}function Na(t,e,n,r){var s=Kt();Te.flags|=t,s.memoizedState=no(1|e,n,void 0,r===void 0?null:r)}function Bl(t,e,n,r){var s=Vt();r=r===void 0?null:r;var i=void 0;if(Le!==null){var o=Le.memoizedState;if(i=o.destroy,r!==null&&Rd(r,o.deps)){s.memoizedState=no(e,n,i,r);return}}Te.flags|=t,s.memoizedState=no(1|e,n,i,r)}function Vg(t,e){return Na(8390656,8,t,e)}function Nd(t,e){return Bl(2048,8,t,e)}function i0(t,e){return Bl(4,2,t,e)}function o0(t,e){return Bl(4,4,t,e)}function a0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function l0(t,e,n){return n=n!=null?n.concat([t]):null,Bl(4,4,a0.bind(null,e,t),n)}function Dd(){}function u0(t,e){var n=Vt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Rd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function c0(t,e){var n=Vt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Rd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function h0(t,e,n){return Lr&21?(Ht(n,e)||(n=mv(),Te.lanes|=n,Vr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,mt=!0),t.memoizedState=n)}function HE(t,e){var n=de;de=n!==0&&4>n?n:4,t(!0);var r=dc.transition;dc.transition={};try{t(!1),e()}finally{de=n,dc.transition=r}}function d0(){return Vt().memoizedState}function WE(t,e,n){var r=Yn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},f0(t))p0(e,n);else if(n=Kv(t,e,n,r),n!==null){var s=ct();qt(n,t,r,s),g0(n,e,r)}}function GE(t,e,n){var r=Yn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(f0(t))p0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Ht(l,o)){var u=e.interleaved;u===null?(s.next=s,xd(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Kv(t,e,s,r),n!==null&&(s=ct(),qt(n,t,r,s),g0(n,e,r))}}function f0(t){var e=t.alternate;return t===Te||e!==null&&e===Te}function p0(t,e){Ni=cl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function g0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,cd(t,n)}}var hl={readContext:Lt,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useInsertionEffect:Xe,useLayoutEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useMutableSource:Xe,useSyncExternalStore:Xe,useId:Xe,unstable_isNewReconciler:!1},KE={readContext:Lt,useCallback:function(t,e){return Kt().memoizedState=[t,e===void 0?null:e],t},useContext:Lt,useEffect:Vg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Na(4194308,4,a0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Na(4194308,4,t,e)},useInsertionEffect:function(t,e){return Na(4,2,t,e)},useMemo:function(t,e){var n=Kt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Kt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=WE.bind(null,Te,t),[r.memoizedState,t]},useRef:function(t){var e=Kt();return t={current:t},e.memoizedState=t},useState:Lg,useDebugValue:Dd,useDeferredValue:function(t){return Kt().memoizedState=t},useTransition:function(){var t=Lg(!1),e=t[0];return t=HE.bind(null,t[1]),Kt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Te,s=Kt();if(we){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Fe===null)throw Error(U(349));Lr&30||Zv(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Vg(t0.bind(null,r,i,t),[t]),r.flags|=2048,no(9,e0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Kt(),e=Fe.identifierPrefix;if(we){var n=hn,r=cn;n=(r&~(1<<32-$t(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=eo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=qE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},QE={readContext:Lt,useCallback:u0,useContext:Lt,useEffect:Nd,useImperativeHandle:l0,useInsertionEffect:i0,useLayoutEffect:o0,useMemo:c0,useReducer:fc,useRef:s0,useState:function(){return fc(to)},useDebugValue:Dd,useDeferredValue:function(t){var e=Vt();return h0(e,Le.memoizedState,t)},useTransition:function(){var t=fc(to)[0],e=Vt().memoizedState;return[t,e]},useMutableSource:Yv,useSyncExternalStore:Xv,useId:d0,unstable_isNewReconciler:!1},JE={readContext:Lt,useCallback:u0,useContext:Lt,useEffect:Nd,useImperativeHandle:l0,useInsertionEffect:i0,useLayoutEffect:o0,useMemo:c0,useReducer:pc,useRef:s0,useState:function(){return pc(to)},useDebugValue:Dd,useDeferredValue:function(t){var e=Vt();return Le===null?e.memoizedState=t:h0(e,Le.memoizedState,t)},useTransition:function(){var t=pc(to)[0],e=Vt().memoizedState;return[t,e]},useMutableSource:Yv,useSyncExternalStore:Xv,useId:d0,unstable_isNewReconciler:!1};function Ut(t,e){if(t&&t.defaultProps){e=Ie({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ch(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ie({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var $l={isMounted:function(t){return(t=t._reactInternals)?qr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ct(),s=Yn(t),i=mn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Qn(t,i,s),e!==null&&(qt(e,t,s,r),ba(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ct(),s=Yn(t),i=mn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Qn(t,i,s),e!==null&&(qt(e,t,s,r),ba(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ct(),r=Yn(t),s=mn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Qn(t,s,r),e!==null&&(qt(e,t,r,n),ba(e,t,r))}};function Og(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ki(n,r)||!Ki(s,i):!0}function m0(t,e,n){var r=!1,s=ir,i=e.contextType;return typeof i=="object"&&i!==null?i=Lt(i):(s=vt(e)?Nr:st.current,r=e.contextTypes,i=(r=r!=null)?Ss(t,s):ir),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=$l,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Mg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&$l.enqueueReplaceState(e,e.state,null)}function hh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Sd(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Lt(i):(i=vt(e)?Nr:st.current,s.context=Ss(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ch(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&$l.enqueueReplaceState(s,s.state,null),ll(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Rs(t,e){try{var n="",r=e;do n+=x3(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function gc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function dh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var YE=typeof WeakMap=="function"?WeakMap:Map;function y0(t,e,n){n=mn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){fl||(fl=!0,Th=r),dh(t,e)},n}function v0(t,e,n){n=mn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){dh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){dh(t,e),typeof r!="function"&&(Jn===null?Jn=new Set([this]):Jn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function jg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new YE;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=hT.bind(null,t,e,n),e.then(t,t))}function Fg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ug(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=mn(-1,1),e.tag=2,Qn(n,e,1))),n.lanes|=1),t)}var XE=kn.ReactCurrentOwner,mt=!1;function ut(t,e,n,r){e.child=t===null?Gv(e,null,n,r):ks(e,t.child,n,r)}function zg(t,e,n,r,s){n=n.render;var i=e.ref;return vs(e,s),r=bd(t,e,n,r,i,s),n=Pd(),t!==null&&!mt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,wn(t,e,s)):(we&&n&&vd(e),e.flags|=1,ut(t,e,r,s),e.child)}function Bg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!zd(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,_0(t,e,i,r,s)):(t=Oa(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ki,n(o,r)&&t.ref===e.ref)return wn(t,e,s)}return e.flags|=1,t=Xn(i,r),t.ref=e.ref,t.return=e,e.child=t}function _0(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ki(i,r)&&t.ref===e.ref)if(mt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(mt=!0);else return e.lanes=t.lanes,wn(t,e,s)}return fh(t,e,n,r,s)}function w0(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(ds,Et),Et|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ge(ds,Et),Et|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ge(ds,Et),Et|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ge(ds,Et),Et|=r;return ut(t,e,s,n),e.child}function E0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function fh(t,e,n,r,s){var i=vt(n)?Nr:st.current;return i=Ss(e,i),vs(e,s),n=bd(t,e,n,r,i,s),r=Pd(),t!==null&&!mt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,wn(t,e,s)):(we&&r&&vd(e),e.flags|=1,ut(t,e,n,s),e.child)}function $g(t,e,n,r,s){if(vt(n)){var i=!0;rl(e)}else i=!1;if(vs(e,s),e.stateNode===null)Da(t,e),m0(e,n,r),hh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Lt(h):(h=vt(n)?Nr:st.current,h=Ss(e,h));var f=n.getDerivedStateFromProps,g=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&Mg(e,o,r,h),Vn=!1;var m=e.memoizedState;o.state=m,ll(e,r,o,s),u=e.memoizedState,l!==r||m!==u||yt.current||Vn?(typeof f=="function"&&(ch(e,n,f,r),u=e.memoizedState),(l=Vn||Og(e,n,l,r,m,u,h))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Qv(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Ut(e.type,l),o.props=h,g=e.pendingProps,m=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Lt(u):(u=vt(n)?Nr:st.current,u=Ss(e,u));var S=n.getDerivedStateFromProps;(f=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==g||m!==u)&&Mg(e,o,r,u),Vn=!1,m=e.memoizedState,o.state=m,ll(e,r,o,s);var C=e.memoizedState;l!==g||m!==C||yt.current||Vn?(typeof S=="function"&&(ch(e,n,S,r),C=e.memoizedState),(h=Vn||Og(e,n,h,r,m,C,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,C,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,C,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),o.props=r,o.state=C,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return ph(t,e,n,r,i,s)}function ph(t,e,n,r,s,i){E0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Cg(e,n,!1),wn(t,e,i);r=e.stateNode,XE.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ks(e,t.child,null,i),e.child=ks(e,null,l,i)):ut(t,e,l,i),e.memoizedState=r.state,s&&Cg(e,n,!0),e.child}function T0(t){var e=t.stateNode;e.pendingContext?kg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&kg(t,e.context,!1),Ad(t,e.containerInfo)}function qg(t,e,n,r,s){return As(),wd(s),e.flags|=256,ut(t,e,n,r),e.child}var gh={dehydrated:null,treeContext:null,retryLane:0};function mh(t){return{baseLanes:t,cachePool:null,transitions:null}}function I0(t,e,n){var r=e.pendingProps,s=Ee.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ge(Ee,s&1),t===null)return lh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Wl(o,r,0,null),t=Rr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=mh(n),e.memoizedState=gh,t):Ld(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return ZE(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Xn(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Xn(l,i):(i=Rr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?mh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=gh,r}return i=t.child,t=i.sibling,r=Xn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ld(t,e){return e=Wl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pa(t,e,n,r){return r!==null&&wd(r),ks(e,t.child,null,n),t=Ld(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ZE(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=gc(Error(U(422))),pa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Wl({mode:"visible",children:r.children},s,0,null),i=Rr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ks(e,t.child,null,o),e.child.memoizedState=mh(o),e.memoizedState=gh,i);if(!(e.mode&1))return pa(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(U(419)),r=gc(i,r,void 0),pa(t,e,o,r)}if(l=(o&t.childLanes)!==0,mt||l){if(r=Fe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,_n(t,s),qt(r,t,s,-1))}return Ud(),r=gc(Error(U(421))),pa(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=dT.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Tt=Kn(s.nextSibling),xt=e,we=!0,Bt=null,t!==null&&(Rt[bt++]=cn,Rt[bt++]=hn,Rt[bt++]=Dr,cn=t.id,hn=t.overflow,Dr=e),e=Ld(e,r.children),e.flags|=4096,e)}function Hg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),uh(t.return,e,n)}function mc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function x0(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ut(t,e,r.children,n),r=Ee.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Hg(t,n,e);else if(t.tag===19)Hg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ge(Ee,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ul(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),mc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ul(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}mc(e,!0,n,null,i);break;case"together":mc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Da(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function wn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Xn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Xn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function eT(t,e,n){switch(e.tag){case 3:T0(e),As();break;case 5:Jv(e);break;case 1:vt(e.type)&&rl(e);break;case 4:Ad(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ge(ol,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ge(Ee,Ee.current&1),e.flags|=128,null):n&e.child.childLanes?I0(t,e,n):(ge(Ee,Ee.current&1),t=wn(t,e,n),t!==null?t.sibling:null);ge(Ee,Ee.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return x0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ge(Ee,Ee.current),r)break;return null;case 22:case 23:return e.lanes=0,w0(t,e,n)}return wn(t,e,n)}var S0,yh,A0,k0;S0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};yh=function(){};A0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Sr(Yt.current);var i=null;switch(n){case"input":s=Fc(t,s),r=Fc(t,r),i=[];break;case"select":s=Ie({},s,{value:void 0}),r=Ie({},r,{value:void 0}),i=[];break;case"textarea":s=Bc(t,s),r=Bc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=tl)}qc(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(zi.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(zi.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&ye("scroll",t),i||l===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};k0=function(t,e,n,r){n!==r&&(e.flags|=4)};function gi(t,e){if(!we)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ze(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function tT(t,e,n){var r=e.pendingProps;switch(_d(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(e),null;case 1:return vt(e.type)&&nl(),Ze(e),null;case 3:return r=e.stateNode,Cs(),_e(yt),_e(st),Cd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(da(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Bt!==null&&(Sh(Bt),Bt=null))),yh(t,e),Ze(e),null;case 5:kd(e);var s=Sr(Zi.current);if(n=e.type,t!==null&&e.stateNode!=null)A0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return Ze(e),null}if(t=Sr(Yt.current),da(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Qt]=e,r[Yi]=i,t=(e.mode&1)!==0,n){case"dialog":ye("cancel",r),ye("close",r);break;case"iframe":case"object":case"embed":ye("load",r);break;case"video":case"audio":for(s=0;s<Ti.length;s++)ye(Ti[s],r);break;case"source":ye("error",r);break;case"img":case"image":case"link":ye("error",r),ye("load",r);break;case"details":ye("toggle",r);break;case"input":eg(r,i),ye("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ye("invalid",r);break;case"textarea":ng(r,i),ye("invalid",r)}qc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&ha(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ha(r.textContent,l,t),s=["children",""+l]):zi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ye("scroll",r)}switch(n){case"input":ra(r),tg(r,i,!0);break;case"textarea":ra(r),rg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=tl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=tv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Qt]=e,t[Yi]=r,S0(t,e,!1,!1),e.stateNode=t;e:{switch(o=Hc(n,r),n){case"dialog":ye("cancel",t),ye("close",t),s=r;break;case"iframe":case"object":case"embed":ye("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ti.length;s++)ye(Ti[s],t);s=r;break;case"source":ye("error",t),s=r;break;case"img":case"image":case"link":ye("error",t),ye("load",t),s=r;break;case"details":ye("toggle",t),s=r;break;case"input":eg(t,r),s=Fc(t,r),ye("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ie({},r,{value:void 0}),ye("invalid",t);break;case"textarea":ng(t,r),s=Bc(t,r),ye("invalid",t);break;default:s=r}qc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?sv(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&nv(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Bi(t,u):typeof u=="number"&&Bi(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(zi.hasOwnProperty(i)?u!=null&&i==="onScroll"&&ye("scroll",t):u!=null&&sd(t,i,u,o))}switch(n){case"input":ra(t),tg(t,r,!1);break;case"textarea":ra(t),rg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+sr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ps(t,!!r.multiple,i,!1):r.defaultValue!=null&&ps(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=tl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ze(e),null;case 6:if(t&&e.stateNode!=null)k0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=Sr(Zi.current),Sr(Yt.current),da(e)){if(r=e.stateNode,n=e.memoizedProps,r[Qt]=e,(i=r.nodeValue!==n)&&(t=xt,t!==null))switch(t.tag){case 3:ha(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ha(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qt]=e,e.stateNode=r}return Ze(e),null;case 13:if(_e(Ee),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(we&&Tt!==null&&e.mode&1&&!(e.flags&128))Hv(),As(),e.flags|=98560,i=!1;else if(i=da(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[Qt]=e}else As(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ze(e),i=!1}else Bt!==null&&(Sh(Bt),Bt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ee.current&1?Ve===0&&(Ve=3):Ud())),e.updateQueue!==null&&(e.flags|=4),Ze(e),null);case 4:return Cs(),yh(t,e),t===null&&Qi(e.stateNode.containerInfo),Ze(e),null;case 10:return Id(e.type._context),Ze(e),null;case 17:return vt(e.type)&&nl(),Ze(e),null;case 19:if(_e(Ee),i=e.memoizedState,i===null)return Ze(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)gi(i,!1);else{if(Ve!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ul(t),o!==null){for(e.flags|=128,gi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ge(Ee,Ee.current&1|2),e.child}t=t.sibling}i.tail!==null&&Re()>bs&&(e.flags|=128,r=!0,gi(i,!1),e.lanes=4194304)}else{if(!r)if(t=ul(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),gi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!we)return Ze(e),null}else 2*Re()-i.renderingStartTime>bs&&n!==1073741824&&(e.flags|=128,r=!0,gi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Re(),e.sibling=null,n=Ee.current,ge(Ee,r?n&1|2:n&1),e):(Ze(e),null);case 22:case 23:return Fd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Et&1073741824&&(Ze(e),e.subtreeFlags&6&&(e.flags|=8192)):Ze(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function nT(t,e){switch(_d(e),e.tag){case 1:return vt(e.type)&&nl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Cs(),_e(yt),_e(st),Cd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return kd(e),null;case 13:if(_e(Ee),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));As()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return _e(Ee),null;case 4:return Cs(),null;case 10:return Id(e.type._context),null;case 22:case 23:return Fd(),null;case 24:return null;default:return null}}var ga=!1,nt=!1,rT=typeof WeakSet=="function"?WeakSet:Set,W=null;function hs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ke(t,e,r)}else n.current=null}function vh(t,e,n){try{n()}catch(r){ke(t,e,r)}}var Wg=!1;function sT(t,e){if(th=Xa,t=Nv(),yd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,f=0,g=t,m=null;t:for(;;){for(var S;g!==n||s!==0&&g.nodeType!==3||(l=o+s),g!==i||r!==0&&g.nodeType!==3||(u=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(S=g.firstChild)!==null;)m=g,g=S;for(;;){if(g===t)break t;if(m===n&&++h===s&&(l=o),m===i&&++f===r&&(u=o),(S=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=S}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(nh={focusedElem:t,selectionRange:n},Xa=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var b=C.memoizedProps,V=C.memoizedState,_=e.stateNode,E=_.getSnapshotBeforeUpdate(e.elementType===e.type?b:Ut(e.type,b),V);_.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(N){ke(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return C=Wg,Wg=!1,C}function Di(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&vh(e,n,i)}s=s.next}while(s!==r)}}function ql(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function _h(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function C0(t){var e=t.alternate;e!==null&&(t.alternate=null,C0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qt],delete e[Yi],delete e[ih],delete e[UE],delete e[zE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function R0(t){return t.tag===5||t.tag===3||t.tag===4}function Gg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||R0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=tl));else if(r!==4&&(t=t.child,t!==null))for(wh(t,e,n),t=t.sibling;t!==null;)wh(t,e,n),t=t.sibling}function Eh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Eh(t,e,n),t=t.sibling;t!==null;)Eh(t,e,n),t=t.sibling}var ze=null,zt=!1;function Nn(t,e,n){for(n=n.child;n!==null;)b0(t,e,n),n=n.sibling}function b0(t,e,n){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(Ol,n)}catch{}switch(n.tag){case 5:nt||hs(n,e);case 6:var r=ze,s=zt;ze=null,Nn(t,e,n),ze=r,zt=s,ze!==null&&(zt?(t=ze,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ze.removeChild(n.stateNode));break;case 18:ze!==null&&(zt?(t=ze,n=n.stateNode,t.nodeType===8?uc(t.parentNode,n):t.nodeType===1&&uc(t,n),Wi(t)):uc(ze,n.stateNode));break;case 4:r=ze,s=zt,ze=n.stateNode.containerInfo,zt=!0,Nn(t,e,n),ze=r,zt=s;break;case 0:case 11:case 14:case 15:if(!nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&vh(n,e,o),s=s.next}while(s!==r)}Nn(t,e,n);break;case 1:if(!nt&&(hs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ke(n,e,l)}Nn(t,e,n);break;case 21:Nn(t,e,n);break;case 22:n.mode&1?(nt=(r=nt)||n.memoizedState!==null,Nn(t,e,n),nt=r):Nn(t,e,n);break;default:Nn(t,e,n)}}function Kg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new rT),e.forEach(function(r){var s=fT.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function jt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ze=l.stateNode,zt=!1;break e;case 3:ze=l.stateNode.containerInfo,zt=!0;break e;case 4:ze=l.stateNode.containerInfo,zt=!0;break e}l=l.return}if(ze===null)throw Error(U(160));b0(i,o,s),ze=null,zt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){ke(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)P0(e,t),e=e.sibling}function P0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(jt(e,t),Gt(t),r&4){try{Di(3,t,t.return),ql(3,t)}catch(b){ke(t,t.return,b)}try{Di(5,t,t.return)}catch(b){ke(t,t.return,b)}}break;case 1:jt(e,t),Gt(t),r&512&&n!==null&&hs(n,n.return);break;case 5:if(jt(e,t),Gt(t),r&512&&n!==null&&hs(n,n.return),t.flags&32){var s=t.stateNode;try{Bi(s,"")}catch(b){ke(t,t.return,b)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Zy(s,i),Hc(l,o);var h=Hc(l,i);for(o=0;o<u.length;o+=2){var f=u[o],g=u[o+1];f==="style"?sv(s,g):f==="dangerouslySetInnerHTML"?nv(s,g):f==="children"?Bi(s,g):sd(s,f,g,h)}switch(l){case"input":Uc(s,i);break;case"textarea":ev(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var S=i.value;S!=null?ps(s,!!i.multiple,S,!1):m!==!!i.multiple&&(i.defaultValue!=null?ps(s,!!i.multiple,i.defaultValue,!0):ps(s,!!i.multiple,i.multiple?[]:"",!1))}s[Yi]=i}catch(b){ke(t,t.return,b)}}break;case 6:if(jt(e,t),Gt(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(b){ke(t,t.return,b)}}break;case 3:if(jt(e,t),Gt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Wi(e.containerInfo)}catch(b){ke(t,t.return,b)}break;case 4:jt(e,t),Gt(t);break;case 13:jt(e,t),Gt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Md=Re())),r&4&&Kg(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(nt=(h=nt)||f,jt(e,t),nt=h):jt(e,t),Gt(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!f&&t.mode&1)for(W=t,f=t.child;f!==null;){for(g=W=f;W!==null;){switch(m=W,S=m.child,m.tag){case 0:case 11:case 14:case 15:Di(4,m,m.return);break;case 1:hs(m,m.return);var C=m.stateNode;if(typeof C.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(b){ke(r,n,b)}}break;case 5:hs(m,m.return);break;case 22:if(m.memoizedState!==null){Jg(g);continue}}S!==null?(S.return=m,W=S):Jg(g)}f=f.sibling}e:for(f=null,g=t;;){if(g.tag===5){if(f===null){f=g;try{s=g.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=g.stateNode,u=g.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=rv("display",o))}catch(b){ke(t,t.return,b)}}}else if(g.tag===6){if(f===null)try{g.stateNode.nodeValue=h?"":g.memoizedProps}catch(b){ke(t,t.return,b)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;f===g&&(f=null),g=g.return}f===g&&(f=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:jt(e,t),Gt(t),r&4&&Kg(t);break;case 21:break;default:jt(e,t),Gt(t)}}function Gt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(R0(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Bi(s,""),r.flags&=-33);var i=Gg(t);Eh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Gg(t);wh(t,l,o);break;default:throw Error(U(161))}}catch(u){ke(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function iT(t,e,n){W=t,N0(t)}function N0(t,e,n){for(var r=(t.mode&1)!==0;W!==null;){var s=W,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ga;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||nt;l=ga;var h=nt;if(ga=o,(nt=u)&&!h)for(W=s;W!==null;)o=W,u=o.child,o.tag===22&&o.memoizedState!==null?Yg(s):u!==null?(u.return=o,W=u):Yg(s);for(;i!==null;)W=i,N0(i),i=i.sibling;W=s,ga=l,nt=h}Qg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,W=i):Qg(t)}}function Qg(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:nt||ql(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!nt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ut(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Dg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Dg(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var g=f.dehydrated;g!==null&&Wi(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}nt||e.flags&512&&_h(e)}catch(m){ke(e,e.return,m)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function Jg(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function Yg(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ql(4,e)}catch(u){ke(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){ke(e,s,u)}}var i=e.return;try{_h(e)}catch(u){ke(e,i,u)}break;case 5:var o=e.return;try{_h(e)}catch(u){ke(e,o,u)}}}catch(u){ke(e,e.return,u)}if(e===t){W=null;break}var l=e.sibling;if(l!==null){l.return=e.return,W=l;break}W=e.return}}var oT=Math.ceil,dl=kn.ReactCurrentDispatcher,Vd=kn.ReactCurrentOwner,Nt=kn.ReactCurrentBatchConfig,ue=0,Fe=null,Pe=null,qe=0,Et=0,ds=hr(0),Ve=0,ro=null,Vr=0,Hl=0,Od=0,Li=null,pt=null,Md=0,bs=1/0,ln=null,fl=!1,Th=null,Jn=null,ma=!1,$n=null,pl=0,Vi=0,Ih=null,La=-1,Va=0;function ct(){return ue&6?Re():La!==-1?La:La=Re()}function Yn(t){return t.mode&1?ue&2&&qe!==0?qe&-qe:$E.transition!==null?(Va===0&&(Va=mv()),Va):(t=de,t!==0||(t=window.event,t=t===void 0?16:Iv(t.type)),t):1}function qt(t,e,n,r){if(50<Vi)throw Vi=0,Ih=null,Error(U(185));yo(t,n,r),(!(ue&2)||t!==Fe)&&(t===Fe&&(!(ue&2)&&(Hl|=n),Ve===4&&Mn(t,qe)),_t(t,r),n===1&&ue===0&&!(e.mode&1)&&(bs=Re()+500,zl&&dr()))}function _t(t,e){var n=t.callbackNode;$3(t,e);var r=Ya(t,t===Fe?qe:0);if(r===0)n!==null&&og(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&og(n),e===1)t.tag===0?BE(Xg.bind(null,t)):Bv(Xg.bind(null,t)),jE(function(){!(ue&6)&&dr()}),n=null;else{switch(yv(r)){case 1:n=ud;break;case 4:n=pv;break;case 16:n=Ja;break;case 536870912:n=gv;break;default:n=Ja}n=U0(n,D0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function D0(t,e){if(La=-1,Va=0,ue&6)throw Error(U(327));var n=t.callbackNode;if(_s()&&t.callbackNode!==n)return null;var r=Ya(t,t===Fe?qe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=gl(t,r);else{e=r;var s=ue;ue|=2;var i=V0();(Fe!==t||qe!==e)&&(ln=null,bs=Re()+500,Cr(t,e));do try{uT();break}catch(l){L0(t,l)}while(!0);Td(),dl.current=i,ue=s,Pe!==null?e=0:(Fe=null,qe=0,e=Ve)}if(e!==0){if(e===2&&(s=Jc(t),s!==0&&(r=s,e=xh(t,s))),e===1)throw n=ro,Cr(t,0),Mn(t,r),_t(t,Re()),n;if(e===6)Mn(t,r);else{if(s=t.current.alternate,!(r&30)&&!aT(s)&&(e=gl(t,r),e===2&&(i=Jc(t),i!==0&&(r=i,e=xh(t,i))),e===1))throw n=ro,Cr(t,0),Mn(t,r),_t(t,Re()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:Er(t,pt,ln);break;case 3:if(Mn(t,r),(r&130023424)===r&&(e=Md+500-Re(),10<e)){if(Ya(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ct(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=sh(Er.bind(null,t,pt,ln),e);break}Er(t,pt,ln);break;case 4:if(Mn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-$t(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Re()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*oT(r/1960))-r,10<r){t.timeoutHandle=sh(Er.bind(null,t,pt,ln),r);break}Er(t,pt,ln);break;case 5:Er(t,pt,ln);break;default:throw Error(U(329))}}}return _t(t,Re()),t.callbackNode===n?D0.bind(null,t):null}function xh(t,e){var n=Li;return t.current.memoizedState.isDehydrated&&(Cr(t,e).flags|=256),t=gl(t,e),t!==2&&(e=pt,pt=n,e!==null&&Sh(e)),t}function Sh(t){pt===null?pt=t:pt.push.apply(pt,t)}function aT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ht(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Mn(t,e){for(e&=~Od,e&=~Hl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-$t(e),r=1<<n;t[n]=-1,e&=~r}}function Xg(t){if(ue&6)throw Error(U(327));_s();var e=Ya(t,0);if(!(e&1))return _t(t,Re()),null;var n=gl(t,e);if(t.tag!==0&&n===2){var r=Jc(t);r!==0&&(e=r,n=xh(t,r))}if(n===1)throw n=ro,Cr(t,0),Mn(t,e),_t(t,Re()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Er(t,pt,ln),_t(t,Re()),null}function jd(t,e){var n=ue;ue|=1;try{return t(e)}finally{ue=n,ue===0&&(bs=Re()+500,zl&&dr())}}function Or(t){$n!==null&&$n.tag===0&&!(ue&6)&&_s();var e=ue;ue|=1;var n=Nt.transition,r=de;try{if(Nt.transition=null,de=1,t)return t()}finally{de=r,Nt.transition=n,ue=e,!(ue&6)&&dr()}}function Fd(){Et=ds.current,_e(ds)}function Cr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ME(n)),Pe!==null)for(n=Pe.return;n!==null;){var r=n;switch(_d(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&nl();break;case 3:Cs(),_e(yt),_e(st),Cd();break;case 5:kd(r);break;case 4:Cs();break;case 13:_e(Ee);break;case 19:_e(Ee);break;case 10:Id(r.type._context);break;case 22:case 23:Fd()}n=n.return}if(Fe=t,Pe=t=Xn(t.current,null),qe=Et=e,Ve=0,ro=null,Od=Hl=Vr=0,pt=Li=null,xr!==null){for(e=0;e<xr.length;e++)if(n=xr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}xr=null}return t}function L0(t,e){do{var n=Pe;try{if(Td(),Pa.current=hl,cl){for(var r=Te.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}cl=!1}if(Lr=0,je=Le=Te=null,Ni=!1,eo=0,Vd.current=null,n===null||n.return===null){Ve=1,ro=e,Pe=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=qe,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,f=l,g=f.tag;if(!(f.mode&1)&&(g===0||g===11||g===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var S=Fg(o);if(S!==null){S.flags&=-257,Ug(S,o,l,i,e),S.mode&1&&jg(i,h,e),e=S,u=h;var C=e.updateQueue;if(C===null){var b=new Set;b.add(u),e.updateQueue=b}else C.add(u);break e}else{if(!(e&1)){jg(i,h,e),Ud();break e}u=Error(U(426))}}else if(we&&l.mode&1){var V=Fg(o);if(V!==null){!(V.flags&65536)&&(V.flags|=256),Ug(V,o,l,i,e),wd(Rs(u,l));break e}}i=u=Rs(u,l),Ve!==4&&(Ve=2),Li===null?Li=[i]:Li.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=y0(i,u,e);Ng(i,_);break e;case 1:l=u;var E=i.type,k=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Jn===null||!Jn.has(k)))){i.flags|=65536,e&=-e,i.lanes|=e;var N=v0(i,l,e);Ng(i,N);break e}}i=i.return}while(i!==null)}M0(n)}catch(F){e=F,Pe===n&&n!==null&&(Pe=n=n.return);continue}break}while(!0)}function V0(){var t=dl.current;return dl.current=hl,t===null?hl:t}function Ud(){(Ve===0||Ve===3||Ve===2)&&(Ve=4),Fe===null||!(Vr&268435455)&&!(Hl&268435455)||Mn(Fe,qe)}function gl(t,e){var n=ue;ue|=2;var r=V0();(Fe!==t||qe!==e)&&(ln=null,Cr(t,e));do try{lT();break}catch(s){L0(t,s)}while(!0);if(Td(),ue=n,dl.current=r,Pe!==null)throw Error(U(261));return Fe=null,qe=0,Ve}function lT(){for(;Pe!==null;)O0(Pe)}function uT(){for(;Pe!==null&&!L3();)O0(Pe)}function O0(t){var e=F0(t.alternate,t,Et);t.memoizedProps=t.pendingProps,e===null?M0(t):Pe=e,Vd.current=null}function M0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=nT(n,e),n!==null){n.flags&=32767,Pe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ve=6,Pe=null;return}}else if(n=tT(n,e,Et),n!==null){Pe=n;return}if(e=e.sibling,e!==null){Pe=e;return}Pe=e=t}while(e!==null);Ve===0&&(Ve=5)}function Er(t,e,n){var r=de,s=Nt.transition;try{Nt.transition=null,de=1,cT(t,e,n,r)}finally{Nt.transition=s,de=r}return null}function cT(t,e,n,r){do _s();while($n!==null);if(ue&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(q3(t,i),t===Fe&&(Pe=Fe=null,qe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ma||(ma=!0,U0(Ja,function(){return _s(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Nt.transition,Nt.transition=null;var o=de;de=1;var l=ue;ue|=4,Vd.current=null,sT(t,n),P0(n,t),bE(nh),Xa=!!th,nh=th=null,t.current=n,iT(n),V3(),ue=l,de=o,Nt.transition=i}else t.current=n;if(ma&&(ma=!1,$n=t,pl=s),i=t.pendingLanes,i===0&&(Jn=null),j3(n.stateNode),_t(t,Re()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(fl)throw fl=!1,t=Th,Th=null,t;return pl&1&&t.tag!==0&&_s(),i=t.pendingLanes,i&1?t===Ih?Vi++:(Vi=0,Ih=t):Vi=0,dr(),null}function _s(){if($n!==null){var t=yv(pl),e=Nt.transition,n=de;try{if(Nt.transition=null,de=16>t?16:t,$n===null)var r=!1;else{if(t=$n,$n=null,pl=0,ue&6)throw Error(U(331));var s=ue;for(ue|=4,W=t.current;W!==null;){var i=W,o=i.child;if(W.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(W=h;W!==null;){var f=W;switch(f.tag){case 0:case 11:case 15:Di(8,f,i)}var g=f.child;if(g!==null)g.return=f,W=g;else for(;W!==null;){f=W;var m=f.sibling,S=f.return;if(C0(f),f===h){W=null;break}if(m!==null){m.return=S,W=m;break}W=S}}}var C=i.alternate;if(C!==null){var b=C.child;if(b!==null){C.child=null;do{var V=b.sibling;b.sibling=null,b=V}while(b!==null)}}W=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,W=o;else e:for(;W!==null;){if(i=W,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Di(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,W=_;break e}W=i.return}}var E=t.current;for(W=E;W!==null;){o=W;var k=o.child;if(o.subtreeFlags&2064&&k!==null)k.return=o,W=k;else e:for(o=E;W!==null;){if(l=W,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ql(9,l)}}catch(F){ke(l,l.return,F)}if(l===o){W=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,W=N;break e}W=l.return}}if(ue=s,dr(),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(Ol,t)}catch{}r=!0}return r}finally{de=n,Nt.transition=e}}return!1}function Zg(t,e,n){e=Rs(n,e),e=y0(t,e,1),t=Qn(t,e,1),e=ct(),t!==null&&(yo(t,1,e),_t(t,e))}function ke(t,e,n){if(t.tag===3)Zg(t,t,n);else for(;e!==null;){if(e.tag===3){Zg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Jn===null||!Jn.has(r))){t=Rs(n,t),t=v0(e,t,1),e=Qn(e,t,1),t=ct(),e!==null&&(yo(e,1,t),_t(e,t));break}}e=e.return}}function hT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ct(),t.pingedLanes|=t.suspendedLanes&n,Fe===t&&(qe&n)===n&&(Ve===4||Ve===3&&(qe&130023424)===qe&&500>Re()-Md?Cr(t,0):Od|=n),_t(t,e)}function j0(t,e){e===0&&(t.mode&1?(e=oa,oa<<=1,!(oa&130023424)&&(oa=4194304)):e=1);var n=ct();t=_n(t,e),t!==null&&(yo(t,e,n),_t(t,n))}function dT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),j0(t,n)}function fT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),j0(t,n)}var F0;F0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||yt.current)mt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return mt=!1,eT(t,e,n);mt=!!(t.flags&131072)}else mt=!1,we&&e.flags&1048576&&$v(e,il,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Da(t,e),t=e.pendingProps;var s=Ss(e,st.current);vs(e,n),s=bd(null,e,r,t,s,n);var i=Pd();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,vt(r)?(i=!0,rl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Sd(e),s.updater=$l,e.stateNode=s,s._reactInternals=e,hh(e,r,t,n),e=ph(null,e,r,!0,i,n)):(e.tag=0,we&&i&&vd(e),ut(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Da(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=gT(r),t=Ut(r,t),s){case 0:e=fh(null,e,r,t,n);break e;case 1:e=$g(null,e,r,t,n);break e;case 11:e=zg(null,e,r,t,n);break e;case 14:e=Bg(null,e,r,Ut(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ut(r,s),fh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ut(r,s),$g(t,e,r,s,n);case 3:e:{if(T0(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Qv(t,e),ll(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Rs(Error(U(423)),e),e=qg(t,e,r,n,s);break e}else if(r!==s){s=Rs(Error(U(424)),e),e=qg(t,e,r,n,s);break e}else for(Tt=Kn(e.stateNode.containerInfo.firstChild),xt=e,we=!0,Bt=null,n=Gv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(As(),r===s){e=wn(t,e,n);break e}ut(t,e,r,n)}e=e.child}return e;case 5:return Jv(e),t===null&&lh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,rh(r,s)?o=null:i!==null&&rh(r,i)&&(e.flags|=32),E0(t,e),ut(t,e,o,n),e.child;case 6:return t===null&&lh(e),null;case 13:return I0(t,e,n);case 4:return Ad(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ks(e,null,r,n):ut(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ut(r,s),zg(t,e,r,s,n);case 7:return ut(t,e,e.pendingProps,n),e.child;case 8:return ut(t,e,e.pendingProps.children,n),e.child;case 12:return ut(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ge(ol,r._currentValue),r._currentValue=o,i!==null)if(Ht(i.value,o)){if(i.children===s.children&&!yt.current){e=wn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=mn(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?u.next=u:(u.next=f.next,f.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),uh(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),uh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ut(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,vs(e,n),s=Lt(s),r=r(s),e.flags|=1,ut(t,e,r,n),e.child;case 14:return r=e.type,s=Ut(r,e.pendingProps),s=Ut(r.type,s),Bg(t,e,r,s,n);case 15:return _0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ut(r,s),Da(t,e),e.tag=1,vt(r)?(t=!0,rl(e)):t=!1,vs(e,n),m0(e,r,s),hh(e,r,s,n),ph(null,e,r,!0,t,n);case 19:return x0(t,e,n);case 22:return w0(t,e,n)}throw Error(U(156,e.tag))};function U0(t,e){return fv(t,e)}function pT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pt(t,e,n,r){return new pT(t,e,n,r)}function zd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function gT(t){if(typeof t=="function")return zd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===od)return 11;if(t===ad)return 14}return 2}function Xn(t,e){var n=t.alternate;return n===null?(n=Pt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Oa(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")zd(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ns:return Rr(n.children,s,i,e);case id:o=8,s|=8;break;case Vc:return t=Pt(12,n,e,s|2),t.elementType=Vc,t.lanes=i,t;case Oc:return t=Pt(13,n,e,s),t.elementType=Oc,t.lanes=i,t;case Mc:return t=Pt(19,n,e,s),t.elementType=Mc,t.lanes=i,t;case Jy:return Wl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ky:o=10;break e;case Qy:o=9;break e;case od:o=11;break e;case ad:o=14;break e;case Ln:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Pt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Rr(t,e,n,r){return t=Pt(7,t,r,e),t.lanes=n,t}function Wl(t,e,n,r){return t=Pt(22,t,r,e),t.elementType=Jy,t.lanes=n,t.stateNode={isHidden:!1},t}function yc(t,e,n){return t=Pt(6,t,null,e),t.lanes=n,t}function vc(t,e,n){return e=Pt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function mT(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xu(0),this.expirationTimes=Xu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Bd(t,e,n,r,s,i,o,l,u){return t=new mT(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Pt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sd(i),t}function yT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ts,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function z0(t){if(!t)return ir;t=t._reactInternals;e:{if(qr(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(vt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(vt(n))return zv(t,n,e)}return e}function B0(t,e,n,r,s,i,o,l,u){return t=Bd(n,r,!0,t,s,i,o,l,u),t.context=z0(null),n=t.current,r=ct(),s=Yn(n),i=mn(r,s),i.callback=e??null,Qn(n,i,s),t.current.lanes=s,yo(t,s,r),_t(t,r),t}function Gl(t,e,n,r){var s=e.current,i=ct(),o=Yn(s);return n=z0(n),e.context===null?e.context=n:e.pendingContext=n,e=mn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Qn(s,e,o),t!==null&&(qt(t,s,o,i),ba(t,s,o)),o}function ml(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function em(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function $d(t,e){em(t,e),(t=t.alternate)&&em(t,e)}function vT(){return null}var $0=typeof reportError=="function"?reportError:function(t){console.error(t)};function qd(t){this._internalRoot=t}Kl.prototype.render=qd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Gl(t,e,null,null)};Kl.prototype.unmount=qd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Or(function(){Gl(null,t,null,null)}),e[vn]=null}};function Kl(t){this._internalRoot=t}Kl.prototype.unstable_scheduleHydration=function(t){if(t){var e=wv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<On.length&&e!==0&&e<On[n].priority;n++);On.splice(n,0,t),n===0&&Tv(t)}};function Hd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ql(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function tm(){}function _T(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=ml(o);i.call(h)}}var o=B0(e,r,t,0,null,!1,!1,"",tm);return t._reactRootContainer=o,t[vn]=o.current,Qi(t.nodeType===8?t.parentNode:t),Or(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=ml(u);l.call(h)}}var u=Bd(t,0,!1,null,null,!1,!1,"",tm);return t._reactRootContainer=u,t[vn]=u.current,Qi(t.nodeType===8?t.parentNode:t),Or(function(){Gl(e,u,n,r)}),u}function Jl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=ml(o);l.call(u)}}Gl(e,o,t,s)}else o=_T(n,e,t,s,r);return ml(o)}vv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ei(e.pendingLanes);n!==0&&(cd(e,n|1),_t(e,Re()),!(ue&6)&&(bs=Re()+500,dr()))}break;case 13:Or(function(){var r=_n(t,1);if(r!==null){var s=ct();qt(r,t,1,s)}}),$d(t,1)}};hd=function(t){if(t.tag===13){var e=_n(t,134217728);if(e!==null){var n=ct();qt(e,t,134217728,n)}$d(t,134217728)}};_v=function(t){if(t.tag===13){var e=Yn(t),n=_n(t,e);if(n!==null){var r=ct();qt(n,t,e,r)}$d(t,e)}};wv=function(){return de};Ev=function(t,e){var n=de;try{return de=t,e()}finally{de=n}};Gc=function(t,e,n){switch(e){case"input":if(Uc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ul(r);if(!s)throw Error(U(90));Xy(r),Uc(r,s)}}}break;case"textarea":ev(t,n);break;case"select":e=n.value,e!=null&&ps(t,!!n.multiple,e,!1)}};av=jd;lv=Or;var wT={usingClientEntryPoint:!1,Events:[_o,os,Ul,iv,ov,jd]},mi={findFiberByHostInstance:Ir,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ET={bundleType:mi.bundleType,version:mi.version,rendererPackageName:mi.rendererPackageName,rendererConfig:mi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:kn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=hv(t),t===null?null:t.stateNode},findFiberByHostInstance:mi.findFiberByHostInstance||vT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ya=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ya.isDisabled&&ya.supportsFiber)try{Ol=ya.inject(ET),Jt=ya}catch{}}At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wT;At.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hd(e))throw Error(U(200));return yT(t,e,null,n)};At.createRoot=function(t,e){if(!Hd(t))throw Error(U(299));var n=!1,r="",s=$0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Bd(t,1,!1,null,null,n,!1,r,s),t[vn]=e.current,Qi(t.nodeType===8?t.parentNode:t),new qd(e)};At.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=hv(e),t=t===null?null:t.stateNode,t};At.flushSync=function(t){return Or(t)};At.hydrate=function(t,e,n){if(!Ql(e))throw Error(U(200));return Jl(null,t,e,!0,n)};At.hydrateRoot=function(t,e,n){if(!Hd(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=$0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=B0(e,null,t,1,n??null,s,!1,i,o),t[vn]=e.current,Qi(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Kl(e)};At.render=function(t,e,n){if(!Ql(e))throw Error(U(200));return Jl(null,t,e,!1,n)};At.unmountComponentAtNode=function(t){if(!Ql(t))throw Error(U(40));return t._reactRootContainer?(Or(function(){Jl(null,null,t,!1,function(){t._reactRootContainer=null,t[vn]=null})}),!0):!1};At.unstable_batchedUpdates=jd;At.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ql(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Jl(t,e,n,!1,r)};At.version="18.3.1-next-f1338f8080-20240426";function q0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(q0)}catch(t){console.error(t)}}q0(),qy.exports=At;var Yl=qy.exports,nm=Yl;Dc.createRoot=nm.createRoot,Dc.hydrateRoot=nm.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var TT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Z=(t,e)=>{const n=M.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:u,...h},f)=>M.createElement("svg",{ref:f,...TT,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${IT(t)}`,l].join(" "),...h},[...e.map(([g,m])=>M.createElement(g,m)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=Z("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=Z("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ST=Z("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=Z("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=Z("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=Z("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=Z("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=Z("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=Z("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=Z("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=Z("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rm=Z("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=Z("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=Z("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=Z("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=Z("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=Z("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kd=Z("Guitar",[["path",{d:"m20 7 1.7-1.7a1 1 0 0 0 0-1.4l-1.6-1.6a1 1 0 0 0-1.4 0L17 4v3Z",key:"15ixgv"}],["path",{d:"m17 7-5.1 5.1",key:"l9guh7"}],["circle",{cx:"11.5",cy:"12.5",r:".5",fill:"currentColor",key:"16onso"}],["path",{d:"M6 12a2 2 0 0 0 1.8-1.2l.4-.9C8.7 8.8 9.8 8 11 8c2.8 0 5 2.2 5 5 0 1.2-.8 2.3-1.9 2.8l-.9.4A2 2 0 0 0 12 18a4 4 0 0 1-4 4c-3.3 0-6-2.7-6-6a4 4 0 0 1 4-4",key:"x9fguj"}],["path",{d:"m6 16 2 2",key:"16qmzd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ah=Z("Hammer",[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=Z("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=Z("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=Z("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OT=Z("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=Z("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0=Z("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MT=Z("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jT=Z("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=Z("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=Z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=Z("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=Z("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zT=Z("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=Z("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=Z("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=Z("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=Z("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=Z("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=Z("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=Z("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=Z("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=Z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=Z("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=Z("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=Z("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=Z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var sm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},QT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},X0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,f=i>>2,g=(i&3)<<4|l>>4;let m=(l&15)<<2|h>>6,S=h&63;u||(S=64,o||(m=64)),r.push(n[f],n[g],n[m],n[S])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Y0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):QT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||g==null)throw new JT;const m=i<<2|l>>4;if(r.push(m),h!==64){const S=l<<4&240|h>>2;if(r.push(S),g!==64){const C=h<<6&192|g;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class JT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const YT=function(t){const e=Y0(t);return X0.encodeByteArray(e,!0)},vl=function(t){return YT(t).replace(/\./g,"")},Z0=function(t){try{return X0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT=()=>XT().__FIREBASE_DEFAULTS__,eI=()=>{if(typeof process>"u"||typeof sm>"u")return;const t=sm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},tI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Z0(t[1]);return e&&JSON.parse(e)},eu=()=>{try{return ZT()||eI()||tI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},e_=t=>{var e,n;return(n=(e=eu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},nI=t=>{const e=e_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},t_=()=>{var t;return(t=eu())===null||t===void 0?void 0:t.config},n_=t=>{var e;return(e=eu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[vl(JSON.stringify(n)),vl(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(it())}function oI(){var t;const e=(t=eu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function uI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cI(){const t=it();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function hI(){return!oI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dI(){try{return typeof indexedDB=="object"}catch{return!1}}function fI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI="FirebaseError";class Cn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=pI,Object.setPrototypeOf(this,Cn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Eo.prototype.create)}}class Eo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?gI(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Cn(s,l,r)}}function gI(t,e){return t.replace(mI,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const mI=/\{\$([^}]+)}/g;function yI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function _l(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(im(i)&&im(o)){if(!_l(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function im(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function To(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function vI(t,e){const n=new _I(t,e);return n.subscribe.bind(n)}class _I{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");wI(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=_c),s.error===void 0&&(s.error=_c),s.complete===void 0&&(s.complete=_c);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function _c(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(t){return t&&t._delegate?t._delegate:t}class Mr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new rI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(II(e))try{this.getOrInitializeService({instanceIdentifier:Tr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Tr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Tr){return this.instances.has(e)}getOptions(e=Tr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:TI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Tr){return this.component?this.component.multipleInstances?e:Tr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TI(t){return t===Tr?void 0:t}function II(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new EI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(oe||(oe={}));const SI={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},AI=oe.INFO,kI={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},CI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=kI[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Yd{constructor(e){this.name=e,this._logLevel=AI,this._logHandler=CI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}}const RI=(t,e)=>e.some(n=>t instanceof n);let om,am;function bI(){return om||(om=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PI(){return am||(am=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const r_=new WeakMap,Ch=new WeakMap,s_=new WeakMap,wc=new WeakMap,Xd=new WeakMap;function NI(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Zn(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&r_.set(n,t)}).catch(()=>{}),Xd.set(e,t),e}function DI(t){if(Ch.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Ch.set(t,e)}let Rh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ch.get(t);if(e==="objectStoreNames")return t.objectStoreNames||s_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function LI(t){Rh=t(Rh)}function VI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ec(this),e,...n);return s_.set(r,e.sort?e.sort():[e]),Zn(r)}:PI().includes(t)?function(...e){return t.apply(Ec(this),e),Zn(r_.get(this))}:function(...e){return Zn(t.apply(Ec(this),e))}}function OI(t){return typeof t=="function"?VI(t):(t instanceof IDBTransaction&&DI(t),RI(t,bI())?new Proxy(t,Rh):t)}function Zn(t){if(t instanceof IDBRequest)return NI(t);if(wc.has(t))return wc.get(t);const e=OI(t);return e!==t&&(wc.set(t,e),Xd.set(e,t)),e}const Ec=t=>Xd.get(t);function MI(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Zn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Zn(o.result),u.oldVersion,u.newVersion,Zn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const jI=["get","getKey","getAll","getAllKeys","count"],FI=["put","add","delete","clear"],Tc=new Map;function lm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Tc.get(e))return Tc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=FI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||jI.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return Tc.set(e,i),i}LI(t=>({...t,get:(e,n,r)=>lm(e,n)||t.get(e,n,r),has:(e,n)=>!!lm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(zI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function zI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bh="@firebase/app",um="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn=new Yd("@firebase/app"),BI="@firebase/app-compat",$I="@firebase/analytics-compat",qI="@firebase/analytics",HI="@firebase/app-check-compat",WI="@firebase/app-check",GI="@firebase/auth",KI="@firebase/auth-compat",QI="@firebase/database",JI="@firebase/data-connect",YI="@firebase/database-compat",XI="@firebase/functions",ZI="@firebase/functions-compat",e4="@firebase/installations",t4="@firebase/installations-compat",n4="@firebase/messaging",r4="@firebase/messaging-compat",s4="@firebase/performance",i4="@firebase/performance-compat",o4="@firebase/remote-config",a4="@firebase/remote-config-compat",l4="@firebase/storage",u4="@firebase/storage-compat",c4="@firebase/firestore",h4="@firebase/vertexai-preview",d4="@firebase/firestore-compat",f4="firebase",p4="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph="[DEFAULT]",g4={[bh]:"fire-core",[BI]:"fire-core-compat",[qI]:"fire-analytics",[$I]:"fire-analytics-compat",[WI]:"fire-app-check",[HI]:"fire-app-check-compat",[GI]:"fire-auth",[KI]:"fire-auth-compat",[QI]:"fire-rtdb",[JI]:"fire-data-connect",[YI]:"fire-rtdb-compat",[XI]:"fire-fn",[ZI]:"fire-fn-compat",[e4]:"fire-iid",[t4]:"fire-iid-compat",[n4]:"fire-fcm",[r4]:"fire-fcm-compat",[s4]:"fire-perf",[i4]:"fire-perf-compat",[o4]:"fire-rc",[a4]:"fire-rc-compat",[l4]:"fire-gcs",[u4]:"fire-gcs-compat",[c4]:"fire-fst",[d4]:"fire-fst-compat",[h4]:"fire-vertex","fire-js":"fire-js",[f4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl=new Map,m4=new Map,Nh=new Map;function cm(t,e){try{t.container.addComponent(e)}catch(n){Tn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ps(t){const e=t.name;if(Nh.has(e))return Tn.debug(`There were multiple attempts to register component ${e}.`),!1;Nh.set(e,t);for(const n of wl.values())cm(n,t);for(const n of m4.values())cm(n,t);return!0}function Zd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function dn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},er=new Eo("app","Firebase",y4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Mr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw er.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=p4;function i_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ph,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw er.create("bad-app-name",{appName:String(s)});if(n||(n=t_()),!n)throw er.create("no-options");const i=wl.get(s);if(i){if(_l(n,i.options)&&_l(r,i.config))return i;throw er.create("duplicate-app",{appName:s})}const o=new xI(s);for(const u of Nh.values())o.addComponent(u);const l=new v4(n,r,o);return wl.set(s,l),l}function o_(t=Ph){const e=wl.get(t);if(!e&&t===Ph&&t_())return i_();if(!e)throw er.create("no-app",{appName:t});return e}function tr(t,e,n){var r;let s=(r=g4[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Tn.warn(l.join(" "));return}Ps(new Mr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4="firebase-heartbeat-database",w4=1,oo="firebase-heartbeat-store";let Ic=null;function a_(){return Ic||(Ic=MI(_4,w4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(oo)}catch(n){console.warn(n)}}}}).catch(t=>{throw er.create("idb-open",{originalErrorMessage:t.message})})),Ic}async function E4(t){try{const n=(await a_()).transaction(oo),r=await n.objectStore(oo).get(l_(t));return await n.done,r}catch(e){if(e instanceof Cn)Tn.warn(e.message);else{const n=er.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Tn.warn(n.message)}}}async function hm(t,e){try{const r=(await a_()).transaction(oo,"readwrite");await r.objectStore(oo).put(e,l_(t)),await r.done}catch(n){if(n instanceof Cn)Tn.warn(n.message);else{const r=er.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Tn.warn(r.message)}}}function l_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4=1024,I4=30*24*60*60*1e3;class x4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new A4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=dm();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=I4}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Tn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=dm(),{heartbeatsToSend:r,unsentEntries:s}=S4(this._heartbeatsCache.heartbeats),i=vl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Tn.warn(n),""}}}function dm(){return new Date().toISOString().substring(0,10)}function S4(t,e=T4){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),fm(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),fm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class A4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dI()?fI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await E4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return hm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return hm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function fm(t){return vl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4(t){Ps(new Mr("platform-logger",e=>new UI(e),"PRIVATE")),Ps(new Mr("heartbeat",e=>new x4(e),"PRIVATE")),tr(bh,um,t),tr(bh,um,"esm2017"),tr("fire-js","")}k4("");var pm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var br,u_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,v){function w(){}w.prototype=v.prototype,T.D=v.prototype,T.prototype=new w,T.prototype.constructor=T,T.C=function(I,A,R){for(var x=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)x[ne-2]=arguments[ne];return v.prototype[A].apply(I,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,v,w){w||(w=0);var I=Array(16);if(typeof v=="string")for(var A=0;16>A;++A)I[A]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(A=0;16>A;++A)I[A]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=T.g[0],w=T.g[1],A=T.g[2];var R=T.g[3],x=v+(R^w&(A^R))+I[0]+3614090360&4294967295;v=w+(x<<7&4294967295|x>>>25),x=R+(A^v&(w^A))+I[1]+3905402710&4294967295,R=v+(x<<12&4294967295|x>>>20),x=A+(w^R&(v^w))+I[2]+606105819&4294967295,A=R+(x<<17&4294967295|x>>>15),x=w+(v^A&(R^v))+I[3]+3250441966&4294967295,w=A+(x<<22&4294967295|x>>>10),x=v+(R^w&(A^R))+I[4]+4118548399&4294967295,v=w+(x<<7&4294967295|x>>>25),x=R+(A^v&(w^A))+I[5]+1200080426&4294967295,R=v+(x<<12&4294967295|x>>>20),x=A+(w^R&(v^w))+I[6]+2821735955&4294967295,A=R+(x<<17&4294967295|x>>>15),x=w+(v^A&(R^v))+I[7]+4249261313&4294967295,w=A+(x<<22&4294967295|x>>>10),x=v+(R^w&(A^R))+I[8]+1770035416&4294967295,v=w+(x<<7&4294967295|x>>>25),x=R+(A^v&(w^A))+I[9]+2336552879&4294967295,R=v+(x<<12&4294967295|x>>>20),x=A+(w^R&(v^w))+I[10]+4294925233&4294967295,A=R+(x<<17&4294967295|x>>>15),x=w+(v^A&(R^v))+I[11]+2304563134&4294967295,w=A+(x<<22&4294967295|x>>>10),x=v+(R^w&(A^R))+I[12]+1804603682&4294967295,v=w+(x<<7&4294967295|x>>>25),x=R+(A^v&(w^A))+I[13]+4254626195&4294967295,R=v+(x<<12&4294967295|x>>>20),x=A+(w^R&(v^w))+I[14]+2792965006&4294967295,A=R+(x<<17&4294967295|x>>>15),x=w+(v^A&(R^v))+I[15]+1236535329&4294967295,w=A+(x<<22&4294967295|x>>>10),x=v+(A^R&(w^A))+I[1]+4129170786&4294967295,v=w+(x<<5&4294967295|x>>>27),x=R+(w^A&(v^w))+I[6]+3225465664&4294967295,R=v+(x<<9&4294967295|x>>>23),x=A+(v^w&(R^v))+I[11]+643717713&4294967295,A=R+(x<<14&4294967295|x>>>18),x=w+(R^v&(A^R))+I[0]+3921069994&4294967295,w=A+(x<<20&4294967295|x>>>12),x=v+(A^R&(w^A))+I[5]+3593408605&4294967295,v=w+(x<<5&4294967295|x>>>27),x=R+(w^A&(v^w))+I[10]+38016083&4294967295,R=v+(x<<9&4294967295|x>>>23),x=A+(v^w&(R^v))+I[15]+3634488961&4294967295,A=R+(x<<14&4294967295|x>>>18),x=w+(R^v&(A^R))+I[4]+3889429448&4294967295,w=A+(x<<20&4294967295|x>>>12),x=v+(A^R&(w^A))+I[9]+568446438&4294967295,v=w+(x<<5&4294967295|x>>>27),x=R+(w^A&(v^w))+I[14]+3275163606&4294967295,R=v+(x<<9&4294967295|x>>>23),x=A+(v^w&(R^v))+I[3]+4107603335&4294967295,A=R+(x<<14&4294967295|x>>>18),x=w+(R^v&(A^R))+I[8]+1163531501&4294967295,w=A+(x<<20&4294967295|x>>>12),x=v+(A^R&(w^A))+I[13]+2850285829&4294967295,v=w+(x<<5&4294967295|x>>>27),x=R+(w^A&(v^w))+I[2]+4243563512&4294967295,R=v+(x<<9&4294967295|x>>>23),x=A+(v^w&(R^v))+I[7]+1735328473&4294967295,A=R+(x<<14&4294967295|x>>>18),x=w+(R^v&(A^R))+I[12]+2368359562&4294967295,w=A+(x<<20&4294967295|x>>>12),x=v+(w^A^R)+I[5]+4294588738&4294967295,v=w+(x<<4&4294967295|x>>>28),x=R+(v^w^A)+I[8]+2272392833&4294967295,R=v+(x<<11&4294967295|x>>>21),x=A+(R^v^w)+I[11]+1839030562&4294967295,A=R+(x<<16&4294967295|x>>>16),x=w+(A^R^v)+I[14]+4259657740&4294967295,w=A+(x<<23&4294967295|x>>>9),x=v+(w^A^R)+I[1]+2763975236&4294967295,v=w+(x<<4&4294967295|x>>>28),x=R+(v^w^A)+I[4]+1272893353&4294967295,R=v+(x<<11&4294967295|x>>>21),x=A+(R^v^w)+I[7]+4139469664&4294967295,A=R+(x<<16&4294967295|x>>>16),x=w+(A^R^v)+I[10]+3200236656&4294967295,w=A+(x<<23&4294967295|x>>>9),x=v+(w^A^R)+I[13]+681279174&4294967295,v=w+(x<<4&4294967295|x>>>28),x=R+(v^w^A)+I[0]+3936430074&4294967295,R=v+(x<<11&4294967295|x>>>21),x=A+(R^v^w)+I[3]+3572445317&4294967295,A=R+(x<<16&4294967295|x>>>16),x=w+(A^R^v)+I[6]+76029189&4294967295,w=A+(x<<23&4294967295|x>>>9),x=v+(w^A^R)+I[9]+3654602809&4294967295,v=w+(x<<4&4294967295|x>>>28),x=R+(v^w^A)+I[12]+3873151461&4294967295,R=v+(x<<11&4294967295|x>>>21),x=A+(R^v^w)+I[15]+530742520&4294967295,A=R+(x<<16&4294967295|x>>>16),x=w+(A^R^v)+I[2]+3299628645&4294967295,w=A+(x<<23&4294967295|x>>>9),x=v+(A^(w|~R))+I[0]+4096336452&4294967295,v=w+(x<<6&4294967295|x>>>26),x=R+(w^(v|~A))+I[7]+1126891415&4294967295,R=v+(x<<10&4294967295|x>>>22),x=A+(v^(R|~w))+I[14]+2878612391&4294967295,A=R+(x<<15&4294967295|x>>>17),x=w+(R^(A|~v))+I[5]+4237533241&4294967295,w=A+(x<<21&4294967295|x>>>11),x=v+(A^(w|~R))+I[12]+1700485571&4294967295,v=w+(x<<6&4294967295|x>>>26),x=R+(w^(v|~A))+I[3]+2399980690&4294967295,R=v+(x<<10&4294967295|x>>>22),x=A+(v^(R|~w))+I[10]+4293915773&4294967295,A=R+(x<<15&4294967295|x>>>17),x=w+(R^(A|~v))+I[1]+2240044497&4294967295,w=A+(x<<21&4294967295|x>>>11),x=v+(A^(w|~R))+I[8]+1873313359&4294967295,v=w+(x<<6&4294967295|x>>>26),x=R+(w^(v|~A))+I[15]+4264355552&4294967295,R=v+(x<<10&4294967295|x>>>22),x=A+(v^(R|~w))+I[6]+2734768916&4294967295,A=R+(x<<15&4294967295|x>>>17),x=w+(R^(A|~v))+I[13]+1309151649&4294967295,w=A+(x<<21&4294967295|x>>>11),x=v+(A^(w|~R))+I[4]+4149444226&4294967295,v=w+(x<<6&4294967295|x>>>26),x=R+(w^(v|~A))+I[11]+3174756917&4294967295,R=v+(x<<10&4294967295|x>>>22),x=A+(v^(R|~w))+I[2]+718787259&4294967295,A=R+(x<<15&4294967295|x>>>17),x=w+(R^(A|~v))+I[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(A+(x<<21&4294967295|x>>>11))&4294967295,T.g[2]=T.g[2]+A&4294967295,T.g[3]=T.g[3]+R&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var w=v-this.blockSize,I=this.B,A=this.h,R=0;R<v;){if(A==0)for(;R<=w;)s(this,T,R),R+=this.blockSize;if(typeof T=="string"){for(;R<v;)if(I[A++]=T.charCodeAt(R++),A==this.blockSize){s(this,I),A=0;break}}else for(;R<v;)if(I[A++]=T[R++],A==this.blockSize){s(this,I),A=0;break}}this.h=A,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var w=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=w&255,w/=256;for(this.u(T),T=Array(16),v=w=0;4>v;++v)for(var I=0;32>I;I+=8)T[w++]=this.g[v]>>>I&255;return T};function i(T,v){var w=l;return Object.prototype.hasOwnProperty.call(w,T)?w[T]:w[T]=v(T)}function o(T,v){this.h=v;for(var w=[],I=!0,A=T.length-1;0<=A;A--){var R=T[A]|0;I&&R==v||(w[A]=R,I=!1)}this.g=w}var l={};function u(T){return-128<=T&&128>T?i(T,function(v){return new o([v|0],0>v?-1:0)}):new o([T|0],0>T?-1:0)}function h(T){if(isNaN(T)||!isFinite(T))return g;if(0>T)return V(h(-T));for(var v=[],w=1,I=0;T>=w;I++)v[I]=T/w|0,w*=4294967296;return new o(v,0)}function f(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return V(f(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=h(Math.pow(v,8)),I=g,A=0;A<T.length;A+=8){var R=Math.min(8,T.length-A),x=parseInt(T.substring(A,A+R),v);8>R?(R=h(Math.pow(v,R)),I=I.j(R).add(h(x))):(I=I.j(w),I=I.add(h(x)))}return I}var g=u(0),m=u(1),S=u(16777216);t=o.prototype,t.m=function(){if(b(this))return-V(this).m();for(var T=0,v=1,w=0;w<this.g.length;w++){var I=this.i(w);T+=(0<=I?I:4294967296+I)*v,v*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(C(this))return"0";if(b(this))return"-"+V(this).toString(T);for(var v=h(Math.pow(T,6)),w=this,I="";;){var A=N(w,v).g;w=_(w,A.j(v));var R=((0<w.g.length?w.g[0]:w.h)>>>0).toString(T);if(w=A,C(w))return R+I;for(;6>R.length;)R="0"+R;I=R+I}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function C(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function b(T){return T.h==-1}t.l=function(T){return T=_(this,T),b(T)?-1:C(T)?0:1};function V(T){for(var v=T.g.length,w=[],I=0;I<v;I++)w[I]=~T.g[I];return new o(w,~T.h).add(m)}t.abs=function(){return b(this)?V(this):this},t.add=function(T){for(var v=Math.max(this.g.length,T.g.length),w=[],I=0,A=0;A<=v;A++){var R=I+(this.i(A)&65535)+(T.i(A)&65535),x=(R>>>16)+(this.i(A)>>>16)+(T.i(A)>>>16);I=x>>>16,R&=65535,x&=65535,w[A]=x<<16|R}return new o(w,w[w.length-1]&-2147483648?-1:0)};function _(T,v){return T.add(V(v))}t.j=function(T){if(C(this)||C(T))return g;if(b(this))return b(T)?V(this).j(V(T)):V(V(this).j(T));if(b(T))return V(this.j(V(T)));if(0>this.l(S)&&0>T.l(S))return h(this.m()*T.m());for(var v=this.g.length+T.g.length,w=[],I=0;I<2*v;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(var A=0;A<T.g.length;A++){var R=this.i(I)>>>16,x=this.i(I)&65535,ne=T.i(A)>>>16,De=T.i(A)&65535;w[2*I+2*A]+=x*De,E(w,2*I+2*A),w[2*I+2*A+1]+=R*De,E(w,2*I+2*A+1),w[2*I+2*A+1]+=x*ne,E(w,2*I+2*A+1),w[2*I+2*A+2]+=R*ne,E(w,2*I+2*A+2)}for(I=0;I<v;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=v;I<2*v;I++)w[I]=0;return new o(w,0)};function E(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function k(T,v){this.g=T,this.h=v}function N(T,v){if(C(v))throw Error("division by zero");if(C(T))return new k(g,g);if(b(T))return v=N(V(T),v),new k(V(v.g),V(v.h));if(b(v))return v=N(T,V(v)),new k(V(v.g),v.h);if(30<T.g.length){if(b(T)||b(v))throw Error("slowDivide_ only works with positive integers.");for(var w=m,I=v;0>=I.l(T);)w=F(w),I=F(I);var A=z(w,1),R=z(I,1);for(I=z(I,2),w=z(w,2);!C(I);){var x=R.add(I);0>=x.l(T)&&(A=A.add(w),R=x),I=z(I,1),w=z(w,1)}return v=_(T,A.j(v)),new k(A,v)}for(A=g;0<=T.l(v);){for(w=Math.max(1,Math.floor(T.m()/v.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),R=h(w),x=R.j(v);b(x)||0<x.l(T);)w-=I,R=h(w),x=R.j(v);C(R)&&(R=m),A=A.add(R),T=_(T,x)}return new k(A,T)}t.A=function(T){return N(this,T).h},t.and=function(T){for(var v=Math.max(this.g.length,T.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)&T.i(I);return new o(w,this.h&T.h)},t.or=function(T){for(var v=Math.max(this.g.length,T.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)|T.i(I);return new o(w,this.h|T.h)},t.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)^T.i(I);return new o(w,this.h^T.h)};function F(T){for(var v=T.g.length+1,w=[],I=0;I<v;I++)w[I]=T.i(I)<<1|T.i(I-1)>>>31;return new o(w,T.h)}function z(T,v){var w=v>>5;v%=32;for(var I=T.g.length-w,A=[],R=0;R<I;R++)A[R]=0<v?T.i(R+w)>>>v|T.i(R+w+1)<<32-v:T.i(R+w);return new o(A,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,u_=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,br=o}).apply(typeof pm<"u"?pm:typeof self<"u"?self:typeof window<"u"?window:{});var va=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var c_,Ii,h_,Ma,Dh,d_,f_,p_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,c,d){return a==Array.prototype||a==Object.prototype||(a[c]=d.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof va=="object"&&va];for(var c=0;c<a.length;++c){var d=a[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function s(a,c){if(c)e:{var d=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var P=a[y];if(!(P in d))break e;d=d[P]}a=a[a.length-1],y=d[a],c=c(y),c!=y&&c!=null&&e(d,a,{configurable:!0,writable:!0,value:c})}}function i(a,c){a instanceof String&&(a+="");var d=0,y=!1,P={next:function(){if(!y&&d<a.length){var D=d++;return{value:c(D,a[D]),done:!1}}return y=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}s("Array.prototype.values",function(a){return a||function(){return i(this,function(c,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var c=typeof a;return c=c!="object"?c:a?Array.isArray(a)?"array":c:"null",c=="array"||c=="object"&&typeof a.length=="number"}function h(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function f(a,c,d){return a.call.apply(a.bind,arguments)}function g(a,c,d){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,y),a.apply(c,P)}}return function(){return a.apply(c,arguments)}}function m(a,c,d){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,m.apply(null,arguments)}function S(a,c){var d=Array.prototype.slice.call(arguments,1);return function(){var y=d.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function C(a,c){function d(){}d.prototype=c.prototype,a.aa=c.prototype,a.prototype=new d,a.prototype.constructor=a,a.Qb=function(y,P,D){for(var $=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)$[pe-2]=arguments[pe];return c.prototype[P].apply(y,$)}}function b(a){const c=a.length;if(0<c){const d=Array(c);for(let y=0;y<c;y++)d[y]=a[y];return d}return[]}function V(a,c){for(let d=1;d<arguments.length;d++){const y=arguments[d];if(u(y)){const P=a.length||0,D=y.length||0;a.length=P+D;for(let $=0;$<D;$++)a[P+$]=y[$]}else a.push(y)}}class _{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function E(a){return/^[\s\xa0]*$/.test(a)}function k(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function N(a){return N[" "](a),a}N[" "]=function(){};var F=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function z(a,c,d){for(const y in a)c.call(d,a[y],y,a)}function T(a,c){for(const d in a)c.call(void 0,a[d],d,a)}function v(a){const c={};for(const d in a)c[d]=a[d];return c}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(a,c){let d,y;for(let P=1;P<arguments.length;P++){y=arguments[P];for(d in y)a[d]=y[d];for(let D=0;D<w.length;D++)d=w[D],Object.prototype.hasOwnProperty.call(y,d)&&(a[d]=y[d])}}function A(a){var c=1;a=a.split(":");const d=[];for(;0<c&&a.length;)d.push(a.shift()),c--;return a.length&&d.push(a.join(":")),d}function R(a){l.setTimeout(()=>{throw a},0)}function x(){var a=B;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class ne{constructor(){this.h=this.g=null}add(c,d){const y=De.get();y.set(c,d),this.h?this.h.next=y:this.g=y,this.h=y}}var De=new _(()=>new Ot,a=>a.reset());class Ot{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let H,L=!1,B=new ne,q=()=>{const a=l.Promise.resolve(void 0);H=()=>{a.then(X)}};var X=()=>{for(var a;a=x();){try{a.h.call(a.g)}catch(d){R(d)}var c=De;c.j(a),100>c.h&&(c.h++,a.next=c.g,c.g=a)}L=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var Se=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};l.addEventListener("test",d,c),l.removeEventListener("test",d,c)}catch{}return a}();function ot(a,c){if(se.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var d=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget){if(F){e:{try{N(c.nodeName);var P=!0;break e}catch{}P=!1}P||(c=null)}}else d=="mouseover"?c=a.fromElement:d=="mouseout"&&(c=a.toElement);this.relatedTarget=c,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Ct[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&ot.aa.h.call(this)}}C(ot,se);var Ct={2:"touch",3:"pen",4:"mouse"};ot.prototype.h=function(){ot.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var sn="closure_listenable_"+(1e6*Math.random()|0),vw=0;function _w(a,c,d,y,P){this.listener=a,this.proxy=null,this.src=c,this.type=d,this.capture=!!y,this.ha=P,this.key=++vw,this.da=this.fa=!1}function Mo(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function jo(a){this.src=a,this.g={},this.h=0}jo.prototype.add=function(a,c,d,y,P){var D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);var $=Su(a,c,y,P);return-1<$?(c=a[$],d||(c.fa=!1)):(c=new _w(c,this.src,D,!!y,P),c.fa=d,a.push(c)),c};function xu(a,c){var d=c.type;if(d in a.g){var y=a.g[d],P=Array.prototype.indexOf.call(y,c,void 0),D;(D=0<=P)&&Array.prototype.splice.call(y,P,1),D&&(Mo(c),a.g[d].length==0&&(delete a.g[d],a.h--))}}function Su(a,c,d,y){for(var P=0;P<a.length;++P){var D=a[P];if(!D.da&&D.listener==c&&D.capture==!!d&&D.ha==y)return P}return-1}var Au="closure_lm_"+(1e6*Math.random()|0),ku={};function Qf(a,c,d,y,P){if(Array.isArray(c)){for(var D=0;D<c.length;D++)Qf(a,c[D],d,y,P);return null}return d=Xf(d),a&&a[sn]?a.K(c,d,h(y)?!!y.capture:!1,P):ww(a,c,d,!1,y,P)}function ww(a,c,d,y,P,D){if(!c)throw Error("Invalid event type");var $=h(P)?!!P.capture:!!P,pe=Ru(a);if(pe||(a[Au]=pe=new jo(a)),d=pe.add(c,d,y,$,D),d.proxy)return d;if(y=Ew(),d.proxy=y,y.src=a,y.listener=d,a.addEventListener)Se||(P=$),P===void 0&&(P=!1),a.addEventListener(c.toString(),y,P);else if(a.attachEvent)a.attachEvent(Yf(c.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Ew(){function a(d){return c.call(a.src,a.listener,d)}const c=Tw;return a}function Jf(a,c,d,y,P){if(Array.isArray(c))for(var D=0;D<c.length;D++)Jf(a,c[D],d,y,P);else y=h(y)?!!y.capture:!!y,d=Xf(d),a&&a[sn]?(a=a.i,c=String(c).toString(),c in a.g&&(D=a.g[c],d=Su(D,d,y,P),-1<d&&(Mo(D[d]),Array.prototype.splice.call(D,d,1),D.length==0&&(delete a.g[c],a.h--)))):a&&(a=Ru(a))&&(c=a.g[c.toString()],a=-1,c&&(a=Su(c,d,y,P)),(d=-1<a?c[a]:null)&&Cu(d))}function Cu(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[sn])xu(c.i,a);else{var d=a.type,y=a.proxy;c.removeEventListener?c.removeEventListener(d,y,a.capture):c.detachEvent?c.detachEvent(Yf(d),y):c.addListener&&c.removeListener&&c.removeListener(y),(d=Ru(c))?(xu(d,a),d.h==0&&(d.src=null,c[Au]=null)):Mo(a)}}}function Yf(a){return a in ku?ku[a]:ku[a]="on"+a}function Tw(a,c){if(a.da)a=!0;else{c=new ot(c,this);var d=a.listener,y=a.ha||a.src;a.fa&&Cu(a),a=d.call(y,c)}return a}function Ru(a){return a=a[Au],a instanceof jo?a:null}var bu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xf(a){return typeof a=="function"?a:(a[bu]||(a[bu]=function(c){return a.handleEvent(c)}),a[bu])}function Qe(){ae.call(this),this.i=new jo(this),this.M=this,this.F=null}C(Qe,ae),Qe.prototype[sn]=!0,Qe.prototype.removeEventListener=function(a,c,d,y){Jf(this,a,c,d,y)};function at(a,c){var d,y=a.F;if(y)for(d=[];y;y=y.F)d.push(y);if(a=a.M,y=c.type||c,typeof c=="string")c=new se(c,a);else if(c instanceof se)c.target=c.target||a;else{var P=c;c=new se(y,a),I(c,P)}if(P=!0,d)for(var D=d.length-1;0<=D;D--){var $=c.g=d[D];P=Fo($,y,!0,c)&&P}if($=c.g=a,P=Fo($,y,!0,c)&&P,P=Fo($,y,!1,c)&&P,d)for(D=0;D<d.length;D++)$=c.g=d[D],P=Fo($,y,!1,c)&&P}Qe.prototype.N=function(){if(Qe.aa.N.call(this),this.i){var a=this.i,c;for(c in a.g){for(var d=a.g[c],y=0;y<d.length;y++)Mo(d[y]);delete a.g[c],a.h--}}this.F=null},Qe.prototype.K=function(a,c,d,y){return this.i.add(String(a),c,!1,d,y)},Qe.prototype.L=function(a,c,d,y){return this.i.add(String(a),c,!0,d,y)};function Fo(a,c,d,y){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();for(var P=!0,D=0;D<c.length;++D){var $=c[D];if($&&!$.da&&$.capture==d){var pe=$.listener,Ue=$.ha||$.src;$.fa&&xu(a.i,$),P=pe.call(Ue,y)!==!1&&P}}return P&&!y.defaultPrevented}function Zf(a,c,d){if(typeof a=="function")d&&(a=m(a,d));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(a,c||0)}function ep(a){a.g=Zf(()=>{a.g=null,a.i&&(a.i=!1,ep(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class Iw extends ae{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:ep(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Js(a){ae.call(this),this.h=a,this.g={}}C(Js,ae);var tp=[];function np(a){z(a.g,function(c,d){this.g.hasOwnProperty(d)&&Cu(c)},a),a.g={}}Js.prototype.N=function(){Js.aa.N.call(this),np(this)},Js.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pu=l.JSON.stringify,xw=l.JSON.parse,Sw=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Nu(){}Nu.prototype.h=null;function rp(a){return a.h||(a.h=a.i())}function sp(){}var Ys={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Du(){se.call(this,"d")}C(Du,se);function Lu(){se.call(this,"c")}C(Lu,se);var mr={},ip=null;function Uo(){return ip=ip||new Qe}mr.La="serverreachability";function op(a){se.call(this,mr.La,a)}C(op,se);function Xs(a){const c=Uo();at(c,new op(c))}mr.STAT_EVENT="statevent";function ap(a,c){se.call(this,mr.STAT_EVENT,a),this.stat=c}C(ap,se);function lt(a){const c=Uo();at(c,new ap(c,a))}mr.Ma="timingevent";function lp(a,c){se.call(this,mr.Ma,a),this.size=c}C(lp,se);function Zs(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},c)}function ei(){this.g=!0}ei.prototype.xa=function(){this.g=!1};function Aw(a,c,d,y,P,D){a.info(function(){if(a.g)if(D)for(var $="",pe=D.split("&"),Ue=0;Ue<pe.length;Ue++){var ce=pe[Ue].split("=");if(1<ce.length){var Je=ce[0];ce=ce[1];var Ye=Je.split("_");$=2<=Ye.length&&Ye[1]=="type"?$+(Je+"="+ce+"&"):$+(Je+"=redacted&")}}else $=null;else $=D;return"XMLHTTP REQ ("+y+") [attempt "+P+"]: "+c+`
`+d+`
`+$})}function kw(a,c,d,y,P,D,$){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+P+"]: "+c+`
`+d+`
`+D+" "+$})}function Gr(a,c,d,y){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+Rw(a,d)+(y?" "+y:"")})}function Cw(a,c){a.info(function(){return"TIMEOUT: "+c})}ei.prototype.info=function(){};function Rw(a,c){if(!a.g)return c;if(!c)return null;try{var d=JSON.parse(c);if(d){for(a=0;a<d.length;a++)if(Array.isArray(d[a])){var y=d[a];if(!(2>y.length)){var P=y[1];if(Array.isArray(P)&&!(1>P.length)){var D=P[0];if(D!="noop"&&D!="stop"&&D!="close")for(var $=1;$<P.length;$++)P[$]=""}}}}return Pu(d)}catch{return c}}var zo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},up={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vu;function Bo(){}C(Bo,Nu),Bo.prototype.g=function(){return new XMLHttpRequest},Bo.prototype.i=function(){return{}},Vu=new Bo;function Rn(a,c,d,y){this.j=a,this.i=c,this.l=d,this.R=y||1,this.U=new Js(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cp}function cp(){this.i=null,this.g="",this.h=!1}var hp={},Ou={};function Mu(a,c,d){a.L=1,a.v=Wo(on(c)),a.m=d,a.P=!0,dp(a,null)}function dp(a,c){a.F=Date.now(),$o(a),a.A=on(a.v);var d=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),Ap(d.i,"t",y),a.C=0,d=a.j.J,a.h=new cp,a.g=qp(a.j,d?c:null,!a.m),0<a.O&&(a.M=new Iw(m(a.Y,a,a.g),a.O)),c=a.U,d=a.g,y=a.ca;var P="readystatechange";Array.isArray(P)||(P&&(tp[0]=P.toString()),P=tp);for(var D=0;D<P.length;D++){var $=Qf(d,P[D],y||c.handleEvent,!1,c.h||c);if(!$)break;c.g[$.key]=$}c=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,c)):(a.u="GET",a.g.ea(a.A,a.u,null,c)),Xs(),Aw(a.i,a.u,a.A,a.l,a.R,a.m)}Rn.prototype.ca=function(a){a=a.target;const c=this.M;c&&an(a)==3?c.j():this.Y(a)},Rn.prototype.Y=function(a){try{if(a==this.g)e:{const Ye=an(this.g);var c=this.g.Ba();const Jr=this.g.Z();if(!(3>Ye)&&(Ye!=3||this.g&&(this.h.h||this.g.oa()||Dp(this.g)))){this.J||Ye!=4||c==7||(c==8||0>=Jr?Xs(3):Xs(2)),ju(this);var d=this.g.Z();this.X=d;t:if(fp(this)){var y=Dp(this.g);a="";var P=y.length,D=an(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){yr(this),ti(this);var $="";break t}this.h.i=new l.TextDecoder}for(c=0;c<P;c++)this.h.h=!0,a+=this.h.i.decode(y[c],{stream:!(D&&c==P-1)});y.length=0,this.h.g+=a,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=d==200,kw(this.i,this.u,this.A,this.l,this.R,Ye,d),this.o){if(this.T&&!this.K){t:{if(this.g){var pe,Ue=this.g;if((pe=Ue.g?Ue.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(pe)){var ce=pe;break t}}ce=null}if(d=ce)Gr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fu(this,d);else{this.o=!1,this.s=3,lt(12),yr(this),ti(this);break e}}if(this.P){d=!0;let Mt;for(;!this.J&&this.C<$.length;)if(Mt=bw(this,$),Mt==Ou){Ye==4&&(this.s=4,lt(14),d=!1),Gr(this.i,this.l,null,"[Incomplete Response]");break}else if(Mt==hp){this.s=4,lt(15),Gr(this.i,this.l,$,"[Invalid Chunk]"),d=!1;break}else Gr(this.i,this.l,Mt,null),Fu(this,Mt);if(fp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ye!=4||$.length!=0||this.h.h||(this.s=1,lt(16),d=!1),this.o=this.o&&d,!d)Gr(this.i,this.l,$,"[Invalid Chunked Response]"),yr(this),ti(this);else if(0<$.length&&!this.W){this.W=!0;var Je=this.j;Je.g==this&&Je.ba&&!Je.M&&(Je.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),Hu(Je),Je.M=!0,lt(11))}}else Gr(this.i,this.l,$,null),Fu(this,$);Ye==4&&yr(this),this.o&&!this.J&&(Ye==4?Up(this.j,this):(this.o=!1,$o(this)))}else Gw(this.g),d==400&&0<$.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),yr(this),ti(this)}}}catch{}finally{}};function fp(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function bw(a,c){var d=a.C,y=c.indexOf(`
`,d);return y==-1?Ou:(d=Number(c.substring(d,y)),isNaN(d)?hp:(y+=1,y+d>c.length?Ou:(c=c.slice(y,y+d),a.C=y+d,c)))}Rn.prototype.cancel=function(){this.J=!0,yr(this)};function $o(a){a.S=Date.now()+a.I,pp(a,a.I)}function pp(a,c){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Zs(m(a.ba,a),c)}function ju(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Rn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(Cw(this.i,this.A),this.L!=2&&(Xs(),lt(17)),yr(this),this.s=2,ti(this)):pp(this,this.S-a)};function ti(a){a.j.G==0||a.J||Up(a.j,a)}function yr(a){ju(a);var c=a.M;c&&typeof c.ma=="function"&&c.ma(),a.M=null,np(a.U),a.g&&(c=a.g,a.g=null,c.abort(),c.ma())}function Fu(a,c){try{var d=a.j;if(d.G!=0&&(d.g==a||Uu(d.h,a))){if(!a.K&&Uu(d.h,a)&&d.G==3){try{var y=d.Da.g.parse(c)}catch{y=null}if(Array.isArray(y)&&y.length==3){var P=y;if(P[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<a.F)Xo(d),Jo(d);else break e;qu(d),lt(18)}}else d.za=P[1],0<d.za-d.T&&37500>P[2]&&d.F&&d.v==0&&!d.C&&(d.C=Zs(m(d.Za,d),6e3));if(1>=yp(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else _r(d,11)}else if((a.K||d.g==a)&&Xo(d),!E(c))for(P=d.Da.g.parse(c),c=0;c<P.length;c++){let ce=P[c];if(d.T=ce[0],ce=ce[1],d.G==2)if(ce[0]=="c"){d.K=ce[1],d.ia=ce[2];const Je=ce[3];Je!=null&&(d.la=Je,d.j.info("VER="+d.la));const Ye=ce[4];Ye!=null&&(d.Aa=Ye,d.j.info("SVER="+d.Aa));const Jr=ce[5];Jr!=null&&typeof Jr=="number"&&0<Jr&&(y=1.5*Jr,d.L=y,d.j.info("backChannelRequestTimeoutMs_="+y)),y=d;const Mt=a.g;if(Mt){const ea=Mt.g?Mt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ea){var D=y.h;D.g||ea.indexOf("spdy")==-1&&ea.indexOf("quic")==-1&&ea.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(zu(D,D.h),D.h=null))}if(y.D){const Wu=Mt.g?Mt.g.getResponseHeader("X-HTTP-Session-Id"):null;Wu&&(y.ya=Wu,me(y.I,y.D,Wu))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-a.F,d.j.info("Handshake RTT: "+d.R+"ms")),y=d;var $=a;if(y.qa=$p(y,y.J?y.ia:null,y.W),$.K){vp(y.h,$);var pe=$,Ue=y.L;Ue&&(pe.I=Ue),pe.B&&(ju(pe),$o(pe)),y.g=$}else jp(y);0<d.i.length&&Yo(d)}else ce[0]!="stop"&&ce[0]!="close"||_r(d,7);else d.G==3&&(ce[0]=="stop"||ce[0]=="close"?ce[0]=="stop"?_r(d,7):$u(d):ce[0]!="noop"&&d.l&&d.l.ta(ce),d.v=0)}}Xs(4)}catch{}}var Pw=class{constructor(a,c){this.g=a,this.map=c}};function gp(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function yp(a){return a.h?1:a.g?a.g.size:0}function Uu(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function zu(a,c){a.g?a.g.add(c):a.h=c}function vp(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}gp.prototype.cancel=function(){if(this.i=_p(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function _p(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const d of a.g.values())c=c.concat(d.D);return c}return b(a.i)}function Nw(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var c=[],d=a.length,y=0;y<d;y++)c.push(a[y]);return c}c=[],d=0;for(y in a)c[d++]=a[y];return c}function Dw(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var c=[];a=a.length;for(var d=0;d<a;d++)c.push(d);return c}c=[],d=0;for(const y in a)c[d++]=y;return c}}}function wp(a,c){if(a.forEach&&typeof a.forEach=="function")a.forEach(c,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,c,void 0);else for(var d=Dw(a),y=Nw(a),P=y.length,D=0;D<P;D++)c.call(void 0,y[D],d&&d[D],a)}var Ep=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lw(a,c){if(a){a=a.split("&");for(var d=0;d<a.length;d++){var y=a[d].indexOf("="),P=null;if(0<=y){var D=a[d].substring(0,y);P=a[d].substring(y+1)}else D=a[d];c(D,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function vr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof vr){this.h=a.h,qo(this,a.j),this.o=a.o,this.g=a.g,Ho(this,a.s),this.l=a.l;var c=a.i,d=new si;d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),Tp(this,d),this.m=a.m}else a&&(c=String(a).match(Ep))?(this.h=!1,qo(this,c[1]||"",!0),this.o=ni(c[2]||""),this.g=ni(c[3]||"",!0),Ho(this,c[4]),this.l=ni(c[5]||"",!0),Tp(this,c[6]||"",!0),this.m=ni(c[7]||"")):(this.h=!1,this.i=new si(null,this.h))}vr.prototype.toString=function(){var a=[],c=this.j;c&&a.push(ri(c,Ip,!0),":");var d=this.g;return(d||c=="file")&&(a.push("//"),(c=this.o)&&a.push(ri(c,Ip,!0),"@"),a.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&a.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(ri(d,d.charAt(0)=="/"?Mw:Ow,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",ri(d,Fw)),a.join("")};function on(a){return new vr(a)}function qo(a,c,d){a.j=d?ni(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function Ho(a,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);a.s=c}else a.s=null}function Tp(a,c,d){c instanceof si?(a.i=c,Uw(a.i,a.h)):(d||(c=ri(c,jw)),a.i=new si(c,a.h))}function me(a,c,d){a.i.set(c,d)}function Wo(a){return me(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ni(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ri(a,c,d){return typeof a=="string"?(a=encodeURI(a).replace(c,Vw),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Vw(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Ip=/[#\/\?@]/g,Ow=/[#\?:]/g,Mw=/[#\?]/g,jw=/[#\?@]/g,Fw=/#/g;function si(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function bn(a){a.g||(a.g=new Map,a.h=0,a.i&&Lw(a.i,function(c,d){a.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}t=si.prototype,t.add=function(a,c){bn(this),this.i=null,a=Kr(this,a);var d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(c),this.h+=1,this};function xp(a,c){bn(a),c=Kr(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function Sp(a,c){return bn(a),c=Kr(a,c),a.g.has(c)}t.forEach=function(a,c){bn(this),this.g.forEach(function(d,y){d.forEach(function(P){a.call(c,P,y,this)},this)},this)},t.na=function(){bn(this);const a=Array.from(this.g.values()),c=Array.from(this.g.keys()),d=[];for(let y=0;y<c.length;y++){const P=a[y];for(let D=0;D<P.length;D++)d.push(c[y])}return d},t.V=function(a){bn(this);let c=[];if(typeof a=="string")Sp(this,a)&&(c=c.concat(this.g.get(Kr(this,a))));else{a=Array.from(this.g.values());for(let d=0;d<a.length;d++)c=c.concat(a[d])}return c},t.set=function(a,c){return bn(this),this.i=null,a=Kr(this,a),Sp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=this.V(a),0<a.length?String(a[0]):c):c};function Ap(a,c,d){xp(a,c),0<d.length&&(a.i=null,a.g.set(Kr(a,c),b(d)),a.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(var d=0;d<c.length;d++){var y=c[d];const D=encodeURIComponent(String(y)),$=this.V(y);for(y=0;y<$.length;y++){var P=D;$[y]!==""&&(P+="="+encodeURIComponent(String($[y]))),a.push(P)}}return this.i=a.join("&")};function Kr(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function Uw(a,c){c&&!a.j&&(bn(a),a.i=null,a.g.forEach(function(d,y){var P=y.toLowerCase();y!=P&&(xp(this,y),Ap(this,P,d))},a)),a.j=c}function zw(a,c){const d=new ei;if(l.Image){const y=new Image;y.onload=S(Pn,d,"TestLoadImage: loaded",!0,c,y),y.onerror=S(Pn,d,"TestLoadImage: error",!1,c,y),y.onabort=S(Pn,d,"TestLoadImage: abort",!1,c,y),y.ontimeout=S(Pn,d,"TestLoadImage: timeout",!1,c,y),l.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else c(!1)}function Bw(a,c){const d=new ei,y=new AbortController,P=setTimeout(()=>{y.abort(),Pn(d,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:y.signal}).then(D=>{clearTimeout(P),D.ok?Pn(d,"TestPingServer: ok",!0,c):Pn(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(P),Pn(d,"TestPingServer: error",!1,c)})}function Pn(a,c,d,y,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),y(d)}catch{}}function $w(){this.g=new Sw}function qw(a,c,d){const y=d||"";try{wp(a,function(P,D){let $=P;h(P)&&($=Pu(P)),c.push(y+D+"="+encodeURIComponent($))})}catch(P){throw c.push(y+"type="+encodeURIComponent("_badmap")),P}}function Go(a){this.l=a.Ub||null,this.j=a.eb||!1}C(Go,Nu),Go.prototype.g=function(){return new Ko(this.l,this.j)},Go.prototype.i=function(a){return function(){return a}}({});function Ko(a,c){Qe.call(this),this.D=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Ko,Qe),t=Ko.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=c,this.readyState=1,oi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(c.body=a),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ii(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,oi(this)),this.g&&(this.readyState=3,oi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;kp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function kp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?ii(this):oi(this),this.readyState==3&&kp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,ii(this))},t.Qa=function(a){this.g&&(this.response=a,ii(this))},t.ga=function(){this.g&&ii(this)};function ii(a){a.readyState=4,a.l=null,a.j=null,a.v=null,oi(a)}t.setRequestHeader=function(a,c){this.u.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=c.next();return a.join(`\r
`)};function oi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ko.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Cp(a){let c="";return z(a,function(d,y){c+=y,c+=":",c+=d,c+=`\r
`}),c}function Bu(a,c,d){e:{for(y in d){var y=!1;break e}y=!0}y||(d=Cp(d),typeof a=="string"?d!=null&&encodeURIComponent(String(d)):me(a,c,d))}function Ae(a){Qe.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ae,Qe);var Hw=/^https?$/i,Ww=["POST","PUT"];t=Ae.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,c,d,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vu.g(),this.v=this.o?rp(this.o):rp(Vu),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(D){Rp(this,D);return}if(a=d||"",d=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var P in y)d.set(P,y[P]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const D of y.keys())d.set(D,y.get(D));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(d.keys()).find(D=>D.toLowerCase()=="content-type"),P=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Ww,c,void 0))||y||P||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,$]of d)this.g.setRequestHeader(D,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Np(this),this.u=!0,this.g.send(a),this.u=!1}catch(D){Rp(this,D)}};function Rp(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.m=5,bp(a),Qo(a)}function bp(a){a.A||(a.A=!0,at(a,"complete"),at(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,at(this,"complete"),at(this,"abort"),Qo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qo(this,!0)),Ae.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Pp(this):this.bb())},t.bb=function(){Pp(this)};function Pp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||an(a)!=4||a.Z()!=2)){if(a.u&&an(a)==4)Zf(a.Ea,0,a);else if(at(a,"readystatechange"),an(a)==4){a.h=!1;try{const $=a.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var d;if(!(d=c)){var y;if(y=$===0){var P=String(a.D).match(Ep)[1]||null;!P&&l.self&&l.self.location&&(P=l.self.location.protocol.slice(0,-1)),y=!Hw.test(P?P.toLowerCase():"")}d=y}if(d)at(a,"complete"),at(a,"success");else{a.m=6;try{var D=2<an(a)?a.g.statusText:""}catch{D=""}a.l=D+" ["+a.Z()+"]",bp(a)}}finally{Qo(a)}}}}function Qo(a,c){if(a.g){Np(a);const d=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,c||at(a,"ready");try{d.onreadystatechange=y}catch{}}}function Np(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function an(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<an(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),xw(c)}};function Dp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Gw(a){const c={};a=(a.g&&2<=an(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(E(a[y]))continue;var d=A(a[y]);const P=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const D=c[P]||[];c[P]=D,D.push(d)}T(c,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ai(a,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||c}function Lp(a){this.Aa=0,this.i=[],this.j=new ei,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ai("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ai("baseRetryDelayMs",5e3,a),this.cb=ai("retryDelaySeedMs",1e4,a),this.Wa=ai("forwardChannelMaxRetries",2,a),this.wa=ai("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new gp(a&&a.concurrentRequestLimit),this.Da=new $w,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Lp.prototype,t.la=8,t.G=1,t.connect=function(a,c,d,y){lt(0),this.W=a,this.H=c||{},d&&y!==void 0&&(this.H.OSID=d,this.H.OAID=y),this.F=this.X,this.I=$p(this,null,this.W),Yo(this)};function $u(a){if(Vp(a),a.G==3){var c=a.U++,d=on(a.I);if(me(d,"SID",a.K),me(d,"RID",c),me(d,"TYPE","terminate"),li(a,d),c=new Rn(a,a.j,c),c.L=2,c.v=Wo(on(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=c.v,d=!0),d||(c.g=qp(c.j,null),c.g.ea(c.v)),c.F=Date.now(),$o(c)}Bp(a)}function Jo(a){a.g&&(Hu(a),a.g.cancel(),a.g=null)}function Vp(a){Jo(a),a.u&&(l.clearTimeout(a.u),a.u=null),Xo(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Yo(a){if(!mp(a.h)&&!a.s){a.s=!0;var c=a.Ga;H||q(),L||(H(),L=!0),B.add(c,a),a.B=0}}function Kw(a,c){return yp(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=c.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Zs(m(a.Ga,a,c),zp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const P=new Rn(this,this.j,a);let D=this.o;if(this.S&&(D?(D=v(D),I(D,this.S)):D=this.S),this.m!==null||this.O||(P.H=D,D=null),this.P)e:{for(var c=0,d=0;d<this.i.length;d++){t:{var y=this.i[d];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(c+=y,4096<c){c=d;break e}if(c===4096||d===this.i.length-1){c=d+1;break e}}c=1e3}else c=1e3;c=Mp(this,P,c),d=on(this.I),me(d,"RID",a),me(d,"CVER",22),this.D&&me(d,"X-HTTP-Session-Id",this.D),li(this,d),D&&(this.O?c="headers="+encodeURIComponent(String(Cp(D)))+"&"+c:this.m&&Bu(d,this.m,D)),zu(this.h,P),this.Ua&&me(d,"TYPE","init"),this.P?(me(d,"$req",c),me(d,"SID","null"),P.T=!0,Mu(P,d,null)):Mu(P,d,c),this.G=2}}else this.G==3&&(a?Op(this,a):this.i.length==0||mp(this.h)||Op(this))};function Op(a,c){var d;c?d=c.l:d=a.U++;const y=on(a.I);me(y,"SID",a.K),me(y,"RID",d),me(y,"AID",a.T),li(a,y),a.m&&a.o&&Bu(y,a.m,a.o),d=new Rn(a,a.j,d,a.B+1),a.m===null&&(d.H=a.o),c&&(a.i=c.D.concat(a.i)),c=Mp(a,d,1e3),d.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),zu(a.h,d),Mu(d,y,c)}function li(a,c){a.H&&z(a.H,function(d,y){me(c,y,d)}),a.l&&wp({},function(d,y){me(c,y,d)})}function Mp(a,c,d){d=Math.min(a.i.length,d);var y=a.l?m(a.l.Na,a.l,a):null;e:{var P=a.i;let D=-1;for(;;){const $=["count="+d];D==-1?0<d?(D=P[0].g,$.push("ofs="+D)):D=0:$.push("ofs="+D);let pe=!0;for(let Ue=0;Ue<d;Ue++){let ce=P[Ue].g;const Je=P[Ue].map;if(ce-=D,0>ce)D=Math.max(0,P[Ue].g-100),pe=!1;else try{qw(Je,$,"req"+ce+"_")}catch{y&&y(Je)}}if(pe){y=$.join("&");break e}}}return a=a.i.splice(0,d),c.D=a,y}function jp(a){if(!a.g&&!a.u){a.Y=1;var c=a.Fa;H||q(),L||(H(),L=!0),B.add(c,a),a.v=0}}function qu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Zs(m(a.Fa,a),zp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Fp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Zs(m(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),Jo(this),Fp(this))};function Hu(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Fp(a){a.g=new Rn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var c=on(a.qa);me(c,"RID","rpc"),me(c,"SID",a.K),me(c,"AID",a.T),me(c,"CI",a.F?"0":"1"),!a.F&&a.ja&&me(c,"TO",a.ja),me(c,"TYPE","xmlhttp"),li(a,c),a.m&&a.o&&Bu(c,a.m,a.o),a.L&&(a.g.I=a.L);var d=a.g;a=a.ia,d.L=1,d.v=Wo(on(c)),d.m=null,d.P=!0,dp(d,a)}t.Za=function(){this.C!=null&&(this.C=null,Jo(this),qu(this),lt(19))};function Xo(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Up(a,c){var d=null;if(a.g==c){Xo(a),Hu(a),a.g=null;var y=2}else if(Uu(a.h,c))d=c.D,vp(a.h,c),y=1;else return;if(a.G!=0){if(c.o)if(y==1){d=c.m?c.m.length:0,c=Date.now()-c.F;var P=a.B;y=Uo(),at(y,new lp(y,d)),Yo(a)}else jp(a);else if(P=c.s,P==3||P==0&&0<c.X||!(y==1&&Kw(a,c)||y==2&&qu(a)))switch(d&&0<d.length&&(c=a.h,c.i=c.i.concat(d)),P){case 1:_r(a,5);break;case 4:_r(a,10);break;case 3:_r(a,6);break;default:_r(a,2)}}}function zp(a,c){let d=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(d*=2),d*c}function _r(a,c){if(a.j.info("Error code "+c),c==2){var d=m(a.fb,a),y=a.Xa;const P=!y;y=new vr(y||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||qo(y,"https"),Wo(y),P?zw(y.toString(),d):Bw(y.toString(),d)}else lt(2);a.G=0,a.l&&a.l.sa(c),Bp(a),Vp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function Bp(a){if(a.G=0,a.ka=[],a.l){const c=_p(a.h);(c.length!=0||a.i.length!=0)&&(V(a.ka,c),V(a.ka,a.i),a.h.i.length=0,b(a.i),a.i.length=0),a.l.ra()}}function $p(a,c,d){var y=d instanceof vr?on(d):new vr(d);if(y.g!="")c&&(y.g=c+"."+y.g),Ho(y,y.s);else{var P=l.location;y=P.protocol,c=c?c+"."+P.hostname:P.hostname,P=+P.port;var D=new vr(null);y&&qo(D,y),c&&(D.g=c),P&&Ho(D,P),d&&(D.l=d),y=D}return d=a.D,c=a.ya,d&&c&&me(y,d,c),me(y,"VER",a.la),li(a,y),y}function qp(a,c,d){if(c&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Ca&&!a.pa?new Ae(new Go({eb:d})):new Ae(a.pa),c.Ha(a.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hp(){}t=Hp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Zo(){}Zo.prototype.g=function(a,c){return new wt(a,c)};function wt(a,c){Qe.call(this),this.g=new Lp(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(a?a["X-WebChannel-Client-Profile"]=c.va:a={"X-WebChannel-Client-Profile":c.va}),this.g.S=a,(a=c&&c.Sb)&&!E(a)&&(this.g.m=a),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!E(c)&&(this.g.D=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new Qr(this)}C(wt,Qe),wt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wt.prototype.close=function(){$u(this.g)},wt.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.u&&(d={},d.__data__=Pu(a),a=d);c.i.push(new Pw(c.Ya++,a)),c.G==3&&Yo(c)},wt.prototype.N=function(){this.g.l=null,delete this.j,$u(this.g),delete this.g,wt.aa.N.call(this)};function Wp(a){Du.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const d in c){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}C(Wp,Du);function Gp(){Lu.call(this),this.status=1}C(Gp,Lu);function Qr(a){this.g=a}C(Qr,Hp),Qr.prototype.ua=function(){at(this.g,"a")},Qr.prototype.ta=function(a){at(this.g,new Wp(a))},Qr.prototype.sa=function(a){at(this.g,new Gp)},Qr.prototype.ra=function(){at(this.g,"b")},Zo.prototype.createWebChannel=Zo.prototype.g,wt.prototype.send=wt.prototype.o,wt.prototype.open=wt.prototype.m,wt.prototype.close=wt.prototype.close,p_=function(){return new Zo},f_=function(){return Uo()},d_=mr,Dh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zo.NO_ERROR=0,zo.TIMEOUT=8,zo.HTTP_ERROR=6,Ma=zo,up.COMPLETE="complete",h_=up,sp.EventType=Ys,Ys.OPEN="a",Ys.CLOSE="b",Ys.ERROR="c",Ys.MESSAGE="d",Qe.prototype.listen=Qe.prototype.K,Ii=sp,Ae.prototype.listenOnce=Ae.prototype.L,Ae.prototype.getLastError=Ae.prototype.Ka,Ae.prototype.getLastErrorCode=Ae.prototype.Ba,Ae.prototype.getStatus=Ae.prototype.Z,Ae.prototype.getResponseJson=Ae.prototype.Oa,Ae.prototype.getResponseText=Ae.prototype.oa,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Ha,c_=Ae}).apply(typeof va<"u"?va:typeof self<"u"?self:typeof window<"u"?window:{});const gm="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tt.UNAUTHENTICATED=new tt(null),tt.GOOGLE_CREDENTIALS=new tt("google-credentials-uid"),tt.FIRST_PARTY=new tt("first-party-uid"),tt.MOCK_USER=new tt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qs="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr=new Yd("@firebase/firestore");function yi(){return jr.logLevel}function K(t,...e){if(jr.logLevel<=oe.DEBUG){const n=e.map(ef);jr.debug(`Firestore (${qs}): ${t}`,...n)}}function In(t,...e){if(jr.logLevel<=oe.ERROR){const n=e.map(ef);jr.error(`Firestore (${qs}): ${t}`,...n)}}function Ns(t,...e){if(jr.logLevel<=oe.WARN){const n=e.map(ef);jr.warn(`Firestore (${qs}): ${t}`,...n)}}function ef(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t="Unexpected state"){const e=`FIRESTORE (${qs}) INTERNAL ASSERTION FAILED: `+t;throw In(e),new Error(e)}function fe(t,e){t||Y()}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends Cn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class C4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(tt.UNAUTHENTICATED))}shutdown(){}}class R4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class b4{constructor(e){this.t=e,this.currentUser=tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){fe(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Pr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Pr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Pr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(fe(typeof r.accessToken=="string"),new g_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string"),new tt(e)}}class P4{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=tt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class N4{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new P4(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class D4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class L4{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){fe(this.o===void 0);const r=i=>{i.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(fe(typeof n.token=="string"),this.R=n.token,new D4(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V4(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=V4(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function he(t,e){return t<e?-1:t>e?1:0}function Ds(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new G(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Oe.fromMillis(Date.now())}static fromDate(e){return Oe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Oe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ee(e)}static min(){return new ee(new Oe(0,0))}static max(){return new ee(new Oe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(),r===void 0?r=e.length-n:r>e.length-n&&Y(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ao.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ao?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ve extends ao{construct(e,n,r){return new ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ve(n)}static emptyPath(){return new ve([])}}const O4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $e extends ao{construct(e,n,r){return new $e(e,n,r)}static isValidIdentifier(e){return O4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$e.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new $e(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new G(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new G(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new G(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $e(n)}static emptyPath(){return new $e([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(ve.fromString(e))}static fromName(e){return new Q(ve.fromString(e).popFirst(5))}static empty(){return new Q(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new ve(e.slice()))}}function M4(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ee.fromTimestamp(r===1e9?new Oe(n+1,0):new Oe(n,r));return new or(s,Q.empty(),e)}function j4(t){return new or(t.readTime,t.key,-1)}class or{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new or(ee.min(),Q.empty(),-1)}static max(){return new or(ee.max(),Q.empty(),-1)}}function F4(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class z4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Io(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==U4)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,r)=>{n(e)})}static reject(e){return new j((n,r)=>{r(e)})}static waitFor(e){return new j((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=j.resolve(!1);for(const r of e)n=n.next(s=>s?j.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new j((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(f=>{o[h]=f,++l,l===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new j((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function B4(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function xo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}tf.oe=-1;function tu(t){return t==null}function El(t){return t===0&&1/t==-1/0}function $4(t){return typeof t=="number"&&Number.isInteger(t)&&!El(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Hr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function y_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e,n){this.comparator=e,this.root=n||Be.EMPTY}insert(e,n){return new xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Be.BLACK,null,null))}remove(e){return new xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Be.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _a(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _a(this.root,e,this.comparator,!1)}getReverseIterator(){return new _a(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _a(this.root,e,this.comparator,!0)}}class _a{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Be{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Be.RED,this.left=s??Be.EMPTY,this.right=i??Be.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Be(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Be.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Be.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Be.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Be.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();const e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}}Be.EMPTY=null,Be.RED=!0,Be.BLACK=!1;Be.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Be(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e){this.comparator=e,this.data=new xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ym(this.data.getIterator())}getIteratorFrom(e){return new ym(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof He)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new He(this.comparator);return n.data=e,n}}class ym{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.fields=e,e.sort($e.comparator)}static empty(){return new It([])}unionWith(e){let n=new He($e.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new It(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ds(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new v_("Invalid base64 string: "+i):i}}(e);return new Ke(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ke(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ke.EMPTY_BYTE_STRING=new Ke("");const q4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ar(t){if(fe(!!t),typeof t=="string"){let e=0;const n=q4.exec(t);if(fe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ce(t.seconds),nanos:Ce(t.nanos)}}function Ce(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Fr(t){return typeof t=="string"?Ke.fromBase64String(t):Ke.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function rf(t){const e=t.mapValue.fields.__previous_value__;return nf(e)?rf(e):e}function lo(t){const e=ar(t.mapValue.fields.__local_write_time__.timestampValue);return new Oe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e,n,r,s,i,o,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}class uo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new uo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof uo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa={mapValue:{}};function Ur(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?nf(t)?4:G4(t)?9007199254740991:W4(t)?10:11:Y()}function rn(t,e){if(t===e)return!0;const n=Ur(t);if(n!==Ur(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return lo(t).isEqual(lo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ar(s.timestampValue),l=ar(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Fr(s.bytesValue).isEqual(Fr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ce(s.geoPointValue.latitude)===Ce(i.geoPointValue.latitude)&&Ce(s.geoPointValue.longitude)===Ce(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ce(s.integerValue)===Ce(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ce(s.doubleValue),l=Ce(i.doubleValue);return o===l?El(o)===El(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ds(t.arrayValue.values||[],e.arrayValue.values||[],rn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(mm(o)!==mm(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!rn(o[u],l[u])))return!1;return!0}(t,e);default:return Y()}}function co(t,e){return(t.values||[]).find(n=>rn(n,e))!==void 0}function Ls(t,e){if(t===e)return 0;const n=Ur(t),r=Ur(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Ce(i.integerValue||i.doubleValue),u=Ce(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return vm(t.timestampValue,e.timestampValue);case 4:return vm(lo(t),lo(e));case 5:return he(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Fr(i),u=Fr(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const f=he(l[h],u[h]);if(f!==0)return f}return he(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=he(Ce(i.latitude),Ce(o.latitude));return l!==0?l:he(Ce(i.longitude),Ce(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return _m(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,h,f;const g=i.fields||{},m=o.fields||{},S=(l=g.value)===null||l===void 0?void 0:l.arrayValue,C=(u=m.value)===null||u===void 0?void 0:u.arrayValue,b=he(((h=S==null?void 0:S.values)===null||h===void 0?void 0:h.length)||0,((f=C==null?void 0:C.values)===null||f===void 0?void 0:f.length)||0);return b!==0?b:_m(S,C)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===wa.mapValue&&o===wa.mapValue)return 0;if(i===wa.mapValue)return 1;if(o===wa.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),h=o.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let g=0;g<u.length&&g<f.length;++g){const m=he(u[g],f[g]);if(m!==0)return m;const S=Ls(l[u[g]],h[f[g]]);if(S!==0)return S}return he(u.length,f.length)}(t.mapValue,e.mapValue);default:throw Y()}}function vm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=ar(t),r=ar(e),s=he(n.seconds,r.seconds);return s!==0?s:he(n.nanos,r.nanos)}function _m(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ls(n[s],r[s]);if(i)return i}return he(n.length,r.length)}function Vs(t){return Lh(t)}function Lh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ar(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Fr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Lh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Lh(n.fields[o])}`;return s+"}"}(t.mapValue):Y()}function wm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Vh(t){return!!t&&"integerValue"in t}function sf(t){return!!t&&"arrayValue"in t}function Em(t){return!!t&&"nullValue"in t}function Tm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ja(t){return!!t&&"mapValue"in t}function W4(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Oi(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Hr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Oi(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Oi(t.arrayValue.values[n]);return e}return Object.assign({},t)}function G4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.value=e}static empty(){return new gt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ja(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Oi(n)}setAll(e){let n=$e.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Oi(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());ja(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return rn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ja(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Hr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new gt(Oi(this.value))}}function __(t){const e=[];return Hr(t.fields,(n,r)=>{const s=new $e([n]);if(ja(r)){const i=__(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new It(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new rt(e,0,ee.min(),ee.min(),ee.min(),gt.empty(),0)}static newFoundDocument(e,n,r,s){return new rt(e,1,n,ee.min(),r,s,0)}static newNoDocument(e,n){return new rt(e,2,n,ee.min(),ee.min(),gt.empty(),0)}static newUnknownDocument(e,n){return new rt(e,3,n,ee.min(),ee.min(),gt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,n){this.position=e,this.inclusive=n}}function Im(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Q.comparator(Q.fromName(o.referenceValue),n.key):r=Ls(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function xm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!rn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n="asc"){this.field=e,this.dir=n}}function K4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{}class Ne extends w_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new J4(e,n,r):n==="array-contains"?new Z4(e,r):n==="in"?new e2(e,r):n==="not-in"?new t2(e,r):n==="array-contains-any"?new n2(e,r):new Ne(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Y4(e,r):new X4(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ls(n,this.value)):n!==null&&Ur(this.value)===Ur(n)&&this.matchesComparison(Ls(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wt extends w_{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Wt(e,n)}matches(e){return E_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function E_(t){return t.op==="and"}function T_(t){return Q4(t)&&E_(t)}function Q4(t){for(const e of t.filters)if(e instanceof Wt)return!1;return!0}function Oh(t){if(t instanceof Ne)return t.field.canonicalString()+t.op.toString()+Vs(t.value);if(T_(t))return t.filters.map(e=>Oh(e)).join(",");{const e=t.filters.map(n=>Oh(n)).join(",");return`${t.op}(${e})`}}function I_(t,e){return t instanceof Ne?function(r,s){return s instanceof Ne&&r.op===s.op&&r.field.isEqual(s.field)&&rn(r.value,s.value)}(t,e):t instanceof Wt?function(r,s){return s instanceof Wt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&I_(o,s.filters[l]),!0):!1}(t,e):void Y()}function x_(t){return t instanceof Ne?function(n){return`${n.field.canonicalString()} ${n.op} ${Vs(n.value)}`}(t):t instanceof Wt?function(n){return n.op.toString()+" {"+n.getFilters().map(x_).join(" ,")+"}"}(t):"Filter"}class J4 extends Ne{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class Y4 extends Ne{constructor(e,n){super(e,"in",n),this.keys=S_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class X4 extends Ne{constructor(e,n){super(e,"not-in",n),this.keys=S_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function S_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}class Z4 extends Ne{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sf(n)&&co(n.arrayValue,this.value)}}class e2 extends Ne{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&co(this.value.arrayValue,n)}}class t2 extends Ne{constructor(e,n){super(e,"not-in",n)}matches(e){if(co(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!co(this.value.arrayValue,n)}}class n2 extends Ne{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>co(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function Sm(t,e=null,n=[],r=[],s=null,i=null,o=null){return new r2(t,e,n,r,s,i,o)}function of(t){const e=te(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Oh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),tu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Vs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Vs(r)).join(",")),e.ue=n}return e.ue}function af(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!K4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!I_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!xm(t.startAt,e.startAt)&&xm(t.endAt,e.endAt)}function Mh(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function s2(t,e,n,r,s,i,o,l){return new Hs(t,e,n,r,s,i,o,l)}function lf(t){return new Hs(t)}function Am(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function A_(t){return t.collectionGroup!==null}function Mi(t){const e=te(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new He($e.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new ho(i,r))}),n.has($e.keyField().canonicalString())||e.ce.push(new ho($e.keyField(),r))}return e.ce}function Xt(t){const e=te(t);return e.le||(e.le=i2(e,Mi(t))),e.le}function i2(t,e){if(t.limitType==="F")return Sm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ho(s.field,i)});const n=t.endAt?new Tl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Tl(t.startAt.position,t.startAt.inclusive):null;return Sm(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function jh(t,e){const n=t.filters.concat([e]);return new Hs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Il(t,e,n){return new Hs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function nu(t,e){return af(Xt(t),Xt(e))&&t.limitType===e.limitType}function k_(t){return`${of(Xt(t))}|lt:${t.limitType}`}function Xr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>x_(s)).join(", ")}]`),tu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Vs(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Vs(s)).join(",")),`Target(${r})`}(Xt(t))}; limitType=${t.limitType})`}function ru(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Q.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Mi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const h=Im(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,Mi(r),s)||r.endAt&&!function(o,l,u){const h=Im(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,Mi(r),s))}(t,e)}function o2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function C_(t){return(e,n)=>{let r=!1;for(const s of Mi(t)){const i=a2(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function a2(t,e,n){const r=t.field.isKeyField()?Q.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),h=l.data.field(i);return u!==null&&h!==null?Ls(u,h):Y()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Hr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return y_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=new xe(Q.comparator);function xn(){return l2}const R_=new xe(Q.comparator);function xi(...t){let e=R_;for(const n of t)e=e.insert(n.key,n);return e}function b_(t){let e=R_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ar(){return ji()}function P_(){return ji()}function ji(){return new Ws(t=>t.toString(),(t,e)=>t.isEqual(e))}const u2=new xe(Q.comparator),c2=new He(Q.comparator);function ie(...t){let e=c2;for(const n of t)e=e.add(n);return e}const h2=new He(he);function d2(){return h2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:El(e)?"-0":e}}function N_(t){return{integerValue:""+t}}function f2(t,e){return $4(e)?N_(e):uf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(){this._=void 0}}function p2(t,e,n){return t instanceof xl?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&nf(i)&&(i=rf(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof fo?L_(t,e):t instanceof po?V_(t,e):function(s,i){const o=D_(s,i),l=km(o)+km(s.Pe);return Vh(o)&&Vh(s.Pe)?N_(l):uf(s.serializer,l)}(t,e)}function g2(t,e,n){return t instanceof fo?L_(t,e):t instanceof po?V_(t,e):n}function D_(t,e){return t instanceof Sl?function(r){return Vh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class xl extends su{}class fo extends su{constructor(e){super(),this.elements=e}}function L_(t,e){const n=O_(e);for(const r of t.elements)n.some(s=>rn(s,r))||n.push(r);return{arrayValue:{values:n}}}class po extends su{constructor(e){super(),this.elements=e}}function V_(t,e){let n=O_(e);for(const r of t.elements)n=n.filter(s=>!rn(s,r));return{arrayValue:{values:n}}}class Sl extends su{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function km(t){return Ce(t.integerValue||t.doubleValue)}function O_(t){return sf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function m2(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof fo&&s instanceof fo||r instanceof po&&s instanceof po?Ds(r.elements,s.elements,rn):r instanceof Sl&&s instanceof Sl?rn(r.Pe,s.Pe):r instanceof xl&&s instanceof xl}(t.transform,e.transform)}class y2{constructor(e,n){this.version=e,this.transformResults=n}}class Dt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Dt}static exists(e){return new Dt(void 0,e)}static updateTime(e){return new Dt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class iu{}function M_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new cf(t.key,Dt.none()):new So(t.key,t.data,Dt.none());{const n=t.data,r=gt.empty();let s=new He($e.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new fr(t.key,r,new It(s.toArray()),Dt.none())}}function v2(t,e,n){t instanceof So?function(s,i,o){const l=s.value.clone(),u=Rm(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof fr?function(s,i,o){if(!Fa(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Rm(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(j_(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Fi(t,e,n,r){return t instanceof So?function(i,o,l,u){if(!Fa(i.precondition,o))return l;const h=i.value.clone(),f=bm(i.fieldTransforms,u,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof fr?function(i,o,l,u){if(!Fa(i.precondition,o))return l;const h=bm(i.fieldTransforms,u,o),f=o.data;return f.setAll(j_(i)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(i,o,l){return Fa(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function _2(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=D_(r.transform,s||null);i!=null&&(n===null&&(n=gt.empty()),n.set(r.field,i))}return n||null}function Cm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ds(r,s,(i,o)=>m2(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class So extends iu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class fr extends iu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function j_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Rm(t,e,n){const r=new Map;fe(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,g2(o,l,n[s]))}return r}function bm(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,p2(i,o,e))}return r}class cf extends iu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class w2 extends iu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&v2(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Fi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Fi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=P_();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=M_(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&Ds(this.mutations,e.mutations,(n,r)=>Cm(n,r))&&Ds(this.baseMutations,e.baseMutations,(n,r)=>Cm(n,r))}}class hf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){fe(e.mutations.length===r.length);let s=function(){return u2}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new hf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be,le;function x2(t){switch(t){default:return Y();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0}}function F_(t){if(t===void 0)return In("GRPC error has no .code"),O.UNKNOWN;switch(t){case be.OK:return O.OK;case be.CANCELLED:return O.CANCELLED;case be.UNKNOWN:return O.UNKNOWN;case be.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case be.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case be.INTERNAL:return O.INTERNAL;case be.UNAVAILABLE:return O.UNAVAILABLE;case be.UNAUTHENTICATED:return O.UNAUTHENTICATED;case be.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case be.NOT_FOUND:return O.NOT_FOUND;case be.ALREADY_EXISTS:return O.ALREADY_EXISTS;case be.PERMISSION_DENIED:return O.PERMISSION_DENIED;case be.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case be.ABORTED:return O.ABORTED;case be.OUT_OF_RANGE:return O.OUT_OF_RANGE;case be.UNIMPLEMENTED:return O.UNIMPLEMENTED;case be.DATA_LOSS:return O.DATA_LOSS;default:return Y()}}(le=be||(be={}))[le.OK=0]="OK",le[le.CANCELLED=1]="CANCELLED",le[le.UNKNOWN=2]="UNKNOWN",le[le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",le[le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",le[le.NOT_FOUND=5]="NOT_FOUND",le[le.ALREADY_EXISTS=6]="ALREADY_EXISTS",le[le.PERMISSION_DENIED=7]="PERMISSION_DENIED",le[le.UNAUTHENTICATED=16]="UNAUTHENTICATED",le[le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",le[le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",le[le.ABORTED=10]="ABORTED",le[le.OUT_OF_RANGE=11]="OUT_OF_RANGE",le[le.UNIMPLEMENTED=12]="UNIMPLEMENTED",le[le.INTERNAL=13]="INTERNAL",le[le.UNAVAILABLE=14]="UNAVAILABLE",le[le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=new br([4294967295,4294967295],0);function Pm(t){const e=S2().encode(t),n=new u_;return n.update(e),new Uint8Array(n.digest())}function Nm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new br([n,r],0),new br([s,i],0)]}class df{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Si(`Invalid padding: ${n}`);if(r<0)throw new Si(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Si(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Si(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=br.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(br.fromNumber(r)));return s.compare(A2)===1&&(s=new br([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Pm(e),[r,s]=Nm(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new df(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Pm(e),[r,s]=Nm(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Si extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ao.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ou(ee.min(),s,new xe(he),xn(),ie())}}class Ao{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ao(r,n,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class U_{constructor(e,n){this.targetId=e,this.me=n}}class z_{constructor(e,n,r=Ke.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Dm{constructor(){this.fe=0,this.ge=Vm(),this.pe=Ke.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ie(),n=ie(),r=ie();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Y()}}),new Ao(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Vm()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class k2{constructor(e){this.Le=e,this.Be=new Map,this.ke=xn(),this.qe=Lm(),this.Qe=new xe(he)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Y()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Mh(i))if(r===0){const o=new Q(i.path);this.Ue(n,o,rt.newNoDocument(o,ee.min()))}else fe(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Fr(r).toUint8Array()}catch(u){if(u instanceof v_)return Ns("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new df(o,s,i)}catch(u){return Ns(u instanceof Si?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&Mh(l.target)){const u=new Q(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,rt.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ie();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new ou(e,n,this.Qe,this.ke,r);return this.ke=xn(),this.qe=Lm(),this.Qe=new xe(he),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Dm,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new He(he),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Dm),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Lm(){return new xe(Q.comparator)}function Vm(){return new xe(Q.comparator)}const C2={asc:"ASCENDING",desc:"DESCENDING"},R2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},b2={and:"AND",or:"OR"};class P2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Fh(t,e){return t.useProto3Json||tu(e)?e:{value:e}}function Al(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function B_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function N2(t,e){return Al(t,e.toTimestamp())}function Zt(t){return fe(!!t),ee.fromTimestamp(function(n){const r=ar(n);return new Oe(r.seconds,r.nanos)}(t))}function ff(t,e){return Uh(t,e).canonicalString()}function Uh(t,e){const n=function(s){return new ve(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function $_(t){const e=ve.fromString(t);return fe(K_(e)),e}function zh(t,e){return ff(t.databaseId,e.path)}function xc(t,e){const n=$_(e);if(n.get(1)!==t.databaseId.projectId)throw new G(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(H_(n))}function q_(t,e){return ff(t.databaseId,e)}function D2(t){const e=$_(t);return e.length===4?ve.emptyPath():H_(e)}function Bh(t){return new ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function H_(t){return fe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Om(t,e,n){return{name:zh(t,e),fields:n.value.mapValue.fields}}function L2(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,f){return h.useProto3Json?(fe(f===void 0||typeof f=="string"),Ke.fromBase64String(f||"")):(fe(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Ke.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const f=h.code===void 0?O.UNKNOWN:F_(h.code);return new G(f,h.message||"")}(o);n=new z_(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=xc(t,r.document.name),i=Zt(r.document.updateTime),o=r.document.createTime?Zt(r.document.createTime):ee.min(),l=new gt({mapValue:{fields:r.document.fields}}),u=rt.newFoundDocument(s,i,o,l),h=r.targetIds||[],f=r.removedTargetIds||[];n=new Ua(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=xc(t,r.document),i=r.readTime?Zt(r.readTime):ee.min(),o=rt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Ua([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=xc(t,r.document),i=r.removedTargetIds||[];n=new Ua([],i,s,null)}else{if(!("filter"in e))return Y();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new I2(s,i),l=r.targetId;n=new U_(l,o)}}return n}function V2(t,e){let n;if(e instanceof So)n={update:Om(t,e.key,e.value)};else if(e instanceof cf)n={delete:zh(t,e.key)};else if(e instanceof fr)n={update:Om(t,e.key,e.data),updateMask:q2(e.fieldMask)};else{if(!(e instanceof w2))return Y();n={verify:zh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof xl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof fo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof po)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Sl)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw Y()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:N2(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Y()}(t,e.precondition)),n}function O2(t,e){return t&&t.length>0?(fe(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Zt(s.updateTime):Zt(i);return o.isEqual(ee.min())&&(o=Zt(i)),new y2(o,s.transformResults||[])}(n,e))):[]}function M2(t,e){return{documents:[q_(t,e.path)]}}function j2(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=q_(t,s);const i=function(h){if(h.length!==0)return G_(Wt.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(f=>function(m){return{field:Zr(m.field),direction:z2(m.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Fh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function F2(t){let e=D2(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){fe(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(g){const m=W_(g);return m instanceof Wt&&T_(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(m=>function(C){return new ho(es(C.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(g){let m;return m=typeof g=="object"?g.value:g,tu(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(g){const m=!!g.before,S=g.values||[];return new Tl(S,m)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const m=!g.before,S=g.values||[];return new Tl(S,m)}(n.endAt)),s2(e,s,o,i,l,"F",u,h)}function U2(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function W_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=es(n.unaryFilter.field);return Ne.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=es(n.unaryFilter.field);return Ne.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=es(n.unaryFilter.field);return Ne.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=es(n.unaryFilter.field);return Ne.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(t):t.fieldFilter!==void 0?function(n){return Ne.create(es(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Wt.create(n.compositeFilter.filters.map(r=>W_(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Y()}}(n.compositeFilter.op))}(t):Y()}function z2(t){return C2[t]}function B2(t){return R2[t]}function $2(t){return b2[t]}function Zr(t){return{fieldPath:t.canonicalString()}}function es(t){return $e.fromServerFormat(t.fieldPath)}function G_(t){return t instanceof Ne?function(n){if(n.op==="=="){if(Tm(n.value))return{unaryFilter:{field:Zr(n.field),op:"IS_NAN"}};if(Em(n.value))return{unaryFilter:{field:Zr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Tm(n.value))return{unaryFilter:{field:Zr(n.field),op:"IS_NOT_NAN"}};if(Em(n.value))return{unaryFilter:{field:Zr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zr(n.field),op:B2(n.op),value:n.value}}}(t):t instanceof Wt?function(n){const r=n.getFilters().map(s=>G_(s));return r.length===1?r[0]:{compositeFilter:{op:$2(n.op),filters:r}}}(t):Y()}function q2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function K_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,n,r,s,i=ee.min(),o=ee.min(),l=Ke.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new qn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new qn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e){this.ct=e}}function W2(t){const e=F2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Il(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(){this.un=new K2}addToCollectionParentIndex(e,n){return this.un.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(or.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(or.min())}updateCollectionGroup(e,n,r){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class K2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new He(ve.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new He(ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Os(0)}static kn(){return new Os(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(){this.changes=new Ws(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?j.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Fi(r.mutation,s,It.empty(),Oe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ie()){const s=Ar();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=xi();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ar();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ie()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=xn();const o=ji(),l=function(){return ji()}();return n.forEach((u,h)=>{const f=r.get(h.key);s.has(h.key)&&(f===void 0||f.mutation instanceof fr)?i=i.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),Fi(f.mutation,h,f.mutation.getFieldMask(),Oe.now())):o.set(h.key,It.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,f)=>o.set(h,f)),n.forEach((h,f)=>{var g;return l.set(h,new J2(f,(g=o.get(h))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(e,n){const r=ji();let s=new xe((o,l)=>o-l),i=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let f=r.get(u)||It.empty();f=l.applyToLocalView(h,f),r.set(u,f);const g=(s.get(l.batchId)||ie()).add(u);s=s.insert(l.batchId,g)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,f=u.value,g=P_();f.forEach(m=>{if(!i.has(m)){const S=M_(n.get(m),r.get(m));S!==null&&g.set(m,S),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,g))}return j.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):A_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):j.resolve(Ar());let l=-1,u=i;return o.next(h=>j.forEach(h,(f,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),i.get(f)?j.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{u=u.insert(f,m)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,ie())).next(f=>({batchId:l,changes:b_(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let s=xi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=xi();return this.indexManager.getCollectionParents(e,i).next(l=>j.forEach(l,u=>{const h=function(g,m){return new Hs(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(f=>{f.forEach((g,m)=>{o=o.insert(g,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,rt.newInvalidDocument(f)))});let l=xi();return o.forEach((u,h)=>{const f=i.get(u);f!==void 0&&Fi(f.mutation,h,It.empty(),Oe.now()),ru(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return j.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Zt(s.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:W2(s.bundledQuery),readTime:Zt(s.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(){this.overlays=new xe(Q.comparator),this.Ir=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ar();return j.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),j.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),j.resolve()}getOverlaysForCollection(e,n,r){const s=Ar(),i=n.length+1,o=new Q(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return j.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new xe((h,f)=>h-f);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let f=i.get(h.largestBatchId);f===null&&(f=Ar(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=Ar(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=s)););return j.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new T2(n,r));let i=this.Ir.get(n);i===void 0&&(i=ie(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(){this.sessionToken=Ke.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(){this.Tr=new He(Me.Er),this.dr=new He(Me.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Me(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Me(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Q(new ve([])),r=new Me(n,e),s=new Me(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Q(new ve([])),r=new Me(n,e),s=new Me(n,e+1);let i=ie();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Me(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Me{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Q.comparator(e.key,n.key)||he(e.wr,n.wr)}static Ar(e,n){return he(e.wr,n.wr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new He(Me.Er)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new E2(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new Me(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,n){return j.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return j.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Me(n,0),s=new Me(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),j.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new He(he);return n.forEach(s=>{const i=new Me(s,0),o=new Me(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),j.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Q.isDocumentKey(i)||(i=i.child(""));const o=new Me(new Q(i),0);let l=new He(he);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.wr)),!0)},o),j.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){fe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return j.forEach(n.mutations,s=>{const i=new Me(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Me(n,0),s=this.br.firstAfterOrEqual(r);return j.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e){this.Mr=e,this.docs=function(){return new xe(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return j.resolve(r?r.document.mutableCopy():rt.newInvalidDocument(n))}getEntries(e,n){let r=xn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():rt.newInvalidDocument(s))}),j.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=xn();const o=n.path,l=new Q(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||F4(j4(f),r)<=0||(s.has(f.key)||ru(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return j.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Y()}Or(e,n){return j.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new r6(this)}getSize(e){return j.resolve(this.size)}}class r6 extends Q2{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),j.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(e){this.persistence=e,this.Nr=new Ws(n=>of(n),af),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new pf,this.targetCount=0,this.kr=Os.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),j.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Os(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Kn(n),j.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),j.waitFor(i).next(()=>s)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return j.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),j.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),j.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return j.resolve(r)}containsKey(e,n){return j.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e,n){this.qr={},this.overlays={},this.Qr=new tf(0),this.Kr=!1,this.Kr=!0,this.$r=new e6,this.referenceDelegate=e(this),this.Ur=new s6(this),this.indexManager=new G2,this.remoteDocumentCache=function(s){return new n6(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new H2(n),this.Gr=new X2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Z2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new t6(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const s=new o6(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return j.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class o6 extends z4{constructor(e){super(),this.currentSequenceNumber=e}}class gf{constructor(e){this.persistence=e,this.Jr=new pf,this.Yr=null}static Zr(e){return new gf(e)}get Xr(){if(this.Yr)return this.Yr;throw Y()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),j.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),j.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.Xr,r=>{const s=Q.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return j.or([()=>j.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ie(),s=ie();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new mf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return hI()?8:B4(it())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new a6;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(yi()<=oe.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",Xr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),j.resolve()):(yi()<=oe.DEBUG&&K("QueryEngine","Query:",Xr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(yi()<=oe.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",Xr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xt(n))):j.resolve())}Yi(e,n){if(Am(n))return j.resolve(null);let r=Xt(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Il(n,null,"F"),r=Xt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ie(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,l);return this.ns(n,h,o,u.readTime)?this.Yi(e,Il(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,s){return Am(n)||s.isEqual(ee.min())?j.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?j.resolve(null):(yi()<=oe.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Xr(n)),this.rs(e,o,n,M4(s,-1)).next(l=>l))})}ts(e,n){let r=new He(C_(e));return n.forEach((s,i)=>{ru(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return yi()<=oe.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Xr(n)),this.Ji.getDocumentsMatchingQuery(e,n,or.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new xe(he),this._s=new Ws(i=>of(i),af),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Y2(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function c6(t,e,n,r){return new u6(t,e,n,r)}async function Q_(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=ie();for(const h of s){o.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of i){l.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:l}))})})}function h6(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,f){const g=h.batch,m=g.keys();let S=j.resolve();return m.forEach(C=>{S=S.next(()=>f.getEntry(u,C)).next(b=>{const V=h.docVersions.get(C);fe(V!==null),b.version.compareTo(V)<0&&(g.applyToRemoteDocument(b,h),b.isValidDocument()&&(b.setReadTime(h.commitVersion),f.addEntry(b)))})}),S.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ie();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function J_(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function d6(t,e){const n=te(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((f,g)=>{const m=s.get(g);if(!m)return;l.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,g)));let S=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?S=S.withResumeToken(Ke.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):f.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(f.resumeToken,r)),s=s.insert(g,S),function(b,V,_){return b.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(m,S,f)&&l.push(n.Ur.updateTargetData(i,S))});let u=xn(),h=ie();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(f6(i,o,e.documentUpdates).next(f=>{u=f.Ps,h=f.Is})),!r.isEqual(ee.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(g=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return j.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.os=s,i))}function f6(t,e,n){let r=ie(),s=ie();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=xn();return n.forEach((l,u)=>{const h=i.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):K("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function p6(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function g6(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,j.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new qn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function $h(t,e,n){const r=te(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!xo(o))throw o;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Mm(t,e,n){const r=te(t);let s=ee.min(),i=ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,f){const g=te(u),m=g._s.get(f);return m!==void 0?j.resolve(g.os.get(m)):g.Ur.getTargetData(h,f)}(r,o,Xt(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ee.min(),n?i:ie())).next(l=>(m6(r,o2(e),l),{documents:l,Ts:i})))}function m6(t,e,n){let r=t.us.get(e)||ee.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class jm{constructor(){this.activeTargetIds=d2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class y6{constructor(){this.so=new jm,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new jm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ea=null;function Sc(){return Ea===null?Ea=function(){return 268435456+Math.round(2147483648*Math.random())}():Ea++,"0x"+Ea.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const et="WebChannelConnection";class E6 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=Sc(),u=this.xo(n,r.toUriEncodedString());K("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(n,u,h,s).then(f=>(K("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw Ns("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=_6[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Sc();return new Promise((o,l)=>{const u=new c_;u.setWithCredentials(!0),u.listenOnce(h_.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ma.NO_ERROR:const f=u.getResponseJson();K(et,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),o(f);break;case Ma.TIMEOUT:K(et,`RPC '${e}' ${i} timed out`),l(new G(O.DEADLINE_EXCEEDED,"Request time out"));break;case Ma.HTTP_ERROR:const g=u.getStatus();if(K(et,`RPC '${e}' ${i} failed with status:`,g,"response text:",u.getResponseText()),g>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const S=m==null?void 0:m.error;if(S&&S.status&&S.message){const C=function(V){const _=V.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(_)>=0?_:O.UNKNOWN}(S.status);l(new G(C,S.message))}else l(new G(O.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new G(O.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{K(et,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);K(et,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=Sc(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=p_(),l=f_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");K(et,`Creating RPC '${e}' stream ${s}: ${f}`,u);const g=o.createWebChannel(f,u);let m=!1,S=!1;const C=new w6({Io:V=>{S?K(et,`Not sending because RPC '${e}' stream ${s} is closed:`,V):(m||(K(et,`Opening RPC '${e}' stream ${s} transport.`),g.open(),m=!0),K(et,`RPC '${e}' stream ${s} sending:`,V),g.send(V))},To:()=>g.close()}),b=(V,_,E)=>{V.listen(_,k=>{try{E(k)}catch(N){setTimeout(()=>{throw N},0)}})};return b(g,Ii.EventType.OPEN,()=>{S||(K(et,`RPC '${e}' stream ${s} transport opened.`),C.yo())}),b(g,Ii.EventType.CLOSE,()=>{S||(S=!0,K(et,`RPC '${e}' stream ${s} transport closed`),C.So())}),b(g,Ii.EventType.ERROR,V=>{S||(S=!0,Ns(et,`RPC '${e}' stream ${s} transport errored:`,V),C.So(new G(O.UNAVAILABLE,"The operation could not be completed")))}),b(g,Ii.EventType.MESSAGE,V=>{var _;if(!S){const E=V.data[0];fe(!!E);const k=E,N=k.error||((_=k[0])===null||_===void 0?void 0:_.error);if(N){K(et,`RPC '${e}' stream ${s} received error:`,N);const F=N.status;let z=function(w){const I=be[w];if(I!==void 0)return F_(I)}(F),T=N.message;z===void 0&&(z=O.INTERNAL,T="Unknown error status: "+F+" with message "+N.message),S=!0,C.So(new G(z,T)),g.close()}else K(et,`RPC '${e}' stream ${s} received:`,E),C.bo(E)}}),b(l,d_.STAT_EVENT,V=>{V.stat===Dh.PROXY?K(et,`RPC '${e}' stream ${s} detected buffering proxy`):V.stat===Dh.NOPROXY&&K(et,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}}function Ac(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(t){return new P2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&K("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,n,r,s,i,o,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Y_(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(In(n.toString()),In("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new G(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class T6 extends X_{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=L2(this.serializer,e),r=function(i){if(!("targetChange"in i))return ee.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?Zt(o.readTime):ee.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Bh(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=Mh(u)?{documents:M2(i,u)}:{query:j2(i,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=B_(i,o.resumeToken);const h=Fh(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(ee.min())>0){l.readTime=Al(i,o.snapshotVersion.toTimestamp());const h=Fh(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=U2(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Bh(this.serializer),n.removeTarget=e,this.a_(n)}}class I6 extends X_{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return fe(!!e.streamToken),this.lastStreamToken=e.streamToken,fe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=O2(e.writeResults,e.commitTime),r=Zt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Bh(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>V2(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new G(O.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Uh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(O.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Uh(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(O.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class S6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(In(n),this.D_=!1):K("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Wr(this)&&(K("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=te(u);h.L_.add(4),await ko(h),h.q_.set("Unknown"),h.L_.delete(4),await lu(h)}(this))})}),this.q_=new S6(r,s)}}async function lu(t){if(Wr(t))for(const e of t.B_)await e(!0)}async function ko(t){for(const e of t.B_)await e(!1)}function Z_(t,e){const n=te(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),wf(n)?_f(n):Gs(n).r_()&&vf(n,e))}function yf(t,e){const n=te(t),r=Gs(n);n.N_.delete(e),r.r_()&&e1(n,e),n.N_.size===0&&(r.r_()?r.o_():Wr(n)&&n.q_.set("Unknown"))}function vf(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Gs(t).A_(e)}function e1(t,e){t.Q_.xe(e),Gs(t).R_(e)}function _f(t){t.Q_=new k2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Gs(t).start(),t.q_.v_()}function wf(t){return Wr(t)&&!Gs(t).n_()&&t.N_.size>0}function Wr(t){return te(t).L_.size===0}function t1(t){t.Q_=void 0}async function k6(t){t.q_.set("Online")}async function C6(t){t.N_.forEach((e,n)=>{vf(t,e)})}async function R6(t,e){t1(t),wf(t)?(t.q_.M_(e),_f(t)):t.q_.set("Unknown")}async function b6(t,e,n){if(t.q_.set("Online"),e instanceof z_&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await kl(t,r)}else if(e instanceof Ua?t.Q_.Ke(e):e instanceof U_?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ee.min()))try{const r=await J_(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.N_.get(h);f&&i.N_.set(h,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const f=i.N_.get(u);if(!f)return;i.N_.set(u,f.withResumeToken(Ke.EMPTY_BYTE_STRING,f.snapshotVersion)),e1(i,u);const g=new qn(f.target,u,h,f.sequenceNumber);vf(i,g)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){K("RemoteStore","Failed to raise snapshot:",r),await kl(t,r)}}async function kl(t,e,n){if(!xo(e))throw e;t.L_.add(1),await ko(t),t.q_.set("Offline"),n||(n=()=>J_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await lu(t)})}function n1(t,e){return e().catch(n=>kl(t,n,e))}async function uu(t){const e=te(t),n=lr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;P6(e);)try{const s=await p6(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,N6(e,s)}catch(s){await kl(e,s)}r1(e)&&s1(e)}function P6(t){return Wr(t)&&t.O_.length<10}function N6(t,e){t.O_.push(e);const n=lr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function r1(t){return Wr(t)&&!lr(t).n_()&&t.O_.length>0}function s1(t){lr(t).start()}async function D6(t){lr(t).p_()}async function L6(t){const e=lr(t);for(const n of t.O_)e.m_(n.mutations)}async function V6(t,e,n){const r=t.O_.shift(),s=hf.from(r,e,n);await n1(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await uu(t)}async function O6(t,e){e&&lr(t).V_&&await async function(r,s){if(function(o){return x2(o)&&o!==O.ABORTED}(s.code)){const i=r.O_.shift();lr(r).s_(),await n1(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await uu(r)}}(t,e),r1(t)&&s1(t)}async function Um(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");const r=Wr(n);n.L_.add(3),await ko(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await lu(n)}async function M6(t,e){const n=te(t);e?(n.L_.delete(2),await lu(n)):e||(n.L_.add(2),await ko(n),n.q_.set("Unknown"))}function Gs(t){return t.K_||(t.K_=function(n,r,s){const i=te(n);return i.w_(),new T6(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:k6.bind(null,t),Ro:C6.bind(null,t),mo:R6.bind(null,t),d_:b6.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),wf(t)?_f(t):t.q_.set("Unknown")):(await t.K_.stop(),t1(t))})),t.K_}function lr(t){return t.U_||(t.U_=function(n,r,s){const i=te(n);return i.w_(),new I6(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:D6.bind(null,t),mo:O6.bind(null,t),f_:L6.bind(null,t),g_:V6.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await uu(t)):(await t.U_.stop(),t.O_.length>0&&(K("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Ef(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tf(t,e){if(In("AsyncQueue",`${e}: ${t}`),xo(t))return new G(O.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=xi(),this.sortedSet=new xe(this.comparator)}static emptySet(e){return new ws(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ws)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ws;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(){this.W_=new xe(Q.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Y():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ms{constructor(e,n,r,s,i,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Ms(e,n,ws.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class F6{constructor(){this.queries=Bm(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=te(n),i=s.queries;s.queries=Bm(),i.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new G(O.ABORTED,"Firestore shutting down"))}}function Bm(){return new Ws(t=>k_(t),nu)}async function U6(t,e){const n=te(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new j6,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Tf(o,`Initialization of query '${Xr(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&If(n)}async function z6(t,e){const n=te(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function B6(t,e){const n=te(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&If(n)}function $6(t,e,n){const r=te(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function If(t){t.Y_.forEach(e=>{e.next()})}var qh,$m;($m=qh||(qh={})).ea="default",$m.Cache="cache";class q6{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ms(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ms.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==qh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e){this.key=e}}class o1{constructor(e){this.key=e}}class H6{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ie(),this.mutatedKeys=ie(),this.Aa=C_(e),this.Ra=new ws(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new zm,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,g)=>{const m=s.get(f),S=ru(this.query,g)?g:null,C=!!m&&this.mutatedKeys.has(m.key),b=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let V=!1;m&&S?m.data.isEqual(S.data)?C!==b&&(r.track({type:3,doc:S}),V=!0):this.ga(m,S)||(r.track({type:2,doc:S}),V=!0,(u&&this.Aa(S,u)>0||h&&this.Aa(S,h)<0)&&(l=!0)):!m&&S?(r.track({type:0,doc:S}),V=!0):m&&!S&&(r.track({type:1,doc:m}),V=!0,(u||h)&&(l=!0)),V&&(S?(o=o.add(S),i=b?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,g)=>function(S,C){const b=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return b(S)-b(C)}(f.type,g.type)||this.Aa(f.doc,g.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,h=u!==this.Ea;return this.Ea=u,o.length!==0||h?{snapshot:new Ms(this.query,e.Ra,i,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new zm,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new o1(r))}),this.da.forEach(r=>{e.has(r)||n.push(new i1(r))}),n}ba(e){this.Ta=e.Ts,this.da=ie();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ms.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class W6{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class G6{constructor(e){this.key=e,this.va=!1}}class K6{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ws(l=>k_(l),nu),this.Ma=new Map,this.xa=new Set,this.Oa=new xe(Q.comparator),this.Na=new Map,this.La=new pf,this.Ba={},this.ka=new Map,this.qa=Os.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Q6(t,e,n=!0){const r=d1(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await a1(r,e,n,!0),s}async function J6(t,e){const n=d1(t);await a1(n,e,!0,!1)}async function a1(t,e,n,r){const s=await g6(t.localStore,Xt(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await Y6(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Z_(t.remoteStore,s),l}async function Y6(t,e,n,r,s){t.Ka=(g,m,S)=>async function(b,V,_,E){let k=V.view.ma(_);k.ns&&(k=await Mm(b.localStore,V.query,!1).then(({documents:T})=>V.view.ma(T,k)));const N=E&&E.targetChanges.get(V.targetId),F=E&&E.targetMismatches.get(V.targetId)!=null,z=V.view.applyChanges(k,b.isPrimaryClient,N,F);return Hm(b,V.targetId,z.wa),z.snapshot}(t,g,m,S);const i=await Mm(t.localStore,e,!0),o=new H6(e,i.Ts),l=o.ma(i.documents),u=Ao.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(l,t.isPrimaryClient,u);Hm(t,n,h.wa);const f=new W6(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function X6(t,e,n){const r=te(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!nu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await $h(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&yf(r.remoteStore,s.targetId),Hh(r,s.targetId)}).catch(Io)):(Hh(r,s.targetId),await $h(r.localStore,s.targetId,!0))}async function Z6(t,e){const n=te(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),yf(n.remoteStore,r.targetId))}async function ex(t,e,n){const r=ax(t);try{const s=await function(o,l){const u=te(o),h=Oe.now(),f=l.reduce((S,C)=>S.add(C.key),ie());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",S=>{let C=xn(),b=ie();return u.cs.getEntries(S,f).next(V=>{C=V,C.forEach((_,E)=>{E.isValidDocument()||(b=b.add(_))})}).next(()=>u.localDocuments.getOverlayedDocuments(S,C)).next(V=>{g=V;const _=[];for(const E of l){const k=_2(E,g.get(E.key).overlayedDocument);k!=null&&_.push(new fr(E.key,k,__(k.value.mapValue),Dt.exists(!0)))}return u.mutationQueue.addMutationBatch(S,h,_,l)}).next(V=>{m=V;const _=V.applyToLocalDocumentSet(g,b);return u.documentOverlayCache.saveOverlays(S,V.batchId,_)})}).then(()=>({batchId:m.batchId,changes:b_(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let h=o.Ba[o.currentUser.toKey()];h||(h=new xe(he)),h=h.insert(l,u),o.Ba[o.currentUser.toKey()]=h}(r,s.batchId,n),await Co(r,s.changes),await uu(r.remoteStore)}catch(s){const i=Tf(s,"Failed to persist write");n.reject(i)}}async function l1(t,e){const n=te(t);try{const r=await d6(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(fe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?fe(o.va):s.removedDocuments.size>0&&(fe(o.va),o.va=!1))}),await Co(n,r,e)}catch(r){await Io(r)}}function qm(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=te(o);u.onlineState=l;let h=!1;u.queries.forEach((f,g)=>{for(const m of g.j_)m.Z_(l)&&(h=!0)}),h&&If(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function tx(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new xe(Q.comparator);o=o.insert(i,rt.newNoDocument(i,ee.min()));const l=ie().add(i),u=new ou(ee.min(),new Map,new xe(he),o,l);await l1(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),xf(r)}else await $h(r.localStore,e,!1).then(()=>Hh(r,e,n)).catch(Io)}async function nx(t,e){const n=te(t),r=e.batch.batchId;try{const s=await h6(n.localStore,e);c1(n,r,null),u1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Co(n,s)}catch(s){await Io(s)}}async function rx(t,e,n){const r=te(t);try{const s=await function(o,l){const u=te(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(fe(g!==null),f=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(r.localStore,e);c1(r,e,n),u1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Co(r,s)}catch(s){await Io(s)}}function u1(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function c1(t,e,n){const r=te(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Hh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||h1(t,r)})}function h1(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(yf(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),xf(t))}function Hm(t,e,n){for(const r of n)r instanceof i1?(t.La.addReference(r.key,e),sx(t,r)):r instanceof o1?(K("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||h1(t,r.key)):Y()}function sx(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(K("SyncEngine","New document in limbo: "+n),t.xa.add(r),xf(t))}function xf(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Q(ve.fromString(e)),r=t.qa.next();t.Na.set(r,new G6(n)),t.Oa=t.Oa.insert(n,r),Z_(t.remoteStore,new qn(Xt(lf(n.path)),r,"TargetPurposeLimboResolution",tf.oe))}}async function Co(t,e,n){const r=te(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(h=>{var f;if((h||n)&&r.isPrimaryClient){const g=h?!h.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){s.push(h);const g=mf.Wi(u.targetId,h);i.push(g)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,h){const f=te(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>j.forEach(h,m=>j.forEach(m.$i,S=>f.persistence.referenceDelegate.addReference(g,m.targetId,S)).next(()=>j.forEach(m.Ui,S=>f.persistence.referenceDelegate.removeReference(g,m.targetId,S)))))}catch(g){if(!xo(g))throw g;K("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const m=g.targetId;if(!g.fromCache){const S=f.os.get(m),C=S.snapshotVersion,b=S.withLastLimboFreeSnapshotVersion(C);f.os=f.os.insert(m,b)}}}(r.localStore,i))}async function ix(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());const r=await Q_(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new G(O.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Co(n,r.hs)}}function ox(t,e){const n=te(t),r=n.Na.get(e);if(r&&r.va)return ie().add(r.key);{let s=ie();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function d1(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=l1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ox.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tx.bind(null,e),e.Ca.d_=B6.bind(null,e.eventManager),e.Ca.$a=$6.bind(null,e.eventManager),e}function ax(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rx.bind(null,e),e}class Cl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=au(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return c6(this.persistence,new l6,e.initialUser,this.serializer)}Ga(e){return new i6(gf.Zr,this.serializer)}Wa(e){return new y6}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cl.provider={build:()=>new Cl};class Wh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>qm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ix.bind(null,this.syncEngine),await M6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new F6}()}createDatastore(e){const n=au(e.databaseInfo.databaseId),r=function(i){return new E6(i)}(e.databaseInfo);return function(i,o,l,u){return new x6(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new A6(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>qm(this.syncEngine,n,0),function(){return Fm.D()?new Fm:new v6}())}createSyncEngine(e,n){return function(s,i,o,l,u,h,f){const g=new K6(s,i,o,l,u,h);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=te(s);K("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await ko(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Wh.provider={build:()=>new Wh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):In("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=tt.UNAUTHENTICATED,this.clientId=m_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{K("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(K("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Tf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function kc(t,e){t.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Q_(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Wm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await cx(t);K("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Um(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Um(e.remoteStore,s)),t._onlineComponents=e}async function cx(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{await kc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===O.FAILED_PRECONDITION||s.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ns("Error using user provided cache. Falling back to memory cache: "+n),await kc(t,new Cl)}}else K("FirestoreClient","Using default OfflineComponentProvider"),await kc(t,new Cl);return t._offlineComponents}async function f1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),await Wm(t,t._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),await Wm(t,new Wh))),t._onlineComponents}function hx(t){return f1(t).then(e=>e.syncEngine)}async function Gm(t){const e=await f1(t),n=e.eventManager;return n.onListen=Q6.bind(null,e.syncEngine),n.onUnlisten=X6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=J6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Z6.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(t,e,n){if(!n)throw new G(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function dx(t,e,n,r){if(e===!0&&r===!0)throw new G(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Qm(t){if(!Q.isDocumentKey(t))throw new G(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Jm(t){if(Q.isDocumentKey(t))throw new G(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function cu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y()}function en(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cu(t);throw new G(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function fx(t,e){if(e<=0)throw new G(O.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=p1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new G(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new G(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new G(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ym({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ym(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new C4;switch(r.type){case"firstParty":return new N4(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Km.get(n);r&&(K("ComponentProvider","Removing Datastore"),Km.delete(n),r.terminate())}(this),Promise.resolve()}}function px(t,e,n,r={}){var s;const i=(t=en(t,hu))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Ns("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=tt.MOCK_USER;else{l=sI(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new G(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new tt(h)}t._authCredentials=new R4(new g_(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new pr(this.firestore,e,this._query)}}class ht{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ht(this.firestore,e,this._key)}}class nr extends pr{constructor(e,n,r){super(e,n,lf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ht(this.firestore,null,new Q(e))}withConverter(e){return new nr(this.firestore,e,this._path)}}function du(t,e,...n){if(t=Ge(t),g1("collection","path",e),t instanceof hu){const r=ve.fromString(e,...n);return Jm(r),new nr(t,null,r)}{if(!(t instanceof ht||t instanceof nr))throw new G(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return Jm(r),new nr(t.firestore,null,r)}}function Ks(t,e,...n){if(t=Ge(t),arguments.length===1&&(e=m_.newId()),g1("doc","path",e),t instanceof hu){const r=ve.fromString(e,...n);return Qm(r),new ht(t,null,new Q(r))}{if(!(t instanceof ht||t instanceof nr))throw new G(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return Qm(r),new ht(t.firestore,t instanceof nr?t.converter:null,new Q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Y_(this,"async_queue_retry"),this.Vu=()=>{const r=Ac();r&&K("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Ac();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Ac();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Pr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!xo(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw In("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Ef.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Y()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Zm(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class zr extends hu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Xm,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Xm(e),this._firestoreClient=void 0,await e}}}function gx(t,e){const n=typeof t=="object"?t:o_(),r=typeof t=="string"?t:"(default)",s=Zd(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=nI("firestore");i&&px(s,...i)}return s}function m1(t){if(t._terminated)throw new G(O.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||mx(t),t._firestoreClient}function mx(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,h,f){return new H4(l,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,p1(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new ux(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e){this._byteString=e}static fromBase64String(e){try{return new js(Ke.fromBase64String(e))}catch(n){throw new G(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new js(Ke.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $e(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=/^__.*__$/;class vx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new fr(e,this.data,this.fieldMask,n,this.fieldTransforms):new So(e,this.data,n,this.fieldTransforms)}}class y1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new fr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function v1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}class Cf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Cf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Rl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(v1(this.Cu)&&yx.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class _x{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||au(e)}Qu(e,n,r,s=!1){return new Cf({Cu:e,methodName:n,qu:r,path:$e.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pu(t){const e=t._freezeSettings(),n=au(t._databaseId);return new _x(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _1(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Rf("Data must be an object, but it was:",o,r);const l=w1(r,o);let u,h;if(i.merge)u=new It(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const g of i.mergeFields){const m=Gh(e,g,n);if(!o.contains(m))throw new G(O.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);T1(f,m)||f.push(m)}u=new It(f),h=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=o.fieldTransforms;return new vx(new gt(l),u,h)}class Ro extends Sf{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ro}}function wx(t,e,n,r){const s=t.Qu(1,e,n);Rf("Data must be an object, but it was:",s,r);const i=[],o=gt.empty();Hr(r,(u,h)=>{const f=bf(e,u,n);h=Ge(h);const g=s.Nu(f);if(h instanceof Ro)i.push(f);else{const m=bo(h,g);m!=null&&(i.push(f),o.set(f,m))}});const l=new It(i);return new y1(o,l,s.fieldTransforms)}function Ex(t,e,n,r,s,i){const o=t.Qu(1,e,n),l=[Gh(e,r,n)],u=[s];if(i.length%2!=0)throw new G(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(Gh(e,i[m])),u.push(i[m+1]);const h=[],f=gt.empty();for(let m=l.length-1;m>=0;--m)if(!T1(h,l[m])){const S=l[m];let C=u[m];C=Ge(C);const b=o.Nu(S);if(C instanceof Ro)h.push(S);else{const V=bo(C,b);V!=null&&(h.push(S),f.set(S,V))}}const g=new It(h);return new y1(f,g,o.fieldTransforms)}function Tx(t,e,n,r=!1){return bo(n,t.Qu(r?4:3,e))}function bo(t,e){if(E1(t=Ge(t)))return Rf("Unsupported field value:",e,t),w1(t,e);if(t instanceof Sf)return function(r,s){if(!v1(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=bo(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ge(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return f2(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Oe.fromDate(r);return{timestampValue:Al(s.serializer,i)}}if(r instanceof Oe){const i=new Oe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Al(s.serializer,i)}}if(r instanceof Af)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof js)return{bytesValue:B_(s.serializer,r._byteString)};if(r instanceof ht){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ff(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof kf)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return uf(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${cu(r)}`)}(t,e)}function w1(t,e){const n={};return y_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hr(t,(r,s)=>{const i=bo(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function E1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Oe||t instanceof Af||t instanceof js||t instanceof ht||t instanceof Sf||t instanceof kf)}function Rf(t,e,n){if(!E1(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=cu(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Gh(t,e,n){if((e=Ge(e))instanceof fu)return e._internalPath;if(typeof e=="string")return bf(t,e);throw Rl("Field path arguments must be of type string or ",t,!1,void 0,n)}const Ix=new RegExp("[~\\*/\\[\\]]");function bf(t,e,n){if(e.search(Ix)>=0)throw Rl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new fu(...e.split("."))._internalPath}catch{throw Rl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Rl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new G(O.INVALID_ARGUMENT,l+t+u)}function T1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Pf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class xx extends I1{data(){return super.data()}}function Pf(t,e){return typeof e=="string"?bf(t,e):e instanceof fu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Nf{}class Df extends Nf{}function Ax(t,e,...n){let r=[];e instanceof Nf&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Vf).length,l=i.filter(u=>u instanceof Lf).length;if(o>1||o>0&&l>0)throw new G(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Lf extends Df{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Lf(e,n,r)}_apply(e){const n=this._parse(e);return x1(e._query,n),new pr(e.firestore,e.converter,jh(e._query,n))}_parse(e){const n=pu(e.firestore);return function(i,o,l,u,h,f,g){let m;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new G(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){ty(g,f);const S=[];for(const C of g)S.push(ey(u,i,C));m={arrayValue:{values:S}}}else m=ey(u,i,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||ty(g,f),m=Tx(l,o,g,f==="in"||f==="not-in");return Ne.create(h,f,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Vf extends Nf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Vf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Wt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)x1(o,u),o=jh(o,u)}(e._query,n),new pr(e.firestore,e.converter,jh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Of extends Df{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Of(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new G(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new G(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ho(i,o)}(e._query,this._field,this._direction);return new pr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Hs(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function kx(t,e="asc"){const n=e,r=Pf("orderBy",t);return Of._create(r,n)}class Mf extends Df{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Mf(e,n,r)}_apply(e){return new pr(e.firestore,e.converter,Il(e._query,this._limit,this._limitType))}}function Cx(t){return fx("limit",t),Mf._create("limit",t,"F")}function ey(t,e,n){if(typeof(n=Ge(n))=="string"){if(n==="")throw new G(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!A_(e)&&n.indexOf("/")!==-1)throw new G(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ve.fromString(n));if(!Q.isDocumentKey(r))throw new G(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wm(t,new Q(r))}if(n instanceof ht)return wm(t,n._key);throw new G(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cu(n)}.`)}function ty(t,e){if(!Array.isArray(t)||t.length===0)throw new G(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function x1(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Rx{convertValue(e,n="none"){switch(Ur(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ce(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Fr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Hr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Ce(o.doubleValue));return new kf(i)}convertGeoPoint(e){return new Af(Ce(e.latitude),Ce(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=rf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(lo(e));default:return null}}convertTimestamp(e){const n=ar(e);return new Oe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ve.fromString(e);fe(K_(r));const s=new uo(r.get(1),r.get(3)),i=new Q(r.popFirst(5));return s.isEqual(n)||In(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class A1 extends I1{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new za(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Pf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class za extends A1{data(e={}){return super.data(e)}}class bx{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ai(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new za(this._firestore,this._userDataWriter,r.key,r,new Ai(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new za(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ai(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new za(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ai(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,f=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:Px(l.type),doc:u,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Px(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}class k1 extends Rx{constructor(e){super(),this.firestore=e}convertBytes(e){return new js(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ht(this.firestore,null,n)}}function Nx(t,e,n){t=en(t,ht);const r=en(t.firestore,zr),s=S1(t.converter,e,n);return gu(r,[_1(pu(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Dt.none())])}function jf(t,e,n,...r){t=en(t,ht);const s=en(t.firestore,zr),i=pu(s);let o;return o=typeof(e=Ge(e))=="string"||e instanceof fu?Ex(i,"updateDoc",t._key,e,n,r):wx(i,"updateDoc",t._key,e),gu(s,[o.toMutation(t._key,Dt.exists(!0))])}function C1(t){return gu(en(t.firestore,zr),[new cf(t._key,Dt.none())])}function Dx(t,e){const n=en(t.firestore,zr),r=Ks(t),s=S1(t.converter,e);return gu(n,[_1(pu(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Dt.exists(!1))]).then(()=>r)}function Po(t,...e){var n,r,s;t=Ge(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Zm(e[o])||(i=e[o],o++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Zm(e[o])){const g=e[o];e[o]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[o+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[o+2]=(s=g.complete)===null||s===void 0?void 0:s.bind(g)}let u,h,f;if(t instanceof ht)h=en(t.firestore,zr),f=lf(t._key.path),u={next:g=>{e[o]&&e[o](Lx(h,t,g))},error:e[o+1],complete:e[o+2]};else{const g=en(t,pr);h=en(g.firestore,zr),f=g._query;const m=new k1(h);u={next:S=>{e[o]&&e[o](new bx(h,m,g,S))},error:e[o+1],complete:e[o+2]},Sx(t._query)}return function(m,S,C,b){const V=new lx(b),_=new q6(S,V,C);return m.asyncQueue.enqueueAndForget(async()=>U6(await Gm(m),_)),()=>{V.Za(),m.asyncQueue.enqueueAndForget(async()=>z6(await Gm(m),_))}}(m1(h),f,l,u)}function gu(t,e){return function(r,s){const i=new Pr;return r.asyncQueue.enqueueAndForget(async()=>ex(await hx(r),s,i)),i.promise}(m1(t),e)}function Lx(t,e,n){const r=n.docs.get(e._key),s=new k1(t);return new A1(t,s,e._key,r,new Ai(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(){return new Ro("deleteField")}(function(e,n=!0){(function(s){qs=s})($s),Ps(new Mr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new zr(new b4(r.getProvider("auth-internal")),new L4(r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new G(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uo(h.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),tr(gm,"4.7.3",e),tr(gm,"4.7.3","esm2017")})();var Ox="firebase",Mx="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tr(Ox,Mx,"app");function Ff(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function R1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jx=R1,b1=new Eo("auth","Firebase",R1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl=new Yd("@firebase/auth");function Fx(t,...e){bl.logLevel<=oe.WARN&&bl.warn(`Auth (${$s}): ${t}`,...e)}function Ba(t,...e){bl.logLevel<=oe.ERROR&&bl.error(`Auth (${$s}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(t,...e){throw Uf(t,...e)}function tn(t,...e){return Uf(t,...e)}function P1(t,e,n){const r=Object.assign(Object.assign({},jx()),{[e]:n});return new Eo("auth","Firebase",r).create(e,{appName:t.name})}function rr(t){return P1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Uf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return b1.create(t,...e)}function J(t,e,...n){if(!t)throw Uf(e,...n)}function fn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ba(e),new Error(e)}function An(t,e){t||fn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Ux(){return ny()==="http:"||ny()==="https:"}function ny(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ux()||lI()||"connection"in navigator)?navigator.onLine:!0}function Bx(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,n){this.shortDelay=e,this.longDelay=n,An(n>e,"Short delay should be less than long delay!"),this.isMobile=iI()||uI()}get(){return zx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(t,e){An(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx=new No(3e4,6e4);function mu(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Qs(t,e,n,r,s={}){return D1(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=To(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},i);return aI()||(h.referrerPolicy="no-referrer"),N1.fetch()(V1(t,t.config.apiHost,n,l),h)})}async function D1(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},$x),e);try{const s=new Hx(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ta(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ta(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ta(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ta(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw P1(t,f,h);Sn(t,f)}}catch(s){if(s instanceof Cn)throw s;Sn(t,"network-request-failed",{message:String(s)})}}async function L1(t,e,n,r,s={}){const i=await Qs(t,e,n,r,s);return"mfaPendingCredential"in i&&Sn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function V1(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?zf(t.config,s):`${t.config.apiScheme}://${s}`}class Hx{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(tn(this.auth,"network-request-failed")),qx.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ta(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=tn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wx(t,e){return Qs(t,"POST","/v1/accounts:delete",e)}async function O1(t,e){return Qs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Gx(t,e=!1){const n=Ge(t),r=await n.getIdToken(e),s=Bf(r);J(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ui(Cc(s.auth_time)),issuedAtTime:Ui(Cc(s.iat)),expirationTime:Ui(Cc(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Cc(t){return Number(t)*1e3}function Bf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ba("JWT malformed, contained fewer than 3 sections"),null;try{const s=Z0(n);return s?JSON.parse(s):(Ba("Failed to decode base64 JWT payload"),null)}catch(s){return Ba("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function ry(t){const e=Bf(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function go(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Cn&&Kx(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Kx({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ui(this.lastLoginAt),this.creationTime=Ui(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pl(t){var e;const n=t.auth,r=await t.getIdToken(),s=await go(t,O1(n,{idToken:r}));J(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?M1(i.providerUserInfo):[],l=Yx(t.providerData,o),u=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),f=u?h:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Qh(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,g)}async function Jx(t){const e=Ge(t);await Pl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Yx(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function M1(t){return t.map(e=>{var{providerId:n}=e,r=Ff(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xx(t,e){const n=await D1(t,{},async()=>{const r=To({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=V1(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",N1.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Zx(t,e){return Qs(t,"POST","/v2/accounts:revokeToken",mu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ry(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");const n=ry(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await Xx(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Es;return r&&(J(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(J(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(J(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Es,this.toJSON())}_performRefresh(){return fn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class pn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Ff(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Qx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Qh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await go(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Gx(this,e)}reload(){return Jx(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new pn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Pl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dn(this.auth.app))return Promise.reject(rr(this.auth));const e=await this.getIdToken();return await go(this,Wx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,u,h,f;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,S=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,C=(o=n.photoURL)!==null&&o!==void 0?o:void 0,b=(l=n.tenantId)!==null&&l!==void 0?l:void 0,V=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,_=(h=n.createdAt)!==null&&h!==void 0?h:void 0,E=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:k,emailVerified:N,isAnonymous:F,providerData:z,stsTokenManager:T}=n;J(k&&T,e,"internal-error");const v=Es.fromJSON(this.name,T);J(typeof k=="string",e,"internal-error"),Dn(g,e.name),Dn(m,e.name),J(typeof N=="boolean",e,"internal-error"),J(typeof F=="boolean",e,"internal-error"),Dn(S,e.name),Dn(C,e.name),Dn(b,e.name),Dn(V,e.name),Dn(_,e.name),Dn(E,e.name);const w=new pn({uid:k,auth:e,email:m,emailVerified:N,displayName:g,isAnonymous:F,photoURL:C,phoneNumber:S,tenantId:b,stsTokenManager:v,createdAt:_,lastLoginAt:E});return z&&Array.isArray(z)&&(w.providerData=z.map(I=>Object.assign({},I))),V&&(w._redirectEventId=V),w}static async _fromIdTokenResponse(e,n,r=!1){const s=new Es;s.updateFromServerResponse(n);const i=new pn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Pl(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];J(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?M1(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Es;l.updateFromIdToken(r);const u=new pn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Qh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy=new Map;function gn(t){An(t instanceof Function,"Expected a class definition");let e=sy.get(t);return e?(An(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,sy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}j1.type="NONE";const iy=j1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(t,e,n){return`firebase:${t}:${e}:${n}`}class Ts{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=$a(this.userKey,s.apiKey,i),this.fullPersistenceKey=$a("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?pn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ts(gn(iy),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||gn(iy);const o=$a(r,e.config.apiKey,e.name);let l=null;for(const h of n)try{const f=await h._get(o);if(f){const g=pn._fromJSON(e,f);h!==i&&(l=g),i=h;break}}catch{}const u=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Ts(i,e,r):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new Ts(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(B1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(F1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(q1(e))return"Blackberry";if(H1(e))return"Webos";if(U1(e))return"Safari";if((e.includes("chrome/")||z1(e))&&!e.includes("edge/"))return"Chrome";if($1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function F1(t=it()){return/firefox\//i.test(t)}function U1(t=it()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function z1(t=it()){return/crios\//i.test(t)}function B1(t=it()){return/iemobile/i.test(t)}function $1(t=it()){return/android/i.test(t)}function q1(t=it()){return/blackberry/i.test(t)}function H1(t=it()){return/webos/i.test(t)}function $f(t=it()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function eS(t=it()){var e;return $f(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function tS(){return cI()&&document.documentMode===10}function W1(t=it()){return $f(t)||$1(t)||H1(t)||q1(t)||/windows phone/i.test(t)||B1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(t,e=[]){let n;switch(t){case"Browser":n=oy(it());break;case"Worker":n=`${oy(it())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${$s}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rS(t,e={}){return Qs(t,"GET","/v2/passwordPolicy",mu(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS=6;class iS{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:sS,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ay(this),this.idTokenSubscription=new ay(this),this.beforeStateQueue=new nS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=b1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Ts.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await O1(this,{idToken:e}),r=await pn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(dn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Pl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Bx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(dn(this.app))return Promise.reject(rr(this));const n=e?Ge(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return dn(this.app)?Promise.reject(rr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return dn(this.app)?Promise.reject(rr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rS(this),n=new iS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Eo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Zx(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&gn(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await Ts.create(this,[gn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=G1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Fx(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function yu(t){return Ge(t)}class ay{constructor(e){this.auth=e,this.observer=null,this.addObserver=vI(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aS(t){qf=t}function lS(t){return qf.loadJS(t)}function uS(){return qf.gapiScript}function cS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(t,e){const n=Zd(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(_l(i,e??{}))return s;Sn(s,"already-initialized")}return n.initialize({options:e})}function dS(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(gn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function fS(t,e,n){const r=yu(t);J(r._canInitEmulator,r,"emulator-config-failed"),J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=K1(e),{host:o,port:l}=pS(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),gS()}function K1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function pS(t){const e=K1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:ly(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:ly(o)}}}function ly(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function gS(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return fn("not implemented")}_getIdTokenResponse(e){return fn("not implemented")}_linkToIdToken(e,n){return fn("not implemented")}_getReauthenticationResolver(e){return fn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Is(t,e){return L1(t,"POST","/v1/accounts:signInWithIdp",mu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="http://localhost";class Br extends Q1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Br(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Sn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Ff(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Br(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Is(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Is(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Is(e,n)}buildRequest(){const e={requestUri:mS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=To(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do extends J1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn extends Do{constructor(){super("facebook.com")}static credential(e){return Br._fromParams({providerId:jn.PROVIDER_ID,signInMethod:jn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jn.credentialFromTaggedObject(e)}static credentialFromError(e){return jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jn.credential(e.oauthAccessToken)}catch{return null}}}jn.FACEBOOK_SIGN_IN_METHOD="facebook.com";jn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn extends Do{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Br._fromParams({providerId:Fn.PROVIDER_ID,signInMethod:Fn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Fn.credentialFromTaggedObject(e)}static credentialFromError(e){return Fn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Fn.credential(n,r)}catch{return null}}}Fn.GOOGLE_SIGN_IN_METHOD="google.com";Fn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un extends Do{constructor(){super("github.com")}static credential(e){return Br._fromParams({providerId:Un.PROVIDER_ID,signInMethod:Un.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Un.credentialFromTaggedObject(e)}static credentialFromError(e){return Un.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Un.credential(e.oauthAccessToken)}catch{return null}}}Un.GITHUB_SIGN_IN_METHOD="github.com";Un.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn extends Do{constructor(){super("twitter.com")}static credential(e,n){return Br._fromParams({providerId:zn.PROVIDER_ID,signInMethod:zn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return zn.credentialFromTaggedObject(e)}static credentialFromError(e){return zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return zn.credential(n,r)}catch{return null}}}zn.TWITTER_SIGN_IN_METHOD="twitter.com";zn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yS(t,e){return L1(t,"POST","/v1/accounts:signUp",mu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await pn._fromIdTokenResponse(e,r,s),o=uy(r);return new ur({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=uy(r);return new ur({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function uy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vS(t){var e;if(dn(t.app))return Promise.reject(rr(t));const n=yu(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new ur({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await yS(n,{returnSecureToken:!0}),s=await ur._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl extends Cn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Nl.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Nl(e,n,r,s)}}function Y1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Nl._fromErrorAndOperation(t,i,e,r):i})}async function _S(t,e,n=!1){const r=await go(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ur._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wS(t,e,n=!1){const{auth:r}=t;if(dn(r.app))return Promise.reject(rr(r));const s="reauthenticate";try{const i=await go(t,Y1(r,s,e,t),n);J(i.idToken,r,"internal-error");const o=Bf(i.idToken);J(o,r,"internal-error");const{sub:l}=o;return J(t.uid===l,r,"user-mismatch"),ur._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Sn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ES(t,e,n=!1){if(dn(t.app))return Promise.reject(rr(t));const r="signIn",s=await Y1(t,r,e),i=await ur._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function TS(t,e,n,r){return Ge(t).onIdTokenChanged(e,n,r)}function IS(t,e,n){return Ge(t).beforeAuthStateChanged(e,n)}function xS(t,e,n,r){return Ge(t).onAuthStateChanged(e,n,r)}const Dl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Dl,"1"),this.storage.removeItem(Dl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS=1e3,AS=10;class Z1 extends X1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=W1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);tS()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,AS):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},SS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Z1.type="LOCAL";const kS=Z1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew extends X1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ew.type="SESSION";const tw=ew;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new vu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async h=>h(n.origin,i)),u=await CS(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const h=Hf("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(g){const m=g;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(){return window}function bS(t){nn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(){return typeof nn().WorkerGlobalScope<"u"&&typeof nn().importScripts=="function"}async function PS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function NS(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function DS(){return nw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw="firebaseLocalStorageDb",LS=1,Ll="firebaseLocalStorage",sw="fbase_key";class Lo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function _u(t,e){return t.transaction([Ll],e?"readwrite":"readonly").objectStore(Ll)}function VS(){const t=indexedDB.deleteDatabase(rw);return new Lo(t).toPromise()}function Jh(){const t=indexedDB.open(rw,LS);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ll,{keyPath:sw})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ll)?e(r):(r.close(),await VS(),e(await Jh()))})})}async function cy(t,e,n){const r=_u(t,!0).put({[sw]:e,value:n});return new Lo(r).toPromise()}async function OS(t,e){const n=_u(t,!1).get(e),r=await new Lo(n).toPromise();return r===void 0?null:r.value}function hy(t,e){const n=_u(t,!0).delete(e);return new Lo(n).toPromise()}const MS=800,jS=3;class iw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>jS)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vu._getInstance(DS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await PS(),!this.activeServiceWorker)return;this.sender=new RS(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||NS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jh();return await cy(e,Dl,"1"),await hy(e,Dl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>cy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>OS(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>hy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=_u(s,!1).getAll();return new Lo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iw.type="LOCAL";const FS=iw;new No(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(t,e){return e?gn(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf extends Q1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Is(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Is(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Is(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function zS(t){return ES(t.auth,new Wf(t),t.bypassAuthState)}function BS(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),wS(n,new Wf(t),t.bypassAuthState)}async function $S(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),_S(n,new Wf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zS;case"linkViaPopup":case"linkViaRedirect":return $S;case"reauthViaPopup":case"reauthViaRedirect":return BS;default:Sn(this.auth,"internal-error")}}resolve(e){An(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){An(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=new No(2e3,1e4);class fs extends ow{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,fs.currentPopupAction&&fs.currentPopupAction.cancel(),fs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){An(this.filter.length===1,"Popup operations only handle one event");const e=Hf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(tn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(tn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qS.get())};e()}}fs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS="pendingRedirect",qa=new Map;class WS extends ow{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=qa.get(this.auth._key());if(!e){try{const r=await GS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}qa.set(this.auth._key(),e)}return this.bypassAuthState||qa.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GS(t,e){const n=JS(e),r=QS(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function KS(t,e){qa.set(t._key(),e)}function QS(t){return gn(t._redirectPersistence)}function JS(t){return $a(HS,t.config.apiKey,t.name)}async function YS(t,e,n=!1){if(dn(t.app))return Promise.reject(rr(t));const r=yu(t),s=US(r,e),o=await new WS(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=10*60*1e3;class ZS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!aw(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(tn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XS&&this.cachedEventUids.clear(),this.cachedEventUids.has(dy(e))}saveEventToCache(e){this.cachedEventUids.add(dy(e)),this.lastProcessedEventTime=Date.now()}}function dy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function aw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function eA(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tA(t,e={}){return Qs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rA=/^https?/;async function sA(t){if(t.config.emulator)return;const{authorizedDomains:e}=await tA(t);for(const n of e)try{if(iA(n))return}catch{}Sn(t,"unauthorized-domain")}function iA(t){const e=Kh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!rA.test(n))return!1;if(nA.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=new No(3e4,6e4);function fy(){const t=nn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function aA(t){return new Promise((e,n)=>{var r,s,i;function o(){fy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fy(),n(tn(t,"network-request-failed"))},timeout:oA.get()})}if(!((s=(r=nn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=nn().gapi)===null||i===void 0)&&i.load)o();else{const l=cS("iframefcb");return nn()[l]=()=>{gapi.load?o():n(tn(t,"network-request-failed"))},lS(`${uS()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Ha=null,e})}let Ha=null;function lA(t){return Ha=Ha||aA(t),Ha}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA=new No(5e3,15e3),cA="__/auth/iframe",hA="emulator/auth/iframe",dA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pA(t){const e=t.config;J(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?zf(e,hA):`https://${t.config.authDomain}/${cA}`,r={apiKey:e.apiKey,appName:t.name,v:$s},s=fA.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${To(r).slice(1)}`}async function gA(t){const e=await lA(t),n=nn().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:pA(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dA,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=tn(t,"network-request-failed"),l=nn().setTimeout(()=>{i(o)},uA.get());function u(){nn().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yA=500,vA=600,_A="_blank",wA="http://localhost";class py{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function EA(t,e,n,r=yA,s=vA){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},mA),{width:r.toString(),height:s.toString(),top:i,left:o}),h=it().toLowerCase();n&&(l=z1(h)?_A:n),F1(h)&&(e=e||wA,u.scrollbars="yes");const f=Object.entries(u).reduce((m,[S,C])=>`${m}${S}=${C},`,"");if(eS(h)&&l!=="_self")return TA(e||"",l),new py(null);const g=window.open(e||"",l,f);J(g,t,"popup-blocked");try{g.focus()}catch{}return new py(g)}function TA(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA="__/auth/handler",xA="emulator/auth/handler",SA=encodeURIComponent("fac");async function gy(t,e,n,r,s,i){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:$s,eventId:s};if(e instanceof J1){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",yI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,g]of Object.entries({}))o[f]=g}if(e instanceof Do){const f=e.getScopes().filter(g=>g!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),h=u?`#${SA}=${encodeURIComponent(u)}`:"";return`${AA(t)}?${To(l).slice(1)}${h}`}function AA({config:t}){return t.emulator?zf(t,xA):`https://${t.authDomain}/${IA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rc="webStorageSupport";class kA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tw,this._completeRedirectFn=YS,this._overrideRedirectResult=KS}async _openPopup(e,n,r,s){var i;An((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await gy(e,n,r,Kh(),s);return EA(e,o,Hf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await gy(e,n,r,Kh(),s);return bS(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(An(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await gA(e),r=new ZS(e);return n.register("authEvent",s=>(J(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Rc,{type:Rc},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Rc];o!==void 0&&n(!!o),Sn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=sA(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return W1()||U1()||$f()}}const CA=kA;var my="@firebase/auth",yy="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PA(t){Ps(new Mr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:G1(t)},h=new oS(r,s,i,u);return dS(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ps(new Mr("auth-internal",e=>{const n=yu(e.getProvider("auth").getImmediate());return(r=>new RA(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),tr(my,yy,bA(t)),tr(my,yy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA=5*60,DA=n_("authIdTokenMaxAge")||NA;let vy=null;const LA=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>DA)return;const s=n==null?void 0:n.token;vy!==s&&(vy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function VA(t=o_()){const e=Zd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=hS(t,{popupRedirectResolver:CA,persistence:[FS,kS,tw]}),r=n_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=LA(i.toString());IS(n,o,()=>o(n.currentUser)),TS(n,l=>o(l))}}const s=e_("auth");return s&&fS(n,`http://${s}`),n}function OA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}aS({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=tn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",OA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PA("Browser");const MA={apiKey:"AIzaSyDtr1pAc2oTWxnDyMHUclkt4G34qdAAAXw",authDomain:"guitarehunter-d6e35.firebaseapp.com",projectId:"guitarehunter-d6e35",storageBucket:"guitarehunter-d6e35.firebasestorage.app",messagingSenderId:"832778342585",appId:"1:832778342585:web:ff1f8ccd8daf15be60cb68",measurementId:"G-RREDDZGFMR"},lw=i_(MA),_y=VA(lw),Vo=gx(lw),wu="00737242777130596039",Eu="c_5d118e719dbddbfc_index.html-217",uw=Ks(Vo,"artifacts",Eu,"users",wu),cw=du(Vo,"artifacts",Eu,"users",wu,"guitar_deals"),Gf=du(Vo,"artifacts",Eu,"users",wu,"cities"),hw=du(Vo,"artifacts",Eu,"users",wu,"commands"),jA=t=>{if(Object(t)!==t||Array.isArray(t))return t;const e={};for(const n in t){let r=e,s="",i=n.split(".");for(let o=0;o<i.length;o++){let l=!isNaN(parseInt(i[o]));r=r[s]||(r[s]=l?[]:{}),s=i[o]}r[s]=t[n]}return e[""]||e},Fs=async t=>{try{console.log("Saving user config to Firestore:",t);const e=jA(t);await Nx(uw,e,{merge:!0}),console.log("Config saved successfully.")}catch(e){throw console.error("Error updating user config:",e),new Error("Erreur de sauvegarde de la configuration.")}},FA=()=>Fs({forceRefresh:Date.now(),scanError:Vx()}),UA=()=>Fs({forceCleanup:Date.now()}),zA=()=>Fs({forceReanalyzeAll:Date.now()}),BA=t=>Fs({scanSpecificUrl:t}),$A=(t,e)=>(console.log("Setting up onSnapshot for bot config..."),Po(uw,n=>{if(n.exists()){const r=n.data();console.log(" Firestore Update Received (Bot Config):",r),t(r)}else console.warn("User document not found in Firestore."),e({message:"Dossier Python introuvable"})},n=>{console.error("Error listening to bot config:",n),e(n)})),Kf=t=>Ks(cw,t),qA=(t,e)=>Po(cw,n=>{const r=n.docs.map(s=>({id:s.id,...s.data()}));r.sort((s,i)=>{var o,l;return(((o=i.timestamp)==null?void 0:o.seconds)||0)-(((l=s.timestamp)==null?void 0:l.seconds)||0)}),t(r,n.size)},n=>{console.error("Error listening to deals:",n),e(n)}),HA=async t=>{try{await jf(Kf(t),{status:"rejected","aiAnalysis.verdict":"REJECTED"})}catch(e){throw console.error(`Error rejecting deal ${t}:`,e),new Error("Erreur lors du rejet de l'annonce.")}},WA=async t=>{try{await C1(Kf(t))}catch(e){throw console.error(`Error deleting deal ${t}:`,e),new Error("Erreur lors de la suppression de l'annonce.")}},GA=t=>Tu("ANALYZE_DEAL",{dealId:t,forceExpert:!1}),KA=t=>Tu("ANALYZE_DEAL",{dealId:t,forceExpert:!0}),QA=async(t,e)=>{try{await jf(Kf(t),{isFavorite:!e})}catch(n){throw console.error(`Error toggling favorite for deal ${t}:`,n),new Error("Erreur lors de la mise  jour des favoris.")}},JA=(t,e)=>Po(Gf,n=>{const r=n.docs.map(s=>({docId:s.id,...s.data()}));r.sort((s,i)=>s.name.localeCompare(i.name)),t(r)},n=>{console.error("Error listening to cities:",n),e(n)}),YA=t=>Tu("ADD_CITY",t),XA=async t=>{try{await C1(Ks(Gf,t))}catch(e){throw console.error(`Error deleting city ${t}:`,e),new Error("Erreur lors de la suppression de la ville.")}},ZA=async(t,e)=>{try{await jf(Ks(Gf,t),{isScannable:!e})}catch(n){throw console.error(`Error toggling scannable for city ${t}:`,n),new Error("Erreur lors de la mise  jour de la ville.")}},Tu=async(t,e)=>{try{const n=await Dx(hw,{type:t,payload:e,status:"pending",createdAt:new Date});return console.log(`Command ${t} added with ID: ${n.id}.`),n}catch(n){throw console.error(`Error adding command ${t}:`,n),new Error("Erreur lors de l'envoi de la commande.")}},e7=(t,e)=>{const n=Ks(hw,t);return Po(n,r=>{r.exists()&&e(r.data())},r=>{console.error(`Error listening to command ${t}:`,r)})},t7=()=>Tu("CLEAR_LOGS",null),n7={electrique:{solid_body:{S_Style:["Stratocaster","Silver Sky","Pacifica","S-Type Standard"],Super_Strat:["RG/S/SA (Ibanez)","Dinky/Soloist (Jackson)","M/H Series (ESP/LTD)","HSS Modern","Charvel DK"],T_Style:["Telecaster","ASAT (G&L)","Tele-Deluxe (Dual HH)","Cabronita"],Single_Cut:["Les Paul","Eclipse (EC)","Singlecut (PRS)","LP Junior/Special (P90)"],Double_Cut:["SG","Viper (ESP)","Custom 24/22 (PRS)","Santana Shape"],Offset:["Jazzmaster","Jaguar","Mustang","Firebird","Jagmaster","Meteora"],Extreme_Shape:["Explorer","Flying V","Kelly (KE)","Rhoads (RR)","Warrior (WR)","Iceman","Mockingbird","Warlock","ML (Dean)","Razorback"],Headless_Solid:["Strandberg Boden","Steinberger Spirit","Kiesel Vader","EART Headless"],Extended_Range:["7-Strings","8-Strings","Baritone Electric","Multi-scale / Fanned Fret"]},semi_hollow_1_2_caisse:{ES_Style:["335 (Double Cut)","339 (Small Body)","Starcaster","Sheraton/Riviera"],Thinline:["Telecaster Thinline","Offset Thinline","Semi-Hollow PRS"],Single_Cut_Semi:["Gretsch Electromatic (Semi)","Duesenberg Style"]},hollow_body_full_caisse:{Jazz_Box:["L5 style (Profonde)","Emperor","Joe Pass","Archtop Acoustique"],Thin_Hollow_1_4_caisse:["Casino / ES-330 (Full Hollow mince)","Gretsch 6120 / Hollow"],Headless_Hollow:["Strandberg Slen (Chambered)"]}},acoustique_acier:{formes_standard:{Dreadnought:["Dreadnought Standard","Slope Shoulder"],Parlor:["Parlor Standard","0 (Concert)"],Grand_Concert:["00 (Grand Concert)"],Orchestra:["000 / OM (Orchestra)","Auditorium"],Grand_Auditorium:["Grand Auditorium (GA)","Grand Symphony"],Jumbo:["Jumbo Standard","Super Jumbo"]},specialites:{"12_Cordes":["Dreadnought 12","Jumbo 12"],Resonateur:["Dobro","National Style"],Manouche:["Petite bouche","Grande bouche"],Baritone:["Baritone Acoustique"],Travel:["Baby / Mini","Backpacker"]},headless_acoustic:["Journey Instruments","Ciari","Enya Carbon Headless"]},electro_acoustique:{standard:["Dreadnought Cutaway","Auditorium CE","Jumbo w/ Preamp"],hybride_slim:["Acoustasonic (Fender)","Thinline Acoustic (T5z)","Stage Guitar (Cordes acier)"]},classique_nylon:{types:["Classique Standard","Flamenca (Cypress/Sycamore)","Crossover (Manche fin/Rayon)","Requinto","7-Cordes Nylon"],modern:["Silent Guitar (SLG)","Stage Nylon (Multiac/Godin)","Headless Nylon"]},basse:{solid_body:["Precision Bass (P)","Jazz Bass (J)","PJ Configuration","Stingray (H/HH)","Modern Soapbar (BTB/SR)","Singlecut Bass"],headless_bass:["Ibanez EHB","Steinberger XL/L","Kiesel Osiris Bass"],specialites:["Basse Acoustique","Basse Semi-Hollow (Viola/Violin)","Basse Fretless","Basse 5/6+ cordes","U-Bass (Ukulele Bass)"]}},r7=["Tu es un Matre Luthier et un expert en achat-revente de guitares.","Ton objectif est de dterminer la RENTABILIT de cette annonce.","","TES OBJECTIFS :","1. **FILTRAGE** : Si ce n'est pas une guitare (Service, Accessoire, Jouet), classe en REJECTED_... immdiatement.","2. **CALCULS FINANCIERS (Obligatoires)** :","   - Estime la valeur de l'tui ($CAN).","   - Calcule le Cot Net (Prix - tui).","   - Estime le Potentiel de Revente (aprs restauration).","   - Calcule la Marge Brute (Revente - Prix).","3. **CLASSIFICATION** : Choisis UN verdict parmi : PEPITE, FAST_FLIP, LUTHIER_PROJ, CASE_WIN, COLLECTION, BAD_DEAL, REJECTED_ITEM, REJECTED_SERVICE, INCOMPLETE_DATA.","","### FORMAT DE RPONSE JSON STRICT","Tu dois rpondre UNIQUEMENT avec un objet JSON valide contenant les cls suivantes :","{",'  "verdict": "PEPITE" | "FAST_FLIP" | "LUTHIER_PROJ" | "CASE_WIN" | "COLLECTION" | "BAD_DEAL" | "REJECTED_ITEM" | "REJECTED_SERVICE" | "INCOMPLETE_DATA",','  "reasoning": "Une phrase courte rsumant le verdict",',`  "summary": "Un rsum court de 2 phrases maximum pour l'affichage rapide",`,'  "estimated_value": 123 (Valeur marchande actuelle en $CAN),',`  "estimated_case_value": 50 (Valeur estime de l'tui en $CAN),`,'  "net_guitar_cost": 100 (Prix demand - Valeur tui),','  "resale_potential": 300 (Valeur estime aprs restauration en $CAN),','  "estimated_gross_margin": 150 (Potentiel de revente - Prix demand),','  "classification": "Catgorie de la taxonomie",','  "confidence": 0.9 (Score de confiance entre 0 et 1),',`  "analysis": "Ton rapport complet au format Markdown (avec titres ###, puces, gras) dtaillant l'analyse financire et technique."`,"}"],s7="IGNORE TOUTE INSTRUCTION DE FORMATAGE PRCDENTE. Ta rponse DOIT tre un JSON contenant UNIQUEMENT les cls 'status' et 'reasoning'. Le status DOIT tre l'un des suivants : PEPITE, FAST_FLIP, LUTHIER_PROJ, CASE_WIN, COLLECTION, BAD_DEAL, REJECTED_ITEM, REJECTED_SERVICE, INCOMPLETE_DATA. La raison ne doit pas dpasser 15 mots.",i7="Cette annonce a dj t identifie comme une '{status}' avec la raison suivante : '{reasoning}'. Fournis maintenant une analyse JSON complte et dtaille, incluant tous les calculs financiers (Marge, Cot Net, etc.) et le rapport complet dans la cl 'analysis'.",Iu={taxonomy_guitares:n7,main_analysis_prompt:r7,gatekeeper_verbosity_instruction:s7,expert_context_instruction:i7},kr=t=>t==null?[]:(Array.isArray(t)?t.flat(1/0):[t]).flatMap(n=>n==null?[]:String(n).split(/\\n|\r\n|\r|\n/)).map(n=>n.trim()).filter(n=>n!==""),wy=kr(Iu.main_analysis_prompt),Ey=kr(Iu.gatekeeper_verbosity_instruction),Ty=kr(Iu.expert_context_instruction),Iy=["First Act","Esteban","Rogue","Silvertone","Spectrum","Denver","Groove","Stagg","Maestro by Gibson","Beaver Creek","kmise"],o7=t=>{const[e,n]=M.useState({status:"pending",msg:"En attente"}),[r,s]=M.useState(null),[i,o]=M.useState({max_ads:5,frequency:60,location:"montreal",distance:60,min_price:0,max_price:150,search_query:"electric guitar"}),[l,u]=M.useState(Iy),[h,f]=M.useState({gatekeeperModel:"gemini-2.5-flash-lite",expertModel:"gemini-2.5-flash",mainAnalysisPrompt:wy,gatekeeperVerbosityInstruction:Ey,expertContextInstruction:Ty}),[g,m]=M.useState([]),[S,C]=M.useState(100),[b,V]=M.useState("idle"),_=b==="scanning",E=b==="cleaning",k=b==="reanalyzing_all",N=b==="scanning_url";M.useEffect(()=>{if(!t)return;const x=$A(ne=>{console.log(" useBotConfig: Received update from Firestore",ne),n({status:"success",msg:"Dossier Python trouv"}),ne.scanConfig&&o(De=>({...De,...ne.scanConfig})),ne.exclusionKeywords&&u(kr(ne.exclusionKeywords)),ne.availableModels&&Array.isArray(ne.availableModels)&&m(ne.availableModels),ne.analysisConfig&&(console.log(" Updating analysisConfig from Firestore data"),f(De=>({...De,...ne.analysisConfig,mainAnalysisPrompt:kr(ne.analysisConfig.mainAnalysisPrompt||De.mainAnalysisPrompt),gatekeeperVerbosityInstruction:kr(ne.analysisConfig.gatekeeperVerbosityInstruction||De.gatekeeperVerbosityInstruction),expertContextInstruction:kr(ne.analysisConfig.expertContextInstruction||De.expertContextInstruction)}))),ne.logLimit&&C(ne.logLimit),ne.botStatus&&V(ne.botStatus),ne.scanError?s(ne.scanError):r&&r.startsWith("Ville")&&s(null)},ne=>{console.error(" useBotConfig: Error receiving update",ne),n({status:"error",msg:ne.message})});return()=>x()},[t,r]);const F=M.useCallback(async A=>{try{console.log(" Saving config...",A),await Fs(A)}catch(R){s(R.message)}},[]),z=M.useCallback(async()=>{try{await FA()}catch(A){s(A.message)}},[]),T=M.useCallback(async()=>{try{await UA()}catch(A){s(A.message)}},[]),v=M.useCallback(async()=>{if(window.confirm(" ATTENTION : Voulez-vous vraiment relancer l'analyse IA pour TOUTES les annonces ?"))try{await zA()}catch(A){s(A.message)}},[]),w=M.useCallback(async(A,R)=>{if(A)try{await BA(A),R("")}catch(x){s(x.message)}},[]),I=M.useCallback(async()=>{if(window.confirm("Voulez-vous vraiment rinitialiser les paramtres du bot aux valeurs par dfaut ?")){const A={exclusionKeywords:Iy,analysisConfig:{gatekeeperModel:"gemini-2.5-flash-lite",expertModel:"gemini-2.5-flash",mainAnalysisPrompt:wy,gatekeeperVerbosityInstruction:Ey,expertContextInstruction:Ty},logLimit:100};u(A.exclusionKeywords),f(A.analysisConfig),C(A.logLimit);try{await Fs(A)}catch(R){s(R.message)}}},[]);return{configStatus:e,error:r,setError:s,scanConfig:i,setScanConfig:o,exclusionKeywords:l,setExclusionKeywords:u,analysisConfig:h,setAnalysisConfig:f,availableModels:g,logLimit:S,setLogLimit:C,isRefreshing:_,isCleaning:E,isReanalyzingAll:k,isScanningUrl:N,saveConfig:F,handleManualRefresh:z,handleManualCleanup:T,handleRelaunchAll:v,handleScanSpecificUrl:w,handleResetDefaults:I}},Oo=()=>{const[t,e]=M.useState(null),[n,r]=M.useState({status:"loading",msg:"Connexion..."});return M.useEffect(()=>{(async()=>{try{await vS(_y),r({status:"success",msg:"Authentifi"})}catch(o){r({status:"error",msg:o.message})}})();const i=xS(_y,e);return()=>i()},[]),{user:t,authStatus:n}},dw=M.createContext(null),a7=({children:t})=>{const{user:e}=Oo(),n=o7(e);return p.jsx(dw.Provider,{value:n,children:t})},gr=()=>{const t=M.useContext(dw);if(!t)throw new Error("useBotConfigContext must be used within a BotConfigProvider");return t},fw={PEPITE:{id:"PEPITE",label:"Ppite",pluralLabel:"Ppites",color:"bg-yellow-400",icon:DT},FAST_FLIP:{id:"FAST_FLIP",label:"Fast Flip",pluralLabel:"Fast Flips",color:"bg-emerald-500",icon:Jd},LUTHIER_PROJ:{id:"LUTHIER_PROJ",label:"Projet Luthier",pluralLabel:"Projets Luthier",color:"bg-orange-500",icon:Ah},CASE_WIN:{id:"CASE_WIN",label:'tui "Gratuit"',pluralLabel:"Case Wins",color:"bg-sky-500",icon:CT},COLLECTION:{id:"COLLECTION",label:"Collection",pluralLabel:"Collection",color:"bg-blue-500",icon:MT},BAD_DEAL:{id:"BAD_DEAL",label:"Trop Cher",pluralLabel:"Trop Cher",color:"bg-rose-500",icon:H0},REJECTED_ITEM:{id:"REJECTED_ITEM",label:"Item Rejet",pluralLabel:"Items Rejets",color:"bg-slate-600",icon:Wd},REJECTED_SERVICE:{id:"REJECTED_SERVICE",label:"Service Rejet",pluralLabel:"Services Rejets",color:"bg-slate-600",icon:KT},INCOMPLETE_DATA:{id:"INCOMPLETE_DATA",label:"Donnes Manquantes",pluralLabel:"Donnes Manquantes",color:"bg-slate-400",icon:Xl}},pw={GOOD_DEAL:{id:"GOOD_DEAL",label:"Bonne Affaire",pluralLabel:"Bonnes Affaires",color:"bg-emerald-500",icon:Jd},FAIR:{id:"FAIR",label:"Prix Correct",pluralLabel:"Prix Juste",color:"bg-blue-500",icon:Gd},REJECTED:{id:"REJECTED",label:"Rejet",pluralLabel:"Rejetes",color:"bg-slate-600",icon:Wd}},l7={ALL:{id:"ALL",label:"Toutes",icon:K0},FAVORITES:{id:"FAVORITES",label:"Favoris",icon:HT},ERROR:{id:"ERROR",label:"Erreurs",icon:Zl}},u7=["PEPITE","FAST_FLIP","LUTHIER_PROJ","CASE_WIN","GOOD_DEAL"],c7=["COLLECTION","BAD_DEAL","FAIR"],xy=["REJECTED_ITEM","REJECTED_SERVICE","INCOMPLETE_DATA","REJECTED"],h7=["ALL","FAVORITES","PEPITE","FAST_FLIP","LUTHIER_PROJ","CASE_WIN","COLLECTION","BAD_DEAL","REJECTED_ITEM","ERROR"],Yh={...fw,...pw,...l7,DEFAULT:{id:"DEFAULT",label:"Analyse...",color:"bg-slate-400",icon:En}},d7={...fw,...pw},vi=Iu.taxonomy_guitares||{},Ia=t=>t?t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^a-z0-9]/g,""):"",f7=(t,e)=>{const[n,r]=M.useState([]),[s,i]=M.useState(!0),[o,l]=M.useState({status:"pending",msg:"En attente"}),[u,h]=M.useState("ALL"),[f,g]=M.useState(""),[m,S]=M.useState("ALL"),[C,b]=M.useState("ALL"),[V,_]=M.useState("ALL");M.useEffect(()=>{if(!t)return;const H=qA((L,B)=>{r(L.map(q=>({...q}))),i(!1),l({status:"success",msg:`${B} annonces`})},L=>{e(L.message),i(!1),l({status:"error",msg:L.message})});return()=>H()},[t,e]);const E=M.useCallback(async H=>{try{await HA(H)}catch(L){e(L.message)}},[e]),k=M.useCallback(async H=>{if(window.confirm("Voulez-vous vraiment supprimer dfinitivement cette annonce ?"))try{await WA(H)}catch(L){e(L.message)}},[e]),N=M.useCallback(async H=>{r(L=>L.map(B=>B.id===H?{...B,status:"analyzing",aiAnalysis:{...B.aiAnalysis,reasoning:void 0,verdict:void 0}}:B));try{await GA(H)}catch(L){e(L.message)}},[e]),F=M.useCallback(async H=>{r(L=>L.map(B=>B.id===H?{...B,status:"analyzing_expert",aiAnalysis:{...B.aiAnalysis,reasoning:void 0,verdict:void 0}}:B));try{await KA(H)}catch(L){e(L.message)}},[e]),z=M.useCallback(async(H,L)=>{try{await QA(H,L)}catch(B){e(B.message)}},[e]),T=M.useMemo(()=>{const H={},L=(B,q)=>{Array.isArray(B)?B.forEach(X=>{H[Ia(X)]=[...q,X]}):typeof B=="object"&&B!==null&&Object.keys(B).forEach(X=>{const ae=[...q,X];H[Ia(X)]=ae,L(B[X],ae)})};return L(vi,[]),H},[]),v=M.useMemo(()=>["ALL",...Object.keys(vi),"OTHER"],[]),w=M.useMemo(()=>{if(m==="ALL"||m==="OTHER"||!vi[m])return["ALL"];const H=vi[m];return["ALL",...Array.isArray(H)?H:Object.keys(H)]},[m]),I=M.useMemo(()=>{if(C==="ALL"||m==="ALL"||m==="OTHER")return["ALL"];const H=vi[m];if(Array.isArray(H))return["ALL"];const L=H[C];return!L||Array.isArray(L)?["ALL"]:["ALL",...Object.keys(L)]},[m,C]);M.useEffect(()=>{b("ALL"),_("ALL")},[m]),M.useEffect(()=>{_("ALL")},[C]);const A=M.useCallback((H,L)=>{if(H.status==="rejected")return!1;const B=H.aiAnalysis||{},q=B.verdict||"PENDING",X=!H.aiAnalysis||q==="DEFAULT"||q==="ERROR"||!B.reasoning&&q!=="PENDING";return L==="ERROR"?X:L==="REJECTED"?!1:L==="FAVORITES"?H.isFavorite:L===q?!0:L==="ALL"?!(X||xy.includes(q)):!1},[]),R=M.useCallback((H,L,B,q,X)=>{var ot;if(H.status==="rejected"||X&&!((ot=H.title)!=null&&ot.toLowerCase().includes(X.toLowerCase())))return!1;const se=(H.aiAnalysis||{}).classification,Se=se?T[Ia(se)]:null;if(L!=="ALL"){if(L==="OTHER"){if(Se)return!1}else if(!Se||Se[0]!==L||B!=="ALL"&&(Se.length<2||Se[1]!==B)||q!=="ALL"&&(Se.length<3||Se[2]!==q))return!1}return!0},[T]),x=M.useMemo(()=>{const H={OTHER:0};return n.forEach(L=>{var X;if(!A(L,u))return;const B=(X=L.aiAnalysis)==null?void 0:X.classification;if(!B){H.OTHER++;return}const q=T[Ia(B)];q?(q[0]&&(H[q[0]]=(H[q[0]]||0)+1),q[1]&&(H[q[1]]=(H[q[1]]||0)+1),q[2]&&(H[q[2]]=(H[q[2]]||0)+1)):H.OTHER++}),H},[n,u,A,T]),ne=M.useMemo(()=>{const H={ALL:0,FAVORITES:0,REJECTED:0,ERROR:0};return Object.keys(d7).forEach(L=>H[L]=0),n.forEach(L=>{var X;if(L.status==="rejected"){H.REJECTED++;return}if(!R(L,m,C,V,f))return;const B=((X=L.aiAnalysis)==null?void 0:X.verdict)||"PENDING";!L.aiAnalysis||B==="DEFAULT"||B==="ERROR"||!L.aiAnalysis.reasoning&&B!=="PENDING"?H.ERROR++:(xy.includes(B)||H.ALL++,H.hasOwnProperty(B)&&H[B]++),L.isFavorite&&H.FAVORITES++}),H},[n,m,C,V,f,R]),De=M.useMemo(()=>n.filter(H=>{if(u==="REJECTED")return H.status==="rejected";const L=A(H,u),B=R(H,m,C,V,f);return L&&B}),[n,u,m,C,V,f,A,R]),Ot=M.useMemo(()=>({...ne,...x}),[ne,x]);return{deals:n,loading:s,dbStatus:o,filteredDeals:De,counts:Ot,filterProps:{filterType:u,setFilterType:h,searchQuery:f,setSearchQuery:g,level1Filter:m,setLevel1Filter:S,level2Filter:C,setLevel2Filter:b,level3Filter:V,setLevel3Filter:_,level1Options:v,level2Options:w,level3Options:I,counts:Ot},dealActions:{handleRejectDeal:E,handleDeleteDeal:k,handleRetryAnalysis:N,handleForceExpertAnalysis:F,handleToggleFavorite:z}}},gw=M.createContext(null),p7=({children:t})=>{const{user:e}=Oo(),{setError:n}=gr(),r=f7(e,n);return p.jsx(gw.Provider,{value:r,children:t})},g7=()=>{const t=M.useContext(gw);if(!t)throw new Error("useDealsContext must be used within a DealsProvider");return t},m7=(t,e)=>{const[n,r]=M.useState([]),[s,i]=M.useState(""),[o,l]=M.useState(!1);M.useEffect(()=>{if(!t)return;const g=JA(m=>r(m),m=>e(m.message));return()=>g()},[t,e]);const u=M.useCallback(async()=>{if(s){l(!0);try{const g=await YA(s),m=e7(g.id,S=>{S.status==="completed"?(i(""),l(!1),m()):S.status==="failed"&&(e(S.error||"Erreur lors de l'ajout de la ville."),l(!1),i(""),m())})}catch(g){e(g.message),l(!1)}}},[s,e]),h=M.useCallback(async g=>{if(window.confirm("Voulez-vous vraiment supprimer cette ville ?"))try{await XA(g)}catch(m){e(m.message)}},[e]),f=M.useCallback(async(g,m)=>{try{await ZA(g,m)}catch(S){e(S.message)}},[e]);return{cities:n,newCityName:s,setNewCityName:i,isAddingCity:o,handleAddCity:u,handleDeleteCity:h,handleToggleScannable:f}},mw=M.createContext(null),y7=({children:t})=>{const{user:e}=Oo(),{setError:n}=gr(),r=m7(e,n);return p.jsx(mw.Provider,{value:r,children:t})},v7=()=>{const t=M.useContext(mw);if(!t)throw new Error("useCitiesContext must be used within a CitiesProvider");return t},bc=({label:t,status:e,details:n})=>p.jsxs("div",{className:"flex items-start gap-2 text-[10px] font-mono mb-2 p-2 bg-slate-50 rounded-lg border border-slate-100",children:[p.jsxs("div",{className:"mt-0.5",children:[e==="loading"&&p.jsx(En,{size:12,className:"animate-spin text-blue-500"}),e==="success"&&p.jsx(Gd,{size:12,className:"text-emerald-500"}),e==="error"&&p.jsx(Zl,{size:12,className:"text-rose-500"}),e==="pending"&&p.jsx("div",{className:"w-3 h-3 rounded-full border-2 border-slate-300"})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("div",{className:`font-bold uppercase ${e==="error"?"text-rose-600":"text-slate-600"}`,children:t}),n&&p.jsx("p",{className:"text-slate-400 leading-tight mt-0.5 break-all",children:n})]})]}),Ft=({title:t,children:e})=>{const[n,r]=M.useState(!1);return p.jsxs("div",{className:"mt-4 border-t border-slate-200 pt-4",children:[p.jsxs("button",{onClick:()=>r(!n),className:"flex justify-between items-center w-full text-left text-sm font-bold text-slate-600 hover:text-blue-600 transition-colors",children:[p.jsx("span",{children:t}),p.jsx(yl,{size:16,className:`transform transition-transform duration-200 ${n?"rotate-90":""}`})]}),n&&p.jsx("div",{className:"mt-2 animate-in fade-in",children:e})]})},Sy=({onClose:t})=>{const{user:e}=Oo(),{logLimit:n}=gr(),[r,s]=M.useState([]),[i,o]=M.useState(!1),[l,u]=M.useState(!1),h=M.useRef(null);M.useEffect(()=>{if(!e)return;const b=du(Vo,"artifacts/c_5d118e719dbddbfc_index.html-217/users/00737242777130596039/logs"),V=Ax(b,kx("timestamp","desc"),Cx(n||100)),_=Po(V,E=>{if(l)return;const k=E.docs.map(N=>({id:N.id,...N.data()})).sort((N,F)=>{var v,w;const z=((v=N.timestamp)==null?void 0:v.seconds)||N.createdAt||0,T=((w=F.timestamp)==null?void 0:w.seconds)||F.createdAt||0;return z-T});s(k)},E=>{console.error("Error fetching logs: ",E),s(k=>[...k,{id:Date.now(),level:"ERROR",message:"Failed to fetch logs from Firestore: "+E.message}])});return()=>_()},[e,l,n]),M.useEffect(()=>{!l&&h.current&&h.current.scrollIntoView({behavior:"smooth"})},[r,l]);const f=()=>{window.confirm("Voulez-vous vraiment supprimer TOUS les logs de la base de donnes ? Cette action est irrversible.")&&t7().catch(S=>alert(`Erreur lors de la demande de suppression des logs: ${S.message}`))},g=S=>{switch(S){case"INFO":return"text-blue-400";case"WARNING":return"text-amber-400";case"ERROR":return"text-rose-400";case"CRITICAL":return"text-rose-600 font-bold";default:return"text-slate-300"}},m=i?"w-[90vw] h-[80vh] max-w-[1200px] max-h-[900px]":"w-[450px] h-[350px]";return p.jsxs("div",{className:`fixed bottom-4 right-4 bg-slate-900/95 backdrop-blur-sm text-slate-200 rounded-xl shadow-2xl border border-slate-700 flex flex-col transition-all duration-300 z-50 ${m}`,children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-slate-700 bg-slate-800/80 rounded-t-xl cursor-move flex-shrink-0",children:[p.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-widest text-slate-400",children:[p.jsx(kh,{size:14}),p.jsxs("span",{children:["Server Logs (Max: ",n,")"]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:()=>u(!l),className:"p-1 hover:bg-slate-700 rounded text-slate-400 hover:text-white",title:l?"Reprendre":"Pause",children:l?p.jsx(FT,{size:14}):p.jsx(jT,{size:14})}),p.jsx("button",{onClick:()=>s([]),className:"p-1 hover:bg-slate-700 rounded text-slate-400 hover:text-white",title:"Effacer l'affichage local",children:p.jsx(so,{size:14})}),p.jsx("button",{onClick:f,className:"p-1 hover:bg-rose-800 rounded text-rose-400 hover:text-rose-200",title:"Vider la base de donnes (distant)",children:p.jsx(so,{size:14})}),p.jsx("button",{onClick:()=>o(!i),className:"p-1 hover:bg-slate-700 rounded text-slate-400 hover:text-white",children:i?p.jsx(Q0,{size:14}):p.jsx(Qd,{size:14})}),p.jsx("button",{onClick:t,className:"p-1 hover:bg-rose-900 rounded text-slate-400 hover:text-rose-400",children:p.jsx(io,{size:14})})]})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 font-mono text-xs space-y-1 scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-transparent min-h-0",children:[r.length===0?p.jsx("div",{className:"h-full flex items-center justify-center text-slate-600 italic",children:"En attente de logs..."}):r.map(S=>{var C;return p.jsxs("div",{className:"break-words hover:bg-slate-800/50 p-0.5 rounded",children:[p.jsxs("span",{className:"text-slate-500 mr-2",children:["[",(C=S.timestamp)!=null&&C.seconds?new Date(S.timestamp.seconds*1e3).toLocaleTimeString():"??:??:??","]"]}),p.jsx("span",{className:`font-bold mr-2 ${g(S.level)}`,children:S.level}),p.jsx("span",{className:"text-slate-300",children:S.message})]},S.id)}),p.jsx("div",{ref:h})]})]})},Wa=({items:t,onChange:e,onSave:n,placeholder:r="Nouvelle instruction..."})=>{const s=M.useMemo(()=>Array.isArray(t)?t:[],[t]);M.useEffect(()=>{if(s.some(g=>typeof g=="string"&&(g.includes(`
`)||g.includes("\\n")))){const m=s.flatMap(S=>typeof S!="string"?S:S.split(/\\n|\r?\n/)).map(S=>S?S.trim():"").filter(S=>S!=="");JSON.stringify(m)!==JSON.stringify(s)&&e(m)}},[s,e]);const i=(f,g)=>{const m=[...s];if(g.includes(`
`)){const S=g.split(/\r?\n/);m.splice(f,1,...S)}else m[f]=g;e(m)},o=()=>{const f=s.filter(g=>g&&g.trim()!=="");JSON.stringify(f)!==JSON.stringify(s)&&e(f),n(f)},l=(f,g)=>{const m=[...s];g==="up"&&f>0?[m[f],m[f-1]]=[m[f-1],m[f]]:g==="down"&&f<m.length-1&&([m[f],m[f+1]]=[m[f+1],m[f]]),e(m),n(m)},u=f=>{const g=s.filter((m,S)=>S!==f);e(g),n(g)},h=()=>{const f=[...s,""];e(f)};return p.jsxs("div",{className:"space-y-3",children:[s.map((f,g)=>p.jsxs("div",{className:"flex items-start gap-2 group animate-in fade-in slide-in-from-left-2 duration-200",children:[p.jsxs("div",{className:"flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity pt-2",children:[p.jsx("button",{onClick:()=>l(g,"up"),disabled:g===0,className:"text-slate-300 hover:text-blue-500 disabled:opacity-0",children:p.jsx(kT,{size:14})}),p.jsx("button",{onClick:()=>l(g,"down"),disabled:g===s.length-1,className:"text-slate-300 hover:text-blue-500 disabled:opacity-0",children:p.jsx(AT,{size:14})})]}),p.jsx("textarea",{value:f,onChange:m=>i(g,m.target.value),onBlur:o,className:"flex-grow p-3 bg-white border border-slate-200 rounded-lg text-xs focus:ring-2 focus:ring-purple-500 outline-none transition-all font-mono text-slate-600 resize-none overflow-hidden min-h-[60px] leading-relaxed shadow-sm",rows:Math.max(2,Math.ceil((f||"").length/70)),placeholder:r}),p.jsx("button",{onClick:()=>u(g),className:"text-slate-300 hover:text-rose-500 opacity-0 group-hover:opacity-100 transition-opacity p-2 pt-3",children:p.jsx(so,{size:16})})]},g)),p.jsxs("button",{onClick:h,className:"w-full py-3 border-2 border-dashed border-slate-200 rounded-lg text-slate-400 hover:border-purple-300 hover:text-purple-500 hover:bg-purple-50 transition-all flex items-center justify-center gap-2 text-xs font-bold uppercase tracking-wider mt-2",children:[p.jsx(J0,{size:14})," Ajouter une ligne"]})]})},Ay=()=>{const{scanConfig:t,setScanConfig:e,saveConfig:n,handleScanSpecificUrl:r,isScanningUrl:s}=gr(),[i,o]=M.useState("");return p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Dist (km)"}),p.jsx("input",{type:"number",value:t.distance,onChange:l=>e({...t,distance:Number(l.target.value)}),onBlur:()=>n({scanConfig:t}),className:"w-full p-2 bg-slate-50 border border-slate-200 rounded-lg text-xs"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Max Ads"}),p.jsx("input",{type:"number",value:t.max_ads,onChange:l=>e({...t,max_ads:Number(l.target.value)}),onBlur:()=>n({scanConfig:t}),className:"w-full p-2 bg-slate-50 border border-slate-200 rounded-lg text-xs"})]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Min Price"}),p.jsx("input",{type:"number",value:t.min_price,onChange:l=>e({...t,min_price:Number(l.target.value)}),onBlur:()=>n({scanConfig:t}),className:"w-full p-2 bg-slate-50 border border-slate-200 rounded-lg text-xs"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Max Price"}),p.jsx("input",{type:"number",value:t.max_price,onChange:l=>e({...t,max_price:Number(l.target.value)}),onBlur:()=>n({scanConfig:t}),className:"w-full p-2 bg-slate-50 border border-slate-200 rounded-lg text-xs"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Frquence (min)"}),p.jsx("input",{type:"number",value:t.frequency,onChange:l=>e({...t,frequency:Number(l.target.value)}),onBlur:()=>n({scanConfig:t}),className:"w-full p-2 bg-slate-50 border border-slate-200 rounded-lg text-xs"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Search Query"}),p.jsx("input",{type:"text",value:t.search_query,onChange:l=>e({...t,search_query:l.target.value}),onBlur:()=>n({scanConfig:t}),className:"w-full p-2 bg-slate-50 border border-slate-200 rounded-lg text-xs"})]}),p.jsxs("div",{className:"pt-3 border-t border-slate-100",children:[p.jsx("label",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Scan d'URL Spcifique"}),p.jsxs("div",{className:"flex gap-2 mt-1",children:[p.jsx("input",{type:"text",placeholder:"Coller l'URL de l'annonce Facebook...",value:i,onChange:l=>o(l.target.value),className:"flex-grow p-2 bg-slate-50 border border-slate-200 rounded-lg text-xs"}),p.jsx("button",{onClick:()=>r(i,o),disabled:!i||s,className:"bg-blue-500 text-white px-3 py-2 rounded-lg text-xs font-bold hover:bg-blue-600 disabled:bg-slate-300 flex items-center justify-center",children:s?p.jsx(En,{size:14,className:"animate-spin"}):p.jsx(Xl,{size:14})})]})]})]})},ky=()=>{const{cities:t,handleToggleScannable:e,newCityName:n,setNewCityName:r,handleAddCity:s,isAddingCity:i}=v7(),[o,l]=M.useState(""),[u,h]=M.useState(!1),f=M.useMemo(()=>t.filter(b=>b.isScannable),[t]),g=M.useMemo(()=>o?t.filter(b=>!b.isScannable&&b.name.toLowerCase().includes(o.toLowerCase())&&b.id):[],[o,t]),m=b=>{e(b.docId,!1),l("")},S=b=>{e(b.docId,!0)},C=async()=>{!n||i||await s()};return p.jsxs("div",{className:"pt-2 space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Villes Scannes"}),f.map(b=>p.jsxs("div",{className:"flex items-center justify-between bg-blue-50 p-2 rounded-lg text-xs border border-blue-100",children:[p.jsx("span",{className:"font-bold text-blue-700",children:b.name}),p.jsx("button",{onClick:()=>S(b),className:"text-blue-400 hover:text-rose-600 p-1",children:p.jsx(io,{size:14})})]},b.docId)),f.length===0&&p.jsx("p",{className:"text-[10px] text-slate-400 italic text-center py-2 bg-slate-50 rounded-lg border border-dashed border-slate-200",children:"Aucune ville active."})]}),p.jsxs("div",{className:"relative",children:[p.jsx("label",{className:"text-[9px] font-bold text-slate-400 uppercase mb-1 block",children:"Activer une ville existante"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("div",{className:"relative flex-grow",children:[p.jsx("input",{type:"text",placeholder:"Rechercher une ville...",value:o,onChange:b=>l(b.target.value),className:"w-full p-2 bg-slate-50 border border-slate-200 rounded-lg text-xs"}),g.length>0&&p.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-40 overflow-y-auto",children:g.map(b=>p.jsx("div",{onClick:()=>m(b),className:"p-2 text-xs hover:bg-blue-50 cursor-pointer",children:b.name},b.docId))})]}),p.jsx("button",{onClick:()=>h(!u),className:`p-2 rounded-lg border transition-colors ${u?"bg-slate-200 text-slate-600 border-slate-300":"bg-white text-blue-600 border-blue-200 hover:bg-blue-50"}`,title:"Crer une nouvelle ville",children:p.jsx(J0,{size:16,className:u?"rotate-45 transition-transform":"transition-transform"})})]})]}),u&&p.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-200 animate-in slide-in-from-top-2",children:[p.jsx("h4",{className:"text-[10px] font-bold text-slate-500 uppercase mb-2",children:"Ajouter une nouvelle ville"}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("input",{type:"text",placeholder:"Nom de la ville (ex: Sherbrooke)",value:n,onChange:b=>r(b.target.value),className:"w-full p-2 bg-white border border-slate-200 rounded-lg text-xs"}),p.jsx("p",{className:"text-[9px] text-slate-400",children:"Le bot cherchera l'ID automatiquement."}),p.jsxs("button",{onClick:C,disabled:!n||i,className:"w-full py-2 bg-blue-600 text-white rounded-lg text-xs font-bold hover:bg-blue-700 disabled:bg-slate-300 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[i?p.jsx(En,{size:14,className:"animate-spin"}):p.jsx(zT,{size:14}),i?"Recherche en cours...":"Chercher & Ajouter"]})]})]})]})},Cy=()=>{const{exclusionKeywords:t,setExclusionKeywords:e,saveConfig:n}=gr();return p.jsx("div",{className:"pt-2 space-y-4",children:p.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[p.jsx("label",{className:"text-[10px] font-bold text-rose-600 uppercase block mb-2",children:"Mots-cls  Exclure"}),p.jsx("p",{className:"text-[9px] text-slate-400 mb-3",children:"Si le titre ou la description contient un de ces mots, l'annonce est rejete sans analyse IA."}),p.jsx(Wa,{items:t,onChange:e,onSave:r=>n({exclusionKeywords:r}),placeholder:"Ex: Stagg, bris, pour pices..."})]})})},Ry=()=>{const{analysisConfig:t,setAnalysisConfig:e,saveConfig:n,handleResetDefaults:r,handleRelaunchAll:s,isReanalyzingAll:i,availableModels:o}=gr(),l=(h,f)=>{e(g=>({...g,[h]:f}))},u=o.length>0?o:["gemini-2.5-flash-lite","gemini-2.5-flash","gemini-1.5-flash","gemini-1.5-pro"];return p.jsxs("div",{className:"space-y-4 pt-2",children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsxs("button",{onClick:s,disabled:i,className:`flex-grow mr-2 flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${i?"bg-purple-100 text-purple-600":"bg-purple-50 text-purple-600 hover:bg-purple-100 border border-purple-100"}`,children:[p.jsx(W0,{size:14,className:i?"animate-pulse":""}),i?"Analyse...":"Relancer Analyses"]}),p.jsxs("button",{onClick:r,className:"text-[9px] font-bold text-slate-400 hover:text-blue-600 flex items-center gap-1 transition-colors px-2",title:"Rinitialiser",children:[p.jsx(UT,{size:10})," Reset"]})]}),p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[p.jsx("label",{className:"text-[10px] font-bold text-purple-600 uppercase block mb-2",children:"Modle Portier (Rapide)"}),p.jsx("select",{value:t.gatekeeperModel,onChange:h=>l("gatekeeperModel",h.target.value),onBlur:()=>n({"analysisConfig.gatekeeperModel":t.gatekeeperModel}),className:"w-full p-2 bg-white border border-slate-200 rounded-lg text-xs",children:u.map(h=>p.jsx("option",{value:h,children:h},h))})]}),p.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[p.jsx("label",{className:"text-[10px] font-bold text-purple-600 uppercase block mb-2",children:"Modle Expert (Puissant)"}),p.jsx("select",{value:t.expertModel,onChange:h=>l("expertModel",h.target.value),onBlur:()=>n({"analysisConfig.expertModel":t.expertModel}),className:"w-full p-2 bg-white border border-slate-200 rounded-lg text-xs",children:u.map(h=>p.jsx("option",{value:h,children:h},h))})]})]}),p.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[p.jsx("label",{className:"text-[10px] font-bold text-purple-600 uppercase block mb-2",children:"Prompt Principal (Portier & Expert)"}),p.jsx(Wa,{items:t.mainAnalysisPrompt,onChange:h=>l("mainAnalysisPrompt",h),onSave:h=>n({"analysisConfig.mainAnalysisPrompt":h}),placeholder:"Ex: Tu es un expert en guitares..."})]}),p.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[p.jsx("label",{className:"text-[10px] font-bold text-purple-600 uppercase block mb-2",children:"Instruction de concision (Portier)"}),p.jsx(Wa,{items:t.gatekeeperVerbosityInstruction,onChange:h=>l("gatekeeperVerbosityInstruction",h),onSave:h=>n({"analysisConfig.gatekeeperVerbosityInstruction":h}),placeholder:"Ex: Sois bref..."})]}),p.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[p.jsx("label",{className:"text-[10px] font-bold text-purple-600 uppercase block mb-2",children:"Contexte pour l'Expert"}),p.jsx(Wa,{items:t.expertContextInstruction,onChange:h=>l("expertContextInstruction",h),onSave:h=>n({"analysisConfig.expertContextInstruction":h}),placeholder:"Ex: Le portier a dit..."})]})]})]})},by=()=>{const{logLimit:t,setLogLimit:e,saveConfig:n}=gr();return p.jsx("div",{className:"pt-2 space-y-4",children:p.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[p.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase block mb-2",children:"Limite de Logs (Affichage)"}),p.jsx("p",{className:"text-[9px] text-slate-400 mb-3",children:"Nombre maximum de logs  afficher dans la visionneuse."}),p.jsx("input",{type:"number",value:t,onChange:r=>e(Number(r.target.value)),onBlur:()=>n({logLimit:Number(t)}),className:"w-full p-2 bg-white border border-slate-200 rounded-lg text-xs",min:"10",max:"500"})]})})},_7=({showConfig:t,onClose:e})=>{const[n,r]=M.useState(!1),[s,i]=M.useState(!1);if(!t)return null;const o=p.jsxs("div",{className:`bg-white shadow-2xl border-l border-slate-200 flex flex-col transition-all duration-300 ease-in-out ${n?"w-[900px] max-w-[95vw]":"w-full lg:w-[500px]"}`,children:[p.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-100 bg-white sticky top-0 z-20",children:[p.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-slate-400",children:"Paramtres"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:()=>i(!s),className:`p-1.5 rounded-lg transition-colors ${s?"bg-slate-800 text-white":"text-slate-400 hover:text-slate-800 hover:bg-slate-100"}`,title:"Voir les logs",children:p.jsx(kh,{size:16})}),p.jsx("button",{onClick:()=>r(!n),className:"p-1.5 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors hidden lg:block",title:n?"Rduire":"Agrandir",children:n?p.jsx(Q0,{size:16}):p.jsx(Qd,{size:16})}),p.jsx("button",{onClick:e,className:"p-1.5 text-slate-400 hover:text-rose-600 hover:bg-rose-50 rounded-lg transition-colors",children:p.jsx(io,{size:18})})]})]}),p.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar p-5 space-y-2",children:[p.jsx(Ft,{title:"Recherche Facebook",children:p.jsx(Ay,{})}),p.jsx(Ft,{title:"Villes & Zones",children:p.jsx(ky,{})}),p.jsx(Ft,{title:"Filtres & Exclusion",children:p.jsx(Cy,{})}),p.jsx(Ft,{title:"Intelligence Artificielle",children:p.jsx(Ry,{})}),p.jsx(Ft,{title:"Logs & Systme",children:p.jsx(by,{})})]}),s&&p.jsx(Sy,{onClose:()=>i(!1)})]});return window.innerWidth<1024?p.jsxs("div",{className:"bg-white p-5 rounded-3xl shadow-sm border border-slate-200 space-y-2 animate-in fade-in slide-in-from-top-4 duration-300 max-h-[85vh] overflow-y-auto custom-scrollbar relative",children:[p.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-slate-400 hover:text-rose-600",children:p.jsx(io,{size:18})}),p.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-slate-400 mb-4",children:"Paramtres"}),p.jsx(Ft,{title:"Recherche Facebook",children:p.jsx(Ay,{})}),p.jsx(Ft,{title:"Villes & Zones",children:p.jsx(ky,{})}),p.jsx(Ft,{title:"Filtres & Exclusion",children:p.jsx(Cy,{})}),p.jsx(Ft,{title:"Intelligence Artificielle",children:p.jsx(Ry,{})}),p.jsx(Ft,{title:"Logs & Systme",children:p.jsx(by,{})}),p.jsxs("button",{onClick:()=>i(!s),className:"w-full mt-4 py-2 bg-slate-800 text-white rounded-lg text-xs font-bold flex items-center justify-center gap-2",children:[p.jsx(kh,{size:14})," ",s?"Masquer Logs":"Voir Logs Serveur"]}),s&&p.jsx(Sy,{onClose:()=>i(!1)})]}):Yl.createPortal(p.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end pointer-events-none",children:[p.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm pointer-events-auto transition-opacity opacity-100",onClick:e}),p.jsx("div",{className:"relative z-10 pointer-events-auto h-full animate-in slide-in-from-right duration-300 flex",children:o})]}),document.body)},w7=({images:t,title:e})=>{const[n,r]=M.useState(0),[s,i]=M.useState(!1);if(M.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[s]),M.useEffect(()=>{const h=f=>{s&&(f.key==="Escape"&&i(!1),f.key==="ArrowRight"&&o(f),f.key==="ArrowLeft"&&l(f))};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[s,n,t]),!t||t.length===0)return p.jsx("div",{className:"w-full h-full bg-slate-100 flex items-center justify-center text-slate-400",children:p.jsx(Kd,{size:48,className:"opacity-20"})});const o=h=>{h&&(h.preventDefault(),h.stopPropagation()),r(f=>(f+1)%t.length)},l=h=>{h&&(h.preventDefault(),h.stopPropagation()),r(f=>(f-1+t.length)%t.length)},u=h=>{h.preventDefault(),h.stopPropagation(),i(!s)};return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"relative w-full h-full group cursor-pointer",onClick:u,children:[p.jsx("img",{src:t[n],className:"w-full h-full object-contain transition-transform duration-700",alt:`${e} - ${n+1}`}),p.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-black/50 text-white p-1.5 rounded-lg",children:p.jsx(Qd,{size:16})}),t.length>1&&p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:l,className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:p.jsx(rm,{size:20})}),p.jsx("button",{onClick:o,className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:p.jsx(yl,{size:20})}),p.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-1",children:t.map((h,f)=>p.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${f===n?"bg-white":"bg-white/50"}`},f))})]})]}),s&&Yl.createPortal(p.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/95 flex items-center justify-center animate-in fade-in duration-200",onClick:()=>i(!1),children:[p.jsxs("div",{className:"relative w-full h-full flex items-center justify-center p-4",onClick:h=>h.stopPropagation(),children:[p.jsx("img",{src:t[n],className:"max-w-full max-h-full object-contain shadow-2xl",alt:`${e} - Fullscreen`}),t.length>1&&p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:l,className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/70 hover:text-white p-2 rounded-full hover:bg-white/10 transition-colors",children:p.jsx(rm,{size:48})}),p.jsx("button",{onClick:o,className:"absolute right-4 top-1/2 -translate-y-1/2 text-white/70 hover:text-white p-2 rounded-full hover:bg-white/10 transition-colors",children:p.jsx(yl,{size:48})}),p.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 flex gap-2",children:t.map((h,f)=>p.jsx("div",{className:`w-2 h-2 rounded-full transition-all ${f===n?"bg-white scale-125":"bg-white/30"}`},f))})]})]}),p.jsx("button",{onClick:h=>{h.stopPropagation(),i(!1)},className:"absolute top-4 right-4 z-50 text-white/70 hover:text-white p-2 rounded-full hover:bg-white/10 transition-colors",children:p.jsx(io,{size:32})})]}),document.body)]})},E7=({verdict:t})=>{const e=Yh[t]||Yh.DEFAULT,n=e.icon;return p.jsxs("span",{className:`${e.color} text-white px-3 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest shadow-lg flex items-center gap-1.5`,children:[p.jsx(n,{size:12,className:t==="DEFAULT"?"animate-spin":""}),e.label]})},Py=t=>t.split(/(\*\*.*?\*\*)/g).map((n,r)=>n.startsWith("**")&&n.endsWith("**")?p.jsx("strong",{className:"text-slate-800 font-bold",children:n.slice(2,-2)},r):n),Pc=({text:t})=>{if(!t)return null;const e=t.split(`
`);return p.jsx("div",{className:"space-y-2 text-slate-600 text-sm font-medium leading-relaxed",children:e.map((n,r)=>{const s=n.trim();return s.startsWith("###")?p.jsx("h3",{className:"text-blue-800 font-bold text-base mt-3 mb-1 uppercase tracking-wide",children:s.replace(/^###\s*/,"")},r):s.startsWith("- ")?p.jsxs("div",{className:"flex items-start gap-2 ml-2",children:[p.jsx("span",{className:"text-blue-400 mt-1.5",children:""}),p.jsx("span",{children:Py(s.replace(/^- /,""))})]},r):s.length>0?p.jsx("p",{children:Py(s)},r):null})})},T7=({onRetry:t,onForceExpert:e,onClose:n,buttonRef:r})=>{const s=M.useRef(null);return M.useEffect(()=>{const i=o=>{r.current&&r.current.contains(o.target)||s.current&&!s.current.contains(o.target)&&n()};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[n,r]),p.jsxs("div",{ref:s,className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 flex flex-col gap-1 bg-white p-1.5 rounded-xl shadow-xl border border-slate-100 animate-in slide-in-from-bottom-2 fade-in duration-200 z-50",children:[p.jsx("button",{onClick:i=>{i.stopPropagation(),t()},className:"flex items-center justify-center p-2 rounded-lg bg-amber-50 text-amber-600 hover:bg-amber-500 hover:text-white transition-colors",title:"Analyse Standard",children:p.jsx(En,{size:16})}),p.jsx("button",{onClick:i=>{i.stopPropagation(),e()},className:"flex items-center justify-center p-2 rounded-lg bg-purple-50 text-purple-600 hover:bg-purple-600 hover:text-white transition-colors",title:"Analyse Expert",children:p.jsx(W0,{size:16})})]})},yw=({deal:t,filterType:e,onRetry:n,onForceExpert:r,onReject:s,onToggleFavorite:i,onDelete:o})=>{var A,R,x,ne,De,Ot,H,L,B,q,X,ae;const[l,u]=M.useState(!1),[h,f]=M.useState(!1),g=M.useRef(null),[m,S]=M.useState(!1),C=se=>{se.preventDefault(),se.stopPropagation();const Se=`${window.location.origin}${window.location.pathname}?dealId=${t.id}`;navigator.clipboard.writeText(Se).then(()=>{u(!0),setTimeout(()=>u(!1),2e3)})},V=(se=>{var Se,ot,Ct;return["analyzing","retry_analysis","retry_analysis_expert","analyzing_expert"].includes(se.status)?"Analyse en cours...":(Se=se.aiAnalysis)!=null&&Se.model_used?se.aiAnalysis.model_used:se.status==="analyzed"&&!((ot=se.aiAnalysis)!=null&&ot.model_used)?"Modle non spcifi":((Ct=se.aiAnalysis)==null?void 0:Ct.model_used)||"Analyse initiale"})(t),_=V.includes("pro")||V.includes("expert"),E=["retry_analysis","retry_analysis_expert","analyzing","analyzing_expert"].includes(t.status),k=()=>{f(se=>!se)},N=()=>{f(!1)},F=(A=t.aiAnalysis)==null?void 0:A.estimated_gross_margin,z=(R=t.aiAnalysis)==null?void 0:R.net_guitar_cost,T=((x=t.aiAnalysis)==null?void 0:x.resale_potential)||((ne=t.aiAnalysis)==null?void 0:ne.estimated_value_after_repair),v=((De=t.aiAnalysis)==null?void 0:De.verdict)==="LUTHIER_PROJ",w=(Ot=t.aiAnalysis)==null?void 0:Ot.estimated_value,I=z-parseInt(t.price);return p.jsxs("div",{className:`group bg-white rounded-[2rem] shadow-sm border border-slate-200 flex flex-col md:flex-row items-start hover:shadow-2xl hover:shadow-blue-500/5 transition-all duration-500 animate-in fade-in slide-in-from-bottom-4 ${t.status==="rejected"?"opacity-50":""}`,children:[p.jsxs("div",{className:"md:w-80 md:sticky md:top-24 self-start shrink-0 relative bg-slate-100 md:rounded-l-[2rem] rounded-t-[2rem] md:rounded-tr-none overflow-hidden",children:[p.jsx("div",{className:"h-64 md:h-80 w-full",children:p.jsx(w7,{images:t.imageUrls||[t.imageUrl],title:t.title})}),p.jsx("div",{className:"absolute top-4 left-4 z-10 pointer-events-none",children:p.jsx(E7,{verdict:(H=t.aiAnalysis)==null?void 0:H.verdict})}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent pointer-events-none"})]}),p.jsxs("div",{className:"flex-1 p-6 md:p-8 flex flex-col w-full md:rounded-r-[2rem] rounded-b-[2rem] md:rounded-bl-none",children:[p.jsxs("div",{className:"flex flex-col gap-4 mb-2",children:[p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex items-center gap-2 text-blue-600 font-bold text-[10px] uppercase tracking-widest mb-1",children:[p.jsx(VT,{size:10})," ",t.location||"Qubec"]}),p.jsx("h2",{className:"text-2xl font-black text-slate-800 leading-tight group-hover:text-blue-600 transition-colors uppercase tracking-tight",children:t.title}),p.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[((L=t.aiAnalysis)==null?void 0:L.classification)&&p.jsxs("div",{className:"flex items-center gap-2 text-purple-600 bg-purple-50 px-3 py-1 rounded-full text-xs font-bold",children:[p.jsx(Kd,{size:12}),p.jsx("span",{children:t.aiAnalysis.classification})]}),v&&p.jsxs("div",{className:"flex items-center gap-2 text-orange-600 bg-orange-50 px-3 py-1 rounded-full text-xs font-bold",children:[p.jsx(Ah,{size:12}),p.jsx("span",{children:"Travaux Requis"})]})]})]}),p.jsxs("div",{className:"flex flex-col items-start text-left gap-1 shrink-0",children:[p.jsxs("div",{className:"flex items-center gap-1 bg-slate-900 text-white px-3 py-1.5 rounded-xl shadow-xl cursor-pointer",onClick:()=>S(!m),children:[p.jsxs("span",{className:"text-lg font-black tabular-nums",children:[t.price," $"]}),p.jsx(G0,{size:14,className:`transition-transform text-slate-400 ${m?"rotate-180":""}`})]}),p.jsxs("div",{className:"flex items-center gap-3 text-xs font-bold mt-1 text-slate-500",children:[w>0&&p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx(xT,{size:12})," Val. Actuelle: ",p.jsxs("span",{className:"font-black",children:[w,"$"]})]}),T>0&&p.jsxs("div",{className:"flex items-center gap-1 text-purple-600",children:[p.jsx(GT,{size:12})," Potentiel Max: ",p.jsxs("span",{className:"font-black",children:[T,"$"]})]})]}),m&&p.jsxs("div",{className:"mt-2 p-3 bg-slate-50 rounded-xl border border-slate-200 w-full space-y-2 text-left animate-in fade-in slide-in-from-top-2",children:[z!==void 0&&p.jsxs("div",{className:"flex justify-between items-center text-xs",children:[p.jsxs("span",{className:"font-bold text-slate-500 flex items-center gap-1",children:[p.jsx(PT,{size:12})," Cot Net Est."]}),p.jsxs("span",{className:"font-black text-sky-600",children:[z,"$"]})]}),I>0&&p.jsxs("div",{className:"flex justify-between items-center text-xs pl-4",children:[p.jsxs("span",{className:"text-slate-400 flex items-center gap-1",children:[p.jsx(Ah,{size:12})," Dont rparations"]}),p.jsxs("span",{className:"font-bold text-orange-500",children:[I,"$"]})]}),F!==void 0&&p.jsxs("div",{className:`flex justify-between items-center text-sm font-black p-2 rounded-lg ${F>=0?"bg-emerald-50 text-emerald-600":"bg-rose-50 text-rose-600"}`,children:[p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(RT,{size:14})," Marge Brute Est."]}),p.jsxs("span",{children:[F>=0?`+${F}`:F,"$"]})]})]})]})]}),p.jsxs("div",{className:"relative mb-6",children:[p.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1 rounded-full ${_?"bg-purple-500":"bg-blue-100"}`}),p.jsxs("div",{className:"pl-5 py-1",children:[p.jsxs("div",{className:`flex items-center gap-1.5 mb-2 ${_?"text-purple-600":"text-blue-600"}`,children:[p.jsx(Jd,{size:14}),p.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:V})]}),p.jsx("div",{className:"mt-2",children:(B=t.aiAnalysis)!=null&&B.summary?p.jsxs(p.Fragment,{children:[p.jsx(Pc,{text:t.aiAnalysis.summary}),t.aiAnalysis.analysis&&p.jsx(Ft,{title:"Voir l'analyse dtaille",children:p.jsx(Pc,{text:t.aiAnalysis.analysis})})]}):(q=t.aiAnalysis)!=null&&q.reasoning?p.jsx(Pc,{text:t.aiAnalysis.reasoning}):p.jsx("p",{className:"text-slate-400 italic text-sm",children:"Analyse de l'tat et de la valeur en cours par l'intelligence artificielle..."})})]})]}),p.jsxs("div",{className:"mt-auto pt-6 border-t border-slate-100 flex flex-wrap items-center justify-between gap-4",children:[p.jsxs("div",{className:"flex items-center gap-6",children:[p.jsxs("div",{className:"flex items-center gap-2 text-slate-400 text-[10px] font-bold",children:[p.jsx(bT,{size:14}),p.jsx("span",{className:"uppercase tracking-widest",children:(X=t.timestamp)!=null&&X.seconds?new Date(t.timestamp.seconds*1e3).toLocaleString():"Juste maintenant"})]}),((ae=t.aiAnalysis)==null?void 0:ae.confidence)&&p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-20 h-1.5 bg-slate-100 rounded-full overflow-hidden",children:p.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${t.aiAnalysis.confidence*100}%`}})}),p.jsxs("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:["Confiance ",Math.round(t.aiAnalysis.confidence*100),"%"]})]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:()=>i(t.id,t.isFavorite),className:`flex items-center gap-2 px-3 py-3 rounded-2xl text-xs font-black uppercase tracking-widest transition-all shadow-sm ${t.isFavorite?"bg-rose-100 text-rose-600":"bg-slate-100 text-slate-400 hover:text-rose-400"}`,title:t.isFavorite?"Retirer des favoris":"Ajouter aux favoris",children:p.jsx(LT,{size:14,fill:t.isFavorite?"currentColor":"none"})}),p.jsxs("div",{className:"relative",children:[p.jsx("button",{ref:g,onClick:k,disabled:E,className:`flex items-center gap-2 px-3 py-3 rounded-2xl text-xs font-black uppercase tracking-widest transition-all shadow-sm relative overflow-hidden ${E?"bg-amber-100 text-amber-600 cursor-wait":"bg-slate-100 text-slate-400 hover:text-amber-500"}`,title:"Relancer l'analyse",children:E?p.jsx(En,{size:14,className:"animate-spin"}):p.jsx(En,{size:14})}),h&&p.jsx(T7,{buttonRef:g,onRetry:()=>{n&&n(t.id),N()},onForceExpert:()=>{r&&r(t.id),N()},onClose:N})]}),t.status!=="rejected"&&p.jsx("button",{onClick:()=>s(t.id),className:"flex items-center gap-2 bg-slate-100 hover:bg-rose-600 hover:text-white text-slate-600 px-3 py-3 rounded-2xl text-xs font-black uppercase tracking-widest transition-all group/btn shadow-sm",title:"Rejeter l'annonce",children:p.jsx(Wd,{size:14})}),p.jsx("button",{onClick:()=>o(t.id),className:"flex items-center gap-2 bg-red-50 hover:bg-red-600 hover:text-white text-red-600 px-3 py-3 rounded-2xl text-xs font-black uppercase tracking-widest transition-all group/btn shadow-sm",title:"Supprimer dfinitivement",children:p.jsx(so,{size:14})}),p.jsx("button",{onClick:C,className:`flex items-center gap-2 px-3 py-3 rounded-2xl text-xs font-black uppercase tracking-widest transition-all shadow-sm ${l?"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-400 hover:text-blue-500"}`,title:"Copier le lien de l'analyse",children:l?p.jsx(Gd,{size:14}):p.jsx($T,{size:14})}),p.jsxs("a",{href:t.link,target:"_blank",rel:"noreferrer",className:"flex items-center gap-2 bg-slate-100 hover:bg-blue-600 hover:text-white text-slate-600 px-6 py-3 rounded-2xl text-xs font-black uppercase tracking-widest transition-all group/btn shadow-sm",children:["Voir sur Facebook ",p.jsx(NT,{size:14,className:"group-hover/btn:translate-x-0.5 group-hover/btn:-translate-y-0.5 transition-transform"})]})]})]})]})]})},I7={lat:45.5017,lng:-73.5673},x7={lat:46.8139,lng:-71.208},S7={lat:45.5758,lng:-73.7531},A7={lat:45.4765,lng:-75.7013},k7={lat:45.5369,lng:-73.5105},C7={lat:45.401,lng:-71.8824},R7={lat:46.8033,lng:-71.1779},b7={lat:45.6928,lng:-73.633},P7={lat:45.7397,lng:-73.4479},N7={lat:45.8833,lng:-72.4833},D7={lat:45.4,lng:-72.7333},L7={lat:45.6667,lng:-73.8833},V7={lat:45.65,lng:-74.0833},O7={lat:45.4617,lng:-73.5669},M7={lat:45.4319,lng:-73.6336},j7={lat:45.4419,lng:-73.6786},F7={lat:45.4486,lng:-73.7367},U7={lat:45.45,lng:-73.8667},z7={lat:45.4333,lng:-73.8667},B7={lat:45.4167,lng:-73.9667},$7={lat:45.4833,lng:-73.8667},q7={lat:45.5,lng:-73.8167},H7={lat:45.5167,lng:-73.6},W7={lat:45.4833,lng:-73.6},G7={lat:45.4833,lng:-73.6333},K7={lat:45.6,lng:-73.55},Q7={lat:45.4667,lng:-73.45},J7={lat:45.6,lng:-73.45},Y7={lat:45.6833,lng:-73.4333},X7={lat:45.3833,lng:-73.5167},Z7={lat:45.3167,lng:-73.75},ek={lat:45.3167,lng:-73.8667},tk={lat:45.3833,lng:-73.9833},nk={lat:45.45,lng:-74.15},rk={lat:45.4833,lng:-74.3},sk={lat:45.4667,lng:-74.0833},ik={lat:45.6167,lng:-73.8333},ok={lat:45.65,lng:-73.7833},ak={lat:45.75,lng:-73.6},lk={lat:45.7167,lng:-73.4833},uk={lat:45.8833,lng:-73.2833},ck={lat:45.95,lng:-73.2167},hk={lat:46.0833,lng:-73.1833},dk={lat:46.0167,lng:-73.4333},fk={lat:45.9667,lng:-73.4667},pk={lat:45.65,lng:-74.3333},gk={lat:45.6167,lng:-74.6},mk={lat:45.6,lng:-74.6},yk={lat:45.7667,lng:-74.25},vk={lat:45.9,lng:-74.1333},_k={lat:46.2833,lng:-74.7333},wk={lat:46.3833,lng:-75.9667},Ek={lat:45.5,lng:-75.7833},Tk={lat:45.55,lng:-75.7667},Ik={lat:45.5833,lng:-75.4167},xk={lat:45.6,lng:-75.25},Sk={lat:45.6167,lng:-75.0167},Ak={lat:45.65,lng:-74.9333},kk={lat:45.9167,lng:-75.1667},Ck={lat:45.8833,lng:-74.9167},Rk={lat:45.95,lng:-74.8333},bk={lat:46.0333,lng:-74.8333},Pk={lat:45.9833,lng:-74.6333},Nk={lat:45.9667,lng:-74.6167},Dk={lat:46.0333,lng:-74.5833},Lk={lat:45.9667,lng:-74.5333},Vk={lat:45.95,lng:-74.5333},Ok={lat:45.75,lng:-74.3833},Mk={lat:45.7833,lng:-74.5833},jk={lat:45.0167,lng:-74.5},Fk={lat:45,lng:-74.25},Uk={lat:45.0333,lng:-74.1667},zk={lat:45.0833,lng:-74.1667},Bk={lat:45.0833,lng:-74.15},$k={lat:45.1167,lng:-74.05},qk={lat:45.0333,lng:-73.9333},Hk={lat:45.05,lng:-73.7667},Wk={lat:45.1833,lng:-73.85},Gk={lat:45.05,lng:-73.5833},Kk={lat:45.0833,lng:-73.3667},Qk={lat:45.1333,lng:-73.1833},Jk={lat:45.0667,lng:-73.2},Yk={lat:45.0667,lng:-73.25},Xk={lat:45.1167,lng:-72.9833},Zk={lat:45.2833,lng:-72.9667},eC={lat:45.1833,lng:-73.4},tC={lat:45.55,lng:-73.2167},nC={lat:45.5667,lng:-73.2},rC={lat:45.45,lng:-73.25},sC={lat:45.45,lng:-73.2833},iC={lat:45.45,lng:-73.3333},oC={lat:45.6667,lng:-72.6667},aC={lat:46.0167,lng:-72.9167},lC={lat:45.9333,lng:-72.9333},uC={lat:46.0667,lng:-72.8167},cC={lat:46.0667,lng:-72.8167},hC={lat:46.2333,lng:-72.6167},dC={lat:45.7,lng:-72.4167},fC={lat:45.75,lng:-72.5167},pC={lat:45.2833,lng:-72.7667},gC={lat:45.3167,lng:-72.65},mC={lat:45.1,lng:-72.6167},yC={lat:45.0333,lng:-72.6667},vC={lat:45.05,lng:-72.8333},_C={lat:45.1333,lng:-72.8},wC={lat:45.2,lng:-72.75},EC={lat:45.35,lng:-72.6},TC={lat:45.35,lng:-72.5167},IC={lat:45.3833,lng:-72.5},xC={lat:45.4167,lng:-72.3},SC={lat:45.4167,lng:-72.3667},AC={lat:45.5,lng:-72.3167},kC={lat:45.55,lng:-72.3},CC={lat:45.4833,lng:-72.2333},RC={lat:45.5667,lng:-72.1667},bC={lat:45.6667,lng:-72.15},PC={lat:45.6667,lng:-72.1},NC={lat:45.5667,lng:-72},DC={lat:45.5,lng:-71.8167},LC={lat:45.5,lng:-71.6333},VC={lat:45.3667,lng:-71.4667},OC={lat:45.4333,lng:-71.25},MC={lat:45.5333,lng:-71.2833},jC={lat:45.6167,lng:-71.3833},FC={lat:45.7,lng:-71.4667},UC={lat:45.6167,lng:-71.6333},zC={lat:45.5167,lng:-71.5},BC={lat:45.0833,lng:-71.7667},$C={lat:45.1333,lng:-71.8},qC={lat:45.0167,lng:-72.1},HC={lat:45.0333,lng:-72.1667},WC={lat:45.1833,lng:-71.9333},GC={lat:45.2667,lng:-72.15},KC={lat:45.15,lng:-72.2667},QC={lat:45.3,lng:-72.3},JC={lat:45.3667,lng:-72.1667},YC={lat:45.7167,lng:-72.25},XC={lat:45.7167,lng:-72.25},ZC={lat:45.5833,lng:-72.2833},eR={lat:45.5333,lng:-71.3667},tR={lat:45.6,lng:-71.1333},nR={lat:45.6333,lng:-70.9833},rR={lat:45.55,lng:-70.9333},sR={lat:45.45,lng:-70.9},iR={lat:45.5333,lng:-70.8167},oR={lat:45.6667,lng:-70.7833},aR={lat:46.4667,lng:-70.8},lR={lat:46.5,lng:-71.0833},uR={lat:46.6167,lng:-70.55},cR={lat:46.75,lng:-70.5833},hR={lat:46.8333,lng:-71.0167},dR={lat:46.9833,lng:-70.55},fR={lat:47.0833,lng:-70.05},pR={lat:47.5667,lng:-69.8667},gR={lat:47.5333,lng:-69.75},mR={lat:47.9167,lng:-69.5},yR={lat:48.45,lng:-68.5333},vR={lat:48.6,lng:-68.1333},_R={lat:48.8333,lng:-67.5333},wR={lat:48.5667,lng:-67.6333},ER={lat:48.4667,lng:-67.4333},TR={lat:48.3333,lng:-67.3667},IR={lat:48.35,lng:-67.2167},xR={lat:48.3167,lng:-68.5667},SR={lat:48.5833,lng:-68.0333},AR={lat:49.2167,lng:-66.0667},kR={lat:49.1833,lng:-64.8333},CR={lat:48.95,lng:-65.5},RR={lat:48.35,lng:-64.6833},bR={lat:48.1,lng:-65.0833},PR={lat:48.0333,lng:-65.2},NR={lat:48.05,lng:-65.4833},DR={lat:48.1167,lng:-65.7333},LR={lat:48.1667,lng:-65.9833},VR={lat:48.1333,lng:-66.3167},OR={lat:48.1,lng:-66.4667},MR={lat:48.15,lng:-69.7167},jR={lat:48.7333,lng:-69.0833},FR={lat:48.8167,lng:-68.8833},UR={lat:48.9333,lng:-68.65},zR={lat:49.05,lng:-68.55},BR={lat:49.2833,lng:-67.9},$R={lat:49.3167,lng:-67.6},qR={lat:50.2167,lng:-66.4},HR={lat:50.2167,lng:-66.2333},WR={lat:50.2833,lng:-64.0333},GR={lat:50.2167,lng:-62.0833},KR={lat:50.1833,lng:-61.8167},QR={lat:52.7833,lng:-67.0833},JR={lat:54.8,lng:-66.8167},YR={lat:54.85,lng:-66.7667},XR={lat:49.9167,lng:-74.3667},ZR={lat:49.7833,lng:-74.85},eb={lat:49.75,lng:-77.6333},tb={lat:53.7833,lng:-78.9},nb={lat:53,lng:-78.8167},rb={lat:52.2333,lng:-78.5167},sb={lat:51.4667,lng:-78.75},ib={lat:51.5667,lng:-76.1333},ob={lat:49.7333,lng:-75.95},ab={lat:50.4167,lng:-73.8667},lb={lat:55.2833,lng:-77.7667},ub={lat:48.5667,lng:-78.1167},cb={lat:48.75,lng:-79.05},hb={lat:48.6667,lng:-79.2},db={lat:48.8667,lng:-79.3167},fb={lat:48.8667,lng:-79.4167},pb={lat:48.6,lng:-79.3},gb={lat:48.6,lng:-79.3833},mb={lat:48.6667,lng:-78.6833},yb={lat:48.7333,lng:-78.85},vb={lat:48.6833,lng:-78.9833},_b={lat:48.8333,lng:-79.0333},wb={lat:48.9667,lng:-79.2333},Eb={lat:48.8167,lng:-78.2333},Tb={lat:48.65,lng:-78.5333},Ib={lat:48.4,lng:-78.35},xb={lat:48.55,lng:-77.9667},Sb={lat:48.4333,lng:-77.6333},Ab={lat:48.7333,lng:-77.5667},kb={lat:48.6833,lng:-77.5},Cb={lat:48.4,lng:-77.4833},Rb={lat:48.3833,lng:-77.2333},bb={lat:48.1333,lng:-78.1333},Pb={lat:48.4667,lng:-78.9167},Nb={lat:48.2167,lng:-78.9167},Db={lat:48.2,lng:-79.2333},Lb={lat:48.1333,lng:-79.0167},Vb={lat:48.05,lng:-79.0833},Ob={lat:48.0333,lng:-79.2167},Mb={lat:47.9333,lng:-79.2333},jb={lat:47.9667,lng:-79.0833},Fb={lat:48.2167,lng:-78.5},Ub={lat:47.35,lng:-79.35},zb={lat:47.3833,lng:-78.7},Bb={lat:47.5333,lng:-78.9667},$b={lat:47.5333,lng:-78.8333},qb={lat:47.6,lng:-78.6},Hb={lat:46.7833,lng:-78.9833},Wb={lat:46.7833,lng:-78.9667},Gb={lat:47.3167,lng:-79.4667},Kb={lat:48.55,lng:-71.65},Qb={lat:48.4167,lng:-71.0667},Jb={lat:48.4333,lng:-71.0667},Yb={lat:48.4833,lng:-71.2},Xb={lat:48.45,lng:-71.5333},Zb={lat:48.6667,lng:-71.5},eP={lat:48.6833,lng:-71.4667},tP={lat:48.4167,lng:-71.95},nP={lat:48.4333,lng:-72.0667},rP={lat:48.5167,lng:-72.2333},sP={lat:48.8333,lng:-72.5333},iP={lat:49,lng:-72.55},oP={lat:48.8833,lng:-72.4167},aP={lat:48.5667,lng:-72.2333},lP={lat:46.5667,lng:-72.75},uP={lat:46.45,lng:-72.9167},cP={lat:47.9167,lng:-74.6167},hP={lat:47.9,lng:-73.7833},dP={lat:48.6667,lng:-74.9333},fP={lat:47.6667,lng:-73},pP={lat:46.4,lng:-72.2667},gP={lat:46.5333,lng:-72.0333},mP={lat:46.4667,lng:-72},yP={lat:46.3,lng:-72.0667},vP={lat:46.3667,lng:-71.9667},_P={lat:46.05,lng:-71.9667},wP={lat:46.0333,lng:-71.95},EP={lat:45.95,lng:-71.9833},TP={lat:45.8833,lng:-71.95},IP={lat:45.9667,lng:-71.7667},xP={lat:46.1667,lng:-71.8833},SP={lat:46.2167,lng:-71.7667},AP={lat:46.3333,lng:-71.7167},kP={lat:46.3833,lng:-71.8667},CP={lat:46.3667,lng:-71.6},RP={lat:46.2667,lng:-71.5167},xa={montreal:I7,quebec:x7,laval:S7,gatineau:A7,longueuil:k7,sherbrooke:C7,levis:R7,"trois-rivieres":{lat:46.343,lng:-72.5421},terrebonne:b7,"saint-jean-sur-richelieu":{lat:45.3057,lng:-73.2533},repentigny:P7,drummondville:N7,granby:D7,blainville:L7,"saint-hyacinthe":{lat:45.6333,lng:-72.95},mirabel:V7,verdun:O7,lasalle:M7,lachine:j7,dorval:F7,"pointe-claire":{lat:45.4489,lng:-73.8167},kirkland:U7,beaconsfield:z7,"baie-d'urf":{lat:45.4167,lng:-73.9167},"sainte-anne-de-bellevue":{lat:45.4,lng:-73.95},senneville:B7,"dollard-des-ormeaux":{lat:45.4833,lng:-73.8167},pierrefonds:$7,roxboro:q7,"sainte-genevive":{lat:45.4833,lng:-73.8667},"le-bizard":{lat:45.5,lng:-73.8833},outremont:H7,westmount:W7,"mont-royal":{lat:45.5167,lng:-73.65},"cte-saint-luc":{lat:45.4667,lng:-73.6667},hampstead:G7,"montral-ouest":{lat:45.45,lng:-73.65},"montral-est":{lat:45.6333,lng:-73.5},anjou:K7,"saint-lonard":{lat:45.5833,lng:-73.6},"montral-nord":{lat:45.6,lng:-73.6333},"rivire-des-prairies":{lat:45.65,lng:-73.5833},"pointe-aux-trembles":{lat:45.65,lng:-73.5},brossard:Q7,boucherville:J7,"saint-bruno-de-montarville":{lat:45.5333,lng:-73.35},"sainte-julie":{lat:45.5833,lng:-73.3333},varennes:Y7,verchres:{lat:45.7667,lng:-73.35},candiac:X7,"la prairie":{lat:45.4167,lng:-73.5},"sainte-catherine":{lat:45.4,lng:-73.5667},"saint-constant":{lat:45.3667,lng:-73.5667},chteauguay:{lat:45.3667,lng:-73.75},mercier:Z7,beauharnois:ek,"salaberry-de-valleyfield":{lat:45.25,lng:-74.1333},"vaudreuil-dorion":{lat:45.4,lng:-74.0333},pincourt:tk,"l'le-perrot":{lat:45.3833,lng:-73.95},"notre-dame-de-l'le-perrot":{lat:45.3667,lng:-73.9333},"saint-lazare":{lat:45.4,lng:-74.1333},hudson:nk,rigaud:rk,"saint-eustache":{lat:45.5667,lng:-73.9},"deux-montagnes":{lat:45.5333,lng:-73.8833},"sainte-marthe-sur-le-lac":{lat:45.5333,lng:-73.9333},"pointe-calumet":{lat:45.5167,lng:-73.9667},"saint-joseph-du-lac":{lat:45.5333,lng:-74},oka:sk,boisbriand:ik,rosemre:{lat:45.6333,lng:-73.8},lorraine:ok,"bois-des-filion":{lat:45.6667,lng:-73.75},"sainte-thrse":{lat:45.6333,lng:-73.8333},mascouche:ak,"l'assomption":{lat:45.8333,lng:-73.4167},charlemagne:lk,"saint-sulpice":{lat:45.8333,lng:-73.35},lavaltrie:uk,lanoraie:ck,berthierville:hk,joliette:dk,"notre-dame-des-prairies":{lat:46.05,lng:-73.4333},"saint-charles-borrome":{lat:46.05,lng:-73.4667},"saint-paul":{lat:45.95,lng:-73.4333},crabtree:fk,"saint-lin-laurentides":{lat:45.85,lng:-73.7667},"saint-calixte":{lat:45.95,lng:-73.85},"saint-hippolyte":{lat:45.9167,lng:-74},prvost:{lat:45.8667,lng:-74.0833},"saint-sauveur":{lat:45.8833,lng:-74.1667},"sainte-adle":{lat:45.95,lng:-74.1333},"val-david":{lat:46.0333,lng:-74.2},"val-morin":{lat:46.0167,lng:-74.2},"sainte-agathe-des-monts":{lat:46.05,lng:-74.2833},"mont-tremblant":{lat:46.1167,lng:-74.6},"saint-jrme":{lat:45.7833,lng:-74},lachute:pk,"brownsburg-chatham":{lat:45.6667,lng:-74.4167},grenville:gk,hawkesbury:mk,"saint-colomban":{lat:45.7333,lng:-74.1333},gore:yk,"mille-isles":{lat:45.8,lng:-74.1833},"wentworth-nord":{lat:45.8667,lng:-74.3833},"morin-heights":{lat:45.9,lng:-74.25},piedmont:vk,"saint-adolphe-d'howard":{lat:45.9667,lng:-74.3333},"saint-faustin-lac-carr":{lat:46.1167,lng:-74.4833},"mont-blanc":{lat:46.1167,lng:-74.4833},labelle:_k,"rivire-rouge":{lat:46.4167,lng:-74.8833},"mont-laurier":{lat:46.55,lng:-75.5},"ferme-neuve":{lat:46.7,lng:-75.45},maniwaki:wk,chelsea:Ek,cantley:Tk,"val-des-monts":{lat:45.65,lng:-75.6667},"l'ange-gardien":{lat:45.6,lng:-75.4333},buckingham:Ik,"masson-angers":{lat:45.5333,lng:-75.4333},thurso:xk,papineauville:Sk,montebello:Ak,"saint-andr-avellin":{lat:45.7167,lng:-75.05},chnville:{lat:45.8833,lng:-75.05},"lac-simon":{lat:45.9333,lng:-75.0833},montpellier:kk,namur:Ck,boileau:Rk,amherst:bk,huberdeau:Pk,arundel:Nk,barkmere:Dk,montcalm:Lk,weir:Vk,"lac-des-seize-les":{lat:45.8833,lng:-74.4667},wentworth:Ok,harrington:Mk,"grenville-sur-la-rouge":{lat:45.6667,lng:-74.6833},"pointe-fortune":{lat:45.55,lng:-74.3833},"trs-saint-rdempteur":{lat:45.4333,lng:-74.3167},"sainte-marthe":{lat:45.4,lng:-74.2833},"sainte-justine-de-newton":{lat:45.35,lng:-74.3833},"saint-tlesphore":{lat:45.2833,lng:-74.4167},"saint-polycarpe":{lat:45.3,lng:-74.3},"saint-zotique":{lat:45.25,lng:-74.2333},"les coteaux":{lat:45.2667,lng:-74.2333},"coteau-du-lac":{lat:45.2833,lng:-74.1833},"saint-clet":{lat:45.35,lng:-74.2167},"les cdres":{lat:45.3,lng:-74.05},"pointe-des-cascades":{lat:45.3333,lng:-73.9667},"terrasse-vaudreuil":{lat:45.3833,lng:-73.9833},"vaudreuil-sur-le-lac":{lat:45.4167,lng:-74.0167},"l'le-cadieux":{lat:45.4333,lng:-74.0167},"saint-stanislas-de-kostka":{lat:45.1833,lng:-74.1333},"saint-tienne-de-beauharnois":{lat:45.25,lng:-73.9167},"sainte-barbe":{lat:45.1667,lng:-74.2},"saint-anicet":{lat:45.0833,lng:-74.3667},dundee:jk,elgin:Fk,hinchinbrooke:Uk,huntingdon:zk,godmanchester:Bk,ormstown:$k,franklin:qk,havelock:Hk,"saint-chrysostome":{lat:45.1,lng:-73.75},"trs-saint-sacrement":{lat:45.1667,lng:-73.8333},howick:Wk,"sainte-martine":{lat:45.25,lng:-73.8},"saint-urbain-premier":{lat:45.2167,lng:-73.7333},"sainte-clotilde":{lat:45.1667,lng:-73.6833},hemmingford:Gk,"saint-bernard-de-lacolle":{lat:45.0833,lng:-73.4167},lacolle:Kk,"saint-valentin":{lat:45.1333,lng:-73.3167},"saint-paul-de-l'le-aux-noix":{lat:45.1333,lng:-73.2667},henryville:Qk,noyan:Jk,clarenceville:Yk,"venise-en-qubec":{lat:45.0833,lng:-73.1333},"saint-georges-de-clarenceville":{lat:45.0667,lng:-73.25},"saint-sbastien":{lat:45.1667,lng:-73.1333},"pike river":{lat:45.1167,lng:-73.0667},"stanbridge station":{lat:45.1167,lng:-73.0333},bedford:Xk,"notre-dame-de-stanbridge":{lat:45.1833,lng:-73.0333},farnham:Zk,"sainte-brigide-d'iberville":{lat:45.3333,lng:-73.05},"mont-saint-grgoire":{lat:45.3333,lng:-73.15},"saint-alexandre":{lat:45.2333,lng:-73.1167},"sainte-anne-de-sabrevois":{lat:45.2167,lng:-73.2333},"saint-blaise-sur-richelieu":{lat:45.2167,lng:-73.2833},"saint-cyprien-de-napierville":{lat:45.1833,lng:-73.4},napierville:eC,"saint-jacques-le-mineur":{lat:45.2833,lng:-73.4167},"saint-michel":{lat:45.2833,lng:-73.5667},"saint-rmi":{lat:45.2667,lng:-73.6167},"saint-mathieu":{lat:45.3167,lng:-73.5333},"saint-philippe":{lat:45.35,lng:-73.4667},"saint-basile-le-grand":{lat:45.5333,lng:-73.2833},mcmasterville:tC,beloeil:nC,"mont-saint-hilaire":{lat:45.5667,lng:-73.1833},"otterburn park":{lat:45.5333,lng:-73.2},"saint-mathias-sur-richelieu":{lat:45.4833,lng:-73.2667},richelieu:rC,chambly:sC,carignan:iC,"saint-jean-baptiste":{lat:45.5167,lng:-73.1167},"saint-pie":{lat:45.5167,lng:-72.9},"saint-dominique":{lat:45.55,lng:-72.8333},"saint-valrien-de-milton":{lat:45.5667,lng:-72.7167},"roxton pond":{lat:45.4833,lng:-72.65},"roxton falls":{lat:45.5667,lng:-72.5167},"acton vale":{lat:45.65,lng:-72.5667},upton:oC,"saint-thodore-d'acton":{lat:45.6833,lng:-72.6},"saint-nazaire-d'acton":{lat:45.75,lng:-72.6167},"sainte-hlne-de-bagot":{lat:45.7333,lng:-72.7333},"saint-hugues":{lat:45.8167,lng:-72.8833},"saint-liboire":{lat:45.65,lng:-72.8667},"sainte-rosalie":{lat:45.6333,lng:-72.9},"saint-thomas-d'aquin":{lat:45.6167,lng:-73},"la prsentation":{lat:45.6667,lng:-73.05},"saint-jude":{lat:45.7833,lng:-73.0333},"saint-barnab-sud":{lat:45.7667,lng:-72.9333},"saint-bernard-de-michaudville":{lat:45.8167,lng:-73},"saint-louis":{lat:45.8667,lng:-72.9833},"saint-aim":{lat:45.9,lng:-72.95},"saint-robert":{lat:45.9667,lng:-73.0167},"sainte-victoire-de-sorel":{lat:45.9667,lng:-73.0833},"saint-ours":{lat:45.8833,lng:-73.15},"saint-roch-de-richelieu":{lat:45.9167,lng:-73.1833},"sorel-tracy":{lat:46.0333,lng:-73.1167},"saint-joseph-de-sorel":{lat:46.0333,lng:-73.1333},"sainte-anne-de-sorel":{lat:46.05,lng:-73.0667},yamaska:aC,"saint-grard-majella":{lat:45.9833,lng:-72.8667},"saint-david":{lat:45.9667,lng:-72.8},massueville:lC,"saint-guillaume":{lat:45.8833,lng:-72.7667},"saint-bonaventure":{lat:45.9333,lng:-72.6833},"saint-pie-de-guire":{lat:45.9333,lng:-72.6},"saint-franois-du-lac":{lat:46.0667,lng:-72.8333},pierreville:uC,odanak:cC,"baie-du-febvre":{lat:46.1333,lng:-72.7167},nicolet:hC,"grand-saint-esprit":{lat:46.1667,lng:-72.5},"saint-clestin":{lat:46.2167,lng:-72.4333},"saint-wenceslas":{lat:46.1667,lng:-72.3333},"saint-lonard-d'aston":{lat:46.0833,lng:-72.3333},"notre-dame-du-bon-conseil":{lat:46,lng:-72.35},"sainte-brigitte-des-saults":{lat:46.0333,lng:-72.5},"saint-cyrille-de-wendover":{lat:45.9333,lng:-72.4333},"saint-lucien":{lat:45.8333,lng:-72.4167},"saint-flix-de-kingsey":{lat:45.7833,lng:-72.2333},"durham-sud":{lat:45.6667,lng:-72.3333},lefebvre:dC,wickham:fC,"l'avenir":{lat:45.7667,lng:-72.3333},"saint-germain-de-grantham":{lat:45.8333,lng:-72.5667},"saint-majorique-de-grantham":{lat:45.9,lng:-72.5333},"saint-eugne":{lat:45.8167,lng:-72.6833},"saint-edmond-de-grantham":{lat:45.8667,lng:-72.6667},"saint-joachim-de-courval":{lat:45.9333,lng:-72.5667},"saint-zphirin-de-courval":{lat:46.05,lng:-72.6},"saint-elphge":{lat:46.0833,lng:-72.6333},"la visitation-de-yamaska":{lat:46.1167,lng:-72.6},"saint-franois-xavier-de-brome":{lat:45.2833,lng:-72.7167},brigham:pC,bromont:gC,"lac-brome":{lat:45.2167,lng:-72.5167},"bolton-ouest":{lat:45.2,lng:-72.45},sutton:mC,abercorn:yC,frelighsburg:vC,"saint-armand":{lat:45.0333,lng:-73.05},dunham:_C,cowansville:wC,"east farnham":{lat:45.2333,lng:-72.7833},"sainte-ccile-de-milton":{lat:45.4833,lng:-72.75},"saint-alphonse-de-granby":{lat:45.4,lng:-72.8},"ange-gardien":{lat:45.35,lng:-72.9167},"saint-paul-d'abbotsford":{lat:45.4333,lng:-72.8833},shefford:EC,waterloo:TC,warden:IC,"saint-joachim-de-shefford":{lat:45.4333,lng:-72.5667},"sainte-anne-de-la-rochelle":{lat:45.4167,lng:-72.4167},bonsecours:xC,lawrenceville:SC,valcourt:AC,maricourt:kC,racine:CC,melbourne:RC,richmond:bC,cleveland:PC,windsor:NC,"saint-franois-xavier-de-brompton":{lat:45.5167,lng:-72.05},stoke:DC,"ascot corner":{lat:45.45,lng:-71.7667},"east angus":{lat:45.4833,lng:-71.6667},westbury:LC,"cookshire-eaton":{lat:45.4167,lng:-71.6333},newport:VC,"burt-harnett":{lat:45.3667,lng:-71.4667},chartierville:OC,"la patrie":{lat:45.4,lng:-71.25},scotstown:MC,lingwick:jC,weedon:FC,dudswell:UC,bury:zC,"saint-isidore-de-clifton":{lat:45.2667,lng:-71.5167},"saint-malo":{lat:45.1833,lng:-71.5},"saint-venant-de-paquette":{lat:45.1333,lng:-71.4667},"east hereford":{lat:45.05,lng:-71.5},"saint-hermngilde":{lat:45.1,lng:-71.6833},dixville:BC,coaticook:$C,"barnston-ouest":{lat:45.1167,lng:-71.9333},"stanstead-est":{lat:45.0833,lng:-72.05},stanstead:qC,ogden:HC,"ayer's cliff":{lat:45.1667,lng:-72.05},hatley:WC,"north hatley":{lat:45.2667,lng:-71.9667},"sainte-catherine-de-hatley":{lat:45.2667,lng:-72.05},magog:GC,austin:KC,"saint-benot-du-lac":{lat:45.1667,lng:-72.2667},"bolton-est":{lat:45.2,lng:-72.35},"saint-tienne-de-bolton":{lat:45.25,lng:-72.35},"stukely-sud":{lat:45.3167,lng:-72.4167},eastman:QC,orford:JC,"saint-denis-de-brompton":{lat:45.4333,lng:-72.0833},"val-joli":{lat:45.5833,lng:-72.0333},"saint-claude":{lat:45.6667,lng:-71.9833},ulverton:YC,lisgar:XC,kingsbury:ZC,"val-racine":{lat:45.4833,lng:-70.95},hampden:eR,milan:tR,nantes:nR,"lac-mgantic":{lat:45.5833,lng:-70.8833},marston:rR,piopolis:sR,"notre-dame-des-bois":{lat:45.3833,lng:-71.0667},"saint-augustin-de-woburn":{lat:45.3833,lng:-70.8667},frontenac:iR,audet:oR,"sainte-ccile-de-whitton":{lat:45.7167,lng:-70.9333},"lac-drolet":{lat:45.7167,lng:-70.85},"saint-ludger":{lat:45.7333,lng:-70.6833},"saint-robert-bellarmin":{lat:45.7167,lng:-70.5333},"saint-gdon-de-beauce":{lat:45.8667,lng:-70.6333},"saint-hilaire-de-dorset":{lat:45.8667,lng:-70.85},"saint-variste-de-forsyth":{lat:45.9333,lng:-70.9333},"la guadeloupe":{lat:45.95,lng:-70.9333},"saint-honor-de-shenley":{lat:45.9667,lng:-70.8},"saint-martin":{lat:45.9667,lng:-70.65},"saint-thophile":{lat:45.9333,lng:-70.4667},"saint-ren":{lat:46.0667,lng:-70.5667},"saint-cme-linire":{lat:46.0667,lng:-70.5167},"saint-georges":{lat:46.1167,lng:-70.6667},"saint-philibert":{lat:46.1333,lng:-70.5667},"saint-prosper":{lat:46.2167,lng:-70.4833},"saint-benjamin":{lat:46.2833,lng:-70.5833},"sainte-aurlie":{lat:46.1833,lng:-70.3667},"saint-zacharie":{lat:46.1333,lng:-70.3667},"sainte-rose-de-watford":{lat:46.3167,lng:-70.4167},"saint-louis-de-gonzague":{lat:46.2667,lng:-70.3333},"sainte-justine":{lat:46.4167,lng:-70.35},"lac-etchemin":{lat:46.4,lng:-70.5167},"saint-luc-de-bellechasse":{lat:46.5,lng:-70.4667},"saint-magloire":{lat:46.6,lng:-70.2833},"saint-camille-de-lellis":{lat:46.5,lng:-70.2},"sainte-sabine":{lat:46.4833,lng:-70.35},"saint-odilon-de-cranbourne":{lat:46.3167,lng:-70.6667},"saint-joseph-de-beauce":{lat:46.3,lng:-70.8833},"saint-joseph-des-rables":{lat:46.3167,lng:-70.9},"saint-jules":{lat:46.2667,lng:-70.9167},"tring-jonction":{lat:46.2667,lng:-70.9667},"saint-frdric":{lat:46.3,lng:-70.9667},"valle-jonction":{lat:46.3667,lng:-70.9167},"saints-anges":{lat:46.4333,lng:-70.9},frampton:aR,"saint-malachie":{lat:46.5333,lng:-70.7667},"saint-lon-de-standon":{lat:46.4833,lng:-70.6333},"saint-nazaire-de-dorchester":{lat:46.55,lng:-70.6667},"sainte-claire":{lat:46.6,lng:-70.8667},"saint-anselme":{lat:46.6333,lng:-70.9667},"sainte-hndine":{lat:46.55,lng:-70.9833},scott:lR,"saint-bernard":{lat:46.5,lng:-71.1333},"saint-lambert-de-lauzon":{lat:46.5833,lng:-71.2167},"saint-henri":{lat:46.6833,lng:-71.0667},"saint-gervais":{lat:46.7167,lng:-70.9},"saint-lazare-de-bellechasse":{lat:46.6667,lng:-70.8},"saint-damien-de-buckland":{lat:46.6333,lng:-70.6667},buckland:uR,"saint-philmon":{lat:46.6833,lng:-70.4667},armagh:cR,"saint-nere-de-bellechasse":{lat:46.7333,lng:-70.7333},"saint-raphal":{lat:46.8,lng:-70.75},"la durantaye":{lat:46.8167,lng:-70.8667},"saint-charles-de-bellechasse":{lat:46.7833,lng:-70.9333},beaumont:hR,"saint-michel-de-bellechasse":{lat:46.8667,lng:-70.9167},"saint-vallier":{lat:46.8833,lng:-70.8167},"berthier-sur-mer":{lat:46.9333,lng:-70.7333},montmagny:dR,"saint-pierre-de-la-rivire-du-sud":{lat:46.9167,lng:-70.6333},"saint-franois-de-la-rivire-du-sud":{lat:46.9,lng:-70.7167},"notre-dame-du-rosaire":{lat:46.8667,lng:-70.3833},"cap-saint-ignace":{lat:47.0333,lng:-70.4667},"l'islet":{lat:47.1167,lng:-70.3667},"saint-cyrille-de-l'islet":{lat:47.0333,lng:-70.25},"saint-marcel":{lat:46.9333,lng:-70.0833},"sainte-perptue":{lat:47.05,lng:-69.9333},tourville:fR,"saint-damase-de-l'islet":{lat:47.1833,lng:-70.1333},"saint-jean-port-joli":{lat:47.2167,lng:-70.2667},"saint-aubert":{lat:47.1667,lng:-70.2167},"sainte-louise":{lat:47.2833,lng:-70.1},"saint-roch-des-aulnaies":{lat:47.3167,lng:-70.1},"sainte-anne-de-la-pocatire":{lat:47.35,lng:-70.0333},"la pocatire":{lat:47.3667,lng:-70.0333},"saint-onsime-d'ixworth":{lat:47.2833,lng:-69.95},"saint-gabriel-lalemant":{lat:47.4333,lng:-69.9667},"mont-carmel":{lat:47.4333,lng:-69.85},"rivire-ouelle":{lat:47.4333,lng:-70.0167},"saint-pacme":{lat:47.4,lng:-69.95},"saint-denis-de-la-bouteillerie":{lat:47.5,lng:-69.9333},"saint-philippe-de-nri":{lat:47.4667,lng:-69.8833},kamouraska:pR,"saint-pascal":{lat:47.5333,lng:-69.8},"sainte-hlne-de-kamouraska":{lat:47.5833,lng:-69.7333},"saint-germain":{lat:47.6167,lng:-69.8},"saint-andr":{lat:47.6667,lng:-69.7333},"saint-alexandre-de-kamouraska":{lat:47.6833,lng:-69.6167},"saint-joseph-de-kamouraska":{lat:47.6,lng:-69.6333},"saint-bruno-de-kamouraska":{lat:47.5333,lng:-69.75},picard:gR,"saint-athanase":{lat:47.3833,lng:-69.4667},pohngamook:{lat:47.4667,lng:-69.2167},"rivire-bleue":{lat:47.4333,lng:-69.05},"saint-marc-du-lac-long":{lat:47.6,lng:-69.1667},"saint-elzar-de-tmiscouata":{lat:47.5333,lng:-69.1},"saint-louis-du-ha! ha!":{lat:47.6667,lng:-69},"tmiscouata-sur-le-lac":{lat:47.6833,lng:-68.8833},"saint-honor-de-tmiscouata":{lat:47.7333,lng:-69.0333},"saint-pierre-de-lamy":{lat:47.7667,lng:-69.0833},"saint-hubert-de-rivire-du-loup":{lat:47.8167,lng:-69.15},"saint-antonin":{lat:47.7667,lng:-69.4833},"saint-modeste":{lat:47.8333,lng:-69.4},"rivire-du-loup":{lat:47.8333,lng:-69.5333},"notre-dame-du-portage":{lat:47.7667,lng:-69.6167},cacouna:mR,"l'isle-verte":{lat:48.0167,lng:-69.3333},"saint-paul-de-la-croix":{lat:47.9667,lng:-69.2667},"saint-piphane":{lat:47.9,lng:-69.3167},"saint-franois-xavier-de-viger":{lat:47.9167,lng:-69.25},"saint-arsne":{lat:47.95,lng:-69.3833},"saint-clment":{lat:47.9333,lng:-69.0833},"saint-cyprien":{lat:47.8833,lng:-69.0167},"sainte-rita":{lat:47.9667,lng:-68.95},"saint-jean-de-dieu":{lat:48.0167,lng:-69.05},"saint-mdard":{lat:48.0833,lng:-68.8667},"saint-guy":{lat:48.0667,lng:-68.8167},"saint-loi":{lat:48.05,lng:-69.2167},"trois-pistoles":{lat:48.1167,lng:-69.1667},"notre-dame-des-neiges":{lat:48.1,lng:-69.1833},"saint-mathieu-de-rioux":{lat:48.1833,lng:-68.9833},"saint-simon":{lat:48.2167,lng:-68.8667},"saint-fabien":{lat:48.2833,lng:-68.8667},"saint-eugne-de-ladrire":{lat:48.2833,lng:-68.7},"saint-valrien":{lat:48.2833,lng:-68.6},"le bic":{lat:48.3667,lng:-68.7},rimouski:yR,"saint-anaclet-de-lessard":{lat:48.4833,lng:-68.4167},"sainte-luce":{lat:48.55,lng:-68.3833},"sainte-flavie":{lat:48.6,lng:-68.2333},"mont-joli":{lat:48.5833,lng:-68.1833},"saint-joseph-de-lepage":{lat:48.55,lng:-68.1333},price:vR,"saint-octave-de-mtis":{lat:48.6167,lng:-68.0833},"grand-mtis":{lat:48.6333,lng:-68.1333},"mtis-sur-mer":{lat:48.6667,lng:-68.0333},"baie-des-sables":{lat:48.7167,lng:-67.8833},"saint-ulric":{lat:48.7833,lng:-67.6833},matane:_R,"sainte-flicit":{lat:48.8833,lng:-67.3333},"grosses-roches":{lat:48.9333,lng:-67.1667},"les mchins":{lat:49,lng:-66.9667},"saint-jean-de-cherbourg":{lat:48.9167,lng:-67.2},"saint-adelme":{lat:48.8667,lng:-67.1},"saint-ren-de-matane":{lat:48.7667,lng:-67.4},"sainte-paule":{lat:48.7167,lng:-67.5333},"saint-landre":{lat:48.75,lng:-67.6333},"saint-damase":{lat:48.6833,lng:-67.7667},"saint-nol":{lat:48.6,lng:-67.8667},"saint-mose":{lat:48.5667,lng:-67.8667},"la rdemption":{lat:48.45,lng:-67.9333},"saint-clophas":{lat:48.4333,lng:-67.8333},"val-brillant":{lat:48.5333,lng:-67.55},sayabec:wR,amqui:ER,"saint-alexandre-des-lacs":{lat:48.4833,lng:-67.3333},"lac-au-saumon":{lat:48.4167,lng:-67.3333},"saint-tharcisius":{lat:48.4,lng:-67.2333},"saint-vianney":{lat:48.5,lng:-67.2333},albertville:TR,causapscal:IR,"sainte-florence":{lat:48.2667,lng:-67.2333},"sainte-marguerite-marie":{lat:48.3167,lng:-67.0833},"saint-znon-du-lac-humqui":{lat:48.4333,lng:-67.55},"saint-lon-le-grand":{lat:48.3833,lng:-67.5},"sainte-irne":{lat:48.4667,lng:-67.5667},espritsaint:xR,"la trinit-des-monts":{lat:48.2667,lng:-68.4667},"saint-narcisse-de-rimouski":{lat:48.3,lng:-68.4167},"saint-marcellin":{lat:48.3333,lng:-68.2833},"saint-gabriel-de-rimouski":{lat:48.4333,lng:-68.1333},"saint-donat":{lat:48.5,lng:-68.25},"sainte-angle-de-mrici":{lat:48.55,lng:-68.1333},padoue:SR,"saint-charles-garnier":{lat:48.4,lng:-68.0333},"les hauteurs":{lat:48.3667,lng:-68.1},"cap-chat":{lat:49.0833,lng:-66.6833},"sainte-anne-des-monts":{lat:49.1333,lng:-66.4833},"la martre":{lat:49.2,lng:-66.1667},marsoui:AR,"rivire--claude":{lat:49.2167,lng:-65.9},"mont-saint-pierre":{lat:49.2167,lng:-65.8},"saint-maxime-du-mont-louis":{lat:49.2333,lng:-65.7333},"sainte-madeleine-de-la-rivire-madeleine":{lat:49.25,lng:-65.3167},"grande-valle":{lat:49.2167,lng:-65.1333},"petite-valle":{lat:49.2167,lng:-65.0333},cloridorme:kR,gasp:{lat:48.8333,lng:-64.4833},murdochville:CR,perc:{lat:48.5167,lng:-64.2167},"sainte-thrse-de-gasp":{lat:48.4167,lng:-64.4167},"grande-rivire":{lat:48.4,lng:-64.5},chandler:RR,"port-daniel-gascons":{lat:48.1833,lng:-64.9667},shigawake:bR,"saint-godefroi":{lat:48.0667,lng:-65.1167},"hope town":{lat:48.05,lng:-65.1833},hope:PR,paspbiac:{lat:48.0333,lng:-65.25},"new carlisle":{lat:48,lng:-65.3333},bonaventure:NR,"saint-simon":{lat:48.0667,lng:-65.5667},caplan:DR,"new richmond":{lat:48.1667,lng:-65.8667},"cascapdia-saint-jules":{lat:48.2,lng:-65.9333},maria:LR,"carleton-sur-mer":{lat:48.1,lng:-66.1333},nouvelle:VR,escuminac:OR,"pointe--la-croix":{lat:48.0167,lng:-66.7167},"ristigouche-partie-sud-est":{lat:48,lng:-66.7833},matapdia:{lat:47.9833,lng:-66.9333},"saint-andr-de-restigouche":{lat:48.0667,lng:-66.9167},"saint-alexis-de-matapdia":{lat:47.9667,lng:-67.05},"saint-franois-d'assise":{lat:48,lng:-67.0833},"l'ascension-de-patapdia":{lat:47.9833,lng:-67.2333},tadoussac:MR,"sacr-coeur":{lat:48.2333,lng:-69.8},"les bergeronnes":{lat:48.25,lng:-69.55},"les escoumins":{lat:48.35,lng:-69.4},"longue-rive":{lat:48.55,lng:-69.25},"portneuf-sur-mer":{lat:48.6167,lng:-69.1},forestville:jR,colombier:FR,betsiamites:UR,ragueneau:zR,"chute-aux-outardes":{lat:49.1167,lng:-68.4},"pointe-aux-outardes":{lat:49.05,lng:-68.4167},"pointe-lebel":{lat:49.1667,lng:-68.2},"baie-comeau":{lat:49.2167,lng:-68.15},franquelin:BR,godbout:$R,"baie-trinit":{lat:49.4167,lng:-67.3},"port-cartier":{lat:50.0333,lng:-66.8667},"sept-les":{lat:50.2,lng:-66.3833},uashat:qR,maliotenam:HR,"rivire-au-tonnerre":{lat:50.2667,lng:-64.7833},mingan:WR,"longue-pointe-de-mingan":{lat:50.2667,lng:-64.1333},"havre-saint-pierre":{lat:50.2333,lng:-63.6},"baie-johan-beetz":{lat:50.2833,lng:-62.8},aguanish:GR,natashquan:KR,"pointe-natashquan":{lat:50.1333,lng:-61.8},"cte-nord-du-golfe-du-saint-laurent":{lat:50.5,lng:-59.5},"blanc-sablon":{lat:51.4167,lng:-57.1333},"bonne-esprance":{lat:51.4,lng:-57.6667},"gros-mcatina":{lat:50.8,lng:-59.1},fermont:QR,schefferville:JR,kawawachikamach:YR,"l'le-d'anticosti":{lat:49.5,lng:-63},"port-menier":{lat:49.8167,lng:-64.35},"les les-de-la-madeleine":{lat:47.3833,lng:-61.8667},"grosse-le":{lat:47.6333,lng:-61.5167},chibougamau:XR,chapais:ZR,"lebel-sur-quvillon":{lat:49.05,lng:-76.9667},matagami:eb,"eeyou istchee baie-james":{lat:52,lng:-76},chisasibi:tb,wemindji:nb,eastmain:rb,waskaganish:sb,nemaska:ib,waswanipi:ob,mistissini:ab,"ouj-bougoumou":{lat:49.9333,lng:-74.8167},whapmagoostui:lb,"rouyn-noranda":{lat:48.2333,lng:-79.0167},"val-d'or":{lat:48.1,lng:-77.7833},amos:ub,"la sarre":{lat:48.8,lng:-79.2},macamic:cb,palmarolle:hb,dupuy:db,clerval:fb,normtal:{lat:48.9833,lng:-79.3667},"sainte-hlne-de-mancebourg":{lat:48.7833,lng:-79.3333},gallichan:pb,roquemaure:gb,"rapide-danseur":{lat:48.55,lng:-79.3},taschereau:mb,authier:yb,"authier-nord":{lat:48.8333,lng:-78.8667},poularies:vb,chazel:_b,"sainte-germaine-boul":{lat:48.6667,lng:-79.1},"saint-lambert":{lat:48.9333,lng:-79.1667},clermont:wb,"val-saint-gilles":{lat:49.0167,lng:-79.2667},"saint-flix-de-dalquier":{lat:48.6,lng:-78.05},"saint-dominique-du-rosaire":{lat:48.7,lng:-78.0167},berry:Eb,trcesson:{lat:48.6,lng:-78.3833},launay:Tb,"sainte-gertrude-manneville":{lat:48.5667,lng:-78.3667},preissac:Ib,"saint-mathieu-d'harricana":{lat:48.5,lng:-78.1833},"la motte":{lat:48.3167,lng:-78.1167},"saint-marc-de-figuery":{lat:48.4333,lng:-78.05},landrienne:xb,barraute:Sb,"la corne":{lat:48.35,lng:-77.8667},champneuf:Ab,rochebaucourt:kb,"la morandire":{lat:48.6333,lng:-77.65},belcourt:Cb,senneterre:Rb,malartic:bb,"d'alembert":{lat:48.3833,lng:-79.0167},"mont-brun":{lat:48.3167,lng:-78.8333},clricy:{lat:48.35,lng:-78.8333},destor:Pb,mcwatters:Nb,arnfield:Db,beaudry:Lb,bellecombe:Vb,montbeillard:Ob,rollet:Mb,cloutier:jb,vain:{lat:48.2167,lng:-79.1},cadillac:Fb,lorrainville:Ub,"duhamel-ouest":{lat:47.3667,lng:-79.4667},"ville-marie":{lat:47.3333,lng:-79.4333},"saint-bruno-de-guigues":{lat:47.4667,lng:-79.4333},"laverlochre-angliers":{lat:47.4167,lng:-79.3},fugreville:{lat:47.4,lng:-79.2},"latulipe-et-gaboury":{lat:47.4167,lng:-79.0333},belleterre:zb,barn:{lat:47.3,lng:-79.2333},"saint-eugne-de-guigues":{lat:47.4833,lng:-79.2833},"notre-dame-du-nord":{lat:47.6,lng:-79.4833},ndelec:{lat:47.6667,lng:-79.4167},rmigny:{lat:47.7667,lng:-79.2333},gurin:{lat:47.6167,lng:-79.2333},moffet:Bb,laforce:$b,winneway:qb,kipawa:Hb,tmiscaming:{lat:46.7167,lng:-79.1},"hunter's point":{lat:46.9833,lng:-78.8},"wolf lake":{lat:46.8333,lng:-78.7167},kebaowek:Wb,timiskaming:Gb,alma:Kb,saguenay:Qb,chicoutimi:Jb,jonquire:{lat:48.4167,lng:-71.25},"la baie":{lat:48.3333,lng:-70.8833},laterrire:{lat:48.3167,lng:-71.1333},"canton-tremblay":{lat:48.4833,lng:-71.05},shipshaw:Yb,"lac-knogami":{lat:48.3667,lng:-71.3667},"saint-honor":{lat:48.5333,lng:-71.05},"saint-david-de-falardeau":{lat:48.6333,lng:-71.0833},"sainte-rose-du-nord":{lat:48.3833,lng:-70.5333},"saint-fulgence":{lat:48.45,lng:-70.9},"saint-flix-d'otis":{lat:48.2833,lng:-70.6167},"ferland-et-boilleau":{lat:48.1833,lng:-70.8},"l'anse-saint-jean":{lat:48.2333,lng:-70.2},"rivire-ternit":{lat:48.2833,lng:-70.3333},"petit-saguenay":{lat:48.2167,lng:-70.0667},"saint-charles-de-bourget":{lat:48.5,lng:-71.4167},"saint-ambroise":{lat:48.55,lng:-71.3167},bgin:{lat:48.6833,lng:-71.3333},larouche:Xb,"saint-nazaire":{lat:48.5833,lng:-71.55},labrecque:Zb,lamarches:eP,"l'ascension-de-notre-seigneur":{lat:48.6833,lng:-71.6333},"saint-henri-de-taillon":{lat:48.6667,lng:-71.8},"sainte-monique":{lat:48.7333,lng:-71.85},"saint-ludger-de-milot":{lat:48.8333,lng:-71.7333},"saint-bruno":{lat:48.4667,lng:-71.65},hbertville:{lat:48.3833,lng:-71.6833},"hbertville-station":{lat:48.4333,lng:-71.6667},"mtabetchouan-lac--la-croix":{lat:48.4333,lng:-71.8667},desbiens:tP,chambord:nP,"saint-andr-du-lac-saint-jean":{lat:48.3167,lng:-71.9667},"saint-franois-de-sales":{lat:48.3167,lng:-72.1667},"lac-bouchette":{lat:48.25,lng:-72.1833},roberval:rP,"sainte-hedwidge":{lat:48.5167,lng:-72.3333},"saint-prime":{lat:48.5833,lng:-72.3333},"saint-flicien":{lat:48.65,lng:-72.45},"la dor":{lat:48.7,lng:-72.6333},normandin:sP,"saint-thomas-didyme":{lat:48.9167,lng:-72.6667},"saint-edmond-les-plaines":{lat:48.9333,lng:-72.4667},girardville:iP,albanel:oP,"dolbeau-mistassini":{lat:48.8833,lng:-72.2333},"sainte-jeanne-d'arc":{lat:48.8833,lng:-72.0833},pribonka:{lat:48.7667,lng:-72.05},"sainte-lisabeth-de-proulx":{lat:48.8667,lng:-72},"saint-stanislas":{lat:48.9333,lng:-72.1333},"notre-dame-de-lorette":{lat:48.95,lng:-72.2667},mashteuiatsh:aP,shawinigan:lP,"grand-mre":{lat:46.6167,lng:-72.6833},"shawinigan-sud":{lat:46.5333,lng:-72.7333},"saint-georges-de-champlain":{lat:46.6333,lng:-72.65},"lac--la-tortue":{lat:46.6,lng:-72.6167},"saint-jean-des-piles":{lat:46.6833,lng:-72.7333},"saint-grard-des-laurentides":{lat:46.5833,lng:-72.8},"saint-boniface":{lat:46.4833,lng:-72.8167},"saint-tienne-des-grs":{lat:46.4333,lng:-72.7667},charette:uP,"saint-lie-de-caxton":{lat:46.4833,lng:-72.9667},"saint-mathieu-du-parc":{lat:46.6,lng:-72.9333},"saint-roch-de-mkinac":{lat:46.8167,lng:-72.7667},"sainte-thcle":{lat:46.8167,lng:-72.5},"saint-tite":{lat:46.7333,lng:-72.5667},hrouxville:{lat:46.6667,lng:-72.6},"grandes-piles":{lat:46.6833,lng:-72.7167},"saint-sverin":{lat:46.6333,lng:-72.5333},"saint-adelphe":{lat:46.7333,lng:-72.4333},"lac-aux-sables":{lat:46.8667,lng:-72.4},"notre-dame-de-montauban":{lat:46.9,lng:-72.3333},"trois-rives":{lat:47,lng:-72.6667},"la tuque":{lat:47.4333,lng:-72.7833},"la bostonnais":{lat:47.5167,lng:-72.6833},"lac-douard":{lat:47.65,lng:-72.2667},parent:cP,wemotaci:hP,obedjiwan:dP,coucoucache:fP,bcancour:{lat:46.3333,lng:-72.4333},"sainte-angle-de-laval":{lat:46.3333,lng:-72.5167},"saint-grgoire":{lat:46.2667,lng:-72.5167},gentilly:pP,"sainte-gertrude":{lat:46.3333,lng:-72.35},"prcieux-sang":{lat:46.3,lng:-72.4},"saint-sylvre":{lat:46.1833,lng:-72.2167},"saint-pierre-les-becquets":{lat:46.5,lng:-72.2},"deschaillons-sur-saint-laurent":{lat:46.5667,lng:-72.1},parisville:gP,fortierville:mP,"sainte-sophie-de-lvrard":{lat:46.4333,lng:-72.1167},"sainte-marie-de-blandford":{lat:46.3333,lng:-72.1667},lemieux:yP,manseau:vP,"sainte-franoise":{lat:46.4167,lng:-71.95},"sainte-ccile-de-lvrard":{lat:46.4333,lng:-72.05},"saint-samuel":{lat:46.2667,lng:-72.2},"saint-valre":{lat:46.1667,lng:-72.0667},"saint-rosaire":{lat:46.1333,lng:-72.1},victoriaville:_P,arthabaska:wP,"saint-christophe-d'arthabaska":{lat:46.0167,lng:-71.9333},warwick:EP,"kingsey falls":{lat:45.85,lng:-72.05},tingwick:TP,"saint-rmi-de-tingwick":{lat:45.8333,lng:-71.8667},"saint-albert":{lat:46,lng:-72.0833},"sainte-lisabeth-de-warwick":{lat:45.9833,lng:-72.0833},"sainte-sraphine":{lat:45.9333,lng:-72.1167},"sainte-clotilde-de-horton":{lat:45.9833,lng:-72.2333},"notre-dame-de-ham":{lat:45.8667,lng:-71.8},"ham-nord":{lat:45.9,lng:-71.65},"saints-martyrs-canadiens":{lat:45.8333,lng:-71.6167},"saint-norbert-d'arthabaska":{lat:46.0667,lng:-71.8333},"sainte-hlne-de-chester":{lat:46.0333,lng:-71.7333},chesterville:IP,"saint-louis-de-blandford":{lat:46.25,lng:-71.95},princeville:xP,plessisville:SP,laurierville:AP,"notre-dame-de-lourdes":{lat:46.3167,lng:-71.8},villeroy:kP,"val-alain":{lat:46.4167,lng:-71.7333},lyster:CP,"sainte-sophie-d'halifax":{lat:46.15,lng:-71.7},"saint-ferdinand":{lat:46.1,lng:-71.5667},"saint-pierre-baptiste":{lat:46.2,lng:-71.6},inverness:RP},Ny={PEPITE:"#facc15",FAST_FLIP:"#10b981",LUTHIER_PROJ:"#f97316",CASE_WIN:"#0ea5e9",COLLECTION:"#3b82f6",BAD_DEAL:"#f43f5e",REJECTED_ITEM:"#475569",REJECTED_SERVICE:"#475569",INCOMPLETE_DATA:"#94a3b8",GOOD_DEAL:"#10b981",FAIR:"#3b82f6",REJECTED:"#475569",DEFAULT:"#64748b"},bP=({deals:t,onDealSelect:e})=>{const n=M.useRef(null),[r,s]=M.useState(null),i=M.useRef([]),[o,l]=M.useState(!1),u=h=>{if(!h)return null;const f=h.toLowerCase().split(",")[0].trim();let g=xa[f];if(!g){const S=Object.keys(xa).find(C=>f.includes(C));S&&(g=xa[S])}g||(g=xa.montreal);const m=.02;return{lat:g.lat+(Math.random()-.5)*m,lng:g.lng+(Math.random()-.5)*m}};return M.useEffect(()=>{if(window.google&&window.google.maps){l(!0);return}if(document.querySelector('script[src*="maps.googleapis.com"]')){window.initMap||(window.initMap=()=>l(!0));return}window.gm_authFailure=()=>{console.error("Google Maps Auth Failure"),alert(`Erreur Google Maps : Accs bloqu.

Causes probables :
1. Restrictions HTTP (Referrer) sur la cl API (ajoutez http://localhost:*).
2. API 'Maps JavaScript API' non active.

Vrifiez la console Google Cloud.`)};const f=document.createElement("script");return f.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDtr1pAc2oTWxnDyMHUclkt4G34qdAAAXw&callback=initMap&v=weekly",f.async=!0,f.defer=!0,window.initMap=()=>{l(!0)},document.head.appendChild(f),()=>{}},[]),M.useEffect(()=>{if(o&&!r&&n.current&&window.google){const h=new window.google.maps.Map(n.current,{center:{lat:45.5017,lng:-73.5673},zoom:9,styles:[{featureType:"all",elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9c9c9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}],disableDefaultUI:!0,zoomControl:!0});s(h)}},[o,r]),M.useEffect(()=>{!r||!t||!window.google||(i.current.forEach(h=>h.setMap(null)),i.current=[],t.forEach(h=>{var g;let f;if(h.latitude&&h.longitude?f={lat:h.latitude,lng:h.longitude}:f=u(h.location),f){const m=((g=h.aiAnalysis)==null?void 0:g.verdict)||"DEFAULT",C={path:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z",fillColor:Ny[m]||Ny.DEFAULT,fillOpacity:1,strokeWeight:1,strokeColor:"#ffffff",rotation:0,scale:1.5,anchor:new window.google.maps.Point(12,22)},b=new window.google.maps.Marker({position:f,map:r,title:h.title,icon:C});b.addListener("click",()=>{e(h)}),i.current.push(b)}}))},[r,t,e]),p.jsx("div",{ref:n,className:"w-full h-[600px] rounded-3xl shadow-sm border border-slate-200 overflow-hidden"})},PP=({viewMode:t,setViewMode:e,filterType:n,setFilterType:r,searchQuery:s,setSearchQuery:i,level1Filter:o,setLevel1Filter:l,level2Filter:u,setLevel2Filter:h,level3Filter:f,setLevel3Filter:g,level1Options:m,level2Options:S,level3Options:C,counts:b={}})=>{const V=_=>b[_]||0;return p.jsxs("div",{className:"bg-white p-4 rounded-3xl shadow-sm border border-slate-200 flex flex-wrap gap-4 items-center justify-between",children:[p.jsxs("div",{className:"flex-1 min-w-[200px] relative",children:[p.jsx(Xl,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),p.jsx("input",{type:"text",placeholder:"Rechercher par modle...",value:s,onChange:_=>i(_.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-100 rounded-2xl text-sm focus:bg-white focus:ring-2 focus:ring-blue-500 outline-none transition-all"})]}),p.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-2xl",children:[p.jsx("button",{onClick:()=>e("LIST"),className:`p-2 rounded-xl transition-all ${t==="LIST"?"bg-white shadow-sm text-blue-600":"text-slate-400 hover:text-slate-600"}`,children:p.jsx(K0,{size:18})}),p.jsx("button",{onClick:()=>e("MAP"),className:`p-2 rounded-xl transition-all ${t==="MAP"?"bg-white shadow-sm text-blue-600":"text-slate-400 hover:text-slate-600"}`,children:p.jsx(OT,{size:18})})]}),p.jsx("div",{className:"flex items-center gap-2 overflow-x-auto pb-1 w-full lg:w-auto",children:h7.map(_=>{const E=Yh[_];if(!E)return null;const k=V(_),N=E.pluralLabel||E.label;return p.jsxs("button",{onClick:()=>r(_),className:`px-4 py-2 rounded-2xl text-xs font-bold whitespace-nowrap transition-all flex items-center gap-2 ${n===_?"bg-blue-600 text-white shadow-md":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:[p.jsx("span",{children:N}),k>0&&p.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-[10px] ${n===_?"bg-white/20 text-white":"bg-slate-200 text-slate-600"}`,children:k})]},_)})}),p.jsxs("div",{className:"w-full flex flex-wrap gap-2",children:[p.jsxs("select",{value:o,onChange:_=>l(_.target.value),className:"p-2.5 bg-slate-50 border border-slate-100 rounded-2xl text-sm focus:bg-white focus:ring-2 focus:ring-blue-500 outline-none transition-all",children:[p.jsx("option",{value:"ALL",children:"Type (Tous)"}),m.filter(_=>_!=="ALL").map(_=>p.jsxs("option",{value:_,children:[_.replace(/_/g," ")," ",b[_]>0?`(${b[_]})`:""]},_))]}),o!=="ALL"&&S.length>1&&p.jsxs("select",{value:u,onChange:_=>h(_.target.value),className:"p-2.5 bg-slate-50 border border-slate-100 rounded-2xl text-sm focus:bg-white focus:ring-2 focus:ring-blue-500 outline-none transition-all animate-in fade-in slide-in-from-left-2",children:[p.jsx("option",{value:"ALL",children:"Sous-catgorie (Toutes)"}),S.filter(_=>_!=="ALL").map(_=>p.jsxs("option",{value:_,children:[_.replace(/_/g," ")," ",b[_]>0?`(${b[_]})`:""]},_))]}),u!=="ALL"&&C.length>1&&p.jsxs("select",{value:f,onChange:_=>g(_.target.value),className:"p-2.5 bg-slate-50 border border-slate-100 rounded-2xl text-sm focus:bg-white focus:ring-2 focus:ring-blue-500 outline-none transition-all animate-in fade-in slide-in-from-left-2",children:[p.jsx("option",{value:"ALL",children:"Modle (Tous)"}),C.filter(_=>_!=="ALL").map(_=>p.jsxs("option",{value:_,children:[_.replace(/_/g," ")," ",b[_]>0?`(${b[_]})`:""]},_))]})]})]})},NP=({deal:t,onClose:e,onRetry:n,onReject:r,onToggleFavorite:s,onDelete:i})=>{const[o,l]=M.useState(.85);if(!t)return null;const u=()=>{const h=new URL(window.location);h.searchParams.delete("dealId"),window.history.pushState({},"",h),e()};return Yl.createPortal(p.jsxs("div",{className:"fixed inset-0 bg-black/80 z-50 flex flex-col items-center overflow-y-auto animate-in fade-in backdrop-blur-sm pt-24 pb-12",onClick:u,children:[p.jsxs("div",{className:"fixed top-6 z-50 flex items-center gap-4",onClick:h=>h.stopPropagation(),children:[p.jsxs("div",{className:"bg-slate-900/90 text-white px-4 py-2 rounded-full flex items-center gap-3 shadow-2xl border border-white/10",children:[p.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-400",children:"Zoom"}),p.jsx("input",{type:"range",min:"0.5",max:"1.1",step:"0.1",value:o,onChange:h=>l(parseFloat(h.target.value)),className:"w-24 accent-blue-500 h-1 bg-slate-700 rounded-lg appearance-none cursor-pointer"}),p.jsxs("span",{className:"text-[10px] font-mono w-8 text-right text-blue-400",children:[Math.round(o*100),"%"]})]}),p.jsx("button",{onClick:u,className:"bg-white text-slate-900 rounded-full p-2.5 shadow-2xl hover:bg-rose-500 hover:text-white transition-all",children:p.jsx(Zl,{size:20})})]}),p.jsx("div",{className:"relative transition-transform duration-200 ease-out origin-top",style:{transform:`scale(${o})`,width:"100%",maxWidth:"60rem",padding:"1rem"},onClick:h=>h.stopPropagation(),children:p.jsx(yw,{deal:t,onRetry:n,onReject:r,onToggleFavorite:s,onDelete:i},t.id)})]}),document.body)},Nc=({title:t,count:e,children:n,defaultOpen:r=!0,icon:s,colorClass:i="text-slate-800"})=>{const[o,l]=M.useState(r);return e===0?null:p.jsxs("div",{className:"mb-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[p.jsxs("button",{onClick:()=>l(!o),className:"flex items-center gap-3 w-full mb-4 group hover:bg-slate-50 p-2 rounded-xl transition-colors",children:[p.jsx("div",{className:`p-2 rounded-lg ${o?"bg-slate-200":"bg-slate-100"} transition-colors`,children:o?p.jsx(G0,{size:20,className:"text-slate-500"}):p.jsx(yl,{size:20,className:"text-slate-500"})}),p.jsxs("div",{className:"flex items-center gap-3",children:[s&&p.jsx(s,{size:24,className:i}),p.jsx("h2",{className:`text-xl font-black uppercase tracking-tight ${i}`,children:t}),p.jsx("span",{className:"bg-slate-100 text-slate-500 text-xs font-bold px-2 py-1 rounded-full",children:e})]}),p.jsx("div",{className:"flex-1 h-px bg-slate-100 ml-4 group-hover:bg-slate-200 transition-colors"})]}),o&&p.jsx("div",{className:"grid grid-cols-1 gap-6 animate-in fade-in slide-in-from-top-2 duration-300",children:n})]})},DP=()=>{const{authStatus:t}=Oo(),{configStatus:e,error:n,setError:r,isRefreshing:s,isCleaning:i,handleManualRefresh:o,handleManualCleanup:l}=gr(),{loading:u,dbStatus:h,filteredDeals:f,filterProps:g,dealActions:m}=g7(),[S,C]=M.useState(!1),[b,V]=M.useState("LIST"),[_,E]=M.useState(null);M.useEffect(()=>{if(u)return;const w=new URLSearchParams(window.location.search).get("dealId");if(w){const I=f.find(A=>A.id===w);I&&E(I)}},[u,f]);const k=M.useCallback(()=>E(null),[]),{radarDeals:N,marketDeals:F,archiveDeals:z}=M.useMemo(()=>{const v=[],w=[],I=[];return f.forEach(A=>{var x;const R=((x=A.aiAnalysis)==null?void 0:x.verdict)||"DEFAULT";u7.includes(R)?v.push(A):c7.includes(R)?w.push(A):I.push(A)}),{radarDeals:v,marketDeals:w,archiveDeals:I}},[f]),T=v=>p.jsx(yw,{deal:v,onRetry:()=>m.handleRetryAnalysis(v.id),onForceExpert:()=>m.handleForceExpertAnalysis(v.id),onReject:()=>m.handleRejectDeal(v.id),onToggleFavorite:()=>m.handleToggleFavorite(v.id,v.isFavorite),onDelete:()=>m.handleDeleteDeal(v.id)},v.id);return p.jsxs("div",{className:"min-h-screen bg-[#F8FAFC] font-sans text-slate-900 selection:bg-blue-100",children:[p.jsx("nav",{className:"sticky top-0 z-30 bg-white/80 backdrop-blur-md border-b border-slate-200",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 h-16 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"bg-blue-600 p-2 rounded-xl text-white shadow-lg shadow-blue-200",children:p.jsx(Kd,{size:24})}),p.jsxs("div",{children:[p.jsxs("h1",{className:"text-lg font-black tracking-tight text-slate-800",children:["GUITAR HUNTER ",p.jsx("span",{className:"text-blue-600",children:"AI"})]}),p.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest leading-none",children:"Scraper & Gemini Evaluator"})]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("button",{onClick:l,disabled:i,className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-bold transition-all ${i?"bg-slate-100 text-slate-400":"bg-amber-50 text-amber-600 hover:bg-amber-100 shadow-sm border border-amber-100"}`,children:[p.jsx(so,{size:14,className:i?"animate-bounce":""}),p.jsx("span",{className:"hidden sm:inline",children:i?"Vrification...":"Vrifier Stocks"})]}),p.jsxs("button",{onClick:o,disabled:s,className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-bold transition-all ${s?"bg-slate-100 text-slate-400":"bg-emerald-50 text-emerald-600 hover:bg-emerald-100 shadow-sm border border-emerald-100"}`,children:[p.jsx(En,{size:14,className:s?"animate-spin":""}),p.jsx("span",{className:"hidden sm:inline",children:s?"Scan en cours...":"Scanner maintenant"})]}),p.jsx("button",{onClick:()=>C(!S),className:`p-2 rounded-xl transition-colors ${S?"bg-blue-100 text-blue-600":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:p.jsx(BT,{size:20})})]})]})}),p.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 grid grid-cols-1 lg:grid-cols-4 gap-8",children:[p.jsxs("aside",{className:"lg:col-span-1 space-y-6",children:[p.jsxs("div",{className:"bg-white p-5 rounded-3xl shadow-sm border border-slate-200",children:[p.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-slate-400 mb-4",children:"Systme"}),p.jsxs("div",{className:"space-y-1",children:[p.jsx(bc,{label:"Auth",status:t.status,details:t.msg}),p.jsx(bc,{label:"Engine",status:e.status,details:"Python Bot Connected"}),p.jsx(bc,{label:"Database",status:h.status,details:h.msg})]})]}),p.jsx(_7,{showConfig:S,onClose:()=>C(!1)})]}),p.jsxs("main",{className:"lg:col-span-3 space-y-6",children:[p.jsx(PP,{...g,viewMode:b,setViewMode:V}),u?p.jsxs("div",{className:"py-20 flex flex-col items-center justify-center bg-white rounded-3xl border border-slate-200",children:[p.jsx(En,{className:"text-blue-600 animate-spin mb-4",size:40}),p.jsx("p",{className:"text-slate-400 font-bold uppercase tracking-widest text-xs",children:"Synchronisation Firestore..."})]}):f.length===0?p.jsxs("div",{className:"py-20 flex flex-col items-center justify-center bg-white rounded-3xl border border-dashed border-slate-200",children:[p.jsx("div",{className:"bg-slate-50 p-6 rounded-full mb-4",children:p.jsx(Xl,{className:"text-slate-200",size:48})}),p.jsx("h3",{className:"text-lg font-black text-slate-400 uppercase tracking-tight italic",children:"Aucun trsor trouv"}),p.jsx("p",{className:"text-slate-400 text-xs mt-1",children:"Ajustez vos filtres ou lancez un scan manuel"})]}):b==="MAP"?p.jsx(bP,{deals:f,onDealSelect:E}):p.jsxs("div",{children:[p.jsx(Nc,{title:"Radar",count:N.length,icon:WT,colorClass:"text-emerald-500",defaultOpen:!0,children:N.map(T)}),p.jsx(Nc,{title:"March",count:F.length,icon:qT,colorClass:"text-blue-500",defaultOpen:N.length===0,children:F.map(T)}),p.jsx(Nc,{title:"Archives & Bruit",count:z.length,icon:ST,colorClass:"text-slate-500",defaultOpen:!1,children:z.map(T)})]})]})]}),n&&p.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 animate-in slide-in-from-bottom-10",children:p.jsxs("div",{className:"bg-rose-600 text-white px-6 py-4 rounded-2xl shadow-2xl shadow-rose-200 flex items-center gap-4",children:[p.jsx(H0,{size:24}),p.jsxs("div",{children:[p.jsx("p",{className:"font-black uppercase text-[10px] tracking-widest leading-none mb-1 opacity-80",children:"Erreur Dtecte"}),p.jsx("p",{className:"text-sm font-bold",children:n})]}),p.jsx("button",{onClick:()=>r(null),className:"ml-4 hover:bg-white/20 p-1 rounded-lg transition-colors",children:p.jsx(Zl,{size:20})})]})}),p.jsx(NP,{deal:_,onClose:k,onRetry:()=>m.handleRetryAnalysis(_.id),onForceExpert:()=>m.handleForceExpertAnalysis(_.id),onReject:()=>m.handleRejectDeal(_.id),onToggleFavorite:()=>m.handleToggleFavorite(_.id,_.isFavorite),onDelete:()=>m.handleDeleteDeal(_.id)})]})},LP=()=>p.jsx(a7,{children:p.jsx(p7,{children:p.jsx(y7,{children:p.jsx(DP,{})})})});Dc.createRoot(document.getElementById("root")).render(p.jsx(h3.StrictMode,{children:p.jsx(LP,{})}));
